;/*FB_PKG_DELIM*/

__d("ACSCipherSuiteModule",[],(function(a,b,c,d,e,f){"use strict";b={hash:"SHA-512",name:"HMAC"};c={curveName:"RISTRETTO",macAlgorithm:b,value:1};var g=new Map([[c.value,c]]);function a(a){return g.has(a)?g.get(a):null}f.VOPRF_RISTRETTO_HMACSHA512=c;f.getACSCipherSuiteByValue=a}),66);
__d("ACSTokenHmacUtil",["XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){return h(a,b).then(function(a){return j(a,c)})}function h(a,b){return d("XPlatReactCrypto").subtleImportKey("raw",b,a,!1,["sign"]).then(function(b){return{algo:a,key:b}})}function i(a){return typeof a.hash==="string"?a.hash:a.hash.name}function j(a,b){var c=a.algo;a=a.key;c={hash:i(c),name:"HMAC"};return d("XPlatReactCrypto").subtleSign(c,a,b).then(function(a){return new Uint8Array(a)})}g.hmac=a}),98);
__d("LSPlatformClientDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";a=c("requireDeferred")("LSPlatformClient").__setRef("LSPlatformClientDeferred");b=a;g["default"]=b}),98);
__d("LSPlatformClientSingleton",[],(function(a,b,c,d,e,f){"use strict";var g={contents:void 0};function a(a){g.contents=a}f.saveInstance=a}),66);
__d("isRegisterArmadilloOnIgEnabled",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("26380")===!0}g["default"]=a}),98);
__d("maybeSetupMAWMainThreadLogger",["MAWMICSafe","MessengerLogHistory","WALoggerDeferred","cr:6999","cr:7350","isArmadillo","isRegisterArmadilloOnIgEnabled"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Occamadillo] Beginning hardcoded init sync"]);h=function(){return a};return a}var i=d("MessengerLogHistory").getInstance("client_init"),j=(a=b("cr:6999"))!=null?a:b("cr:7350");e=function(){j!=null&&(c("isArmadillo")()||c("isRegisterArmadilloOnIgEnabled")())&&(i.debug("Starting MAW main thread logger setup..."),j.setupMainWaLogger(),i.debug("Starting MAW main thread logger setup success"),d("MAWMICSafe").markEvent("ls_init_start"),void d("WALoggerDeferred").LOG(h()))};g.maybeSetupMAWMainThreadLogger=e}),98);
__d("LSPlatformClientInstances",["FBLogger","LSPlatformClientSingleton","LSPlatformLsInitLog","LSSuspense","MAWMICSafe","MessengerLogHistory","PromiseAnnotate","asyncToGeneratorRuntime","getErrorSafe","maybeSetupMAWMainThreadLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("MessengerLogHistory").getInstance("client_init"),k=(i||(i=c("LSSuspense"))).makeCollection(),l=!1;function a(a,e,f){l||(l=!0,d("maybeSetupMAWMainThreadLogger").maybeSetupMAWMainThreadLogger());return(i||(i=c("LSSuspense"))).getFromCollection(k,a,function(){return(h||(h=d("PromiseAnnotate"))).setDisplayName(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("LSPlatformLsInitLog").addAnnotations({bool:{fromReact:f==null?void 0:f.fromReact}});j.debug("Messenger loading UI suspending");try{j.debug("Loading LSPlatformClient factory...");var b=(yield e());j.debug("Loading LSPlatformClient factory success.");j.debug("Initializing LSPlatformClient...");b=(yield b.make(a));yield b.start();j.debug("Initializing LSPlatformClient success");d("LSPlatformClientSingleton").saveInstance(b);return b}catch(a){b=c("getErrorSafe")(a);j.debug("Initializing LSPlatformClient failed");d("LSPlatformLsInitLog").fail("client_setup_failure",b);d("MAWMICSafe").fail("client_setup_failure",b);c("FBLogger")("ls_web_init").catching(b).warn("LSPlatformClient initialization failure");throw b}finally{j.debug("Messenger loading UI unsuspending")}})(),"InitLSPlatformClient")})}e={getOrInit:a};g["default"]=e}),98);
__d("LSPlatformClientProviderAddons.react",["CometPlaceholder.react","cr:6495","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(){return i.jsx(c("CometPlaceholder.react"),{fallback:null,children:b("cr:6495")!=null&&i.jsx(b("cr:6495"),{})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSPlatformClientProviderUtils",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("6746")}g.shouldInitialiseClientConcurrently=a}),98);
__d("LSPlatformConfigContext",["LSSuspense","err","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));e=i;d=e.createContext;var k=e.useContext;e=c("err")("LSPlatformConfig.NoLSPlatformProviderFound");e=(h||(h=c("LSSuspense"))).makeWithError(e);var l=d(e);function a(a){var b=a.children;a=a.config;return j.jsx(l.Provider,{value:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";function b(){return(h||(h=c("LSSuspense"))).getOrSuspend(k(l))}g.LSPlatformConfigProvider=a;g.useOrSuspendLSPlatformConfig=b}),98);
__d("LSPlatformErrorsCatcher.react",["MetaConfig","cr:7070","react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||(h=d("react"));e=h;var i=e.useEffect,j=e.useState;function a(a){var d=a.children;a=a.fallback;var e=j(null),f=e[0],g=e[1];i(function(){var a=b("cr:7070")&&b("cr:7070").subscribe(function(a){g(a)});return function(){a&&a()}},[]);e=(e=b("cr:7070")==null?void 0:b("cr:7070").lastError())!=null?e:f;if(c("MetaConfig")._("66")&&e!=null&&a!=null)return a(e);else return d}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWCondSetup.react",["cr:3921","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");f=c("gkx")("20836")?a.Fragment:(e=b("cr:3921"))!=null?e:a.Fragment;d=f;g["default"]=d}),98);
__d("MAWSetupWrapperOnce.react",["CometPlaceholder.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext,k=i.createContext(!1);function a(a){var b=a.children;a=a.setupComponent;var d=j(k);return d?b:i.jsxs(k.Provider,{value:!0,children:[b,i.jsx(c("CometPlaceholder.react"),{fallback:null,children:a})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWCondWrapper.react",["MAWCondSetup.react","MAWSetupWrapperOnce.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=a.children;return i.jsx(c("MAWSetupWrapperOnce.react"),{setupComponent:i.jsx(c("MAWCondSetup.react"),{}),children:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSPlatformClientProvider.react",["CometPlaceholder.react","LSPlatformClientInstances","LSPlatformClientProviderAddons.react","LSPlatformClientProviderUtils","LSPlatformConfigContext","LSPlatformErrorsCatcher.react","MAWCondWrapper.react","ReStoreProvider.react","react","suspendOrThrowIfUsedInSSR"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||d("react");function l(a){var b=d("LSPlatformConfigContext").useOrSuspendLSPlatformConfig();return c("LSPlatformClientInstances").getOrInit(b,a,{fromReact:!0})}function a(a){var b=a.children;a=a.loadLSPlatformClient;a=l(a);return k.jsx((j||(j=d("ReStoreProvider.react"))).ReStoreProvider,{db:a.db,children:b})}a.displayName=a.name+" [from "+f.id+"]";function m(a){a=a.loadLSPlatformClient;l(a);return null}m.displayName=m.name+" [from "+f.id+"]";function b(a){var b=a.children;a=a.loadLSPlatformClient;(h||(h=c("suspendOrThrowIfUsedInSSR")))("Messenger is not enabled for SSR");return k.jsxs(k.Fragment,{children:[k.jsx(c("CometPlaceholder.react"),{fallback:null,children:k.jsx(m,{loadLSPlatformClient:a})}),b]})}b.displayName=b.name+" [from "+f.id+"]";var n=d("LSPlatformClientProviderUtils").shouldInitialiseClientConcurrently()?b:a;function e(a){var b=a.children,d=a.errorFallback,e=a.loadLSPlatformClient;a=a.placeholder;return k.jsx(c("LSPlatformErrorsCatcher.react"),{fallback:d,children:k.jsx(c("MAWCondWrapper.react"),{children:k.jsx(c("CometPlaceholder.react"),{fallback:a,children:k.jsxs(n,{loadLSPlatformClient:e,children:[k.jsx(c("LSPlatformClientProviderAddons.react"),{}),b]})})})})}e.displayName=e.name+" [from "+f.id+"]";g["default"]=e}),98);
__d("LSPlatformClientProviderWithDeferredLoadingStrategy.react",["LSPlatformClientDeferred","LSPlatformClientProvider.react","PromiseAnnotate","promiseDone","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");function k(){var a=c("LSPlatformClientDeferred").load();c("promiseDone")((i||(i=d("PromiseAnnotate"))).setDisplayName(a,"loadLSPlatformClient"));return a}function a(a){var b=a.children,d=a.errorFallback;a=a.placeholder;return j.jsx(c("LSPlatformClientProvider.react"),{errorFallback:d,loadLSPlatformClient:k,placeholder:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSCometSSRDatabase",["LSJSInMemoryStorage","LSMetadata"],(function(a,b,c,d,e,f,g){"use strict";a=c("LSJSInMemoryStorage")(d("LSMetadata").schema);g["default"]=a}),98);
__d("LSDatabaseProviderType",[],(function(a,b,c,d,e,f){"use strict";function a(a){return g(a.persistenceTypes)}function g(a){return a.includes("indexeddb")}f.isProviderPersisted=a;f.hasPersistentType=g}),66);
__d("LSClearEpochBeforeResumeSync",["Promise","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return a.runInTransaction(function(a){var c;return(c=d("ReQL")).toArrayAsync(c.mergeJoin(c.fromTableAscending(a.sync_groups),c.fromTableAscending(a.network_requests).getKeyRange(""))).then(function(c){return(h||(h=b("Promise"))).all(c.map(function(b){b=b[1];return a.network_requests.put({epochId:void 0,failureCount:b.failureCount,lastDelayedRequestTimestampMs:b.lastDelayedRequestTimestampMs,lastSentTimestampMs:b.lastSentTimestampMs,lastSyncRequestTimestampMs:b.lastSyncRequestTimestampMs,networkTaskIdentifier:b.networkTaskIdentifier,syncDatabaseId:b.syncDatabaseId,taskQueueName:b.taskQueueName})}))}).then(function(){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.network_requests).filter(function(a){return a.taskQueueName!==""})).then(function(c){return(h||(h=b("Promise"))).all(c.map(function(b){return a.network_requests.put({epochId:void 0,failureCount:b.failureCount,lastDelayedRequestTimestampMs:b.lastDelayedRequestTimestampMs,lastSentTimestampMs:b.lastSentTimestampMs,lastSyncRequestTimestampMs:b.lastSyncRequestTimestampMs,networkTaskIdentifier:b.networkTaskIdentifier,syncDatabaseId:b.syncDatabaseId,taskQueueName:b.taskQueueName})}))})})},"readwrite","ui",void 0,f.id+":17").then(function(){return(h||(h=b("Promise"))).resolve()})}g.call=a}),98);
__d("LSDataTraceFlushDeferred",["MetaConfig","Promise","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("LSDataTraceFlush").__setRef("LSDataTraceFlushDeferred");function a(a){if(!c("MetaConfig")._("62"))return(h||(h=b("Promise"))).resolve(function(){});else return i.load().then(function(b){return b.flushExpiredDataTraces(a)})}g.watchForExpiredTraces=a}),98);
__d("LSTruncateTableAndSetShowError",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.sequence([function(a){return b.forEach(b.db.table(115).fetch(),function(a){return a["delete"]()})},function(d){return c[0]=b.i64.of_float(Date.now()),b.db.table(115).add({statusId:b.i64.cast([0,0]),timestampMs:c[0],errorShouldBeShown:a[0]})}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSConnectivityTruncateTableAndSetShowErrorStoredProcedure";e.exports=a}),null);
__d("LSDeleteAllAndInsertConnectivityStatus",["LSTruncateTableAndSetShowError"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return c.forEach(c.db.table(114).fetch(),function(a){return a["delete"]()})},function(b){return d[0]=c.i64.of_float(Date.now()),c.db.table(114).add({statusId:void 0,timestampMs:d[0],internetConnectionState:a[0]})},function(d){return c.storedProcedure(b("LSTruncateTableAndSetShowError"),c.i64.neq(a[0],c.i64.cast([0,1])))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSConnectivityDeleteAllAndInsertConnectivityStatusStoredProcedure";e.exports=a}),null);
__d("LSDeleteAllAndInsertConnectivityStatusStoredProcedure",["LSDeleteAllAndInsertConnectivityStatus","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.internetConnectionState;return c("LSDeleteAllAndInsertConnectivityStatus").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSPlatformGraphQLTransport",["FBLogger","I64","LSDynamicDependencies","LSProgramTarget","MessengerLogHistory","Promise","asyncToGeneratorRuntime","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j="LSPlatformGraphQLTransport.ServerError";function a(a,b,c,d,e){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,k){var l=d("MessengerLogHistory").getInstance("client_sync"),m=null;try{m=(yield k(a,e,g,(i||(i=d("I64"))).to_int32(f)))}catch(a){k=c("FBLogger")("messenger_web_product");a instanceof Error&&(l.error("Error sending Graphql Request. Type: "+(i||(i=d("I64"))).to_string(f)+" Message: "+(a.message!=null?a.message:"None")),k=k.catching(a),k.debug("Relay or Graphql Server error in LSPlatformGraphqlTransport"));throw k.mustfixThrow(j)}a=c("nullthrows")(m);e=a.dependencies;g=a.experiments;l=a.payload;var n=a.target;f=c("nullthrows")(l);k=e==null?(h||(h=b("Promise"))).resolve():d("LSDynamicDependencies").downloadRelayDependencies(e);m=Array.from(c("LSProgramTarget").members()).find(function(a){return c("LSProgramTarget").getName(a)===n});return[k,f,g,m]});return k.apply(this,arguments)}g.ServerError=j;g.publish=a}),98);
__d("LSPlatformHardcodedInitSync",["CurrentMessengerUser","FBLogger","I64","InteractionTracing.xplat","LSDatabaseProviderType","LSDict","LSIntEnum","LSJson","LSPlatformArmadilloUtils","LSPlatformGraphQLTransport","LSPlatformLsInitLog","MWPBumpEntityKey","MetaConfig","Promise","QuickPerformanceLogger","ReQL","asyncToGeneratorRuntime","getErrorSafe","gkx","isArmadillo","isInstamadillo","isRegisterArmadilloOnIgEnabled","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=c("isArmadillo")()||c("isRegisterArmadilloOnIgEnabled")()&&!c("isInstamadillo")(),m=!d("CurrentMessengerUser").isWorkUser()&&!c("gkx")("307");function n(a){return a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return(k||(k=b("Promise"))).all([a.network_requests.put({epochId:void 0,failureCount:(i||(i=d("I64"))).zero,lastDelayedRequestTimestampMs:void 0,lastSentTimestampMs:i.zero,lastSyncRequestTimestampMs:i.zero,networkTaskIdentifier:void 0,syncDatabaseId:(j||(j=d("LSIntEnum"))).ofNumber(1),taskQueueName:""}),m?a.network_requests.put({epochId:void 0,failureCount:(i||(i=d("I64"))).zero,lastDelayedRequestTimestampMs:void 0,lastSentTimestampMs:(i||(i=d("I64"))).zero,lastSyncRequestTimestampMs:(i||(i=d("I64"))).zero,networkTaskIdentifier:void 0,syncDatabaseId:(j||(j=d("LSIntEnum"))).ofNumber(2),taskQueueName:""}):(k||(k=b("Promise"))).resolve(),l?a.network_requests.put({epochId:void 0,failureCount:(i||(i=d("I64"))).zero,lastDelayedRequestTimestampMs:void 0,lastSentTimestampMs:(i||(i=d("I64"))).zero,lastSyncRequestTimestampMs:(i||(i=d("I64"))).zero,networkTaskIdentifier:void 0,syncDatabaseId:(j||(j=d("LSIntEnum"))).ofNumber(95),taskQueueName:""}):(k||(k=b("Promise"))).resolve()])});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":56").then(function(){return(k||(k=b("Promise"))).resolve()})}function o(a,b){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.network_requests).getKeyRange("",(j||(j=d("LSIntEnum"))).ofNumber(b)))}function p(a){return a.runInTransaction(function(a){return(k||(k=b("Promise"))).all([o(a,1),m?o(a,2):(k||(k=b("Promise"))).resolve(),l?o(a,95):(k||(k=b("Promise"))).resolve()]).then(function(c){var e=c[0],f=c[1];c=c[2];e=e!=null?a.network_requests.put({epochId:(i||(i=d("I64"))).zero,failureCount:e.failureCount,lastDelayedRequestTimestampMs:e.lastDelayedRequestTimestampMs,lastSentTimestampMs:e.lastSentTimestampMs,lastSyncRequestTimestampMs:e.lastSyncRequestTimestampMs,networkTaskIdentifier:e.networkTaskIdentifier,syncDatabaseId:e.syncDatabaseId,taskQueueName:e.taskQueueName}):(k||(k=b("Promise"))).resolve();f=m&&f!=null?a.network_requests.put({epochId:(i||(i=d("I64"))).zero,failureCount:f.failureCount,lastDelayedRequestTimestampMs:f.lastDelayedRequestTimestampMs,lastSentTimestampMs:f.lastSentTimestampMs,lastSyncRequestTimestampMs:f.lastSyncRequestTimestampMs,networkTaskIdentifier:f.networkTaskIdentifier,syncDatabaseId:f.syncDatabaseId,taskQueueName:f.taskQueueName}):(k||(k=b("Promise"))).resolve();c=l&&c!=null?a.network_requests.put({epochId:(i||(i=d("I64"))).zero,failureCount:c.failureCount,lastDelayedRequestTimestampMs:c.lastDelayedRequestTimestampMs,lastSentTimestampMs:c.lastSentTimestampMs,lastSyncRequestTimestampMs:c.lastSyncRequestTimestampMs,networkTaskIdentifier:c.networkTaskIdentifier,syncDatabaseId:c.syncDatabaseId,taskQueueName:c.taskQueueName}):(k||(k=b("Promise"))).resolve();return(k||(k=b("Promise"))).all([e,f,c]).then(function(){})})},"readwrite","ui",void 0,f.id+":115")}function q(a){if(d("LSDatabaseProviderType").isProviderPersisted(a)&&c("MetaConfig")._("76"))return a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield o(a,1));b!=null&&(yield a.network_requests.put({epochId:void 0,failureCount:b.failureCount,lastDelayedRequestTimestampMs:b.lastDelayedRequestTimestampMs,lastSentTimestampMs:b.lastSentTimestampMs,lastSyncRequestTimestampMs:b.lastSyncRequestTimestampMs,networkTaskIdentifier:b.networkTaskIdentifier,syncDatabaseId:b.syncDatabaseId,taskQueueName:b.taskQueueName}))});return function(b){return a.apply(this,arguments)}}(),"readwrite","ui",void 0,f.id+":189");else return(k||(k=b("Promise"))).resolve()}function r(a){d("CurrentMessengerUser").isWorkUser()&&(h||(h=c("QuickPerformanceLogger"))).markerPoint(c("qpl")._(1036588047,"310"),a)}function a(a,b,c,d){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){try{var o,s=d("CurrentMessengerUser").isWorkUser();yield p(f);var u=(yield (k||(k=b("Promise"))).all([d("ReQL").firstAsync(d("ReQL").fromTableAscending(f.tables.sync_groups).getKeyRange((j||(j=d("LSIntEnum"))).ofNumber(1))),m?d("ReQL").firstAsync(d("ReQL").fromTableAscending(f.tables.sync_groups).getKeyRange((j||(j=d("LSIntEnum"))).ofNumber(2))):(k||(k=b("Promise"))).resolve(),l?d("ReQL").firstAsync(d("ReQL").fromTableAscending(f.tables.sync_groups).getKeyRange((j||(j=d("LSIntEnum"))).ofNumber(95))):(k||(k=b("Promise"))).resolve()])),v=u[0],w=u[1];u=u[2];v=v==null?void 0:v.currentCursor;w=w==null?void 0:w.currentCursor;u=u==null?void 0:u.currentCursor;var x=new(c("LSDict"))().set("database",j.ofNumber(1)).set("epoch_id",(i||(i=d("I64"))).zero).set("last_applied_cursor",v).set("sync_params",a.syncParams.mailbox).set("version",i.of_string(a.schemaVersion)),y=new(c("LSDict"))().set("database",j.ofNumber(2)).set("epoch_id",i.zero).set("last_applied_cursor",w).set("sync_params",a.syncParams.contact).set("version",i.of_string(a.schemaVersion));o=new(c("LSDict"))().set("database",j.ofNumber(95)).set("epoch_id",i.zero).set("last_applied_cursor",u).set("sync_params",(o=a.syncParams.e2ee)!=null?o:"{}").set("version",i.of_string(a.schemaVersion));var z={string:{contactsSync:m?w!=null?"resume":"init":"disabled",mailboxSync:v!=null?"resume":"init"}};s&&(h||(h=c("QuickPerformanceLogger"))).markerAnnotate(c("qpl")._(1036588047,"310"),z);d("LSPlatformLsInitLog").addPoint("ls_sync_start",z);t("ls_sync_start");d("LSPlatformLsInitLog").addPoint("gql_fetch_start");t("gql_fetch_start");r("start_contact");r("start_mailbox");var A=function(){return[(k||(k=b("Promise"))).resolve(),"",void 0,void 0]};s=d("LSPlatformGraphQLTransport").publish(g,0,v!=null?(j||(j=d("LSIntEnum"))).ofNumber(2):(j||(j=d("LSIntEnum"))).ofNumber(1),d("LSJson").stringify(x),a.executeGraphQLLightSpeedRequest).then(function(a){r("mailbox_synced");d("LSPlatformLsInitLog").addPoint("gql_mailbox_fetch_end");t("gql_mailbox_fetch_end");return a})["catch"](function(a){c("FBLogger")("messenger_web_product").catching(a).mustfix("Failed to sync mailbox");return A()});z=m?d("LSPlatformGraphQLTransport").publish(g,1,w!=null?(j||(j=d("LSIntEnum"))).ofNumber(2):(j||(j=d("LSIntEnum"))).ofNumber(1),d("LSJson").stringify(y),a.executeGraphQLLightSpeedRequest).then(function(a){r("contact_synced");d("LSPlatformLsInitLog").addPoint("gql_contact_fetch_end");t("gql_contact_fetch_end");return a})["catch"](function(a){c("FBLogger")("messenger_web_product").catching(a).mustfix("Failed to sync contacts");return A()}):(k||(k=b("Promise"))).resolve(A());x=l?d("LSPlatformGraphQLTransport").publish(g,2,u!=null?(j||(j=d("LSIntEnum"))).ofNumber(2):(j||(j=d("LSIntEnum"))).ofNumber(1),d("LSJson").stringify(o),a.executeGraphQLLightSpeedRequest).then(function(a){d("LSPlatformLsInitLog").addPoint("gql_e2ee_fetch_end");t("gql_e2ee_fetch_end");return a})["catch"](function(a){c("FBLogger")("messenger_web_product").catching(a).mustfix("Failed to sync e2ee mailbox");return A()}):(k||(k=b("Promise"))).resolve(A());w=(yield k.all([s,z,x]));y=w[0];g=w[1];u=w[2];o=u[0];a=u[1];s=u[2];z=u[3];x=g[0];w=g[1];u=g[2];g=g[3];var B=y[0],C=y[1],D=y[2];y=y[3];d("LSPlatformLsInitLog").addPoint("gql_fetch_end");t("gql_fetch_end");d("LSPlatformLsInitLog").addPoint("gql_deps_start");t("gql_deps_start");yield k.all([o,x,B]);d("LSPlatformLsInitLog").addPoint("gql_deps_end");t("gql_deps_end");d("LSPlatformLsInitLog").addPoint("ls_sync_execute_start");t("ls_sync_execute_start");yield e({experiments:D,priority:"ui",syncScript:C,target:y});m&&(yield e({experiments:u,priority:"ui",syncScript:w,target:g}));l&&(yield e({experiments:s,priority:"ui",syncScript:a,target:z}));v!=null&&(yield q(f));r("sync_completed");d("LSPlatformArmadilloUtils").reportInitEnd();d("LSPlatformLsInitLog").addPoint("ls_sync_execute_end");t("ls_sync_execute_end");d("LSPlatformLsInitLog").addPoint("ls_sync_end");t("ls_sync_end");d("LSPlatformLsInitLog").endSuccess();l&&d("LSPlatformArmadilloUtils").occamadilloInitEnd();d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_graphql","init_sync.success");d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_ls","init_sync.success")}catch(a){o=c("getErrorSafe")(a);d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_ls","init_sync.fail");r("sync_failed");d("LSPlatformLsInitLog").fail("init_sync_failure");try{d("LSPlatformArmadilloUtils").reportInitSyncFailure(o)}catch(a){}c("FBLogger")("messenger_web_product").catching(o).mustfix("Encountered an error while performining preloaded init sync request via graphql");return n(f)}});return s.apply(this,arguments)}function t(a){c("InteractionTracing.xplat").getPendingInteractions().forEach(function(b){b.addMarkerPoint(a,"AppTiming")})}g.sendHardcodedInitSync=a}),98);
__d("LSPlatformSyncSystemMaybeDeferred",["cr:6963"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:6963")}),98);
__d("LSSyncStoredProcedureUtils",["I64","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){c=c!=null?(h||(h=d("I64"))).of_float(Date.now()+c):b.minTimeToSyncTimestampMs;yield a.pending_tasks.put(babelHelpers["extends"]({},b,{failureCount:(h||(h=d("I64"))).add(b.failureCount,h.one),minTimeToSyncTimestampMs:c}))});return j.apply(this,arguments)}function a(a,b,c){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.pending_tasks.index("queueNameTaskId")).getKeyRange(b)));if(b==null)return;return i(a,b,c)});return k.apply(this,arguments)}function c(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b=(yield a.network_requests.get(b,c));if(b==null)return;yield a.network_requests.put(babelHelpers["extends"]({},b,{failureCount:(h||(h=d("I64"))).add(b==null?void 0:b.failureCount,h.one)}))});return l.apply(this,arguments)}function e(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b=(yield a.network_requests.get(b,c));if(b==null)return;yield a.network_requests.put(babelHelpers["extends"]({},b,{epochId:void 0,networkTaskIdentifier:void 0}))});return m.apply(this,arguments)}g.incrementPendingTaskFailureCount=i;g.incrementPendingTasksTaskFailureCount=a;g.incrementNetworkRequestsTaskFailureCount=c;g.closeEpoch=e}),98);
__d("LSHandleTaskSendFailureForQueue2",["I64","LSSyncStoredProcedureUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){yield d("LSSyncStoredProcedureUtils").incrementPendingTasksTaskFailureCount(a,b,c),yield d("LSSyncStoredProcedureUtils").incrementNetworkRequestsTaskFailureCount(a,b,(h||(h=d("I64"))).neg_one),yield d("LSSyncStoredProcedureUtils").closeEpoch(a,b,h.neg_one)});return i.apply(this,arguments)}g["default"]=a}),98);
__d("LSHandleTaskSendSuccessForQueue2",["I64","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield a.network_requests.get(b,(h||(h=d("I64"))).neg_one));if(c==null||c.epochId==null)return;yield a.network_requests["delete"](b,h.neg_one)});return i.apply(this,arguments)}g["default"]=a}),98);
__d("LSPlatformRequestId",[],(function(a,b,c,d,e,f){"use strict";var g=4;function a(){var a=g;g+=1;return a}b={generate:a};f["default"]=b}),66);
__d("LSPlatformRequestScheduler",["clearTimeout","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.requests=new Map()}var b=a.prototype;b.schedule=function(a,b,d){var e=this.requests.get(b);e!=null&&c("clearTimeout")(e);this.requests.set(b,c("setTimeout")(a,d))};b.cleanup=function(){this.requests.forEach(function(a){return c("clearTimeout")(a)})};return a}();g["default"]=a}),98);
__d("LSPlatformServerResponseHandler",["FBLogger","Promise","asyncToGeneratorRuntime","clearTimeout","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){this.eval=a,this.currentlyRunning=(h||(h=b("Promise"))).resolve()}var d=a.prototype;d.evalWhenReady=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var d=[];try{var e=c("setTimeout")(function(){c("FBLogger")("messenger_web_product").mustfix("waited longer than 30 seconds to download dependencies")},3e4);d.push(e);yield a;c("clearTimeout")(e);a=c("setTimeout")(function(){c("FBLogger")("messenger_web_product").mustfix("waited longer than 30 seconds to eval sync script")},3e4);d.push(a);yield this.eval(b);c("clearTimeout")(a)}catch(a){d.forEach(function(a){return c("clearTimeout")(a)}),c("FBLogger")("messenger_web_product").catching(a).mustfix("syncscript execution failed "+(a==null?void 0:a.message))}});function d(b,c){return a.apply(this,arguments)}return d}();d.evalInOrderReceived=function(a,b){var c=this,d=this.currentlyRunning.then(function(){return c.evalWhenReady(a,babelHelpers["extends"]({},b,{priority:"sync_script"}))});this.currentlyRunning=d;return d};return a}();g["default"]=a}),98);
__d("LSBeginHandlingFireForgetTasksForQueue",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return c[0]=b.createArray(),b.forEach(b.filter(b.db.table(5).fetch(),function(b){return b.queueName===a[0]}),function(a){a=a.item;return c[3]=new b.Map(),c[3].set("label",a.context),c[3].set("payload",a.taskValue),c[3].set("queue_name",a.queueName),c[3].set("task_id",a.taskId),c[3].set("failure_count",b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))?void 0:b.i64.cast([0,0])),c[4]=(c[0].push(c[3]),c[0])})},function(e){return c[1]=new b.Map(),c[1].set("tasks",c[0]),c[1].set("epoch_id",void 0),c[2]=new b.Map(),c[2].set("queue_name",a[0]),c[2].set("next_sync_ms",void 0),c[2].set("work_item_type",b.i64.cast([0,5])),c[2].set("network_payload",c[1]),c[2].set("http_url_override",void 0),c[2].set("skip_realtime_gateway",!1),d[0]=c[2]}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSCoreBeginHandlingFireForgetTasksForQueueStoredProcedure";e.exports=a}),null);
__d("LSBeginHandlingFireForgetTasksForQueueStoredProcedure",["LSBeginHandlingFireForgetTasksForQueue","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.queueName;return c("LSBeginHandlingFireForgetTasksForQueue").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSForceTaskExecutionImmediately",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.db.table(2).fetch([[[a[0]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?0:(e=d.item,c[1]=b.i64.of_float(Date.now()),b.i64.lt(c[1],e.minTimeToSyncTimestampMs)?b.forEach(b.db.table(2).fetch([[[a[0]]]]),function(a){var c=a.update;a=a.item;return c({minTimeToSyncTimestampMs:b.i64.cast([0,0]),failureCount:b.i64.add(a.failureCount,b.i64.cast([0,1]))})}):b.resolve())})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSCoreForceTaskExecutionImmediatelyStoredProcedure";e.exports=a}),null);
__d("LSRemoveBlindedTokens",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(308).fetch(),function(b){return b.configId===a[0]}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSAnonymousCredentialsRemoveBlindedTokensStoredProcedure";e.exports=a}),null);
__d("LSRemoveUsedTokens",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(a){return b.forEach(b.filter(b.db.table(309).fetch(),function(a){return b.i64.le(a.redeemLimit,b.i64.cast([0,0]))}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSAnonymousCredentialsRemoveUsedTokensStoredProcedure";e.exports=a}),null);
__d("LSGetCurrentTokenPoolState",["LSArrayGetObjectAt","LSRemoveBlindedTokens","LSRemoveUsedTokens"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return d[0]=c.i64.of_float(Date.now()),d[1]=c.createArray(),c.count(c.filter(c.db.table(307).fetch(),function(b){return b.projectName===a[0]})).then(function(a){return d[2]=a})},function(b){return c.forEach(c.filter(c.db.table(307).fetch(),function(b){return b.projectName===a[0]}),function(a){a=a.item;return d[7]=a.configId,c.i64.gt(d[0],a.expirationTimestampMs)?c.forEach(c.db.table(307).fetch([[[d[7]]]]),function(a){return a["delete"]()}):c.resolve(d[8]=(d[1].push(d[7]),d[1]))})},function(a){return c.storedProcedure(b("LSRemoveUsedTokens"))},function(a){return d[3]=c.i64.cast([0,0]),d[4]=c.i64.of_int32(d[1].length),c.i64.gt(d[4],c.i64.cast([0,0]))?c.loopAsync(d[4],function(a){return d[7]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[1],d[7]).then(function(a){return a=a,d[8]=a[0],d[9]=a[1],a})},function(a){return c.count(c.filter(c.db.table(309).fetch(),function(a){return a.configId===d[8]})).then(function(a){return d[10]=a})},function(a){return d[3]=c.i64.add(d[10],d[3]),c.storedProcedure(b("LSRemoveBlindedTokens"),d[8])}])}):c.resolve()},function(a){return c.i64.gt(d[2],c.i64.cast([0,0]))?(d[7]=c.i64.of_int32(d[1].length),d[5]=c.i64.ge(d[7],c.i64.cast([0,1]))):d[5]=void 0,d[5]!==void 0?(d[5]?(c.i64.gt(d[3],c.i64.cast([0,0]))?d[8]=c.i64.cast([0,3]):d[8]=c.i64.cast([0,2]),d[7]=d[8]):d[7]=c.i64.cast([0,1]),d[6]=d[7]):d[6]=c.i64.cast([0,0]),a=[d[6],d[3]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSAnonymousCredentialsGetCurrentTokenPoolStateStoredProcedure";e.exports=a}),null);
__d("LSIssueNextSync",["LSIssueNewTaskAndGetTaskID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.count(c.filter(c.db.table(310).fetch(),function(b){return b.projectName===a[1]})).then(function(a){return d[0]=a})},function(e){return c.i64.gt(d[0],c.i64.cast([0,0]))&&a[3]===!0?c.resolve(0):c.sequence([function(b){return c.forEach(c.filter(c.db.table(310).fetch(),function(b){return b.projectName===a[1]}),function(a){return a["delete"]()})},function(e){return c.i64.gt(a[2],c.i64.cast([0,0]))?(d[3]=c.i64.of_float(Date.now()),d[1]=c.i64.add(d[3],a[2])):d[1]=c.i64.cast([0,0]),c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),["acs_sync","_",a[1]].join(""),c.i64.cast([0,362]),"",void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,d[1],c.i64.cast([0,0])).then(function(a){return a=a,d[2]=a[0],a})},function(b){return c.db.table(310).add({taskId:d[2],projectName:a[1],maxClientTokenPoolSize:a[0]})}])}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSAnonymousCredentialsIssueNextSyncStoredProcedure";e.exports=a}),null);
__d("XPlatReactVoprf",["asyncToGeneratorRuntime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("LSVoprfWasm").__setRef("XPlatReactVoprf"),i=null;function a(){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(i==null){var a=(yield h.load());a=(yield a());var b=a.createCurveRistretto(),c=a.createVoprfExpTwohashdh(b);i={voprfInfo:{curvePtr:b,voprfPtr:c},voprfWasm:a}}return i});return j.apply(this,arguments)}g.loadXPlatReactVoprf=a}),98);
__d("LSVoprfBlind.nop",["XPlatReactVoprf","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){a=(yield d("XPlatReactVoprf").loadXPlatReactVoprf());b=a.voprfInfo;a=a.voprfWasm;a=a.blind(b,new Uint8Array(c));return[a.blindedElement.buffer,a.blindingFactor.buffer]});function c(b,c,d){return a.apply(this,arguments)}return c}();g["default"]=a}),98);
__d("LSVoprfCreateNonce.nop",["XPlatReactCrypto","XPlatReactVoprf","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("XPlatReactVoprf").loadXPlatReactVoprf());b=a.voprfInfo;a=a.voprfWasm;a=a.getCurveBytes(b);b=new Uint8Array(a);d("XPlatReactCrypto").getRandomValues(b);return[b.buffer]});function c(b,c){return a.apply(this,arguments)}return c}();g["default"]=a}),98);
__d("LSTaskSerializerAcsIssueNextSync",["LSBase64Encode.nop","LSGetCurrentTokenPoolState","LSIssueNextSync","LSVoprfBlind.nop","LSVoprfCreateNonce.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return c.db.table(310).fetch([[[a[0]]]]).next().then(function(a,e){var f=a.done;a=a.value;return f?(function(a){c.logger(a).mustfix(a)}("Request context for the passed task_id was not found"),f=[void 0,void 0,void 0],d[0]=f[0],d[1]=f[1],d[2]=f[2],f):(e=a.item,c.sequence([function(a){return d[9]=e.projectName,d[10]=e.maxClientTokenPoolSize,c.storedProcedure(b("LSGetCurrentTokenPoolState"),d[9]).then(function(a){return a=a,d[4]=a[0],d[5]=a[1],a})},function(a){return c.i64.eq(d[4],c.i64.cast([0,0]))||c.i64.eq(d[4],c.i64.cast([0,1]))?c.resolve((d[11]=new c.Map(),d[11].set("project_name",d[9]),d[12]=c.toJSON(d[11]),a=[d[12],c.i64.cast([0,351]),void 0],d[6]=a[0],d[7]=a[1],d[8]=a[2],a)):c.sequence([function(a){return d[11]=c.i64.of_float(Date.now()),c.islc(c.sortBy(c.filter(c.db.table(307).fetch(),function(a){return a.projectName===d[9]&&c.i64.gt(a.expirationTimestampMs,d[11])}),[["expirationTimestampMs","DESC"]]),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(e,f){var a=e.done;e=e.value;return a?(function(a){c.logger(a).mustfix(a)}("A config for the passed project name was not found"),d[16]=new c.Map(),d[16].set("project_name",d[9]),d[16].set("max_client_token_pool_size",d[10]),d[17]=c.toJSON(d[16]),a=[d[17],c.i64.cast([0,362]),void 0],d[12]=a[0],d[13]=a[1],d[14]=a[2],a):(f=e.item,c.sequence([function(a){return d[24]=f.configId,d[16]=f.maxEvals,d[26]=f.tokenPollFrequencyMs,d[25]=f.maxClientTokenPoolSize,d[17]=c.i64.sub(d[10],d[5]),d[23]=c.i64.lt(d[16],d[17])?d[16]:d[17],d[18]=c.createArray(),c.i64.gt(d[23],c.i64.cast([0,0]))?c.loopAsync(d[23],function(a){return d[27]=a,c.sequence([function(a){return c.nativeOperation(b("LSVoprfCreateNonce.nop")).then(function(a){return a=a,d[28]=a[0],a})},function(a){return c.blobs.neq(d[28],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSVoprfBlind.nop"),d[28]).then(function(a){return a=a,d[29]=a[0],d[30]=a[1],a})},function(a){return c.blobs.neq(d[29],void 0)?c.blobs.neq(d[30],void 0)?c.sequence([function(a){return d[31]=c.i64.cast([-1,4294967295]),c.db.table(308).peekNextAutoIncrementId().then(function(a){return d[31]=a})},function(a){return c.db.table(308).add({tokenId:void 0,blindedNonce:d[29],blindingFactor:d[30],nonce:d[28],configId:d[24]})},function(a){return c.db.table(308).fetch([[[d[31]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[32]=c.i64.cast([-1,4294967295]):(e=b.item,d[32]=e.tokenId)})},function(a){return c.i64.eq(d[32],c.i64.cast([-1,4294967295]))?c.sequence([function(a){return c.islc(c.db.table(308).fetchDesc([[[{gt:c.i64.cast([0,0])}]]]),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(b,e){var a=b.done;b=b.value;return a?d[37]=c.i64.cast([-1,4294967295]):(e=b.item,d[37]=e.tokenId)})},function(a){return d[34]=d[37]}]):c.resolve(d[34]=d[32])},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[29]).then(function(a){return a=a,d[35]=a[0],a})},function(a){return d[36]=new c.Map(),d[36].set("id",d[34]),d[36].set("data",d[35]==null?"":d[35]),d[37]=(d[18].push(d[36]),d[18])}]):c.resolve():c.resolve()}]):c.resolve()}])}):c.resolve()},function(a){return d[19]=c.i64.of_int32(d[18].length),c.i64.gt(d[19],c.i64.cast([0,0]))?c.resolve((d[27]=new c.Map(),d[27].set("project_name",d[9]),d[27].set("config_id",d[24]),d[27].set("blinded_nonces",d[18]),d[28]=c.toJSON(d[27]),a=[d[28],c.i64.cast([0,354]),void 0],d[20]=a[0],d[21]=a[1],d[22]=a[2],a)):c.sequence([function(a){return c.i64.neq(d[26],void 0)?c.sequence([function(a){return c.i64.neq(d[25],void 0)?c.sequence([function(a){return function(a){c.logger(a).info(a)}(["Already have the max number of tokens. Scheduling next ACS token sync locally for project: ",d[9]].join("")),c.storedProcedure(b("LSIssueNextSync"),d[25],d[9],d[26],!1)},function(a){return a=[void 0,void 0,void 0],d[30]=a[0],d[31]=a[1],d[32]=a[2],a}]):c.resolve((function(a){c.logger(a).info(a)}(["token_poll_frequency is nonnull but max_client_token_pool_size is null. Already have the max number of tokens. Scheduling the next ACS token sync for project: ",d[9]].join("")),d[33]=new c.Map(),d[33].set("project_name",d[9]),d[33].set("max_client_token_pool_size",d[10]),d[34]=c.toJSON(d[33]),a=[d[34],c.i64.cast([0,362]),void 0],d[30]=a[0],d[31]=a[1],d[32]=a[2],a))},function(a){return a=[d[30],d[31],d[32]],d[27]=a[0],d[28]=a[1],d[29]=a[2],a}]):c.resolve((function(a){c.logger(a).info(a)}(["Already have the max number of tokens. Scheduling the next ACS token sync for project: ",d[9]].join("")),d[30]=new c.Map(),d[30].set("project_name",d[9]),d[30].set("max_client_token_pool_size",d[10]),d[31]=c.toJSON(d[30]),a=[d[31],c.i64.cast([0,362]),void 0],d[27]=a[0],d[28]=a[1],d[29]=a[2],a))},function(a){return a=[d[27],d[28],d[29]],d[20]=a[0],d[21]=a[1],d[22]=a[2],a}])},function(a){return a=[d[20],d[21],d[22]],d[12]=a[0],d[13]=a[1],d[14]=a[2],a}]))})},function(a){return a=[d[12],d[13],d[14]],d[6]=a[0],d[7]=a[1],d[8]=a[2],a}])},function(a){return a=[d[6],d[7],d[8]],d[0]=a[0],d[1]=a[1],d[2]=a[2],a}]))})},function(a){return a=[d[0],d[1],d[2]],e[0]=a[0],e[1]=a[1],e[2]=a[2],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSAnonymousCredentialsTaskSerializerAcsIssueNextSyncStoredProcedure";e.exports=a}),null);
__d("LSTaskSerializerE2eeMessageIntegrityCheckV2",[],(function(a,b,c,d,e,f){function a(){var a,b=arguments,c=b[b.length-1],d=[];return a=[void 0,c.i64.cast([0,705]),void 0],d[0]=a[0],d[1]=a[1],d[2]=a[2],a,c.resolve(d)}a.__sproc_name__="LSEncryptedBackupsTaskSerializerE2eeMessageIntegrityCheckV2StoredProcedure";e.exports=a}),null);
__d("LSTaskSerializerE2eeMetadataThreadIntegrityCheck",[],(function(a,b,c,d,e,f){function a(){var a,b=arguments,c=b[b.length-1],d=[];return a=[void 0,c.i64.cast([0,700]),void 0],d[0]=a[0],d[1]=a[1],d[2]=a[2],a,c.resolve(d)}a.__sproc_name__="LSE2EEMessagingMetadataMailboxTaskSerializerE2eeMetadataThreadIntegrityCheckStoredProcedure";e.exports=a}),null);
__d("LSTaskSerializerEncryptedBackupAction",[],(function(a,b,c,d,e,f){function a(){var a,b=arguments,c=b[b.length-1],d=[];return a=[void 0,c.i64.cast([0,319]),void 0],d[0]=a[0],d[1]=a[1],d[2]=a[2],a,c.resolve(d)}a.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupActionStoredProcedure";e.exports=a}),null);
__d("LSTaskSerializerEncryptedBackupsLoopingUpload",["LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(a){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][taskSerializerEncryptedBackupsLoopingUpload] Beginning execution."),d[1]=c.i64.of_float(Date.now()),function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsLoopingUploadStoredProcedure] LSEncryptedBackupsLoopingUploadPayloadsTable table not found"),d[2]=c.createArray(),void 0!==void 0?d[9]=(d[2].push(void 0),d[2]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsTaskSerializerEncryptedBackupsLoopingUploadStoredProcedure","LSEncryptedBackupsLoopingUploadPayloadsTable table not found",d[2],c.i64.cast([0,3]))},function(a){return d[3]=c.i64.of_float(Date.now()),d[4]=c.i64.random(),d[6]="Finishing execution. Execution time: ",d[7]=c.i64.to_string(c.i64.sub(d[3],d[0])),d[8]=" ms",d[5]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][taskSerializerEncryptedBackupsLoopingUpload] ",d[5],d[6],d[5],d[7],d[5],d[8]].join("")),c.i64.eq(c.i64.mod_(d[4],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[9]=",",d[10]=c.createArray(),void 0!==void 0?d[11]=(d[10].push(void 0),d[10]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"taskSerializerEncryptedBackupsLoopingUpload",[d[6],d[9],d[7],d[9],d[8]].join(""),d[10],c.i64.cast([0,4]))):c.resolve()},function(a){return a=['{"request_id":"unknown","upload_type":"FBN","payload":{"error_code":2,"operation":"","error_message":"","__typename":"MPSUploadFailurePayload"}}',c.i64.cast([0,50043]),void 0],e[0]=a[0],e[1]=a[1],e[2]=a[2],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsLoopingUploadStoredProcedure";e.exports=a}),null);
__d("LSQueryLocalPersistenceStoreForBackup.nop",["Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f){c=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableDescending(a.local_message_persistence_store).filter(function(a){var b=a.offlineThreadingId;a=a.threadId;return a===e&&f===b})));if(c.length===0)return(h||(h=b("Promise"))).resolve([void 0,void 0,!1]);a=c[0];return(h||(h=b("Promise"))).resolve([a.messagePayload,a.messageTimestampMs,!1])});function c(b,c,d,e){return a.apply(this,arguments)}return c}();g["default"]=a}),98);
__d("LSQueryLocalPersistenceStoreSupplementalForBackup.nop",["Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f,g){c=(yield d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.local_message_persistence_store_supplemental).filter(function(a){var b=a.supplementalKey,c=a.threadId;a=a.toplevelOfflineThreadingId;return c===e&&a===f&&b===g})));return c==null?(h||(h=b("Promise"))).resolve([void 0,void 0]):(h||(h=b("Promise"))).resolve([c.messagePayload,c.messageTimestampMs])});function c(b,c,d,e,f){return a.apply(this,arguments)}return c}();g["default"]=a}),98);
__d("isInstamadilloOpenEB",["qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("qex")._("890")===!0}g["default"]=a}),98);
__d("LSQueryLocalPersistenceStoreTagsForBackup.nop",["LSVec","Promise","ReQL","asyncToGeneratorRuntime","isInstamadilloEB","isInstamadilloOpenEB"],(function(a,b,c,d,e,f,g){"use strict";var h,i=":";a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){if(!c("isInstamadilloEB")()&&!c("isInstamadilloOpenEB")())return(h||(h=b("Promise"))).resolve([c("LSVec").ofArray([])]);e=(yield d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.local_message_persistence_store_tag_index.index("offlineThreadingId")).getKeyRange(g,f)));if(e==null)return(h||(h=b("Promise"))).resolve([c("LSVec").ofArray([])]);a=e.tag;return(h||(h=b("Promise"))).resolve([c("LSVec").ofArray(a.split(i))])});function e(b,c,d,e){return a.apply(this,arguments)}return e}();g["default"]=a}),98);
__d("LSLoadUnencryptedProtobufWithInputs",["LSBase64Encode.nop","LSGetBlobFromString.nop","LSLogMebClientEvent.nop","LSQueryLocalPersistenceStoreForBackup.nop","LSQueryLocalPersistenceStoreSupplementalForBackup.nop","LSQueryLocalPersistenceStoreTagsForBackup.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][loadUnencryptedProtobufWithInputs] Beginning execution."),d[1]=c.i64.of_float(Date.now()),!1===!0?c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error REQUIRED_COLUMN_NOT_PRESENT_ON_CLIENT"),d[10]=new c.Map(),d[10].set("error_code",c.i64.cast([-1,4294967293])),d[10].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[10].set("error_message",""),e=[void 0,d[10]],d[2]=e[0],d[3]=e[1],e)):c.sequence([function(e){return c.i64.eq(a[0],c.i64.cast([0,1]))?c.sequence([function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[12]=a[0],d[13]=a[1],d[14]=a[2],a})},function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreTagsForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[15]=a[0],a})},function(e){return c.blobs.neq(d[12],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[12]).then(function(a){return a=a,d[18]=a[0],a})},function(b){return d[18]!==void 0?(d[15]!==void 0?(d[23]=new c.Map(),d[23].set("message_tags",d[15]),d[24]=new c.Map(),d[28]="message_tags",d[25]=d[23].get(d[28]),d[23],d[25]?d[26]=!1:d[26]=!0,d[26]?0:d[24].set(d[28],d[25]),d[27]=c.toJSON(d[24]),d[21]=d[27]):d[21]=void 0,d[22]=new c.Map(),d[22].set("backup_action",a[0]),d[22].set("protobuf_encrypted",d[18]),d[22].set("supplemental_data_encrypted",void 0),d[22].set("timestamp_ms",a[4]),d[22].set("message_tags",d[21]),b=[d[22],void 0],d[19]=b[0],d[20]=b[1],b):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_FORMATTING_FAILED"),d[21]=new c.Map(),d[21].set("error_code",c.i64.cast([0,68])),d[21].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[21].set("error_message",""),b=[void 0,d[21]],d[19]=b[0],d[20]=b[1],b),b=[d[19],d[20]],d[16]=b[0],d[17]=b[1],b}]):c.resolve((d[14]?(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_ALREADY_DELETED"),d[20]=new c.Map(),d[20].set("error_code",c.i64.cast([0,70])),d[20].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[20].set("error_message",""),e=[void 0,d[20]],d[18]=e[0],d[19]=e[1],e):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_TOPLEVEL_TABLE"),d[20]=new c.Map(),d[20].set("error_code",c.i64.cast([0,63])),d[20].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[20].set("error_message",""),e=[void 0,d[20]],d[18]=e[0],d[19]=e[1],e),e=[d[18],d[19]],d[16]=e[0],d[17]=e[1],e))},function(a){return a=[d[16],d[17]],d[10]=a[0],d[11]=a[1],a}]):c.sequence([function(e){return c.i64.eq(a[0],c.i64.cast([0,2]))?c.sequence([function(e){return a[3]!==void 0?c.sequence([function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreSupplementalForBackup.nop"),a[1],a[2],a[3]).then(function(a){return a=a,d[16]=a[0],d[17]=a[1],a})},function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreTagsForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[18]=a[0],a})},function(e){return c.blobs.neq(d[16],void 0)?c.sequence([function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),a[3]).then(function(a){return a=a,d[21]=a[0],a})},function(e){return c.blobs.neq(d[21],void 0)?c.sequence([function(a){return d[24]=new c.Map(),d[24].set("sk_ciphertext",d[21]),d[24].set("sk_hash",d[21]),c.nativeOperation(b("LSBase64Encode.nop"),d[16]).then(function(a){return a=a,d[25]=a[0],a})},function(b){return d[25]!==void 0?(d[18]!==void 0?(d[30]=new c.Map(),d[30].set("message_tags",d[18]),d[31]=new c.Map(),d[35]="message_tags",d[32]=d[30].get(d[35]),d[30],d[32]?d[33]=!1:d[33]=!0,d[33]?0:d[31].set(d[35],d[32]),d[34]=c.toJSON(d[31]),d[28]=d[34]):d[28]=void 0,d[29]=new c.Map(),d[29].set("backup_action",a[0]),d[29].set("protobuf_encrypted",d[25]),d[29].set("supplemental_data_encrypted",d[24]),d[29].set("timestamp_ms",a[4]),d[29].set("message_tags",d[28]),b=[d[29],void 0],d[26]=b[0],d[27]=b[1],b):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_FORMATTING_FAILED"),d[28]=new c.Map(),d[28].set("error_code",c.i64.cast([0,68])),d[28].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[28].set("error_message",""),b=[void 0,d[28]],d[26]=b[0],d[27]=b[1],b),b=[d[26],d[27]],d[22]=b[0],d[23]=b[1],b}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error SUPPLEMENTAL_FORMATTING_FAILED"),d[24]=new c.Map(),d[24].set("error_code",c.i64.cast([0,69])),d[24].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[24].set("error_message",""),e=[void 0,d[24]],d[22]=e[0],d[23]=e[1],e))},function(a){return a=[d[22],d[23]],d[19]=a[0],d[20]=a[1],a}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_SUPPLEMENTAL_TABLE"),d[21]=new c.Map(),d[21].set("error_code",c.i64.cast([0,64])),d[21].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[21].set("error_message",""),e=[void 0,d[21]],d[19]=e[0],d[20]=e[1],e))},function(a){return a=[d[19],d[20]],d[14]=a[0],d[15]=a[1],a}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error SUPPLEMENTAL_KEY_NOT_SET_IN_CONTEXT_TABLE"),d[16]=new c.Map(),d[16].set("error_code",c.i64.cast([0,65])),d[16].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[16].set("error_message",""),e=[void 0,d[16]],d[14]=e[0],d[15]=e[1],e))},function(a){return a=[d[14],d[15]],d[12]=a[0],d[13]=a[1],a}]):c.resolve((c.i64.eq(a[0],c.i64.cast([0,3]))?(d[16]=new c.Map(),d[16].set("backup_action",a[0]),d[16].set("protobuf_encrypted",void 0),d[16].set("supplemental_data_encrypted",void 0),d[16].set("timestamp_ms",a[4]),d[16].set("message_tags",void 0),e=[d[16],void 0],d[14]=e[0],d[15]=e[1],e):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error INVALID_BACKUP_OPERATION"),d[16]=new c.Map(),d[16].set("error_code",c.i64.cast([-1,4294967289])),d[16].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[16].set("error_message",""),e=[void 0,d[16]],d[14]=e[0],d[15]=e[1],e),e=[d[14],d[15]],d[12]=e[0],d[13]=e[1],e))},function(a){return a=[d[12],d[13]],d[10]=a[0],d[11]=a[1],a}])},function(a){return a=[d[10],d[11]],d[2]=a[0],d[3]=a[1],a}])},function(a){return d[4]=c.i64.of_float(Date.now()),d[5]=c.i64.random(),d[7]="Finishing execution. Execution time: ",d[8]=c.i64.to_string(c.i64.sub(d[4],d[0])),d[9]=" ms",d[6]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][loadUnencryptedProtobufWithInputs] ",d[6],d[7],d[6],d[8],d[6],d[9]].join("")),c.i64.eq(c.i64.mod_(d[5],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[10]=",",d[11]=c.createArray(),void 0!==void 0?d[12]=(d[11].push(void 0),d[11]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"loadUnencryptedProtobufWithInputs",[d[7],d[10],d[8],d[10],d[9]].join(""),d[11],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[2],d[3]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure";e.exports=a}),null);
__d("LSLoadUnencryptedProtobufBackupSerializedPayloadData",["LSLoadUnencryptedProtobufWithInputs","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][loadUnencryptedProtobufBackupSerializedPayloadData] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[19]=c.i64.mul(d[1],c.i64.cast([0,1e6])),c.db.table(2).fetch([[[a[0]]]]).next().then(function(b,e){var f=b.done;b=b.value;return f?(d[23]=c.i64.of_float(Date.now()),f=[a[0],void 0,void 0,void 0,void 0,c.i64.sub(c.i64.mul(d[23],c.i64.cast([0,1e6])),d[19]),void 0],d[2]=f[0],d[3]=f[1],d[4]=f[2],d[5]=f[3],d[6]=f[4],d[7]=f[5],d[8]=f[6],f):(e=b.item,d[23]=c.i64.of_float(Date.now()),f=[a[0],e.queueName,e.enqueueTimestampMs,e.priority,e.firstExecutedTimestampMs,c.i64.sub(c.i64.mul(d[23],c.i64.cast([0,1e6])),d[19]),void 0],d[2]=f[0],d[3]=f[1],d[4]=f[2],d[5]=f[3],d[6]=f[4],d[7]=f[5],d[8]=f[6],f)})},function(e){return d[10]=new c.Map(),d[10].set("task_id",d[2]),d[10].set("queue_name",d[3]),d[10].set("enqueue_timestamp_ms",d[4]),d[10].set("priority",d[5]),d[10].set("first_executed_timestamp_ms",d[6]),d[10].set("execution_time_ns",d[7]),d[10].set("echo_encoding_execution_time_ns",d[8]),d[11]=new c.Map(),d[11].set("task_metadata",d[10]),d[11].set("action_type",void 0),d[11].set("content_type",void 0),d[11].set("identifiers",void 0),d[11].set("identifiers_v2",void 0),d[11].set("task_creation_source",void 0),d[11].set("message_payload_source",c.i64.cast([0,2])),c.filter(c.db.table(305).fetch(),function(b){return c.i64.eq(b.pendingBackupTaskId,a[0])}).next().then(function(e,f){var g=e.done;e=e.value;return g?(d[23]=new c.Map(),d[23].set("error_code",c.i64.cast([0,5])),d[23].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufBackupSerializedPayloadDataStoredProcedure"),d[23].set("error_message",""),g=[void 0,d[23],d[11]],d[12]=g[0],d[13]=g[1],d[14]=g[2],g):(f=e.item,c.sequence([function(b){return d[41]=f.actThreadId,d[42]=f.toplevelOfflineThreadingId,d[24]=f.messageTimestampMs,d[23]=new c.Map(),d[23].set("backup_id","openEbUploadGenericBackupId"),d[23].set("act_thread_id",d[41]),d[23].set("server_thread_id",d[41]),d[23].set("timestamp",c.i64.to_string(d[24])),d[23].set("otid",d[42]),d[25]=new c.Map(),d[25].set("backup_id","openEbUploadGenericBackupId"),d[25].set("act_thread_id",d[41]),d[25].set("timestamp",c.i64.to_string(d[24])),d[25].set("otid",d[42]),c.db.table(2).fetch([[[a[0]]]]).next().then(function(e,f){var b=e.done;e=e.value;return b?(d[43]=c.i64.of_float(Date.now()),b=[a[0],void 0,void 0,void 0,void 0,c.i64.sub(c.i64.mul(d[43],c.i64.cast([0,1e6])),d[19]),void 0],d[26]=b[0],d[27]=b[1],d[28]=b[2],d[29]=b[3],d[30]=b[4],d[31]=b[5],d[32]=b[6],b):(f=e.item,d[43]=c.i64.of_float(Date.now()),b=[a[0],f.queueName,f.enqueueTimestampMs,f.priority,f.firstExecutedTimestampMs,c.i64.sub(c.i64.mul(d[43],c.i64.cast([0,1e6])),d[19]),void 0],d[26]=b[0],d[27]=b[1],d[28]=b[2],d[29]=b[3],d[30]=b[4],d[31]=b[5],d[32]=b[6],b)})},function(a){return d[34]=new c.Map(),d[34].set("task_id",d[26]),d[34].set("queue_name",d[27]),d[34].set("enqueue_timestamp_ms",d[28]),d[34].set("priority",d[29]),d[34].set("first_executed_timestamp_ms",d[30]),d[34].set("execution_time_ns",d[31]),d[34].set("echo_encoding_execution_time_ns",d[32]),d[35]=new c.Map(),d[35].set("task_metadata",d[34]),d[35].set("action_type",void 0),d[35].set("content_type",void 0),d[35].set("identifiers",void 0),d[35].set("identifiers_v2",d[25]),d[35].set("task_creation_source",void 0),d[35].set("message_payload_source",c.i64.cast([0,2])),c.storedProcedure(b("LSLoadUnencryptedProtobufWithInputs"),f.backupAction,d[41],d[42],f.supplementalKey,d[24],d[23]).then(function(a){return a=a,d[36]=a[0],d[37]=a[1],a})},function(a){return d[36]!==void 0?(d[43]=new c.Map(),d[43].set("unencrypted_protobuf_backup_payload",d[36]),d[43].set("message_identifiers",d[23]),d[43].set("attachment_backup_payload",f.attachmentPayload),d[43].set("sender_id",f.senderId),d[43].set("extra_data_for_eb_upload",void 0),a=[d[43],void 0,d[35]],d[38]=a[0],d[39]=a[1],d[40]=a[2],a):(a=[void 0,d[37],d[35]],d[38]=a[0],d[39]=a[1],d[40]=a[2],a),a=[d[38],d[39],d[40]],d[12]=a[0],d[13]=a[1],d[14]=a[2],a}]))})},function(a){return d[16]=c.i64.of_float(Date.now()),d[17]=c.i64.random(),d[20]="Finishing execution. Execution time: ",d[21]=c.i64.to_string(c.i64.sub(d[16],d[0])),d[22]=" ms",d[18]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][loadUnencryptedProtobufBackupSerializedPayloadData] ",d[18],d[20],d[18],d[21],d[18],d[22]].join("")),c.i64.eq(c.i64.mod_(d[17],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[23]=",",d[24]=c.createArray(),void 0!==void 0?d[25]=(d[24].push(void 0),d[24]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"loadUnencryptedProtobufBackupSerializedPayloadData",[d[20],d[23],d[21],d[23],d[22]].join(""),d[24],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[12],d[13],d[14]],e[0]=a[0],e[1]=a[1],e[2]=a[2],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsLoadUnencryptedProtobufBackupSerializedPayloadDataStoredProcedure";e.exports=a}),null);
__d("LSTaskSerializerEncryptedBackupsOpenUpload",["LSArrayGetObjectAt","LSBase64Encode.nop","LSDeserializeFromJsonIntoDictionaryV2.nop","LSLoadUnencryptedProtobufBackupSerializedPayloadData","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][taskSerializerEncryptedBackupsOpenUpload] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSLoadUnencryptedProtobufBackupSerializedPayloadData"),a[0]).then(function(a){return a=a,d[2]=a[0],d[3]=a[1],d[4]=a[2],a})},function(a){return d[2]!==void 0?c.sequence([function(a){return d[15]=d[2].get("message_identifiers"),d[2],d[16]=d[2].get("unencrypted_protobuf_backup_payload"),d[2],d[17]=d[15].get("server_thread_id"),d[15],d[18]=d[15].get("timestamp"),d[15],d[19]=d[15].get("otid"),d[15],d[20]=d[15].get("act_thread_id"),d[15],d[21]=new c.Map(),d[21].set("server_thread_key",d[17]),d[21].set("timestamp",d[18]),d[21].set("otid",d[19]),d[21].set("wa_thread_id",c.i64.from_string(d[20])),d[22]=new c.Map(),d[22].set("message_identifiers",d[21]),d[23]=d[2].get("extra_data_for_eb_upload"),d[2],d[23]!==void 0?c.sequence([function(a){return c.nativeOperation(b("LSDeserializeFromJsonIntoDictionaryV2.nop"),d[23]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[33]=new c.Map(),d[38]="ttd",d[34]=d[32].get(d[38]),d[32],d[34]?d[35]=!1:d[35]=!0,d[35]?c.resolve():c.sequence([function(a){return d[34]?d[40]=!1:d[40]=!0,d[40]?c.resolve(d[41]=void 0):c.sequence([function(a){return d[42]=new c.Map(),d[45]="message_tags",d[43]=d[34].get(d[45]),d[34],d[43]?d[44]=!1:d[44]=!0,d[44]?c.resolve():c.sequence([function(a){return d[46]=c.createArray(),d[47]=c.i64.of_int32(d[43].length),c.i64.gt(d[47],c.i64.cast([0,0]))?c.loopAsync(d[47],function(a){return d[48]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[43],d[48]).then(function(a){return a=a,d[49]=a[0],d[50]=a[1],a})},function(a){return d[51]=(d[46].push(d[49]),d[46])}])}):c.resolve()},function(a){return d[42].set(d[45],d[46])}])},function(a){return d[41]=d[42]}])},function(a){return d[33].set(d[38],d[41])}])},function(a){return d[39]="mt",d[36]=d[32].get(d[39]),d[32],d[36]?d[37]=!1:d[37]=!0,d[37]?c.resolve():c.sequence([function(a){return d[36]?d[40]=!1:d[40]=!0,d[40]?c.resolve(d[41]=void 0):c.sequence([function(a){return d[42]=new c.Map(),d[45]="message_tags",d[43]=d[36].get(d[45]),d[36],d[43]?d[44]=!1:d[44]=!0,d[44]?c.resolve():c.sequence([function(a){return d[46]=c.createArray(),d[47]=c.i64.of_int32(d[43].length),c.i64.gt(d[47],c.i64.cast([0,0]))?c.loopAsync(d[47],function(a){return d[48]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[43],d[48]).then(function(a){return a=a,d[49]=a[0],d[50]=a[1],a})},function(a){return d[51]=(d[46].push(d[49]),d[46])}])}):c.resolve()},function(a){return d[42].set(d[45],d[46])}])},function(a){return d[41]=d[42]}])},function(a){return d[33].set(d[39],d[41])}])},function(a){return d[24]=d[33]}]):c.resolve(d[24]=void 0)},function(a){return d[24]!==void 0?(d[32]=d[24].get("mt"),d[24],d[32]!==void 0?(d[34]=new c.Map(),d[38]="message_tags",d[35]=d[32].get(d[38]),d[32],d[35]?d[36]=!1:d[36]=!0,d[36]?0:d[34].set(d[38],d[35]),d[37]=c.toJSON(d[34]),d[33]=d[37]):d[33]=void 0,d[25]=d[33]):d[25]=void 0,d[26]=d[16].get("supplemental_data_encrypted"),d[16],d[26]!==void 0?c.sequence([function(a){return d[32]=d[16].get("protobuf_encrypted"),d[16],d[33]=d[16].get("backup_action"),d[16],d[34]=d[16].get("timestamp_ms"),d[16],d[35]=d[26].get("sk_ciphertext"),d[26],c.nativeOperation(b("LSBase64Encode.nop"),d[35]).then(function(a){return a=a,d[36]=a[0],a})},function(a){return d[37]=d[26].get("sk_hash"),d[26],c.nativeOperation(b("LSBase64Encode.nop"),d[37]).then(function(a){return a=a,d[38]=a[0],a})},function(a){return d[39]=new c.Map(),d[39].set("supplementary_data_key",void 0),d[39].set("encrypted_protobuf",d[32]),d[39].set("key_value_backup_action",d[33]),d[39].set("protobuf_ts_ms",d[34]),d[39].set("supplemental_key_ciphertext",d[36]),d[39].set("supplemental_key_hash",d[38]),d[39].set("message_tags",d[25]),d[27]=d[39]}]):c.resolve((d[32]=d[16].get("protobuf_encrypted"),d[16],d[33]=d[16].get("backup_action"),d[16],d[34]=d[16].get("timestamp_ms"),d[16],d[35]=new c.Map(),d[35].set("supplementary_data_key",void 0),d[35].set("encrypted_protobuf",d[32]),d[35].set("key_value_backup_action",d[33]),d[35].set("protobuf_ts_ms",d[34]),d[35].set("message_tags",d[25]),d[27]=d[35]))},function(a){return d[22].set("key_value_backup_unencrypted_payload",d[27]),d[28]=d[2].get("sender_id"),d[2],d[22].set("sender_id",d[28]),d[29]=d[2].get("attachment_backup_payload"),d[2],d[29]!==void 0?d[22].set("attachment_backup_payload",d[29]):0,d[24]!==void 0?(d[32]=d[24].get("ttd"),d[24],d[32]!==void 0?(d[34]=new c.Map(),d[38]="message_tags",d[35]=d[32].get(d[38]),d[32],d[35]?d[36]=!1:d[36]=!0,d[36]?0:d[34].set(d[38],d[35]),d[37]=c.toJSON(d[34]),d[33]=d[37]):d[33]=void 0,d[30]=d[33]):d[30]=void 0,d[30]!==void 0?d[22].set("tags_to_delete",d[30]):0,d[31]=c.toJSON(d[22]),a=[d[31],void 0,d[4]],d[5]=a[0],d[6]=a[1],d[7]=a[2],a}]):c.resolve((d[3]?d[15]=!1:d[15]=!0,d[15]?(a=[void 0,void 0,d[4]],d[16]=a[0],d[17]=a[1],d[18]=a[2],a):(a=[void 0,d[3],d[4]],d[16]=a[0],d[17]=a[1],d[18]=a[2],a),a=[d[16],d[17],d[18]],d[5]=a[0],d[6]=a[1],d[7]=a[2],a))},function(a){return d[15]=new c.Map(),d[16]=d[15].set("success",d[5]),d[17]=d[15].set("failure",d[6]),d[18]=d[15].set("context",d[7]),d[19]=c.toJSON(d[15]),d[8]=d[19],d[9]=c.i64.of_float(Date.now()),d[10]=c.i64.random(),d[12]="Finishing execution. Execution time: ",d[13]=c.i64.to_string(c.i64.sub(d[9],d[0])),d[14]=" ms",d[11]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][taskSerializerEncryptedBackupsOpenUpload] ",d[11],d[12],d[11],d[13],d[11],d[14]].join("")),c.i64.eq(c.i64.mod_(d[10],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[15]=",",d[16]=c.createArray(),void 0!==void 0?d[17]=(d[16].push(void 0),d[16]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"taskSerializerEncryptedBackupsOpenUpload",[d[12],d[15],d[13],d[15],d[14]].join(""),d[16],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[8],c.i64.cast([0,50048])],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsOpenUploadStoredProcedure";e.exports=a}),null);
__d("LSCreateDataTrace",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return c[0]=b.i64.of_float(Date.now()),b.db.table(153).add({traceId:a[0],initTimestampMs:c[0],traceType:a[4],shouldFlush:!1,contextOne:a[1],contextTwo:a[2],contextThree:a[3]})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSDataTraceCreateDataTraceStoredProcedure";e.exports=a}),null);
__d("LSCreateDataTraceID.nop",["LSRequestId","LSResult","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,d){return(h||(h=b("Promise"))).resolve(c("LSResult")(c("LSRequestId").generate()))};g["default"]=a}),98);
__d("LSGetOpenEpochKeys",["LSAppendDataTraceAddon","LSArrayGetObjectAt","LSCreateDataTrace","LSCreateDataTraceID.nop","LSDeleteBackupOnClient","LSIsMobileClient","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsGetOpenEpochKeysStoredProcedure] Beginning execution."),c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))&&c.i64.eq(a.backupTenancy,c.i64.cast([0,2]))}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){b=a.done;a=a.value;return b?d[1]=!1:(a.item,d[1]=!0)})},function(a){return d[1]?d[3]=c.i64.or_(c.i64.cast([0,90]),c.i64.cast([0,128])):d[3]=c.i64.cast([0,90]),c.sequence([function(a){return c.nativeOperation(b("LSCreateDataTraceID.nop")).then(function(a){return a=a,d[20]=a[0],a})},function(a){return c.sequence([function(a){return d[24]="EncryptedBackups MCD Trace ID",d[25]=c.i64.to_string(d[3]),d[23]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][MEBTraceUtils] ",d[23],d[24],d[23],d[25]].join("")),c.resolve()},function(a){return c.storedProcedure(b("LSCreateDataTrace"),d[20],void 0,void 0,"get_open_epoch_keys",d[3])}])},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[21]=a[0],a})},function(a){return d[21]?d[22]=!0:d[22]=!1,d[22]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[23]=c.createArray(),void 0!==void 0?d[24]=(d[23].push(void 0),d[23]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[23],c.i64.cast([0,3]))):c.resolve()},function(a){return d[4]=d[20]}])},function(b){return d[15]="Querying latest epoch keys with authority level: ",a[0]?d[5]="OPTIMISTIC":d[5]="AUTHORITATIVE",d[6]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsGetOpenEpochKeysStoredProcedure] ",d[6],d[15],d[6],d[5]].join("")),c.resolve()},function(e){return a[0]?d[7]="OPTIMISTIC":d[7]="AUTHORITATIVE",c.sequence([function(a){return d[4]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),d[4],c.i64.cast([0,2842]),c.i64.cast([0,2]),void 0,d[7]):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[20]=a[0],a})},function(a){return d[20]?d[21]=!0:d[21]=!1,d[21]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[22]=c.createArray(),void 0!==void 0?d[23]=(d[22].push(void 0),d[22]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[22],c.i64.cast([0,3]))):c.resolve()}])},function(a){return c.sequence([function(a){return d[4]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),d[4],c.i64.cast([0,2844]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[20]=a[0],a})},function(a){return d[20]?d[21]=!0:d[21]=!1,d[21]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[22]=c.createArray(),void 0!==void 0?d[23]=(d[22].push(void 0),d[22]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[22],c.i64.cast([0,3]))):c.resolve()}])},function(b){return d[8]=c.createArray(),c.forEach(c.filter(c.db.table(169).fetch(),function(b){return a[0]||c.i64.eq(b.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[20]=(d[8].push(c.blobs.to_string(a.epochAnonIdBlob)),d[8])})},function(a){return d[9]=c.i64.of_int32(d[8].length),c.i64.gt(d[9],c.i64.cast([0,0]))?c.sequence([function(a){return d[20]=c.i64.of_int32(d[8].length),c.sequence([function(a){return d[4]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),d[4],c.i64.cast([0,2845]),c.i64.cast([0,2]),void 0,c.i64.to_string(d[20])):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[25]=a[0],a})},function(a){return d[25]?d[26]=!0:d[26]=!1,d[26]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[27]=c.createArray(),void 0!==void 0?d[28]=(d[27].push(void 0),d[27]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[27],c.i64.cast([0,3]))):c.resolve()}])},function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[8],c.i64.cast([0,0])).then(function(a){return a=a,d[21]=a[0],d[22]=a[1],a})},function(a){return d[23]=d[21],d[24]=c.i64.of_int32(d[8].length),c.i64.gt(d[24],c.i64.cast([0,0]))?c.loopAsync(d[24],function(a){return d[25]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[8],d[25]).then(function(a){return a=a,d[26]=a[0],d[27]=a[1],a})},function(a){return c.i64.eq([0,d[23].length],[0,d[26].length])?(d[23]===d[26]?d[29]=d[23]:(d[23]>d[26]?d[30]=d[23]:d[30]=d[26],d[29]=d[30]),d[28]=d[29]):(c.i64.gt([0,d[23].length],[0,d[26].length])?d[29]=d[23]:d[29]=d[26],d[28]=d[29]),d[23]=d[28]}])}):c.resolve()},function(a){return d[10]=d[23]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsGetOpenEpochKeysStoredProcedure] Epoch anon ID list is empty."),d[20]=c.createArray(),void 0!==void 0?d[21]=(d[20].push(void 0),d[20]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsGetOpenEpochKeysStoredProcedure","Epoch anon ID list is empty.",d[20],c.i64.cast([0,3]))},function(a){return c.sequence([function(a){return d[4]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),d[4],c.i64.cast([0,2846]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[21]=a[0],a})},function(a){return d[21]?d[22]=!0:d[22]=!1,d[22]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[23]=c.createArray(),void 0!==void 0?d[24]=(d[23].push(void 0),d[23]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[23],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[10]=void 0}])},function(a){return d[10]!==void 0?c.sequence([function(a){return d[4]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),d[4],c.i64.cast([0,2863]),c.i64.cast([0,2]),void 0,d[10]):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[20]=a[0],a})},function(a){return d[20]?d[21]=!0:d[21]=!1,d[21]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[22]=c.createArray(),void 0!==void 0?d[23]=(d[22].push(void 0),d[22]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[22],c.i64.cast([0,3]))):c.resolve()}]):c.sequence([function(a){return d[4]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),d[4],c.i64.cast([0,2864]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[20]=a[0],a})},function(a){return d[20]?d[21]=!0:d[21]=!1,d[21]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[22]=c.createArray(),void 0!==void 0?d[23]=(d[22].push(void 0),d[22]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[22],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[16]=c.blobs.of_string(d[10]),c.blobs.neq(d[16],void 0)?c.sequence([function(a){return c.sequence([function(a){return d[4]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),d[4],c.i64.cast([0,2847]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[22]=a[0],a})},function(a){return d[22]?d[23]=!0:d[23]=!1,d[23]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[24]=c.createArray(),void 0!==void 0?d[25]=(d[24].push(void 0),d[24]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[24],c.i64.cast([0,3]))):c.resolve()}])},function(a){return c.filter(c.db.table(169).fetch(),function(a){return c.blobs.eq(a.epochAnonIdBlob,d[16])}).next().then(function(a,e){var f=a.done;a=a.value;return f?c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsGetOpenEpochKeysStoredProcedure] Found a most recent epoch anon ID, but unable to locate it again in the table. This can really only happen if the tablesomehow changed in the middle of our transaction."),d[22]=c.createArray(),void 0!==void 0?d[23]=(d[22].push(void 0),d[22]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsGetOpenEpochKeysStoredProcedure","Found a most recent epoch anon ID, but unable to locate it again in the table. This can really only happen if the tablesomehow changed in the middle of our transaction.",d[22],c.i64.cast([0,3]))},function(a){return c.sequence([function(a){return d[4]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),d[4],c.i64.cast([0,2848]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[23]=a[0],a})},function(a){return d[23]?d[24]=!0:d[24]=!1,d[24]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[25]=c.createArray(),void 0!==void 0?d[26]=(d[25].push(void 0),d[25]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[25],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[20]=void 0}]):(e=a.item,c.sequence([function(a){return d[26]=e.epochAnonIdBlob,d[24]="Using latest epoch: ",d[25]=c.blobs.to_string(d[26]),d[22]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsGetOpenEpochKeysStoredProcedure] ",d[22],d[24],d[22],d[25]].join("")),c.resolve()},function(a){return d[23]=new c.Map(),d[23].set("epoch_id",e.epochId),d[23].set("epoch_root_key",e.epochRootKeyBlob),d[23].set("epoch_anon_id",d[26]),d[20]=d[23]}]))})},function(a){return d[11]=d[20]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsGetOpenEpochKeysStoredProcedure] No epochs whatsoever on client! This should absolutely never happen. Deleting backup from client."),d[20]=c.createArray(),void 0!==void 0?d[21]=(d[20].push(void 0),d[20]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsGetOpenEpochKeysStoredProcedure","No epochs whatsoever on client! This should absolutely never happen. Deleting backup from client.",d[20],c.i64.cast([0,3]))},function(a){return c.sequence([function(a){return d[4]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),d[4],c.i64.cast([0,2843]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[21]=a[0],a})},function(a){return d[21]?d[22]=!0:d[22]=!1,d[22]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[23]=c.createArray(),void 0!==void 0?d[24]=(d[23].push(void 0),d[23]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[23],c.i64.cast([0,3]))):c.resolve()}])},function(a){return c.storedProcedure(b("LSDeleteBackupOnClient"),void 0,"get_open_epoch_keys",!0,d[4],"Attempted to fetch epoch keys when there are no epochs on the client.",!1)},function(a){return d[11]=void 0}])},function(a){return d[12]=c.i64.of_float(Date.now()),d[13]=c.i64.random(),d[17]="Finishing execution. Execution time: ",d[18]=c.i64.to_string(c.i64.sub(d[12],d[0])),d[19]=" ms",d[14]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsGetOpenEpochKeysStoredProcedure] ",d[14],d[17],d[14],d[18],d[14],d[19]].join("")),c.i64.eq(c.i64.mod_(d[13],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[20]=",",d[21]=c.createArray(),void 0!==void 0?d[22]=(d[21].push(void 0),d[21]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsGetOpenEpochKeysStoredProcedure",[d[17],d[20],d[18],d[20],d[19]].join(""),d[21],c.i64.cast([0,4]))):c.resolve()},function(a){return e[0]=d[11]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsGetOpenEpochKeysStoredProcedure";e.exports=a}),null);
__d("LSTaskSerializerEncryptedBackupsRestoreWithSerializer",["LSAppendDataTraceAddon","LSBase64Encode.nop","LSGetOpenEpochKeys","LSIsMobileClient","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsRestoreWithSerializerStoredProcedure] Beginning execution."),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsRestoreWithSerializerStoredProcedure] Fetching locally available epochs on client from epochs table"),d[1]=c.createArray(),c.forEach(c.filter(c.db.table(169).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[16]=(d[1].push(a.epochId),d[1])})},function(a){return d[11]="Queried locally available epochs. Count: ",d[2]=c.i64.of_int32(d[1].length),d[12]=c.i64.to_string(d[2]),d[3]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][MEBEpochClientUtils] ",d[3],d[11],d[3],d[12]].join("")),c.resolve()},function(e){return c.db.table(168).fetch().next().then(function(e,f){var g=e.done;e=e.value;return g?(g=[void 0,void 0,void 0],d[4]=g[0],d[5]=g[1],d[6]=g[2],g):(f=e.item,c.sequence([function(e){return d[19]=f.deviceId,c.i64.neq(d[19],void 0)?c.sequence([function(e){return c.db.table(190).fetch([[[a[0]]]]).next().then(function(e,h){var a=e.done;e=e.value;return a?c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsRestoreWithSerializerStoredProcedure] No restore payload context found."),d[24]=c.createArray(),void 0!==void 0?d[25]=(d[24].push(void 0),d[24]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsTaskSerializerEncryptedBackupsRestoreWithSerializerStoredProcedure","No restore payload context found.",d[24],c.i64.cast([0,3]))},function(a){return a=[void 0,void 0,void 0],d[20]=a[0],d[21]=a[1],d[22]=a[2],a}]):(h=e.item,c.sequence([function(a){return d[32]=h.traceId,c.sequence([function(a){return d[32]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),d[32],c.i64.cast([0,3603]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[33]=a[0],a})},function(a){return d[33]?d[34]=!0:d[34]=!1,d[34]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[35]=c.createArray(),void 0!==void 0?d[36]=(d[35].push(void 0),d[35]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[35],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[24]=new c.Map(),d[24].set("server_thread_key",h.serverThreadKey),d[24].set("otid",h.messageId),d[24].set("timestamp",h.unencryptedSortKey),d[24].set("wa_thread_id",h.waThreadId),c.nativeOperation(b("LSBase64Encode.nop"),f.ocmfClientStateBlob).then(function(a){return a=a,d[25]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),f.mailboxRootKeyBlob).then(function(a){return a=a,d[26]=a[0],a})},function(a){return d[27]=new c.Map(),d[27].set("ocmf_client_state_blob",d[25]==null?"":d[25]),d[27].set("mailbox_root_key",d[26]==null?"":d[26]),c.storedProcedure(b("LSGetOpenEpochKeys"),!1).then(function(a){return a=a,d[28]=a[0],a})},function(a){return d[28]!==void 0?(d[33]=d[28].get("epoch_id"),d[28],d[29]=d[33]):d[29]=void 0,d[30]=new c.Map(),d[30].set("content_type",h.contentType),d[30].set("device_id",d[19]),d[30].set("epoch_id",d[29]),d[30].set("list_id",h.listId),d[30].set("num_items",h.numItems),d[30].set("start_sort_key",h.startSortKey),d[30].set("mailbox_partial_id",h.mailboxPartialId),d[30].set("trace_id",d[32]),d[30].set("message_partial_id",h.messagePartialId),d[30].set("newer_num_items",h.newerNumItems),d[30].set("locally_available_epochs",d[1]),d[30].set("raw_identifiers",d[24]),d[30].set("raw_tokens",d[27]),d[31]=c.toJSON(d[30]),a=[d[31],c.i64.cast([0,50015]),void 0],d[20]=a[0],d[21]=a[1],d[22]=a[2],a}]))})},function(a){return a=[d[20],d[21],d[22]],d[16]=a[0],d[17]=a[1],d[18]=a[2],a}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsRestoreWithSerializerStoredProcedure] Unexpected error: Device ID is null."),d[20]=c.createArray(),void 0!==void 0?d[21]=(d[20].push(void 0),d[20]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsTaskSerializerEncryptedBackupsRestoreWithSerializerStoredProcedure","Unexpected error: Device ID is null.",d[20],c.i64.cast([0,3]))},function(a){return a=[void 0,void 0,void 0],d[16]=a[0],d[17]=a[1],d[18]=a[2],a}])},function(a){return a=[d[16],d[17],d[18]],d[4]=a[0],d[5]=a[1],d[6]=a[2],a}]))})},function(a){return d[8]=c.i64.of_float(Date.now()),d[9]=c.i64.random(),d[13]="Finishing execution. Execution time: ",d[14]=c.i64.to_string(c.i64.sub(d[8],d[0])),d[15]=" ms",d[10]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsRestoreWithSerializerStoredProcedure] ",d[10],d[13],d[10],d[14],d[10],d[15]].join("")),c.i64.eq(c.i64.mod_(d[9],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[16]=",",d[17]=c.createArray(),void 0!==void 0?d[18]=(d[17].push(void 0),d[17]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsTaskSerializerEncryptedBackupsRestoreWithSerializerStoredProcedure",[d[13],d[16],d[14],d[16],d[15]].join(""),d[17],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[4],d[5],d[6]],e[0]=a[0],e[1]=a[1],e[2]=a[2],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsRestoreWithSerializerStoredProcedure";e.exports=a}),null);
__d("LSDeriveValueSecretRefV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][deriveValueSecretRefV2] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[2]=a[2].get("message_payload_encryption_keys"),a[2],d[3]=d[2].get("encryption_version"),d[2],d[4]=d[2].get("epoch_anon_id"),d[2],d[5]=d[2].get("epoch_root_key"),d[2],d[6]=d[2].get("payload_key"),d[2],d[7]=c.createArray(),d[41]=(d[7].push(c.i64.cast([0,6])),d[7]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_anon_id_debug").then(function(a){return a=a,d[8]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[8],void 0,d[4],d[7]).then(function(a){return a=a,d[9]=a[0],a})},function(a){return d[9]?d[10]=!1:d[10]=!0,d[10]?c.resolve(d[11]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[9],c.i64.cast([0,0])).then(function(a){return a=a,d[41]=a[0],d[42]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[41]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[11]=d[43]==null?"":d[43]}])},function(a){return d[12]=c.createArray(),d[41]=(d[12].push(c.i64.cast([0,6])),d[12]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_root_key_debug").then(function(a){return a=a,d[13]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[13],void 0,d[5],d[12]).then(function(a){return a=a,d[14]=a[0],a})},function(a){return d[14]?d[15]=!1:d[15]=!0,d[15]?c.resolve(d[16]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[14],c.i64.cast([0,0])).then(function(a){return a=a,d[41]=a[0],d[42]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[41]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[16]=d[43]==null?"":d[43]}])},function(a){return d[17]=c.createArray(),d[41]=(d[17].push(c.i64.cast([0,6])),d[17]),c.nativeOperation(b("LSGetBlobFromString.nop"),"message_key_debug").then(function(a){return a=a,d[18]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[18],void 0,d[6],d[17]).then(function(a){return a=a,d[19]=a[0],a})},function(a){return d[19]?d[20]=!1:d[20]=!0,d[20]?c.resolve(d[21]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[19],c.i64.cast([0,0])).then(function(a){return a=a,d[41]=a[0],d[42]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[41]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[21]=d[43]==null?"":d[43]}])},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[5]).then(function(a){return a=a,d[22]=a[0],a})},function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),[d[22]==null?"":d[22],a[0]].join("")).then(function(a){return a=a,d[23]=a[0],a})},function(a){return d[24]=c.createArray(),d[41]=(d[24].push(c.i64.cast([0,6])),d[24]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_root_key_thread_id_debug").then(function(a){return a=a,d[25]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[25],void 0,d[23],d[24]).then(function(a){return a=a,d[26]=a[0],a})},function(a){return d[26]?d[27]=!1:d[27]=!0,d[27]?c.resolve(d[28]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[26],c.i64.cast([0,0])).then(function(a){return a=a,d[41]=a[0],d[42]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[41]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[28]=d[43]==null?"":d[43]}])},function(a){return d[29]=":",c.blobs.neq(d[5],void 0)?c.sequence([function(a){return d[41]=c.createArray(),d[47]=(d[41].push(c.i64.cast([0,18])),d[41]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("bWViL2RlYnVnL2ZpbmdlcnByaW50L01FQkVwb2NoUm9vdEtleQ=="),void 0,d[5],d[41]).then(function(a){return a=a,d[42]=a[0],a})},function(a){return d[42]!==void 0?c.sequence([function(a){return d[47]=c.i64.of_int32(d[42].length),c.i64.ge(d[47],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[42],c.i64.cast([0,0])).then(function(a){return a=a,d[49]=a[0],d[50]=a[1],a})},function(a){return d[48]=d[49]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[49]=c.createArray(),void 0!==void 0?d[50]=(d[49].push(void 0),d[49]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint","CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",d[49],c.i64.cast([0,3]))},function(a){return d[48]=void 0}])},function(a){return d[43]=d[48]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[47]=c.createArray(),void 0!==void 0?d[48]=(d[47].push(void 0),d[47]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint","CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",d[47],c.i64.cast([0,3]))},function(a){return d[43]=void 0}])},function(a){return c.blobs.neq(d[43],void 0)?d[44]=!0:d[44]=!1,d[44]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),c.nativeOperation(b("LSBase64Encode.nop"),d[43]).then(function(a){return a=a,d[45]=a[0],a})},function(a){return d[45]!==void 0?d[46]=d[45]:d[46]="encodingfailed",d[30]=d[46]}]):c.resolve(d[30]="null")},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[4]).then(function(a){return a=a,d[31]=a[0],a})},function(e){return d[32]=new c.Map(),d[32].set("encryption_version",d[3]),d[32].set("epoch_anon_id",d[31]==null?"":d[31]),d[32].set("message_encryption_values",[d[11],d[29],d[16],d[29],d[21],d[29],d[28]].join("")),d[32].set("root_key_fingerprint",d[30]),d[32].set("backup_id",a[1]),d[33]=c.toJSON(d[32]),d[34]=new c.Map(),d[34].set("value_secret_ref",d[33]),d[35]=c.i64.of_float(Date.now()),d[36]=c.i64.random(),d[38]="Finishing execution. Execution time: ",d[39]=c.i64.to_string(c.i64.sub(d[35],d[0])),d[40]=" ms",d[37]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][deriveValueSecretRefV2] ",d[37],d[38],d[37],d[39],d[37],d[40]].join("")),c.i64.eq(c.i64.mod_(d[36],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[41]=",",d[42]=c.createArray(),void 0!==void 0?d[43]=(d[42].push(void 0),d[42]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"deriveValueSecretRefV2",[d[38],d[41],d[39],d[41],d[40]].join(""),d[42],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[34],void 0],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsDeriveValueSecretRefV2StoredProcedure";e.exports=a}),null);
__d("LSEncryptIdentifiersV2",["LSBase64Encode.nop","LSBinaryToHex.nop","LSGetBlobFromInt64BE.nop","LSGetBlobFromString.nop","LSHmac_v2.nop","LSLogMebClientEvent.nop","LSOcmfClientMap.nop","LSOpeEncrypt.nop","LSTruncateSortKey.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][encryptIdentifiersV2] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[2]=a[6].get("ocmf_shared_key"),a[6],c.nativeOperation(b("LSGetBlobFromString.nop"),a[2]).then(function(a){return a=a,d[3]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("bWFpbGJveF9pZF9zY29wZQ=="),d[3]).then(function(a){return a=a,d[4]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[2],d[4]).then(function(a){return a=a,d[5]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[5]).then(function(a){return a=a,d[6]=a[0],a})},function(e){return c.i64.eq(a[0],c.i64.cast([0,2]))&&c.i64.eq(a[1],c.i64.cast([0,2]))?d[7]=a[5]:d[7]=a[3],d[8]=a[6].get("ocmf_shared_key"),a[6],c.nativeOperation(b("LSGetBlobFromString.nop"),d[7]).then(function(a){return a=a,d[9]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("dGhyZWFkX2lkX3Njb3Bl"),d[9]).then(function(a){return a=a,d[10]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[8],d[10]).then(function(a){return a=a,d[11]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[11]).then(function(a){return a=a,d[12]=a[0],a})},function(e){return d[13]=a[6].get("ope_key"),a[6],c.nativeOperation(b("LSGetBlobFromInt64BE.nop"),a[4]).then(function(a){return a=a,d[14]=a[0],a})},function(a){return c.nativeOperation(b("LSTruncateSortKey.nop"),d[14]).then(function(a){return a=a,d[15]=a[0],a})},function(a){return c.nativeOperation(b("LSOpeEncrypt.nop"),d[13],d[15],c.i64.cast([0,16])).then(function(a){return a=a,d[16]=a[0],a})},function(a){return c.nativeOperation(b("LSBinaryToHex.nop"),d[16]).then(function(a){return a=a,d[17]=a[0],a})},function(e){return d[18]=a[6].get("ocmf_shared_key"),a[6],c.nativeOperation(b("LSGetBlobFromString.nop"),a[5]).then(function(a){return a=a,d[19]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("bWVzc2FnZV9pZF9zY29wZQ=="),d[19]).then(function(a){return a=a,d[20]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[18],d[20]).then(function(a){return a=a,d[21]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[21]).then(function(a){return a=a,d[22]=a[0],a})},function(a){return d[23]=new c.Map(),d[23].set("backup_id_ocmf_partial",d[6]==null?"":d[6]),d[23].set("act_thread_id_ocmf_partial",d[12]==null?"":d[12]),d[23].set("timestamp_encrypted",d[17]==null?"":d[17]),d[23].set("otid_ocmf_partial",d[22]==null?"":d[22]),d[24]=c.i64.of_float(Date.now()),d[25]=c.i64.random(),d[27]="Finishing execution. Execution time: ",d[28]=c.i64.to_string(c.i64.sub(d[24],d[0])),d[29]=" ms",d[26]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][encryptIdentifiersV2] ",d[26],d[27],d[26],d[28],d[26],d[29]].join("")),c.i64.eq(c.i64.mod_(d[25],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[30]=",",d[31]=c.createArray(),void 0!==void 0?d[32]=(d[31].push(void 0),d[31]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"encryptIdentifiersV2",[d[27],d[30],d[28],d[30],d[29]].join(""),d[31],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[23],void 0],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsEncryptIdentifiersV2StoredProcedure";e.exports=a}),null);
__d("LSSymmetricEncryptionCreateEncryptedData.nop",["CryptoLogger","EncryptedBackupsSymmetricEncryptionUtils","HChaCha20","Promise","RetUtil","SymmetricEncryptionPaddingUtils","XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,c,e,f,g){var i=d("CryptoLogger").CryptoLogger("symmetric_encryption_create_encrypted_data"),j=d("SymmetricEncryptionPaddingUtils").padData(g),k=d("XPlatReactCrypto").getRandomValues(new Uint8Array(d("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes));a=new(d("HChaCha20").HChaCha20)();c=a.hChaCha20Bytes(k.slice(0,d("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer,e);return d("XPlatReactCrypto").subtleImportKey("raw",c,"AES-GCM",!1,["encrypt"]).then(function(a){return d("XPlatReactCrypto").subtleEncrypt({additionalData:f,iv:new Uint8Array(k.slice(d("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer),name:"AES-GCM",tagLength:d("EncryptedBackupsSymmetricEncryptionUtils").aesGcmTagLength},a,j)}).then(function(a){var c=k.byteLength+a.byteLength;c=new Uint8Array(c);c.set(k);c.set(new Uint8Array(a),d("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes);return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult(c.buffer))})["catch"](function(a){d("CryptoLogger").captureError(i,a).mustfix("symmetric data encryption failed");return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult())})};g["default"]=a}),98);
__d("LSSymmetricEncryptionCreateEncryptedString.nop",["Base64Utils","CryptoLogger","LSCryptoUtils","LSSymmetricEncryptionCreateEncryptedData.nop","Promise","RetUtil"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f,g,i){var j=d("CryptoLogger").CryptoLogger("symmetric_encryption_create_encrypted_string");return c("LSSymmetricEncryptionCreateEncryptedData.nop")(a,e,f,g,d("LSCryptoUtils").strToBuf(i)).then(function(a){return a[0]}).then(function(a){return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult(a?d("Base64Utils").fromArrayBuffer(a):void 0))})["catch"](function(a){d("CryptoLogger").captureError(j,a).mustfix("symmetric string encryption failed");return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult())})};g["default"]=a}),98);
__d("LSEncryptMessagePayloadV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSLogMebClientEvent.nop","LSSymmetricEncryptionCreateEncryptedString.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][encryptMessagePayloadV2] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[2]=a[2].get("message_payload_encryption_keys"),a[2],d[3]=d[2].get("payload_key"),d[2],c.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedString.nop"),d[3],c.blobs.of_string(["message_thread","_",a[1]].join("")),a[3]).then(function(a){return a=a,d[4]=a[0],a})},function(e){return d[4]!==void 0?c.sequence([function(a){return d[13]=d[2].get("encryption_version"),d[2],d[14]=d[2].get("epoch_anon_id"),d[2],d[15]=d[2].get("epoch_root_key"),d[2],d[16]=d[2].get("payload_key"),d[2],d[17]=c.createArray(),d[45]=(d[17].push(c.i64.cast([0,6])),d[17]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_anon_id_debug").then(function(a){return a=a,d[18]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[18],void 0,d[14],d[17]).then(function(a){return a=a,d[19]=a[0],a})},function(a){return d[19]?d[20]=!1:d[20]=!0,d[20]?c.resolve(d[21]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[19],c.i64.cast([0,0])).then(function(a){return a=a,d[45]=a[0],d[46]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[45]).then(function(a){return a=a,d[47]=a[0],a})},function(a){return d[21]=d[47]==null?"":d[47]}])},function(a){return d[22]=c.createArray(),d[45]=(d[22].push(c.i64.cast([0,6])),d[22]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_root_key_debug").then(function(a){return a=a,d[23]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[23],void 0,d[15],d[22]).then(function(a){return a=a,d[24]=a[0],a})},function(a){return d[24]?d[25]=!1:d[25]=!0,d[25]?c.resolve(d[26]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[24],c.i64.cast([0,0])).then(function(a){return a=a,d[45]=a[0],d[46]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[45]).then(function(a){return a=a,d[47]=a[0],a})},function(a){return d[26]=d[47]==null?"":d[47]}])},function(a){return d[27]=c.createArray(),d[45]=(d[27].push(c.i64.cast([0,6])),d[27]),c.nativeOperation(b("LSGetBlobFromString.nop"),"message_key_debug").then(function(a){return a=a,d[28]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[28],void 0,d[16],d[27]).then(function(a){return a=a,d[29]=a[0],a})},function(a){return d[29]?d[30]=!1:d[30]=!0,d[30]?c.resolve(d[31]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[29],c.i64.cast([0,0])).then(function(a){return a=a,d[45]=a[0],d[46]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[45]).then(function(a){return a=a,d[47]=a[0],a})},function(a){return d[31]=d[47]==null?"":d[47]}])},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[15]).then(function(a){return a=a,d[32]=a[0],a})},function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),[d[32]==null?"":d[32],a[1]].join("")).then(function(a){return a=a,d[33]=a[0],a})},function(a){return d[34]=c.createArray(),d[45]=(d[34].push(c.i64.cast([0,6])),d[34]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_root_key_thread_id_debug").then(function(a){return a=a,d[35]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[35],void 0,d[33],d[34]).then(function(a){return a=a,d[36]=a[0],a})},function(a){return d[36]?d[37]=!1:d[37]=!0,d[37]?c.resolve(d[38]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[36],c.i64.cast([0,0])).then(function(a){return a=a,d[45]=a[0],d[46]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[45]).then(function(a){return a=a,d[47]=a[0],a})},function(a){return d[38]=d[47]==null?"":d[47]}])},function(a){return d[39]=":",c.blobs.neq(d[15],void 0)?c.sequence([function(a){return d[45]=c.createArray(),d[51]=(d[45].push(c.i64.cast([0,18])),d[45]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("bWViL2RlYnVnL2ZpbmdlcnByaW50L01FQkVwb2NoUm9vdEtleQ=="),void 0,d[15],d[45]).then(function(a){return a=a,d[46]=a[0],a})},function(a){return d[46]!==void 0?c.sequence([function(a){return d[51]=c.i64.of_int32(d[46].length),c.i64.ge(d[51],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[46],c.i64.cast([0,0])).then(function(a){return a=a,d[53]=a[0],d[54]=a[1],a})},function(a){return d[52]=d[53]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[53]=c.createArray(),void 0!==void 0?d[54]=(d[53].push(void 0),d[53]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint","CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",d[53],c.i64.cast([0,3]))},function(a){return d[52]=void 0}])},function(a){return d[47]=d[52]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[51]=c.createArray(),void 0!==void 0?d[52]=(d[51].push(void 0),d[51]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint","CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",d[51],c.i64.cast([0,3]))},function(a){return d[47]=void 0}])},function(a){return c.blobs.neq(d[47],void 0)?d[48]=!0:d[48]=!1,d[48]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),c.nativeOperation(b("LSBase64Encode.nop"),d[47]).then(function(a){return a=a,d[49]=a[0],a})},function(a){return d[49]!==void 0?d[50]=d[49]:d[50]="encodingfailed",d[40]=d[50]}]):c.resolve(d[40]="null")},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[14]).then(function(a){return a=a,d[41]=a[0],a})},function(b){return d[42]=new c.Map(),d[42].set("encryption_version",d[13]),d[42].set("epoch_anon_id",d[41]==null?"":d[41]),d[42].set("message_encryption_values",[d[21],d[39],d[26],d[39],d[31],d[39],d[38]].join("")),d[42].set("root_key_fingerprint",d[40]),d[42].set("backup_id",a[0]),d[43]=c.toJSON(d[42]),d[44]=new c.Map(),d[44].set("encrypted_message_payload",d[4]),d[44].set("value_secret_ref",d[43]),b=[d[44],void 0],d[5]=b[0],d[6]=b[1],b}]):c.resolve((d[13]=new c.Map(),d[13].set("error_code",c.i64.cast([0,40])),d[13].set("stored_procedure","LSEncryptedBackupsEncryptMessagePayloadV2StoredProcedure"),d[13].set("error_message",""),e=[void 0,d[13]],d[5]=e[0],d[6]=e[1],e))},function(a){return d[7]=c.i64.of_float(Date.now()),d[8]=c.i64.random(),d[10]="Finishing execution. Execution time: ",d[11]=c.i64.to_string(c.i64.sub(d[7],d[0])),d[12]=" ms",d[9]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][encryptMessagePayloadV2] ",d[9],d[10],d[9],d[11],d[9],d[12]].join("")),c.i64.eq(c.i64.mod_(d[8],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[13]=",",d[14]=c.createArray(),void 0!==void 0?d[15]=(d[14].push(void 0),d[14]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"encryptMessagePayloadV2",[d[10],d[13],d[11],d[13],d[12]].join(""),d[14],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[5],d[6]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsEncryptMessagePayloadV2StoredProcedure";e.exports=a}),null);
__d("LSGetLatestEpochKeys",["LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][getLatestEpochKeys] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[2]="",d[3]=void 0,d[4]=void 0,a[0]?c.resolve(0):(d[14]=void 0,c.i64.neq(d[14],void 0)?c.db.table(169).fetch([[[d[14]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?0:(b=a.item,d[2]=c.blobs.to_string(b.epochAnonIdBlob),d[3]=b.epochId,d[4]=b.epochRootKeyBlob)}):c.resolve())},function(b){return c.i64.neq(d[3],void 0)?c.resolve(0):c.forEach(c.filter(c.db.table(169).fetch(),function(b){return a[0]||c.i64.eq(b.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[15]=c.blobs.to_string(a.epochAnonIdBlob),c.i64.eq([0,d[15].length],[0,d[2].length])?d[14]=d[15]>d[2]:d[14]=c.i64.gt([0,d[15].length],[0,d[2].length]),d[14]?(d[2]=d[15],d[3]=a.epochId,d[4]=a.epochRootKeyBlob,d[16]=c.i64.of_float(Date.now()),0):0})},function(a){return d[10]=c.blobs.of_string(d[2]),c.i64.neq(d[3],void 0)?(c.blobs.neq(d[10],void 0)?(c.blobs.neq(d[4],void 0)?(d[18]=new c.Map(),d[18].set("epoch_id",d[3]),d[18].set("epoch_root_key",d[4]),d[18].set("epoch_anon_id",d[10]),d[19]=new c.Map(),d[19].set("epoch_keys",d[18]),a=[d[19],void 0],d[16]=a[0],d[17]=a[1],a):(d[18]=new c.Map(),d[18].set("error_code",c.i64.cast([0,402])),d[18].set("error_message","failed to query latest epoch"),d[18].set("stored_procedure","LSEncryptedBackupsGetLatestEpochKeysStoredProcedure"),a=[void 0,d[18]],d[16]=a[0],d[17]=a[1],a),a=[d[16],d[17]],d[14]=a[0],d[15]=a[1],a):(d[16]=new c.Map(),d[16].set("error_code",c.i64.cast([0,403])),d[16].set("error_message","failed to query latest epoch"),d[16].set("stored_procedure","LSEncryptedBackupsGetLatestEpochKeysStoredProcedure"),a=[void 0,d[16]],d[14]=a[0],d[15]=a[1],a),a=[d[14],d[15]],d[5]=a[0],d[6]=a[1],a):(d[14]=new c.Map(),d[14].set("error_code",c.i64.cast([0,400])),d[14].set("error_message","failed to query latest epoch"),d[14].set("stored_procedure","LSEncryptedBackupsGetLatestEpochKeysStoredProcedure"),a=[void 0,d[14]],d[5]=a[0],d[6]=a[1],a),d[7]=c.i64.of_float(Date.now()),d[8]=c.i64.random(),d[11]="Finishing execution. Execution time: ",d[12]=c.i64.to_string(c.i64.sub(d[7],d[0])),d[13]=" ms",d[9]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][getLatestEpochKeys] ",d[9],d[11],d[9],d[12],d[9],d[13]].join("")),c.i64.eq(c.i64.mod_(d[8],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[14]=",",d[15]=c.createArray(),void 0!==void 0?d[16]=(d[15].push(void 0),d[15]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"getLatestEpochKeys",[d[11],d[14],d[12],d[14],d[13]].join(""),d[15],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[5],d[6]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsGetLatestEpochKeysStoredProcedure";e.exports=a}),null);
__d("LSLoadAndEncryptProtobufWithInputsV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSHmac_v2.nop","LSLogMebClientEvent.nop","LSQueryLocalPersistenceStoreForBackup.nop","LSQueryLocalPersistenceStoreSupplementalForBackup.nop","LSQueryLocalPersistenceStoreTagsForBackup.nop","LSSymmetricEncryptionCreateEncryptedData.nop","gkx"],(function(a,b,c,d,e,f,g){function a(){var a=arguments,d=a[a.length-1],e=[],f=[];return d.sequence([function(g){return d.sequence([function(f){return e[0]=d.i64.of_float(Date.now()),function(a){d.logger(a).info(a)}("[EncryptedBackups][loadAndEncryptProtobufWithInputsV2] Beginning execution."),e[1]=d.i64.of_float(Date.now()),(c("gkx")("23657")||c("gkx")("26375"))&&(c("gkx")("26377")||c("gkx")("687"))?d.sequence([function(c){return d.i64.eq(a[0],d.i64.cast([0,1]))?d.sequence([function(c){return d.nativeOperation(b("LSQueryLocalPersistenceStoreForBackup.nop"),a[1],a[2]).then(function(a){return a=a,e[12]=a[0],e[13]=a[1],e[14]=a[2],a})},function(c){return d.nativeOperation(b("LSQueryLocalPersistenceStoreTagsForBackup.nop"),a[1],a[2]).then(function(a){return a=a,e[15]=a[0],a})},function(c){return d.blobs.neq(e[12],void 0)?d.sequence([function(c){return e[18]=a[5].get("message_payload_encryption_keys"),a[5],e[19]=e[18].get("payload_key"),e[18],d.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedData.nop"),e[19],d.blobs.of_string(["message_thread","_",a[1]].join("")),e[12]).then(function(a){return a=a,e[20]=a[0],a})},function(a){return d.blobs.neq(e[20],void 0)?d.sequence([function(a){return d.nativeOperation(b("LSBase64Encode.nop"),e[20]).then(function(a){return a=a,e[24]=a[0],a})},function(a){return e[21]=e[24]}]):d.resolve(e[21]=void 0)},function(b){return e[21]!==void 0?(e[15]!==void 0?(e[26]=new d.Map(),e[26].set("message_tags",e[15]),e[27]=new d.Map(),e[31]="message_tags",e[28]=e[26].get(e[31]),e[26],e[28]?e[29]=!1:e[29]=!0,e[29]?0:e[27].set(e[31],e[28]),e[30]=d.toJSON(e[27]),e[24]=e[30]):e[24]=void 0,e[25]=new d.Map(),e[25].set("backup_action",a[0]),e[25].set("protobuf_encrypted",e[21]),e[25].set("supplemental_data_encrypted",void 0),e[25].set("timestamp_ms",a[4]),e[25].set("message_tags",e[24]),e[25].set("serialized_attachment_backup_payload",void 0),b=[e[25],void 0],e[22]=b[0],e[23]=b[1],b):(function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ENCRYPTION_FAILED"),e[24]=new d.Map(),e[24].set("error_code",d.i64.cast([0,62])),e[24].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),e[24].set("error_message",""),b=[void 0,e[24]],e[22]=b[0],e[23]=b[1],b),b=[e[22],e[23]],e[16]=b[0],e[17]=b[1],b}]):d.resolve((e[14]?(function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ALREADY_DELETED"),e[20]=new d.Map(),e[20].set("error_code",d.i64.cast([0,70])),e[20].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),e[20].set("error_message",""),c=[void 0,e[20]],e[18]=c[0],e[19]=c[1],c):(function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_TOPLEVEL_TABLE"),e[20]=new d.Map(),e[20].set("error_code",d.i64.cast([0,63])),e[20].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),e[20].set("error_message",""),c=[void 0,e[20]],e[18]=c[0],e[19]=c[1],c),c=[e[18],e[19]],e[16]=c[0],e[17]=c[1],c))},function(a){return a=[e[16],e[17]],e[10]=a[0],e[11]=a[1],a}]):d.sequence([function(c){return d.i64.eq(a[0],d.i64.cast([0,2]))?d.sequence([function(c){return a[3]!==void 0?d.sequence([function(c){return d.nativeOperation(b("LSQueryLocalPersistenceStoreSupplementalForBackup.nop"),a[1],a[2],a[3]).then(function(a){return a=a,e[16]=a[0],e[17]=a[1],a})},function(c){return d.nativeOperation(b("LSQueryLocalPersistenceStoreTagsForBackup.nop"),a[1],a[2]).then(function(a){return a=a,e[18]=a[0],a})},function(c){return d.blobs.neq(e[16],void 0)?d.sequence([function(c){return e[21]=a[5].get("mailbox_root_key_v2"),a[5],d.blobs.neq(e[21],void 0)?d.sequence([function(c){return e[24]=a[5].get("message_payload_encryption_keys"),a[5],e[25]=e[24].get("epoch_root_key"),e[24],e[26]=d.createArray(),e[39]=(e[26].push(d.i64.cast([0,32])),e[26]),d.nativeOperation(b("LSCreateDerivedKeys.nop"),d.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleV92Mj5zdXBwbGVtZW50YWxfcHJmX2tleQ=="),void 0,e[21],e[26]).then(function(a){return a=a,e[27]=a[0],a})},function(a){return e[27]!==void 0?d.sequence([function(a){return e[39]=d.i64.of_int32(e[27].length),d.i64.ge(e[39],d.i64.cast([0,1]))?d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[27],d.i64.cast([0,0])).then(function(a){return a=a,e[41]=a[0],e[42]=a[1],a})},function(a){return e[40]=e[41]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),e[41]=d.createArray(),void 0!==void 0?e[42]=(e[41].push(void 0),e[41]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",e[41],d.i64.cast([0,3]))},function(a){return e[40]=void 0}])},function(a){return e[28]=e[40]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),e[39]=d.createArray(),void 0!==void 0?e[40]=(e[39].push(void 0),e[39]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",e[39],d.i64.cast([0,3]))},function(a){return e[28]=void 0}])},function(a){return d.blobs.neq(e[28],void 0)?e[29]=!0:e[29]=!1,e[29]?0:(function(a){d.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),d["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),e[30]=d.createArray(),e[39]=(e[30].push(d.i64.cast([0,32])),e[30]),d.nativeOperation(b("LSCreateDerivedKeys.nop"),d.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleV92Mj5zdXBwbGVtZW50YWxfZW5jX2tleQ=="),void 0,e[25],e[30]).then(function(a){return a=a,e[31]=a[0],a})},function(a){return e[31]!==void 0?d.sequence([function(a){return e[39]=d.i64.of_int32(e[31].length),d.i64.ge(e[39],d.i64.cast([0,1]))?d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[31],d.i64.cast([0,0])).then(function(a){return a=a,e[41]=a[0],e[42]=a[1],a})},function(a){return e[40]=e[41]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),e[41]=d.createArray(),void 0!==void 0?e[42]=(e[41].push(void 0),e[41]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",e[41],d.i64.cast([0,3]))},function(a){return e[40]=void 0}])},function(a){return e[32]=e[40]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),e[39]=d.createArray(),void 0!==void 0?e[40]=(e[39].push(void 0),e[39]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",e[39],d.i64.cast([0,3]))},function(a){return e[32]=void 0}])},function(c){return d.blobs.neq(e[32],void 0)?e[33]=!0:e[33]=!1,e[33]?0:(function(a){d.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),d["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),d.nativeOperation(b("LSGetBlobFromString.nop"),a[3]).then(function(a){return a=a,e[34]=a[0],a})},function(a){return d.nativeOperation(b("LSHmac_v2.nop"),e[28],e[34]).then(function(a){return a=a,e[35]=a[0],a})},function(a){return d.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedData.nop"),e[32],d.blob("c3VwcGxlbWVudGFsX2VuY19hYWQ="),e[34]).then(function(a){return a=a,e[36]=a[0],a})},function(c){return d.blobs.neq(e[36],void 0)?d.sequence([function(c){return e[39]=new d.Map(),e[39].set("sk_ciphertext",e[36]),e[39].set("sk_hash",e[35]),e[40]=a[5].get("message_payload_encryption_keys"),a[5],e[41]=e[40].get("payload_key"),e[40],d.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedData.nop"),e[41],d.blobs.of_string(["message_thread","_",a[1]].join("")),e[16]).then(function(a){return a=a,e[42]=a[0],a})},function(a){return d.blobs.neq(e[42],void 0)?d.sequence([function(a){return d.nativeOperation(b("LSBase64Encode.nop"),e[42]).then(function(a){return a=a,e[46]=a[0],a})},function(a){return e[43]=e[46]}]):d.resolve(e[43]=void 0)},function(b){return e[43]!==void 0?(e[18]!==void 0?(e[48]=new d.Map(),e[48].set("message_tags",e[18]),e[49]=new d.Map(),e[53]="message_tags",e[50]=e[48].get(e[53]),e[48],e[50]?e[51]=!1:e[51]=!0,e[51]?0:e[49].set(e[53],e[50]),e[52]=d.toJSON(e[49]),e[46]=e[52]):e[46]=void 0,e[47]=new d.Map(),e[47].set("backup_action",a[0]),e[47].set("protobuf_encrypted",e[43]),e[47].set("supplemental_data_encrypted",e[39]),e[47].set("timestamp_ms",a[4]),e[47].set("message_tags",e[46]),e[47].set("serialized_attachment_backup_payload",void 0),b=[e[47],void 0],e[44]=b[0],e[45]=b[1],b):(function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ENCRYPTION_FAILED"),e[46]=new d.Map(),e[46].set("error_code",d.i64.cast([0,62])),e[46].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),e[46].set("error_message",""),b=[void 0,e[46]],e[44]=b[0],e[45]=b[1],b),b=[e[44],e[45]],e[37]=b[0],e[38]=b[1],b}]):d.resolve((function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error SUPPLEMENTAL_ENCRYPTION_FAILED"),e[39]=new d.Map(),e[39].set("error_code",d.i64.cast([0,66])),e[39].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),e[39].set("error_message",""),c=[void 0,e[39]],e[37]=c[0],e[38]=c[1],c))},function(a){return a=[e[37],e[38]],e[22]=a[0],e[23]=a[1],a}]):d.resolve((function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error NULL_MAILBOX_ROOT_KEY_V2"),e[24]=new d.Map(),e[24].set("error_code",d.i64.cast([0,27])),e[24].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),e[24].set("error_message",""),c=[void 0,e[24]],e[22]=c[0],e[23]=c[1],c))},function(a){return a=[e[22],e[23]],e[19]=a[0],e[20]=a[1],a}]):d.resolve((function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_SUPPLEMENTAL_TABLE"),e[21]=new d.Map(),e[21].set("error_code",d.i64.cast([0,64])),e[21].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),e[21].set("error_message",""),c=[void 0,e[21]],e[19]=c[0],e[20]=c[1],c))},function(a){return a=[e[19],e[20]],e[14]=a[0],e[15]=a[1],a}]):d.resolve((function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error SUPPLEMENTAL_KEY_NOT_SET_IN_CONTEXT_TABLE"),e[16]=new d.Map(),e[16].set("error_code",d.i64.cast([0,65])),e[16].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),e[16].set("error_message",""),c=[void 0,e[16]],e[14]=c[0],e[15]=c[1],c))},function(a){return a=[e[14],e[15]],e[12]=a[0],e[13]=a[1],a}]):d.sequence([function(c){return d.i64.eq(a[0],d.i64.cast([0,4]))?d.sequence([function(c){return d.nativeOperation(b("LSQueryLocalPersistenceStoreForBackup.nop"),a[1],a[2]).then(function(a){return a=a,e[16]=a[0],e[17]=a[1],e[18]=a[2],a})},function(c){return d.nativeOperation(b("LSQueryLocalPersistenceStoreTagsForBackup.nop"),a[1],a[2]).then(function(a){return a=a,e[19]=a[0],a})},function(c){return d.blobs.neq(e[16],void 0)?d.sequence([function(c){return e[22]=a[5].get("message_payload_encryption_keys"),a[5],e[23]=e[22].get("payload_key"),e[22],d.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedData.nop"),e[23],d.blobs.of_string(["message_thread","_",a[1]].join("")),e[16]).then(function(a){return a=a,e[24]=a[0],a})},function(a){return d.blobs.neq(e[24],void 0)?d.sequence([function(a){return d.nativeOperation(b("LSBase64Encode.nop"),e[24]).then(function(a){return a=a,e[28]=a[0],a})},function(a){return e[25]=e[28]}]):d.resolve(e[25]=void 0)},function(b){return e[25]!==void 0?(e[19]!==void 0?(e[30]=new d.Map(),e[30].set("message_tags",e[19]),e[31]=new d.Map(),e[35]="message_tags",e[32]=e[30].get(e[35]),e[30],e[32]?e[33]=!1:e[33]=!0,e[33]?0:e[31].set(e[35],e[32]),e[34]=d.toJSON(e[31]),e[28]=e[34]):e[28]=void 0,e[29]=new d.Map(),e[29].set("backup_action",a[0]),e[29].set("protobuf_encrypted",e[25]),e[29].set("supplemental_data_encrypted",void 0),e[29].set("timestamp_ms",a[4]),e[29].set("message_tags",e[28]),e[29].set("serialized_attachment_backup_payload",void 0),b=[e[29],void 0],e[26]=b[0],e[27]=b[1],b):(function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ENCRYPTION_FAILED"),e[28]=new d.Map(),e[28].set("error_code",d.i64.cast([0,62])),e[28].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),e[28].set("error_message",""),b=[void 0,e[28]],e[26]=b[0],e[27]=b[1],b),b=[e[26],e[27]],e[20]=b[0],e[21]=b[1],b}]):d.resolve((e[18]?(function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ALREADY_DELETED"),e[24]=new d.Map(),e[24].set("error_code",d.i64.cast([0,70])),e[24].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),e[24].set("error_message",""),c=[void 0,e[24]],e[22]=c[0],e[23]=c[1],c):(function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_TOPLEVEL_TABLE"),e[24]=new d.Map(),e[24].set("error_code",d.i64.cast([0,63])),e[24].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),e[24].set("error_message",""),c=[void 0,e[24]],e[22]=c[0],e[23]=c[1],c),c=[e[22],e[23]],e[20]=c[0],e[21]=c[1],c))},function(a){return a=[e[20],e[21]],e[14]=a[0],e[15]=a[1],a}]):d.resolve((d.i64.eq(a[0],d.i64.cast([0,3]))?(e[18]=new d.Map(),e[18].set("backup_action",a[0]),e[18].set("protobuf_encrypted",void 0),e[18].set("supplemental_data_encrypted",void 0),e[18].set("timestamp_ms",a[4]),e[18].set("message_tags",void 0),e[18].set("serialized_attachment_backup_payload",void 0),c=[e[18],void 0],e[16]=c[0],e[17]=c[1],c):(function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error UNKNOWN"),e[18]=new d.Map(),e[18].set("error_code",d.i64.cast([0,603])),e[18].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),e[18].set("error_message",""),c=[void 0,e[18]],e[16]=c[0],e[17]=c[1],c),c=[e[16],e[17]],e[14]=c[0],e[15]=c[1],c))},function(a){return a=[e[14],e[15]],e[12]=a[0],e[13]=a[1],a}])},function(a){return a=[e[12],e[13]],e[10]=a[0],e[11]=a[1],a}])},function(a){return a=[e[10],e[11]],e[2]=a[0],e[3]=a[1],a}]):d.resolve((function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error NOT_SUPPORTED_ON_WEB"),e[10]=new d.Map(),e[10].set("error_code",d.i64.cast([0,7])),e[10].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),e[10].set("error_message",""),f=[void 0,e[10]],e[2]=f[0],e[3]=f[1],f))},function(a){return e[4]=d.i64.of_float(Date.now()),e[5]=d.i64.random(),e[7]="Finishing execution. Execution time: ",e[8]=d.i64.to_string(d.i64.sub(e[4],e[0])),e[9]=" ms",e[6]="",function(a){d.logger(a).info(a)}(["[EncryptedBackups][loadAndEncryptProtobufWithInputsV2] ",e[6],e[7],e[6],e[8],e[6],e[9]].join("")),d.i64.eq(d.i64.mod_(e[5],d.i64.cast([0,1e3])),d.i64.cast([0,0]))?(e[10]=",",e[11]=d.createArray(),void 0!==void 0?e[12]=(e[11].push(void 0),e[11]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"loadAndEncryptProtobufWithInputsV2",[e[7],e[10],e[8],e[10],e[9]].join(""),e[11],d.i64.cast([0,4]))):d.resolve()},function(a){return a=[e[2],e[3]],f[0]=a[0],f[1]=a[1],a}])},function(a){return d.resolve(f)}])}a.__sproc_name__="LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure";d=a;g["default"]=d}),98);
__d("LSLoadAndEncryptProtobufV2",["LSLoadAndEncryptProtobufWithInputsV2","LSLogMebClientEvent.nop","gkx"],(function(a,b,c,d,e,f,g){function a(){var a=arguments,d=a[a.length-1],e=[],f=[];return d.sequence([function(g){return d.sequence([function(f){return e[0]=d.i64.of_float(Date.now()),function(a){d.logger(a).info(a)}("[EncryptedBackups][loadAndEncryptProtobufV2] Beginning execution."),e[1]=d.i64.of_float(Date.now()),(c("gkx")("23657")||c("gkx")("26375"))&&(c("gkx")("26377")||c("gkx")("687"))?d.sequence([function(c){return d.filter(d.db.table(305).fetch(),function(b){return d.i64.eq(b.pendingBackupTaskId,a[0])}).next().then(function(c,f){var g=c.done;c=c.value;return g?(function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufV2StoredProcedure] Returning error PROTOBUF_CONTEXT_ROW_NOT_FOUND"),e[13]=new d.Map(),e[13].set("error_code",d.i64.cast([0,67])),e[13].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufV2StoredProcedure"),e[13].set("error_message",""),g=[void 0,e[13]],e[10]=g[0],e[11]=g[1],g):(f=c.item,d.sequence([function(c){return d.storedProcedure(b("LSLoadAndEncryptProtobufWithInputsV2"),f.backupAction,a[2],f.toplevelOfflineThreadingId,f.supplementalKey,f.messageTimestampMs,a[1]).then(function(a){return a=a,e[13]=a[0],e[14]=a[1],a})},function(a){return a=[e[13],e[14]],e[10]=a[0],e[11]=a[1],a}]))})},function(a){return a=[e[10],e[11]],e[2]=a[0],e[3]=a[1],a}]):d.resolve((function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufV2StoredProcedure] Returning error NOT_SUPPORTED_ON_WEB"),e[10]=new d.Map(),e[10].set("error_code",d.i64.cast([0,7])),e[10].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufV2StoredProcedure"),e[10].set("error_message",""),f=[void 0,e[10]],e[2]=f[0],e[3]=f[1],f))},function(a){return e[4]=d.i64.of_float(Date.now()),e[5]=d.i64.random(),e[7]="Finishing execution. Execution time: ",e[8]=d.i64.to_string(d.i64.sub(e[4],e[0])),e[9]=" ms",e[6]="",function(a){d.logger(a).info(a)}(["[EncryptedBackups][loadAndEncryptProtobufV2] ",e[6],e[7],e[6],e[8],e[6],e[9]].join("")),d.i64.eq(d.i64.mod_(e[5],d.i64.cast([0,1e3])),d.i64.cast([0,0]))?(e[10]=",",e[11]=d.createArray(),void 0!==void 0?e[12]=(e[11].push(void 0),e[11]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"loadAndEncryptProtobufV2",[e[7],e[10],e[8],e[10],e[9]].join(""),e[11],d.i64.cast([0,4]))):d.resolve()},function(a){return a=[e[2],e[3]],f[0]=a[0],f[1]=a[1],a}])},function(a){return d.resolve(f)}])}a.__sproc_name__="LSEncryptedBackupsLoadAndEncryptProtobufV2StoredProcedure";d=a;g["default"]=d}),98);
__d("LSSerializeBackupPayloadV2",["LSAppendDataTraceAddon","LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSDeriveValueSecretRefV2","LSEncryptIdentifiersV2","LSEncryptMessagePayloadV2","LSGetBlobFromString.nop","LSGetLatestEpochKeys","LSIsEncryptionVersionSecure","LSIsMobileClient","LSLoadAndEncryptProtobufV2","LSLogMebClientEvent.nop","LSLogWebQpl.nop","gkx","justknobx"],(function(a,b,c,d,e,f,g){function a(){var a=arguments,d=a[a.length-1],e=[],f=[];return d.sequence([function(g){return d.sequence([function(f){return e[0]=d.i64.of_float(Date.now()),function(a){d.logger(a).info(a)}("[EncryptedBackups][serializeBackupPayloadV2] Beginning execution."),e[1]=d.i64.of_float(Date.now()),e[9]=d.i64.mul(e[1],d.i64.cast([0,1e6])),(c("gkx")("23657")||c("gkx")("26375"))&&c("justknobx")._("1071")?d.sequence([function(c){return d.islc(d.filter(d.db.table(168).fetch(),function(a){return d.i64.eq(a.authorityLevel,d.i64.cast([0,80]))||!1}),0,d.i64.to_float(d.i64.cast([0,1]))).next().then(function(c,f){var g=c.done;c=c.value;return g?d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[30]=d.i64.of_float(Date.now()),b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[30],d.i64.cast([0,1e6])),e[9]),void 0],e[18]=b[0],e[19]=b[1],e[20]=b[2],e[21]=b[3],e[22]=b[4],e[23]=b[5],e[24]=b[6],b):(f=c.item,e[30]=d.i64.of_float(Date.now()),b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[30],d.i64.cast([0,1e6])),e[9]),void 0],e[18]=b[0],e[19]=b[1],e[20]=b[2],e[21]=b[3],e[22]=b[4],e[23]=b[5],e[24]=b[6],b)})},function(a){return e[26]=new d.Map(),e[26].set("task_id",e[18]),e[26].set("queue_name",e[19]),e[26].set("enqueue_timestamp_ms",e[20]),e[26].set("priority",e[21]),e[26].set("first_executed_timestamp_ms",e[22]),e[26].set("execution_time_ns",e[23]),e[26].set("echo_encoding_execution_time_ns",e[24]),e[27]=new d.Map(),e[27].set("task_metadata",e[26]),e[27].set("action_type",void 0),e[27].set("content_type",void 0),e[27].set("identifiers",void 0),e[27].set("identifiers_v2",void 0),e[27].set("task_creation_source",void 0),e[27].set("message_payload_source",d.i64.cast([0,2])),e[28]=new d.Map(),e[28].set("error_code",d.i64.cast([0,1])),e[28].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),e[28].set("error_message",""),e[29]=d.createArray(),a=[void 0,e[28],e[27],e[29]],e[13]=a[0],e[14]=a[1],e[15]=a[2],e[16]=a[3],a}]):(f=c.item,d.sequence([function(a){return e[28]=f.mailboxRootKeyBlob,e[29]=f.deviceId,e[27]=f.backupTenancy,e[26]=f.encryptionVersion,e[18]=void 0,d.i64.neq(e[18],void 0)?d.resolve(e[19]=e[18]):d.sequence([function(a){return e[30]=d.createArray(),d.storedProcedure(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,0])).then(function(a){return a=a,e[31]=a[0],a})},function(a){return e[31]?e[40]=(e[30].push(d.i64.cast([0,0])),e[30]):0,d.storedProcedure(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,2])).then(function(a){return a=a,e[32]=a[0],a})},function(a){return e[32]?e[40]=(e[30].push(d.i64.cast([0,2])),e[30]):0,d.storedProcedure(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,3])).then(function(a){return a=a,e[33]=a[0],a})},function(a){return e[33]?e[40]=(e[30].push(d.i64.cast([0,3])),e[30]):0,d.storedProcedure(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,4])).then(function(a){return a=a,e[34]=a[0],a})},function(a){return e[34]?e[40]=(e[30].push(d.i64.cast([0,4])),e[30]):0,e[35]=d.createArray(),e[36]=d.i64.of_int32(e[30].length),d.i64.gt(e[36],d.i64.cast([0,0]))?d.loopAsync(e[36],function(a){return e[40]=a,d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[30],e[40]).then(function(a){return a=a,e[41]=a[0],e[42]=a[1],a})},function(a){return e[43]=(e[35].push(e[41]),e[35])}])}):d.resolve()},function(a){return d.sequence([function(a){return e[40]=d.createArray(),e[41]=d.i64.of_int32(e[35].length),d.i64.gt(e[41],d.i64.cast([0,0]))?d.loopAsync(e[41],function(a){return e[43]=a,d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[35],e[43]).then(function(a){return a=a,e[44]=a[0],e[45]=a[1],a})},function(a){return e[46]=(e[40].push(d.i64.to_string(e[44])),e[40])}])}):d.resolve()},function(a){return e[42]=e[40].join(","),e[37]=e[42]}])},function(a){return e[35].some(function(a){return d.i64.eq(e[26],a)})?e[38]=e[26]:e[38]=void 0,d.i64.neq(e[38],void 0)?e[39]=e[38]:e[39]=void 0,e[19]=e[39]}])},function(c){return d.i64.neq(e[19],void 0)?e[20]=e[19]:e[20]=d.i64.cast([0,0]),d.i64.neq(e[27],void 0)?e[21]=e[27]:e[21]=d.i64.cast([0,1]),d.i64.neq(e[29],void 0)?d.sequence([function(c){return d.db.table(177).fetch([[[a[0]]],"fk_pending_tasks"]).next().then(function(g,h){var c=g.done;g=g.value;return c?d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[47]=d.i64.of_float(Date.now()),b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[47],d.i64.cast([0,1e6])),e[9]),void 0],e[35]=b[0],e[36]=b[1],e[37]=b[2],e[38]=b[3],e[39]=b[4],e[40]=b[5],e[41]=b[6],b):(f=c.item,e[47]=d.i64.of_float(Date.now()),b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[47],d.i64.cast([0,1e6])),e[9]),void 0],e[35]=b[0],e[36]=b[1],e[37]=b[2],e[38]=b[3],e[39]=b[4],e[40]=b[5],e[41]=b[6],b)})},function(a){return e[43]=new d.Map(),e[43].set("task_id",e[35]),e[43].set("queue_name",e[36]),e[43].set("enqueue_timestamp_ms",e[37]),e[43].set("priority",e[38]),e[43].set("first_executed_timestamp_ms",e[39]),e[43].set("execution_time_ns",e[40]),e[43].set("echo_encoding_execution_time_ns",e[41]),e[44]=new d.Map(),e[44].set("task_metadata",e[43]),e[44].set("action_type",void 0),e[44].set("content_type",void 0),e[44].set("identifiers",void 0),e[44].set("identifiers_v2",void 0),e[44].set("task_creation_source",void 0),e[44].set("message_payload_source",d.i64.cast([0,2])),e[45]=new d.Map(),e[45].set("error_code",d.i64.cast([0,5])),e[45].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),e[45].set("error_message","Pending backup context row not found"),e[46]=d.createArray(),a=[void 0,e[45],e[44],e[46]],e[30]=a[0],e[31]=a[1],e[32]=a[2],e[33]=a[3],a}]):(h=g.item,d.sequence([function(c){return e[40]=h.actionType,e[41]=h.contentType,e[45]=h.echoContent,e[43]=h.lsTraceId,e[44]=h.echoEncodingLatencyNs,e[42]=h.attachmentPayload,e[46]=h.tamThreadSubtype,e[47]=h.isInstamadillo,e[35]=new d.Map(),e[35].set("backup_id",d.i64.to_string(f.backupId)),e[35].set("act_thread_id",h.listKey),e[35].set("timestamp",h.sortKey),e[35].set("otid",h.uniqueKey),e[48]=h.error==null?d.i64.cast([0,0]):h.error,d.i64.eq(e[48],d.i64.cast([0,0]))?d.sequence([function(a){return e[49]=e[35].get("act_thread_id"),e[35],e[50]=e[35].get("otid"),e[35],d.storedProcedure(b("LSGetLatestEpochKeys"),!1).then(function(a){return a=a,e[51]=a[0],e[52]=a[1],a})},function(a){return e[51]!==void 0?d.sequence([function(a){return d.i64.eq(e[41],d.i64.cast([0,1]))?d.sequence([function(a){return e[62]=d.createArray(),e[67]=(e[62].push(d.i64.cast([0,32])),e[62]),d.nativeOperation(b("LSGetBlobFromString.nop"),["thread_ope_key","_",e[49]].join("")).then(function(a){return a=a,e[63]=a[0],a})},function(a){return d.nativeOperation(b("LSCreateDerivedKeys.nop"),e[63],void 0,e[28],e[62]).then(function(a){return a=a,e[64]=a[0],a})},function(a){return e[64]?e[65]=!1:e[65]=!0,e[65]?d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] Got null keys while deriving message list OPE key. Returning null blobish"),e[67]=d.createArray(),void 0!==void 0?e[68]=(e[67].push(void 0),e[67]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","Got null keys while deriving message list OPE key. Returning null blobish",e[67],d.i64.cast([0,3]))},function(a){return e[66]=void 0}]):d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[64],d.i64.cast([0,0])).then(function(a){return a=a,e[67]=a[0],e[68]=a[1],a})},function(a){return e[66]=e[67]}])},function(a){return e[59]=e[66]}]):d.sequence([function(a){return d.i64.eq(e[40],d.i64.cast([0,2]))?d.sequence([function(a){return e[63]=d.createArray(),e[68]=(e[63].push(d.i64.cast([0,32])),e[63]),d.nativeOperation(b("LSGetBlobFromString.nop"),["thread_ope_key","_",e[50]].join("")).then(function(a){return a=a,e[64]=a[0],a})},function(a){return d.nativeOperation(b("LSCreateDerivedKeys.nop"),e[64],void 0,e[28],e[63]).then(function(a){return a=a,e[65]=a[0],a})},function(a){return e[65]?e[66]=!1:e[66]=!0,e[66]?d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] Got null keys while deriving message list OPE key. Returning null blobish"),e[68]=d.createArray(),void 0!==void 0?e[69]=(e[68].push(void 0),e[68]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","Got null keys while deriving message list OPE key. Returning null blobish",e[68],d.i64.cast([0,3]))},function(a){return e[67]=void 0}]):d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[65],d.i64.cast([0,0])).then(function(a){return a=a,e[68]=a[0],e[69]=a[1],a})},function(a){return e[67]=e[68]}])},function(a){return e[62]=e[67]}]):d.resolve(e[62]=void 0)},function(a){return e[59]=e[62]}])},function(a){return d.blobs.neq(e[59],void 0)?d.sequence([function(a){return e[62]=e[51].get("epoch_keys"),e[51],e[63]=e[62].get("epoch_anon_id"),e[62],e[64]=e[62].get("epoch_root_key"),e[62],e[65]=d.createArray(),e[76]=(e[65].push(d.i64.cast([0,32])),e[65]),d.i64.ge(e[20],d.i64.cast([0,3]))?d.resolve(e[66]=void 0):d.sequence([function(a){return d.nativeOperation(b("LSGetBlobFromString.nop"),e[49]).then(function(a){return a=a,e[76]=a[0],a})},function(a){return e[66]=e[76]}])},function(a){return d.i64.ge(e[20],d.i64.cast([0,4]))?(e[76]="_",e[67]=["message_key_in_epoch",e[76],d.blobs.to_string(e[63]),e[76],"cipher_version",e[76],d.i64.to_string(e[20]),e[76],"thread",e[76],e[49]==null?"":e[49]].join("")):(d.i64.ge(e[20],d.i64.cast([0,3]))?(e[77]="_",e[76]=["message_key_in_epoch",e[77],d.blobs.to_string(e[63]),e[77],"cipher_version",e[77],d.i64.to_string(e[20]),e[77],"thread",e[77],e[49]==null?"":e[49]].join("")):(d.i64.ge(e[20],d.i64.cast([0,2]))?(e[78]="_",e[77]=["message_key_in_epoch",e[78],d.blobs.to_string(e[63]),e[78],"cipher_version",e[78],d.i64.to_string(e[20])].join("")):e[77]=["message_key_in_epoch","_",d.blobs.to_string(e[63])].join(""),e[76]=e[77]),e[67]=e[76]),d.nativeOperation(b("LSGetBlobFromString.nop"),e[67]).then(function(a){return a=a,e[68]=a[0],a})},function(a){return d.nativeOperation(b("LSCreateDerivedKeys.nop"),e[68],e[66],e[64],e[65]).then(function(a){return a=a,e[69]=a[0],a})},function(a){return e[69]?e[70]=!1:e[70]=!0,e[70]?d.resolve(e[71]=void 0):d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[69],d.i64.cast([0,0])).then(function(a){return a=a,e[76]=a[0],e[77]=a[1],a})},function(a){return e[71]=e[76]}])},function(a){return d.filter(d.db.table(169).fetch(),function(a){return d.blobs.eq(a.epochAnonIdBlob,d.blob("MA=="))}).next().then(function(c,f){var a=c.done;c=c.value;return a?d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTableUtils] Failed to get mailbox_root_key_v2: epoch 0 is not available."),e[76]=d.createArray(),void 0!==void 0?e[77]=(e[76].push(void 0),e[76]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTableUtils","Failed to get mailbox_root_key_v2: epoch 0 is not available.",e[76],d.i64.cast([0,3]))},function(a){return e[72]=void 0}]):(f=c.item,d.sequence([function(a){return e[76]=d.createArray(),e[84]=(e[76].push(d.i64.cast([0,32])),e[76]),d.nativeOperation(b("LSCreateDerivedKeys.nop"),d.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleT5zYWx0X21haWxib3hfcm9vdF9rZXlfdjI="),void 0,e[28],e[76]).then(function(a){return a=a,e[77]=a[0],a})},function(a){return e[77]!==void 0?d.sequence([function(a){return e[84]=d.i64.of_int32(e[77].length),d.i64.ge(e[84],d.i64.cast([0,1]))?d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[77],d.i64.cast([0,0])).then(function(a){return a=a,e[86]=a[0],e[87]=a[1],a})},function(a){return e[85]=e[86]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),e[86]=d.createArray(),void 0!==void 0?e[87]=(e[86].push(void 0),e[86]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",e[86],d.i64.cast([0,3]))},function(a){return e[85]=void 0}])},function(a){return e[78]=e[85]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),e[84]=d.createArray(),void 0!==void 0?e[85]=(e[84].push(void 0),e[84]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",e[84],d.i64.cast([0,3]))},function(a){return e[78]=void 0}])},function(a){return d.blobs.neq(e[78],void 0)?e[79]=!0:e[79]=!1,e[79]?0:(function(a){d.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),d["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),e[80]=d.createArray(),e[84]=(e[80].push(d.i64.cast([0,32])),e[80]),d.nativeOperation(b("LSCreateDerivedKeys.nop"),d.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleT5tYWlsYm94X3Jvb3Rfa2V5X3Yy"),e[78],f.epochRootKeyBlob,e[80]).then(function(a){return a=a,e[81]=a[0],a})},function(a){return e[81]!==void 0?d.sequence([function(a){return e[84]=d.i64.of_int32(e[81].length),d.i64.ge(e[84],d.i64.cast([0,1]))?d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[81],d.i64.cast([0,0])).then(function(a){return a=a,e[86]=a[0],e[87]=a[1],a})},function(a){return e[85]=e[86]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),e[86]=d.createArray(),void 0!==void 0?e[87]=(e[86].push(void 0),e[86]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",e[86],d.i64.cast([0,3]))},function(a){return e[85]=void 0}])},function(a){return e[82]=e[85]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),e[84]=d.createArray(),void 0!==void 0?e[85]=(e[84].push(void 0),e[84]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",e[84],d.i64.cast([0,3]))},function(a){return e[82]=void 0}])},function(a){return d.blobs.neq(e[82],void 0)?e[83]=!0:e[83]=!1,e[83]?0:(function(a){d.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),d["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),e[72]=e[82]}]))})},function(a){return d.blobs.neq(e[71],void 0)?d.sequence([function(a){return d.blobs.neq(e[72],void 0)?d.sequence([function(a){return e[82]=d.createArray(),e[86]=(e[82].push(d.i64.cast([0,32])),e[82]),d.nativeOperation(b("LSCreateDerivedKeys.nop"),d.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleV92Mj5mYWxsYmFja19rZXk="),void 0,e[72],e[82]).then(function(a){return a=a,e[83]=a[0],a})},function(a){return e[83]!==void 0?d.sequence([function(a){return e[86]=d.i64.of_int32(e[83].length),d.i64.ge(e[86],d.i64.cast([0,1]))?d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[83],d.i64.cast([0,0])).then(function(a){return a=a,e[88]=a[0],e[89]=a[1],a})},function(a){return e[87]=e[88]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),e[88]=d.createArray(),void 0!==void 0?e[89]=(e[88].push(void 0),e[88]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",e[88],d.i64.cast([0,3]))},function(a){return e[87]=void 0}])},function(a){return e[84]=e[87]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),e[86]=d.createArray(),void 0!==void 0?e[87]=(e[86].push(void 0),e[86]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",e[86],d.i64.cast([0,3]))},function(a){return e[84]=void 0}])},function(a){return d.blobs.neq(e[84],void 0)?e[85]=!0:e[85]=!1,e[85]?0:(function(a){d.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),d["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),e[76]=e[84]}]):d.resolve(e[76]=void 0)},function(a){return e[77]=e[62].get("epoch_root_key"),e[62],e[78]=e[62].get("epoch_anon_id"),e[62],e[79]=e[62].get("epoch_id"),e[62],e[80]=new d.Map(),e[80].set("payload_key",e[71]),e[80].set("payload_fallback_key",e[76]),e[80].set("encryption_version",e[20]),e[80].set("epoch_root_key",e[77]),e[80].set("epoch_anon_id",e[78]),e[80].set("epoch_id",e[79]),e[81]=new d.Map(),e[81].set("ope_key",e[59]),e[81].set("message_payload_encryption_keys",e[80]),e[81].set("ocmf_shared_key",f.ocmfClientStateBlob),e[81].set("mailbox_base_salt",e[28]),e[81].set("mailbox_root_key_v2",e[72]),a=[e[81],void 0],e[74]=a[0],e[75]=a[1],a}]):d.resolve((e[76]=new d.Map(),e[76].set("error_code",d.i64.cast([0,26])),e[76].set("stored_procedure","MEBKeyDeriver"),e[76].set("error_message",""),a=[void 0,e[76]],e[74]=a[0],e[75]=a[1],a))},function(a){return a=[e[74],e[75]],e[60]=a[0],e[61]=a[1],a}]):d.resolve((e[62]=new d.Map(),e[62].set("error_code",d.i64.cast([0,25])),e[62].set("stored_procedure","MEBKeyDeriver"),e[62].set("error_message",""),a=[void 0,e[62]],e[60]=a[0],e[61]=a[1],a))},function(a){return a=[e[60],e[61]],e[53]=a[0],e[54]=a[1],a}]):d.resolve((a=[void 0,e[52]],e[53]=a[0],e[54]=a[1],a))},function(c){return e[53]!==void 0?d.sequence([function(a){return e[59]=e[35].get("backup_id"),e[35],e[60]=e[35].get("act_thread_id"),e[35],e[61]=e[35].get("timestamp"),e[35],e[62]=e[35].get("otid"),e[35],d.storedProcedure(b("LSEncryptIdentifiersV2"),e[40],e[41],e[59],e[60],d.i64.from_string(e[61]),e[62],e[53]).then(function(a){return a=a,e[63]=a[0],e[64]=a[1],a})},function(c){return e[63]!==void 0?d.sequence([function(c){return e[69]=e[35].get("act_thread_id"),e[35],d.storedProcedure(b("LSLoadAndEncryptProtobufV2"),a[0],e[53],e[69]).then(function(a){return a=a,e[70]=a[0],e[71]=a[1],a})},function(c){return d.sequence([function(c){return d.i64.eq(e[40],d.i64.cast([0,1]))?(e[84]=e[45]===""?void 0:e[45],e[84]!==void 0?(c=[e[84],void 0],e[82]=c[0],e[83]=c[1],c):(e[85]=new d.Map(),e[85].set("error_code",d.i64.cast([0,30])),e[85].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),e[85].set("error_message",""),c=[void 0,e[85]],e[82]=c[0],e[83]=c[1],c),c=[e[82],e[83]],e[76]=c[0],e[77]=c[1],c):(c=["",void 0],e[76]=c[0],e[77]=c[1],c),e[76]!==void 0?d.sequence([function(a){return d.i64.eq(e[40],d.i64.cast([0,1]))?d.sequence([function(a){return e[88]=e[35].get("backup_id"),e[35],e[89]=e[35].get("act_thread_id"),e[35],d.storedProcedure(b("LSEncryptMessagePayloadV2"),e[88],e[89],e[53],e[76]).then(function(a){return a=a,e[90]=a[0],e[91]=a[1],a})},function(a){return a=[e[90],e[91]],e[82]=a[0],e[83]=a[1],a}]):d.resolve((e[88]=new d.Map(),e[88].set("encrypted_message_payload",""),e[88].set("value_secret_ref",""),a=[e[88],void 0],e[82]=a[0],e[83]=a[1],a))},function(c){return e[82]!==void 0?d.sequence([function(a){return e[88]=e[63].get("act_thread_id_ocmf_partial"),e[63],e[89]=e[63].get("otid_ocmf_partial"),e[63],e[90]=e[63].get("timestamp_encrypted"),e[63],e[91]=new d.Map(),e[91].set("list_key",e[88]),e[91].set("unique_key",e[89]),e[91].set("sort_key",e[90]),e[82]!==void 0?(e[123]=e[82].get("encrypted_message_payload"),e[82],e[124]=e[82].get("value_secret_ref"),e[82],e[125]=new d.Map(),e[125].set("value",e[123]),e[125].set("value_secret_ref",e[124]),e[92]=e[125]):e[92]=void 0,e[93]=new d.Map(),e[93].set("list_item_id",e[91]),e[93].set("list_item",e[92]),e[93].set("action_type",e[40]),e[94]=e[35].get("timestamp"),e[35],e[95]=e[35].get("otid"),e[35],e[96]=e[35].get("act_thread_id"),e[35],e[97]=new d.Map(),e[97].set("timestamp",e[94]),e[97].set("otid",e[95]),e[97].set("wa_thread_id",d.i64.from_string(e[96])),e[98]=e[53].get("mailbox_base_salt"),e[53],d.nativeOperation(b("LSBase64Encode.nop"),e[98]).then(function(a){return a=a,e[99]=a[0],a})},function(a){return e[100]=e[53].get("ocmf_shared_key"),e[53],d.nativeOperation(b("LSBase64Encode.nop"),e[100]).then(function(a){return a=a,e[101]=a[0],a})},function(a){return e[102]=new d.Map(),e[102].set("mailbox_root_key",e[99]==null?"":e[99]),e[102].set("ocmf_client_state_blob",e[101]==null?"":e[101]),e[103]=e[63].get("backup_id_ocmf_partial"),e[63],e[104]=e[53].get("message_payload_encryption_keys"),e[53],e[105]=e[104].get("epoch_id"),e[104],e[106]=e[53].get("message_payload_encryption_keys"),e[53],e[107]=e[106].get("encryption_version"),e[106],e[122]=e[43]==null?"":e[43],e[108]=new d.Map(),e[108].set("mailbox_partial_id",e[103]),e[108].set("action",e[93]),e[108].set("device_id",e[29]),e[108].set("echo_version",d.i64.cast([0,0])),e[108].set("epoch_id",e[105]),e[108].set("trace_id",void 0),e[108].set("encryption_version",e[107]),e[108].set("is_thread",d.i64.eq(e[41],d.i64.cast([0,2]))),e[108].set("raw_identifiers",e[97]),e[108].set("raw_tokens",e[102]),e[108].set("request_id",e[122]),e[108].set("tam_thread_subtype",e[46]==null?d.i64.cast([0,0]):e[46]),e[108].set("is_instamadillo",e[47]==null?!1:e[47]),e[70]!==void 0?d.sequence([function(a){return e[123]=e[70].get("supplemental_data_encrypted"),e[70],e[123]!==void 0?d.sequence([function(a){return e[125]=e[70].get("protobuf_encrypted"),e[70],e[126]=e[70].get("backup_action"),e[70],e[127]=e[70].get("timestamp_ms"),e[70],e[128]=e[123].get("sk_ciphertext"),e[123],d.nativeOperation(b("LSBase64Encode.nop"),e[128]).then(function(a){return a=a,e[129]=a[0],a})},function(a){return e[130]=e[123].get("sk_hash"),e[123],d.nativeOperation(b("LSBase64Encode.nop"),e[130]).then(function(a){return a=a,e[131]=a[0],a})},function(a){return e[132]=e[70].get("message_tags"),e[70],e[133]=new d.Map(),e[133].set("supplementary_data_key",void 0),e[133].set("encrypted_protobuf",e[125]),e[133].set("key_value_backup_action",e[126]),e[133].set("protobuf_ts_ms",e[127]),e[133].set("supplemental_key_ciphertext",e[129]),e[133].set("supplemental_key_hash",e[131]),e[133].set("message_tags",e[132]),e[124]=e[133]}]):d.resolve((e[125]=e[70].get("protobuf_encrypted"),e[70],e[126]=e[70].get("backup_action"),e[70],e[127]=e[70].get("timestamp_ms"),e[70],e[128]=e[70].get("message_tags"),e[70],e[129]=new d.Map(),e[129].set("supplementary_data_key",void 0),e[129].set("encrypted_protobuf",e[125]),e[129].set("key_value_backup_action",e[126]),e[129].set("protobuf_ts_ms",e[127]),e[129].set("message_tags",e[128]),e[124]=e[129]))},function(a){return e[108].set("key_value_backup_payload",e[124])}]):d.resolve()},function(a){return e[42]!==void 0?e[108].set("attachment_backup_payload",e[42]):function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure] attachment_payload is null."),e[122]!==void 0?d.nativeOperation(b("LSLogWebQpl.nop"),e[122],d.i64.cast([0,521481602]),"upload_start",d.i64.cast([0,0]),void 0,void 0):d.resolve()},function(a){return d.sequence([function(a){return e[43]!==void 0?d.storedProcedure(b("LSAppendDataTraceAddon"),e[43],d.i64.cast([0,1463]),d.i64.cast([0,2]),void 0,void 0):d.resolve()},function(a){return d.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,e[123]=a[0],a})},function(a){return e[123]?e[124]=!0:e[124]=!1,e[124]&&!0?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[125]=d.createArray(),void 0!==void 0?e[126]=(e[125].push(void 0),e[125]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[125],d.i64.cast([0,3]))):d.resolve()}])},function(b){return e[109]=d.toJSON(e[108]),d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[123]=d.i64.of_float(Date.now()),d.i64.eq(e[44],d.i64.cast([0,0]))||d.i64.eq(e[44],void 0)?e[124]=void 0:e[124]=e[44],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[123],d.i64.cast([0,1e6])),e[9]),e[124]],e[110]=b[0],e[111]=b[1],e[112]=b[2],e[113]=b[3],e[114]=b[4],e[115]=b[5],e[116]=b[6],b):(f=c.item,e[123]=d.i64.of_float(Date.now()),d.i64.eq(e[44],d.i64.cast([0,0]))||d.i64.eq(e[44],void 0)?e[124]=void 0:e[124]=e[44],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[123],d.i64.cast([0,1e6])),e[9]),e[124]],e[110]=b[0],e[111]=b[1],e[112]=b[2],e[113]=b[3],e[114]=b[4],e[115]=b[5],e[116]=b[6],b)})},function(a){return e[118]=new d.Map(),e[118].set("task_id",e[110]),e[118].set("queue_name",e[111]),e[118].set("enqueue_timestamp_ms",e[112]),e[118].set("priority",e[113]),e[118].set("first_executed_timestamp_ms",e[114]),e[118].set("execution_time_ns",e[115]),e[118].set("echo_encoding_execution_time_ns",e[116]),e[119]=new d.Map(),e[119].set("task_metadata",e[118]),e[119].set("action_type",e[40]),e[119].set("content_type",e[41]),e[119].set("identifiers",void 0),e[119].set("identifiers_v2",e[35]),e[119].set("task_creation_source",void 0),e[119].set("message_payload_source",d.i64.cast([0,2])),e[120]=new d.Map(),e[120].set("payload",e[109]),e[121]=d.createArray(),e[123]=(e[121].push(e[71]),e[121]),a=[e[120],void 0,e[119],e[121]],e[84]=a[0],e[85]=a[1],e[86]=a[2],e[87]=a[3],a}]):d.sequence([function(b){return d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[103]=d.i64.of_float(Date.now()),d.i64.eq(e[44],d.i64.cast([0,0]))||d.i64.eq(e[44],void 0)?e[104]=void 0:e[104]=e[44],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[103],d.i64.cast([0,1e6])),e[9]),e[104]],e[92]=b[0],e[93]=b[1],e[94]=b[2],e[95]=b[3],e[96]=b[4],e[97]=b[5],e[98]=b[6],b):(f=c.item,e[103]=d.i64.of_float(Date.now()),d.i64.eq(e[44],d.i64.cast([0,0]))||d.i64.eq(e[44],void 0)?e[104]=void 0:e[104]=e[44],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[103],d.i64.cast([0,1e6])),e[9]),e[104]],e[92]=b[0],e[93]=b[1],e[94]=b[2],e[95]=b[3],e[96]=b[4],e[97]=b[5],e[98]=b[6],b)})},function(a){return e[100]=new d.Map(),e[100].set("task_id",e[92]),e[100].set("queue_name",e[93]),e[100].set("enqueue_timestamp_ms",e[94]),e[100].set("priority",e[95]),e[100].set("first_executed_timestamp_ms",e[96]),e[100].set("execution_time_ns",e[97]),e[100].set("echo_encoding_execution_time_ns",e[98]),e[101]=new d.Map(),e[101].set("task_metadata",e[100]),e[101].set("action_type",e[40]),e[101].set("content_type",e[41]),e[101].set("identifiers",void 0),e[101].set("identifiers_v2",e[35]),e[101].set("task_creation_source",void 0),e[101].set("message_payload_source",d.i64.cast([0,2])),e[102]=d.createArray(),e[103]=(e[102].push(e[71]),e[102]),a=[void 0,e[83],e[101],e[102]],e[88]=a[0],e[89]=a[1],e[90]=a[2],e[91]=a[3],a}])},function(a){return a=[e[88],e[89],e[90],e[91]],e[84]=a[0],e[85]=a[1],e[86]=a[2],e[87]=a[3],a}])},function(a){return a=[e[84],e[85],e[86],e[87]],e[78]=a[0],e[79]=a[1],e[80]=a[2],e[81]=a[3],a}]):d.sequence([function(b){return d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[97]=d.i64.of_float(Date.now()),d.i64.eq(e[44],d.i64.cast([0,0]))||d.i64.eq(e[44],void 0)?e[98]=void 0:e[98]=e[44],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[97],d.i64.cast([0,1e6])),e[9]),e[98]],e[86]=b[0],e[87]=b[1],e[88]=b[2],e[89]=b[3],e[90]=b[4],e[91]=b[5],e[92]=b[6],b):(f=c.item,e[97]=d.i64.of_float(Date.now()),d.i64.eq(e[44],d.i64.cast([0,0]))||d.i64.eq(e[44],void 0)?e[98]=void 0:e[98]=e[44],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[97],d.i64.cast([0,1e6])),e[9]),e[98]],e[86]=b[0],e[87]=b[1],e[88]=b[2],e[89]=b[3],e[90]=b[4],e[91]=b[5],e[92]=b[6],b)})},function(a){return e[94]=new d.Map(),e[94].set("task_id",e[86]),e[94].set("queue_name",e[87]),e[94].set("enqueue_timestamp_ms",e[88]),e[94].set("priority",e[89]),e[94].set("first_executed_timestamp_ms",e[90]),e[94].set("execution_time_ns",e[91]),e[94].set("echo_encoding_execution_time_ns",e[92]),e[95]=new d.Map(),e[95].set("task_metadata",e[94]),e[95].set("action_type",e[40]),e[95].set("content_type",e[41]),e[95].set("identifiers",void 0),e[95].set("identifiers_v2",e[35]),e[95].set("task_creation_source",void 0),e[95].set("message_payload_source",d.i64.cast([0,2])),e[96]=d.createArray(),e[97]=(e[96].push(e[71]),e[96]),a=[void 0,e[77],e[95],e[96]],e[82]=a[0],e[83]=a[1],e[84]=a[2],e[85]=a[3],a}])},function(a){return a=[e[82],e[83],e[84],e[85]],e[78]=a[0],e[79]=a[1],e[80]=a[2],e[81]=a[3],a}])},function(a){return a=[e[78],e[79],e[80],e[81]],e[72]=a[0],e[73]=a[1],e[74]=a[2],e[75]=a[3],a}])},function(a){return a=[e[72],e[73],e[74],e[75]],e[65]=a[0],e[66]=a[1],e[67]=a[2],e[68]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[80]=d.i64.of_float(Date.now()),d.i64.eq(e[44],d.i64.cast([0,0]))||d.i64.eq(e[44],void 0)?e[81]=void 0:e[81]=e[44],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[80],d.i64.cast([0,1e6])),e[9]),e[81]],e[69]=b[0],e[70]=b[1],e[71]=b[2],e[72]=b[3],e[73]=b[4],e[74]=b[5],e[75]=b[6],b):(f=c.item,e[80]=d.i64.of_float(Date.now()),d.i64.eq(e[44],d.i64.cast([0,0]))||d.i64.eq(e[44],void 0)?e[81]=void 0:e[81]=e[44],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[80],d.i64.cast([0,1e6])),e[9]),e[81]],e[69]=b[0],e[70]=b[1],e[71]=b[2],e[72]=b[3],e[73]=b[4],e[74]=b[5],e[75]=b[6],b)})},function(a){return e[77]=new d.Map(),e[77].set("task_id",e[69]),e[77].set("queue_name",e[70]),e[77].set("enqueue_timestamp_ms",e[71]),e[77].set("priority",e[72]),e[77].set("first_executed_timestamp_ms",e[73]),e[77].set("execution_time_ns",e[74]),e[77].set("echo_encoding_execution_time_ns",e[75]),e[78]=new d.Map(),e[78].set("task_metadata",e[77]),e[78].set("action_type",e[40]),e[78].set("content_type",e[41]),e[78].set("identifiers",void 0),e[78].set("identifiers_v2",e[35]),e[78].set("task_creation_source",void 0),e[78].set("message_payload_source",d.i64.cast([0,2])),e[79]=d.createArray(),e[80]=(e[79].push(void 0),e[79]),a=[void 0,e[64],e[78],e[79]],e[65]=a[0],e[66]=a[1],e[67]=a[2],e[68]=a[3],a}])},function(a){return a=[e[65],e[66],e[67],e[68]],e[55]=a[0],e[56]=a[1],e[57]=a[2],e[58]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[70]=d.i64.of_float(Date.now()),d.i64.eq(e[44],d.i64.cast([0,0]))||d.i64.eq(e[44],void 0)?e[71]=void 0:e[71]=e[44],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[70],d.i64.cast([0,1e6])),e[9]),e[71]],e[59]=b[0],e[60]=b[1],e[61]=b[2],e[62]=b[3],e[63]=b[4],e[64]=b[5],e[65]=b[6],b):(f=c.item,e[70]=d.i64.of_float(Date.now()),d.i64.eq(e[44],d.i64.cast([0,0]))||d.i64.eq(e[44],void 0)?e[71]=void 0:e[71]=e[44],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[70],d.i64.cast([0,1e6])),e[9]),e[71]],e[59]=b[0],e[60]=b[1],e[61]=b[2],e[62]=b[3],e[63]=b[4],e[64]=b[5],e[65]=b[6],b)})},function(a){return e[67]=new d.Map(),e[67].set("task_id",e[59]),e[67].set("queue_name",e[60]),e[67].set("enqueue_timestamp_ms",e[61]),e[67].set("priority",e[62]),e[67].set("first_executed_timestamp_ms",e[63]),e[67].set("execution_time_ns",e[64]),e[67].set("echo_encoding_execution_time_ns",e[65]),e[68]=new d.Map(),e[68].set("task_metadata",e[67]),e[68].set("action_type",e[40]),e[68].set("content_type",e[41]),e[68].set("identifiers",void 0),e[68].set("identifiers_v2",e[35]),e[68].set("task_creation_source",void 0),e[68].set("message_payload_source",d.i64.cast([0,2])),e[69]=d.createArray(),e[70]=(e[69].push(void 0),e[69]),a=[void 0,e[54],e[68],e[69]],e[55]=a[0],e[56]=a[1],e[57]=a[2],e[58]=a[3],a}])},function(a){return a=[e[55],e[56],e[57],e[58]],e[36]=a[0],e[37]=a[1],e[38]=a[2],e[39]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[61]=d.i64.of_float(Date.now()),d.i64.eq(e[44],d.i64.cast([0,0]))||d.i64.eq(e[44],void 0)?e[62]=void 0:e[62]=e[44],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[61],d.i64.cast([0,1e6])),e[9]),e[62]],e[49]=b[0],e[50]=b[1],e[51]=b[2],e[52]=b[3],e[53]=b[4],e[54]=b[5],e[55]=b[6],b):(f=c.item,e[61]=d.i64.of_float(Date.now()),d.i64.eq(e[44],d.i64.cast([0,0]))||d.i64.eq(e[44],void 0)?e[62]=void 0:e[62]=e[44],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[61],d.i64.cast([0,1e6])),e[9]),e[62]],e[49]=b[0],e[50]=b[1],e[51]=b[2],e[52]=b[3],e[53]=b[4],e[54]=b[5],e[55]=b[6],b)})},function(a){return e[57]=new d.Map(),e[57].set("task_id",e[49]),e[57].set("queue_name",e[50]),e[57].set("enqueue_timestamp_ms",e[51]),e[57].set("priority",e[52]),e[57].set("first_executed_timestamp_ms",e[53]),e[57].set("execution_time_ns",e[54]),e[57].set("echo_encoding_execution_time_ns",e[55]),e[58]=new d.Map(),e[58].set("task_metadata",e[57]),e[58].set("action_type",e[40]),e[58].set("content_type",e[41]),e[58].set("identifiers",void 0),e[58].set("identifiers_v2",e[35]),e[58].set("task_creation_source",void 0),e[58].set("message_payload_source",d.i64.cast([0,2])),e[59]=new d.Map(),e[59].set("error_code",e[48]),e[59].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),e[59].set("error_message",""),e[60]=d.createArray(),a=[void 0,e[59],e[58],e[60]],e[36]=a[0],e[37]=a[1],e[38]=a[2],e[39]=a[3],a}])},function(a){return a=[e[36],e[37],e[38],e[39]],e[30]=a[0],e[31]=a[1],e[32]=a[2],e[33]=a[3],a}]))})},function(a){return a=[e[30],e[31],e[32],e[33]],e[22]=a[0],e[23]=a[1],e[24]=a[2],e[25]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[42]=d.i64.of_float(Date.now()),b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[42],d.i64.cast([0,1e6])),e[9]),void 0],e[30]=b[0],e[31]=b[1],e[32]=b[2],e[33]=b[3],e[34]=b[4],e[35]=b[5],e[36]=b[6],b):(f=c.item,e[42]=d.i64.of_float(Date.now()),b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[42],d.i64.cast([0,1e6])),e[9]),void 0],e[30]=b[0],e[31]=b[1],e[32]=b[2],e[33]=b[3],e[34]=b[4],e[35]=b[5],e[36]=b[6],b)})},function(a){return e[38]=new d.Map(),e[38].set("task_id",e[30]),e[38].set("queue_name",e[31]),e[38].set("enqueue_timestamp_ms",e[32]),e[38].set("priority",e[33]),e[38].set("first_executed_timestamp_ms",e[34]),e[38].set("execution_time_ns",e[35]),e[38].set("echo_encoding_execution_time_ns",e[36]),e[39]=new d.Map(),e[39].set("task_metadata",e[38]),e[39].set("action_type",void 0),e[39].set("content_type",void 0),e[39].set("identifiers",void 0),e[39].set("identifiers_v2",void 0),e[39].set("task_creation_source",void 0),e[39].set("message_payload_source",d.i64.cast([0,2])),e[40]=new d.Map(),e[40].set("error_code",d.i64.cast([0,24])),e[40].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),e[40].set("error_message",""),e[41]=d.createArray(),a=[void 0,e[40],e[39],e[41]],e[22]=a[0],e[23]=a[1],e[24]=a[2],e[25]=a[3],a}])},function(a){return a=[e[22],e[23],e[24],e[25]],e[13]=a[0],e[14]=a[1],e[15]=a[2],e[16]=a[3],a}]))})},function(a){return a=[e[13],e[14],e[15],e[16]],e[2]=a[0],e[3]=a[1],e[4]=a[2],e[5]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(b,c){var f=b.done;b=b.value;return f?(e[25]=d.i64.of_float(Date.now()),f=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[25],d.i64.cast([0,1e6])),e[9]),void 0],e[13]=f[0],e[14]=f[1],e[15]=f[2],e[16]=f[3],e[17]=f[4],e[18]=f[5],e[19]=f[6],f):(c=b.item,e[25]=d.i64.of_float(Date.now()),f=[a[0],c.queueName,c.enqueueTimestampMs,void 0,c.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[25],d.i64.cast([0,1e6])),e[9]),void 0],e[13]=f[0],e[14]=f[1],e[15]=f[2],e[16]=f[3],e[17]=f[4],e[18]=f[5],e[19]=f[6],f)})},function(a){return e[21]=new d.Map(),e[21].set("task_id",e[13]),e[21].set("queue_name",e[14]),e[21].set("enqueue_timestamp_ms",e[15]),e[21].set("priority",e[16]),e[21].set("first_executed_timestamp_ms",e[17]),e[21].set("execution_time_ns",e[18]),e[21].set("echo_encoding_execution_time_ns",e[19]),e[22]=new d.Map(),e[22].set("task_metadata",e[21]),e[22].set("action_type",void 0),e[22].set("content_type",void 0),e[22].set("identifiers",void 0),e[22].set("identifiers_v2",void 0),e[22].set("task_creation_source",void 0),e[22].set("message_payload_source",d.i64.cast([0,2])),e[23]=new d.Map(),e[23].set("error_code",d.i64.cast([0,4])),e[23].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),e[23].set("error_message",""),e[24]=d.createArray(),a=[void 0,e[23],e[22],e[24]],e[2]=a[0],e[3]=a[1],e[4]=a[2],e[5]=a[3],a}])},function(a){return e[6]=d.i64.of_float(Date.now()),e[7]=d.i64.random(),e[10]="Finishing execution. Execution time: ",e[11]=d.i64.to_string(d.i64.sub(e[6],e[0])),e[12]=" ms",e[8]="",function(a){d.logger(a).info(a)}(["[EncryptedBackups][serializeBackupPayloadV2] ",e[8],e[10],e[8],e[11],e[8],e[12]].join("")),d.i64.eq(d.i64.mod_(e[7],d.i64.cast([0,1e3])),d.i64.cast([0,0]))?(e[13]=",",e[14]=d.createArray(),void 0!==void 0?e[15]=(e[14].push(void 0),e[14]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"serializeBackupPayloadV2",[e[10],e[13],e[11],e[13],e[12]].join(""),e[14],d.i64.cast([0,4]))):d.resolve()},function(a){return a=[e[2],e[3],e[4],e[5]],f[0]=a[0],f[1]=a[1],f[2]=a[2],f[3]=a[3],a}])},function(a){return d.resolve(f)}])}a.__sproc_name__="LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure";d=a;g["default"]=d}),98);
__d("LSTaskSerializerEncryptedBackupsUpload",["LSArrayGetObjectAt","LSLogMebClientEvent.nop","LSSerializeBackupPayloadV2"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][taskSerializerEncryptedBackupsUpload] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.forEach(c.db.table(177).fetch([[[a[0]]],"fk_pending_tasks"]),function(a){var b=a.update;a.item;return b({backupStatus:c.i64.cast([0,2])})})},function(e){return c.storedProcedure(b("LSSerializeBackupPayloadV2"),a[0]).then(function(a){return a=a,d[2]=a[0],d[3]=a[1],d[4]=a[2],d[5]=a[3],a})},function(a){return d[6]=c.i64.of_int32(d[5].length),c.i64.gt(d[6],c.i64.cast([0,0]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[5],c.i64.cast([0,0])).then(function(a){return a=a,d[20]=a[0],d[21]=a[1],a})},function(a){return d[7]=d[20]}]):c.resolve(d[7]=void 0)},function(a){return d[2]?d[8]=!1:d[8]=!0,d[8]?(d[3]?d[20]=!1:d[20]=!0,d[20]?(a=[void 0,void 0,d[7],d[4]],d[21]=a[0],d[22]=a[1],d[23]=a[2],d[24]=a[3],a):(a=[void 0,d[3],d[7],d[4]],d[21]=a[0],d[22]=a[1],d[23]=a[2],d[24]=a[3],a),a=[d[21],d[22],d[23],d[24]],d[9]=a[0],d[10]=a[1],d[11]=a[2],d[12]=a[3],a):(d[20]=d[2].get("payload"),d[2],a=[d[20],d[3],d[7],d[4]],d[9]=a[0],d[10]=a[1],d[11]=a[2],d[12]=a[3],a),d[20]=new c.Map(),d[21]=d[20].set("success",d[9]),d[22]=d[20].set("failure",d[10]),d[23]=d[20].set("protobuf_failure",d[11]),d[24]=d[20].set("context",d[12]),d[25]=c.toJSON(d[20]),d[13]=d[25],d[14]=c.i64.of_float(Date.now()),d[15]=c.i64.random(),d[17]="Finishing execution. Execution time: ",d[18]=c.i64.to_string(c.i64.sub(d[14],d[0])),d[19]=" ms",d[16]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][taskSerializerEncryptedBackupsUpload] ",d[16],d[17],d[16],d[18],d[16],d[19]].join("")),c.i64.eq(c.i64.mod_(d[15],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[20]=",",d[21]=c.createArray(),void 0!==void 0?d[22]=(d[21].push(void 0),d[21]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"taskSerializerEncryptedBackupsUpload",[d[17],d[20],d[18],d[20],d[19]].join(""),d[21],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[13],c.i64.cast([0,50026])],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadStoredProcedure";e.exports=a}),null);
__d("LSLoadProtobufBackupSerializedPayloadData",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSEncryptIdentifiersV2","LSGetBlobFromString.nop","LSGetLatestEpochKeys","LSIsEncryptionVersionSecure","LSLoadAndEncryptProtobufV2","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][loadProtobufBackupSerializedPayloadData] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[19]=c.i64.mul(d[1],c.i64.cast([0,1e6])),c.db.table(2).fetch([[[a[0]]]]).next().then(function(b,e){var f=b.done;b=b.value;return f?(d[23]=c.i64.of_float(Date.now()),f=[a[0],void 0,void 0,void 0,void 0,c.i64.sub(c.i64.mul(d[23],c.i64.cast([0,1e6])),d[19]),void 0],d[2]=f[0],d[3]=f[1],d[4]=f[2],d[5]=f[3],d[6]=f[4],d[7]=f[5],d[8]=f[6],f):(e=b.item,d[23]=c.i64.of_float(Date.now()),f=[a[0],e.queueName,e.enqueueTimestampMs,e.priority,e.firstExecutedTimestampMs,c.i64.sub(c.i64.mul(d[23],c.i64.cast([0,1e6])),d[19]),void 0],d[2]=f[0],d[3]=f[1],d[4]=f[2],d[5]=f[3],d[6]=f[4],d[7]=f[5],d[8]=f[6],f)})},function(e){return d[10]=new c.Map(),d[10].set("task_id",d[2]),d[10].set("queue_name",d[3]),d[10].set("enqueue_timestamp_ms",d[4]),d[10].set("priority",d[5]),d[10].set("first_executed_timestamp_ms",d[6]),d[10].set("execution_time_ns",d[7]),d[10].set("echo_encoding_execution_time_ns",d[8]),d[11]=new c.Map(),d[11].set("task_metadata",d[10]),d[11].set("action_type",void 0),d[11].set("content_type",void 0),d[11].set("identifiers",void 0),d[11].set("identifiers_v2",void 0),d[11].set("task_creation_source",void 0),d[11].set("message_payload_source",c.i64.cast([0,2])),c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(e,f){var g=e.done;e=e.value;return g?(d[23]=new c.Map(),d[23].set("error_code",c.i64.cast([0,1])),d[23].set("stored_procedure","LSEncryptedBackupsLoadProtobufBackupSerializedPayloadDataStoredProcedure"),d[23].set("error_message",""),g=[void 0,d[23],d[11]],d[12]=g[0],d[13]=g[1],d[14]=g[2],g):(f=e.item,c.sequence([function(a){return d[32]=f.backupId,d[33]=f.mailboxRootKeyBlob,d[34]=f.deviceId,d[31]=f.backupTenancy,d[30]=f.encryptionVersion,d[23]=void 0,c.i64.neq(d[23],void 0)?c.resolve(d[24]=d[23]):c.sequence([function(a){return d[35]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[36]=a[0],a})},function(a){return d[36]?d[45]=(d[35].push(c.i64.cast([0,0])),d[35]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[37]=a[0],a})},function(a){return d[37]?d[45]=(d[35].push(c.i64.cast([0,2])),d[35]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[38]=a[0],a})},function(a){return d[38]?d[45]=(d[35].push(c.i64.cast([0,3])),d[35]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[39]=a[0],a})},function(a){return d[39]?d[45]=(d[35].push(c.i64.cast([0,4])),d[35]):0,d[40]=c.createArray(),d[41]=c.i64.of_int32(d[35].length),c.i64.gt(d[41],c.i64.cast([0,0]))?c.loopAsync(d[41],function(a){return d[45]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[35],d[45]).then(function(a){return a=a,d[46]=a[0],d[47]=a[1],a})},function(a){return d[48]=(d[40].push(d[46]),d[40])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[45]=c.createArray(),d[46]=c.i64.of_int32(d[40].length),c.i64.gt(d[46],c.i64.cast([0,0]))?c.loopAsync(d[46],function(a){return d[48]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[40],d[48]).then(function(a){return a=a,d[49]=a[0],d[50]=a[1],a})},function(a){return d[51]=(d[45].push(c.i64.to_string(d[49])),d[45])}])}):c.resolve()},function(a){return d[47]=d[45].join(","),d[42]=d[47]}])},function(a){return d[40].some(function(a){return c.i64.eq(d[30],a)})?d[43]=d[30]:d[43]=void 0,c.i64.neq(d[43],void 0)?d[44]=d[43]:d[44]=void 0,d[24]=d[44]}])},function(e){return c.i64.neq(d[24],void 0)?d[25]=d[24]:d[25]=c.i64.cast([0,0]),c.i64.neq(d[31],void 0)?d[26]=d[31]:d[26]=c.i64.cast([0,1]),c.i64.neq(d[34],void 0)?c.sequence([function(e){return c.filter(c.db.table(305).fetch(),function(b){return c.i64.eq(b.pendingBackupTaskId,a[0])}).next().then(function(h,i){var e=h.done;h=h.value;return e?(d[39]=new c.Map(),d[39].set("error_code",c.i64.cast([0,5])),d[39].set("stored_procedure","LSEncryptedBackupsLoadProtobufBackupSerializedPayloadDataStoredProcedure"),d[39].set("error_message",""),e=[void 0,d[39],d[11]],d[35]=e[0],d[36]=e[1],d[37]=e[2],e):(i=h.item,c.sequence([function(b){return d[61]=i.actThreadId,d[62]=i.toplevelOfflineThreadingId,d[40]=i.messageTimestampMs,d[39]=new c.Map(),d[39].set("backup_id",c.i64.to_string(d[32])),d[39].set("act_thread_id",d[61]),d[39].set("server_thread_id",d[61]),d[39].set("timestamp",c.i64.to_string(d[40])),d[39].set("otid",d[62]),d[41]=new c.Map(),d[41].set("backup_id",c.i64.to_string(d[32])),d[41].set("act_thread_id",d[61]),d[41].set("timestamp",c.i64.to_string(d[40])),d[41].set("otid",d[62]),c.db.table(2).fetch([[[a[0]]]]).next().then(function(e,f){var b=e.done;e=e.value;return b?(d[63]=c.i64.of_float(Date.now()),b=[a[0],void 0,void 0,void 0,void 0,c.i64.sub(c.i64.mul(d[63],c.i64.cast([0,1e6])),d[19]),void 0],d[42]=b[0],d[43]=b[1],d[44]=b[2],d[45]=b[3],d[46]=b[4],d[47]=b[5],d[48]=b[6],b):(f=e.item,d[63]=c.i64.of_float(Date.now()),b=[a[0],f.queueName,f.enqueueTimestampMs,f.priority,f.firstExecutedTimestampMs,c.i64.sub(c.i64.mul(d[63],c.i64.cast([0,1e6])),d[19]),void 0],d[42]=b[0],d[43]=b[1],d[44]=b[2],d[45]=b[3],d[46]=b[4],d[47]=b[5],d[48]=b[6],b)})},function(a){return d[50]=new c.Map(),d[50].set("task_id",d[42]),d[50].set("queue_name",d[43]),d[50].set("enqueue_timestamp_ms",d[44]),d[50].set("priority",d[45]),d[50].set("first_executed_timestamp_ms",d[46]),d[50].set("execution_time_ns",d[47]),d[50].set("echo_encoding_execution_time_ns",d[48]),d[51]=new c.Map(),d[51].set("task_metadata",d[50]),d[51].set("action_type",c.i64.cast([0,1])),d[51].set("content_type",c.i64.cast([0,1])),d[51].set("identifiers",void 0),d[51].set("identifiers_v2",d[41]),d[51].set("task_creation_source",void 0),d[51].set("message_payload_source",c.i64.cast([0,2])),d[52]=d[39].get("act_thread_id"),d[39],d[53]=d[39].get("otid"),d[39],c.storedProcedure(b("LSGetLatestEpochKeys"),!1).then(function(a){return a=a,d[54]=a[0],d[55]=a[1],a})},function(a){return d[54]!==void 0?c.sequence([function(a){return c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))?c.sequence([function(a){return d[66]=c.createArray(),d[71]=(d[66].push(c.i64.cast([0,32])),d[66]),c.nativeOperation(b("LSGetBlobFromString.nop"),["thread_ope_key","_",d[52]].join("")).then(function(a){return a=a,d[67]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[67],void 0,d[33],d[66]).then(function(a){return a=a,d[68]=a[0],a})},function(a){return d[68]?d[69]=!1:d[69]=!0,d[69]?c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] Got null keys while deriving message list OPE key. Returning null blobish"),d[71]=c.createArray(),void 0!==void 0?d[72]=(d[71].push(void 0),d[71]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","Got null keys while deriving message list OPE key. Returning null blobish",d[71],c.i64.cast([0,3]))},function(a){return d[70]=void 0}]):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[68],c.i64.cast([0,0])).then(function(a){return a=a,d[71]=a[0],d[72]=a[1],a})},function(a){return d[70]=d[71]}])},function(a){return d[63]=d[70]}]):c.sequence([function(a){return c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,2]))?c.sequence([function(a){return d[67]=c.createArray(),d[72]=(d[67].push(c.i64.cast([0,32])),d[67]),c.nativeOperation(b("LSGetBlobFromString.nop"),["thread_ope_key","_",d[53]].join("")).then(function(a){return a=a,d[68]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[68],void 0,d[33],d[67]).then(function(a){return a=a,d[69]=a[0],a})},function(a){return d[69]?d[70]=!1:d[70]=!0,d[70]?c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] Got null keys while deriving message list OPE key. Returning null blobish"),d[72]=c.createArray(),void 0!==void 0?d[73]=(d[72].push(void 0),d[72]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","Got null keys while deriving message list OPE key. Returning null blobish",d[72],c.i64.cast([0,3]))},function(a){return d[71]=void 0}]):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[69],c.i64.cast([0,0])).then(function(a){return a=a,d[72]=a[0],d[73]=a[1],a})},function(a){return d[71]=d[72]}])},function(a){return d[66]=d[71]}]):c.resolve(d[66]=void 0)},function(a){return d[63]=d[66]}])},function(a){return c.blobs.neq(d[63],void 0)?c.sequence([function(a){return d[66]=d[54].get("epoch_keys"),d[54],d[67]=d[66].get("epoch_anon_id"),d[66],d[68]=d[66].get("epoch_root_key"),d[66],d[69]=c.createArray(),d[80]=(d[69].push(c.i64.cast([0,32])),d[69]),c.i64.ge(d[25],c.i64.cast([0,3]))?c.resolve(d[70]=void 0):c.sequence([function(a){return c.nativeOperation(b("LSGetBlobFromString.nop"),d[52]).then(function(a){return a=a,d[80]=a[0],a})},function(a){return d[70]=d[80]}])},function(a){return c.i64.ge(d[25],c.i64.cast([0,4]))?(d[80]="_",d[71]=["message_key_in_epoch",d[80],c.blobs.to_string(d[67]),d[80],"cipher_version",d[80],c.i64.to_string(d[25]),d[80],"thread",d[80],d[52]==null?"":d[52]].join("")):(c.i64.ge(d[25],c.i64.cast([0,3]))?(d[81]="_",d[80]=["message_key_in_epoch",d[81],c.blobs.to_string(d[67]),d[81],"cipher_version",d[81],c.i64.to_string(d[25]),d[81],"thread",d[81],d[52]==null?"":d[52]].join("")):(c.i64.ge(d[25],c.i64.cast([0,2]))?(d[82]="_",d[81]=["message_key_in_epoch",d[82],c.blobs.to_string(d[67]),d[82],"cipher_version",d[82],c.i64.to_string(d[25])].join("")):d[81]=["message_key_in_epoch","_",c.blobs.to_string(d[67])].join(""),d[80]=d[81]),d[71]=d[80]),c.nativeOperation(b("LSGetBlobFromString.nop"),d[71]).then(function(a){return a=a,d[72]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[72],d[70],d[68],d[69]).then(function(a){return a=a,d[73]=a[0],a})},function(a){return d[73]?d[74]=!1:d[74]=!0,d[74]?c.resolve(d[75]=void 0):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[73],c.i64.cast([0,0])).then(function(a){return a=a,d[80]=a[0],d[81]=a[1],a})},function(a){return d[75]=d[80]}])},function(a){return c.filter(c.db.table(169).fetch(),function(a){return c.blobs.eq(a.epochAnonIdBlob,c.blob("MA=="))}).next().then(function(e,f){var a=e.done;e=e.value;return a?c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTableUtils] Failed to get mailbox_root_key_v2: epoch 0 is not available."),d[80]=c.createArray(),void 0!==void 0?d[81]=(d[80].push(void 0),d[80]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTableUtils","Failed to get mailbox_root_key_v2: epoch 0 is not available.",d[80],c.i64.cast([0,3]))},function(a){return d[76]=void 0}]):(f=e.item,c.sequence([function(a){return d[80]=c.createArray(),d[88]=(d[80].push(c.i64.cast([0,32])),d[80]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleT5zYWx0X21haWxib3hfcm9vdF9rZXlfdjI="),void 0,d[33],d[80]).then(function(a){return a=a,d[81]=a[0],a})},function(a){return d[81]!==void 0?c.sequence([function(a){return d[88]=c.i64.of_int32(d[81].length),c.i64.ge(d[88],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[81],c.i64.cast([0,0])).then(function(a){return a=a,d[90]=a[0],d[91]=a[1],a})},function(a){return d[89]=d[90]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[90]=c.createArray(),void 0!==void 0?d[91]=(d[90].push(void 0),d[90]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",d[90],c.i64.cast([0,3]))},function(a){return d[89]=void 0}])},function(a){return d[82]=d[89]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[88]=c.createArray(),void 0!==void 0?d[89]=(d[88].push(void 0),d[88]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",d[88],c.i64.cast([0,3]))},function(a){return d[82]=void 0}])},function(a){return c.blobs.neq(d[82],void 0)?d[83]=!0:d[83]=!1,d[83]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),d[84]=c.createArray(),d[88]=(d[84].push(c.i64.cast([0,32])),d[84]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleT5tYWlsYm94X3Jvb3Rfa2V5X3Yy"),d[82],f.epochRootKeyBlob,d[84]).then(function(a){return a=a,d[85]=a[0],a})},function(a){return d[85]!==void 0?c.sequence([function(a){return d[88]=c.i64.of_int32(d[85].length),c.i64.ge(d[88],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[85],c.i64.cast([0,0])).then(function(a){return a=a,d[90]=a[0],d[91]=a[1],a})},function(a){return d[89]=d[90]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[90]=c.createArray(),void 0!==void 0?d[91]=(d[90].push(void 0),d[90]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",d[90],c.i64.cast([0,3]))},function(a){return d[89]=void 0}])},function(a){return d[86]=d[89]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[88]=c.createArray(),void 0!==void 0?d[89]=(d[88].push(void 0),d[88]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",d[88],c.i64.cast([0,3]))},function(a){return d[86]=void 0}])},function(a){return c.blobs.neq(d[86],void 0)?d[87]=!0:d[87]=!1,d[87]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),d[76]=d[86]}]))})},function(a){return c.blobs.neq(d[75],void 0)?c.sequence([function(a){return c.blobs.neq(d[76],void 0)?c.sequence([function(a){return d[86]=c.createArray(),d[90]=(d[86].push(c.i64.cast([0,32])),d[86]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleV92Mj5mYWxsYmFja19rZXk="),void 0,d[76],d[86]).then(function(a){return a=a,d[87]=a[0],a})},function(a){return d[87]!==void 0?c.sequence([function(a){return d[90]=c.i64.of_int32(d[87].length),c.i64.ge(d[90],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[87],c.i64.cast([0,0])).then(function(a){return a=a,d[92]=a[0],d[93]=a[1],a})},function(a){return d[91]=d[92]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[92]=c.createArray(),void 0!==void 0?d[93]=(d[92].push(void 0),d[92]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",d[92],c.i64.cast([0,3]))},function(a){return d[91]=void 0}])},function(a){return d[88]=d[91]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[90]=c.createArray(),void 0!==void 0?d[91]=(d[90].push(void 0),d[90]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",d[90],c.i64.cast([0,3]))},function(a){return d[88]=void 0}])},function(a){return c.blobs.neq(d[88],void 0)?d[89]=!0:d[89]=!1,d[89]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),d[80]=d[88]}]):c.resolve(d[80]=void 0)},function(a){return d[81]=d[66].get("epoch_root_key"),d[66],d[82]=d[66].get("epoch_anon_id"),d[66],d[83]=d[66].get("epoch_id"),d[66],d[84]=new c.Map(),d[84].set("payload_key",d[75]),d[84].set("payload_fallback_key",d[80]),d[84].set("encryption_version",d[25]),d[84].set("epoch_root_key",d[81]),d[84].set("epoch_anon_id",d[82]),d[84].set("epoch_id",d[83]),d[85]=new c.Map(),d[85].set("ope_key",d[63]),d[85].set("message_payload_encryption_keys",d[84]),d[85].set("ocmf_shared_key",f.ocmfClientStateBlob),d[85].set("mailbox_base_salt",d[33]),d[85].set("mailbox_root_key_v2",d[76]),a=[d[85],void 0],d[78]=a[0],d[79]=a[1],a}]):c.resolve((d[80]=new c.Map(),d[80].set("error_code",c.i64.cast([0,26])),d[80].set("stored_procedure","MEBKeyDeriver"),d[80].set("error_message",""),a=[void 0,d[80]],d[78]=a[0],d[79]=a[1],a))},function(a){return a=[d[78],d[79]],d[64]=a[0],d[65]=a[1],a}]):c.resolve((d[66]=new c.Map(),d[66].set("error_code",c.i64.cast([0,25])),d[66].set("stored_procedure","MEBKeyDeriver"),d[66].set("error_message",""),a=[void 0,d[66]],d[64]=a[0],d[65]=a[1],a))},function(a){return a=[d[64],d[65]],d[56]=a[0],d[57]=a[1],a}]):c.resolve((a=[void 0,d[55]],d[56]=a[0],d[57]=a[1],a))},function(e){return d[56]!==void 0?c.sequence([function(a){return d[63]=d[39].get("backup_id"),d[39],d[64]=d[39].get("act_thread_id"),d[39],d[65]=d[39].get("timestamp"),d[39],d[66]=d[39].get("otid"),d[39],c.storedProcedure(b("LSEncryptIdentifiersV2"),c.i64.cast([0,1]),c.i64.cast([0,1]),d[63],d[64],c.i64.from_string(d[65]),d[66],d[56]).then(function(a){return a=a,d[67]=a[0],d[68]=a[1],a})},function(a){return d[69]=d[56].get("message_payload_encryption_keys"),d[56],d[70]=d[69].get("encryption_version"),d[69],d[71]=d[69].get("epoch_anon_id"),d[69],d[72]=d[69].get("epoch_root_key"),d[69],d[73]=d[39].get("act_thread_id"),d[39],d[74]=d[69].get("payload_key"),d[69],d[75]=d[39].get("backup_id"),d[39],d[76]=c.createArray(),d[106]=(d[76].push(c.i64.cast([0,6])),d[76]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_anon_id_debug").then(function(a){return a=a,d[77]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[77],void 0,d[71],d[76]).then(function(a){return a=a,d[78]=a[0],a})},function(a){return d[78]?d[79]=!1:d[79]=!0,d[79]?c.resolve(d[80]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[78],c.i64.cast([0,0])).then(function(a){return a=a,d[106]=a[0],d[107]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[106]).then(function(a){return a=a,d[108]=a[0],a})},function(a){return d[80]=d[108]==null?"":d[108]}])},function(a){return d[81]=c.createArray(),d[106]=(d[81].push(c.i64.cast([0,6])),d[81]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_root_key_debug").then(function(a){return a=a,d[82]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[82],void 0,d[72],d[81]).then(function(a){return a=a,d[83]=a[0],a})},function(a){return d[83]?d[84]=!1:d[84]=!0,d[84]?c.resolve(d[85]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[83],c.i64.cast([0,0])).then(function(a){return a=a,d[106]=a[0],d[107]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[106]).then(function(a){return a=a,d[108]=a[0],a})},function(a){return d[85]=d[108]==null?"":d[108]}])},function(a){return d[86]=c.createArray(),d[106]=(d[86].push(c.i64.cast([0,6])),d[86]),c.nativeOperation(b("LSGetBlobFromString.nop"),"message_key_debug").then(function(a){return a=a,d[87]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[87],void 0,d[74],d[86]).then(function(a){return a=a,d[88]=a[0],a})},function(a){return d[88]?d[89]=!1:d[89]=!0,d[89]?c.resolve(d[90]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[88],c.i64.cast([0,0])).then(function(a){return a=a,d[106]=a[0],d[107]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[106]).then(function(a){return a=a,d[108]=a[0],a})},function(a){return d[90]=d[108]==null?"":d[108]}])},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[72]).then(function(a){return a=a,d[91]=a[0],a})},function(a){return c.nativeOperation(b("LSGetBlobFromString.nop"),[d[91]==null?"":d[91],d[73]].join("")).then(function(a){return a=a,d[92]=a[0],a})},function(a){return d[93]=c.createArray(),d[106]=(d[93].push(c.i64.cast([0,6])),d[93]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_root_key_thread_id_debug").then(function(a){return a=a,d[94]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[94],void 0,d[92],d[93]).then(function(a){return a=a,d[95]=a[0],a})},function(a){return d[95]?d[96]=!1:d[96]=!0,d[96]?c.resolve(d[97]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[95],c.i64.cast([0,0])).then(function(a){return a=a,d[106]=a[0],d[107]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[106]).then(function(a){return a=a,d[108]=a[0],a})},function(a){return d[97]=d[108]==null?"":d[108]}])},function(a){return d[98]=":",c.blobs.neq(d[72],void 0)?c.sequence([function(a){return d[106]=c.createArray(),d[112]=(d[106].push(c.i64.cast([0,18])),d[106]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("bWViL2RlYnVnL2ZpbmdlcnByaW50L01FQkVwb2NoUm9vdEtleQ=="),void 0,d[72],d[106]).then(function(a){return a=a,d[107]=a[0],a})},function(a){return d[107]!==void 0?c.sequence([function(a){return d[112]=c.i64.of_int32(d[107].length),c.i64.ge(d[112],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[107],c.i64.cast([0,0])).then(function(a){return a=a,d[114]=a[0],d[115]=a[1],a})},function(a){return d[113]=d[114]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[114]=c.createArray(),void 0!==void 0?d[115]=(d[114].push(void 0),d[114]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint","CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",d[114],c.i64.cast([0,3]))},function(a){return d[113]=void 0}])},function(a){return d[108]=d[113]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[112]=c.createArray(),void 0!==void 0?d[113]=(d[112].push(void 0),d[112]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint","CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",d[112],c.i64.cast([0,3]))},function(a){return d[108]=void 0}])},function(a){return c.blobs.neq(d[108],void 0)?d[109]=!0:d[109]=!1,d[109]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),c.nativeOperation(b("LSBase64Encode.nop"),d[108]).then(function(a){return a=a,d[110]=a[0],a})},function(a){return d[110]!==void 0?d[111]=d[110]:d[111]="encodingfailed",d[99]=d[111]}]):c.resolve(d[99]="null")},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[71]).then(function(a){return a=a,d[100]=a[0],a})},function(e){return d[101]=new c.Map(),d[101].set("encryption_version",d[70]),d[101].set("epoch_anon_id",d[100]==null?"":d[100]),d[101].set("message_encryption_values",[d[80],d[98],d[85],d[98],d[90],d[98],d[97]].join("")),d[101].set("root_key_fingerprint",d[99]),d[101].set("backup_id",d[75]),d[102]=c.toJSON(d[101]),d[67]!==void 0?c.sequence([function(e){return d[106]=d[39].get("act_thread_id"),d[39],c.storedProcedure(b("LSLoadAndEncryptProtobufV2"),a[0],d[56],d[106]).then(function(a){return a=a,d[107]=a[0],d[108]=a[1],a})},function(a){return d[107]!==void 0?(d[112]=new c.Map(),d[112].set("protobuf_backup_payload",d[107]),d[112].set("encrypted_identifiers",d[67]),d[112].set("device_id",d[34]),d[112].set("identifiers",d[39]),d[112].set("encryption_keys",d[56]),d[112].set("content_type",c.i64.cast([0,1])),d[112].set("action_type",c.i64.cast([0,1])),d[112].set("value_secret_ref",d[102]),d[112].set("attachment_backup_payload",i.attachmentPayload),d[112].set("extra_data_for_eb_upload",void 0),a=[d[112],void 0,d[51]],d[109]=a[0],d[110]=a[1],d[111]=a[2],a):(a=[void 0,d[108],d[51]],d[109]=a[0],d[110]=a[1],d[111]=a[2],a),a=[d[109],d[110],d[111]],d[103]=a[0],d[104]=a[1],d[105]=a[2],a}]):c.resolve((e=[void 0,d[68],d[51]],d[103]=e[0],d[104]=e[1],d[105]=e[2],e))},function(a){return a=[d[103],d[104],d[105]],d[58]=a[0],d[59]=a[1],d[60]=a[2],a}]):c.resolve((e=[void 0,d[57],d[51]],d[58]=e[0],d[59]=e[1],d[60]=e[2],e))},function(a){return a=[d[58],d[59],d[60]],d[35]=a[0],d[36]=a[1],d[37]=a[2],a}]))})},function(a){return a=[d[35],d[36],d[37]],d[27]=a[0],d[28]=a[1],d[29]=a[2],a}]):c.resolve((d[35]=new c.Map(),d[35].set("error_code",c.i64.cast([0,24])),d[35].set("stored_procedure","LSEncryptedBackupsLoadProtobufBackupSerializedPayloadDataStoredProcedure"),d[35].set("error_message",""),e=[void 0,d[35],d[11]],d[27]=e[0],d[28]=e[1],d[29]=e[2],e))},function(a){return a=[d[27],d[28],d[29]],d[12]=a[0],d[13]=a[1],d[14]=a[2],a}]))})},function(a){return d[16]=c.i64.of_float(Date.now()),d[17]=c.i64.random(),d[20]="Finishing execution. Execution time: ",d[21]=c.i64.to_string(c.i64.sub(d[16],d[0])),d[22]=" ms",d[18]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][loadProtobufBackupSerializedPayloadData] ",d[18],d[20],d[18],d[21],d[18],d[22]].join("")),c.i64.eq(c.i64.mod_(d[17],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[23]=",",d[24]=c.createArray(),void 0!==void 0?d[25]=(d[24].push(void 0),d[24]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"loadProtobufBackupSerializedPayloadData",[d[20],d[23],d[21],d[23],d[22]].join(""),d[24],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[12],d[13],d[14]],e[0]=a[0],e[1]=a[1],e[2]=a[2],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsLoadProtobufBackupSerializedPayloadDataStoredProcedure";e.exports=a}),null);
__d("LSTaskSerializerEncryptedBackupsUploadProtobufOnly",["LSArrayGetObjectAt","LSBase64Encode.nop","LSDeserializeFromJsonIntoDictionaryV2.nop","LSLoadProtobufBackupSerializedPayloadData","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][taskSerializerEncryptedBackupsUploadProtobufOnly] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSLoadProtobufBackupSerializedPayloadData"),a[0]).then(function(a){return a=a,d[2]=a[0],d[3]=a[1],d[4]=a[2],a})},function(a){return d[2]!==void 0?c.sequence([function(a){return d[15]=d[2].get("encrypted_identifiers"),d[2],d[16]=d[2].get("identifiers"),d[2],d[17]=d[2].get("encryption_keys"),d[2],d[18]=d[2].get("protobuf_backup_payload"),d[2],d[19]=d[15].get("act_thread_id_ocmf_partial"),d[15],d[20]=d[15].get("otid_ocmf_partial"),d[15],d[21]=d[15].get("timestamp_encrypted"),d[15],d[22]=new c.Map(),d[22].set("list_key",d[19]),d[22].set("unique_key",d[20]),d[22].set("sort_key",d[21]),d[23]=d[2].get("value_secret_ref"),d[2],d[24]=new c.Map(),d[24].set("value",""),d[24].set("value_secret_ref",d[23]),d[25]=d[2].get("action_type"),d[2],d[26]=new c.Map(),d[26].set("list_item_id",d[22]),d[26].set("list_item",d[24]),d[26].set("action_type",d[25]),d[27]=d[16].get("server_thread_id"),d[16],d[28]=d[16].get("timestamp"),d[16],d[29]=d[16].get("otid"),d[16],d[30]=d[16].get("act_thread_id"),d[16],d[31]=new c.Map(),d[31].set("server_thread_key",d[27]),d[31].set("timestamp",d[28]),d[31].set("otid",d[29]),d[31].set("wa_thread_id",c.i64.from_string(d[30])),d[32]=d[17].get("mailbox_base_salt"),d[17],c.nativeOperation(b("LSBase64Encode.nop"),d[32]).then(function(a){return a=a,d[33]=a[0],a})},function(a){return d[34]=d[17].get("ocmf_shared_key"),d[17],c.nativeOperation(b("LSBase64Encode.nop"),d[34]).then(function(a){return a=a,d[35]=a[0],a})},function(a){return d[36]=new c.Map(),d[36].set("mailbox_root_key",d[33]==null?"":d[33]),d[36].set("ocmf_client_state_blob",d[35]==null?"":d[35]),d[37]=d[2].get("extra_data_for_eb_upload"),d[2],d[37]!==void 0?c.sequence([function(a){return c.nativeOperation(b("LSDeserializeFromJsonIntoDictionaryV2.nop"),d[37]).then(function(a){return a=a,d[52]=a[0],a})},function(a){return d[53]=new c.Map(),d[60]="ttd",d[54]=d[52].get(d[60]),d[52],d[54]?d[55]=!1:d[55]=!0,d[55]?c.resolve():c.sequence([function(a){return d[54]?d[62]=!1:d[62]=!0,d[62]?c.resolve(d[63]=void 0):c.sequence([function(a){return d[64]=new c.Map(),d[67]="message_tags",d[65]=d[54].get(d[67]),d[54],d[65]?d[66]=!1:d[66]=!0,d[66]?c.resolve():c.sequence([function(a){return d[68]=c.createArray(),d[69]=c.i64.of_int32(d[65].length),c.i64.gt(d[69],c.i64.cast([0,0]))?c.loopAsync(d[69],function(a){return d[70]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[65],d[70]).then(function(a){return a=a,d[71]=a[0],d[72]=a[1],a})},function(a){return d[73]=(d[68].push(d[71]),d[68])}])}):c.resolve()},function(a){return d[64].set(d[67],d[68])}])},function(a){return d[63]=d[64]}])},function(a){return d[53].set(d[60],d[63])}])},function(a){return d[61]="mt",d[56]=d[52].get(d[61]),d[52],d[56]?d[57]=!1:d[57]=!0,d[57]?c.resolve():c.sequence([function(a){return d[56]?d[62]=!1:d[62]=!0,d[62]?c.resolve(d[63]=void 0):c.sequence([function(a){return d[64]=new c.Map(),d[67]="message_tags",d[65]=d[56].get(d[67]),d[56],d[65]?d[66]=!1:d[66]=!0,d[66]?c.resolve():c.sequence([function(a){return d[68]=c.createArray(),d[69]=c.i64.of_int32(d[65].length),c.i64.gt(d[69],c.i64.cast([0,0]))?c.loopAsync(d[69],function(a){return d[70]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[65],d[70]).then(function(a){return a=a,d[71]=a[0],d[72]=a[1],a})},function(a){return d[73]=(d[68].push(d[71]),d[68])}])}):c.resolve()},function(a){return d[64].set(d[67],d[68])}])},function(a){return d[63]=d[64]}])},function(a){return d[53].set(d[61],d[63])}])},function(a){return d[58]=d[53].get("mt"),d[53],d[58]!==void 0?(d[62]=new c.Map(),d[66]="message_tags",d[63]=d[58].get(d[66]),d[58],d[63]?d[64]=!1:d[64]=!0,d[64]?0:d[62].set(d[66],d[63]),d[65]=c.toJSON(d[62]),d[59]=d[65]):d[59]=void 0,d[38]=d[59]}]):c.resolve(d[38]=void 0)},function(a){return d[39]=d[15].get("backup_id_ocmf_partial"),d[15],d[40]=d[2].get("device_id"),d[2],d[41]=d[17].get("message_payload_encryption_keys"),d[17],d[42]=d[41].get("epoch_id"),d[41],d[43]=d[17].get("message_payload_encryption_keys"),d[17],d[44]=d[43].get("encryption_version"),d[43],d[45]=d[2].get("content_type"),d[2],d[46]=new c.Map(),d[46].set("mailbox_partial_id",d[39]),d[46].set("action",d[26]),d[46].set("device_id",d[40]),d[46].set("echo_version",c.i64.cast([0,0])),d[46].set("epoch_id",d[42]),d[46].set("trace_id",void 0),d[46].set("encryption_version",d[44]),d[46].set("is_thread",c.i64.eq(d[45],c.i64.cast([0,2]))),d[46].set("raw_identifiers",d[31]),d[46].set("raw_tokens",d[36]),d[46].set("request_id",""),d[46].set("is_instamadillo",!0),d[47]=d[18].get("supplemental_data_encrypted"),d[18],d[47]!==void 0?c.sequence([function(a){return d[52]=d[18].get("protobuf_encrypted"),d[18],d[53]=d[18].get("backup_action"),d[18],d[54]=d[18].get("timestamp_ms"),d[18],d[55]=d[47].get("sk_ciphertext"),d[47],c.nativeOperation(b("LSBase64Encode.nop"),d[55]).then(function(a){return a=a,d[56]=a[0],a})},function(a){return d[57]=d[47].get("sk_hash"),d[47],c.nativeOperation(b("LSBase64Encode.nop"),d[57]).then(function(a){return a=a,d[58]=a[0],a})},function(a){return d[59]=new c.Map(),d[59].set("supplementary_data_key",void 0),d[59].set("encrypted_protobuf",d[52]),d[59].set("key_value_backup_action",d[53]),d[59].set("protobuf_ts_ms",d[54]),d[59].set("supplemental_key_ciphertext",d[56]),d[59].set("supplemental_key_hash",d[58]),d[59].set("message_tags",d[38]),d[48]=d[59]}]):c.resolve((d[52]=d[18].get("protobuf_encrypted"),d[18],d[53]=d[18].get("backup_action"),d[18],d[54]=d[18].get("timestamp_ms"),d[18],d[55]=new c.Map(),d[55].set("supplementary_data_key",void 0),d[55].set("encrypted_protobuf",d[52]),d[55].set("key_value_backup_action",d[53]),d[55].set("protobuf_ts_ms",d[54]),d[55].set("message_tags",d[38]),d[48]=d[55]))},function(a){return d[46].set("key_value_backup_payload",d[48]),d[49]=d[2].get("attachment_backup_payload"),d[2],d[49]!==void 0?d[46].set("attachment_backup_payload",d[49]):0,d[50]=d[2].get("extra_data_for_eb_upload"),d[2],d[50]!==void 0?c.sequence([function(a){return c.nativeOperation(b("LSDeserializeFromJsonIntoDictionaryV2.nop"),d[50]).then(function(a){return a=a,d[52]=a[0],a})},function(a){return d[53]=new c.Map(),d[59]="ttd",d[54]=d[52].get(d[59]),d[52],d[54]?d[55]=!1:d[55]=!0,d[55]?c.resolve():c.sequence([function(a){return d[54]?d[61]=!1:d[61]=!0,d[61]?c.resolve(d[62]=void 0):c.sequence([function(a){return d[63]=new c.Map(),d[66]="message_tags",d[64]=d[54].get(d[66]),d[54],d[64]?d[65]=!1:d[65]=!0,d[65]?c.resolve():c.sequence([function(a){return d[67]=c.createArray(),d[68]=c.i64.of_int32(d[64].length),c.i64.gt(d[68],c.i64.cast([0,0]))?c.loopAsync(d[68],function(a){return d[69]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[64],d[69]).then(function(a){return a=a,d[70]=a[0],d[71]=a[1],a})},function(a){return d[72]=(d[67].push(d[70]),d[67])}])}):c.resolve()},function(a){return d[63].set(d[66],d[67])}])},function(a){return d[62]=d[63]}])},function(a){return d[53].set(d[59],d[62])}])},function(a){return d[60]="mt",d[56]=d[52].get(d[60]),d[52],d[56]?d[57]=!1:d[57]=!0,d[57]?c.resolve():c.sequence([function(a){return d[56]?d[61]=!1:d[61]=!0,d[61]?c.resolve(d[62]=void 0):c.sequence([function(a){return d[63]=new c.Map(),d[66]="message_tags",d[64]=d[56].get(d[66]),d[56],d[64]?d[65]=!1:d[65]=!0,d[65]?c.resolve():c.sequence([function(a){return d[67]=c.createArray(),d[68]=c.i64.of_int32(d[64].length),c.i64.gt(d[68],c.i64.cast([0,0]))?c.loopAsync(d[68],function(a){return d[69]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[64],d[69]).then(function(a){return a=a,d[70]=a[0],d[71]=a[1],a})},function(a){return d[72]=(d[67].push(d[70]),d[67])}])}):c.resolve()},function(a){return d[63].set(d[66],d[67])}])},function(a){return d[62]=d[63]}])},function(a){return d[53].set(d[60],d[62])}])},function(a){return d[58]=d[53].get("ttd"),d[53],d[58]!==void 0?(d[61]=new c.Map(),d[65]="message_tags",d[62]=d[58].get(d[65]),d[58],d[62]?d[63]=!1:d[63]=!0,d[63]?0:d[61].set(d[65],d[62]),d[64]=c.toJSON(d[61]),d[46].set("tags_to_delete",d[64])):0}]):c.resolve()},function(a){return d[51]=c.toJSON(d[46]),a=[d[51],void 0,d[4]],d[5]=a[0],d[6]=a[1],d[7]=a[2],a}]):c.resolve((d[3]?d[15]=!1:d[15]=!0,d[15]?(a=[void 0,void 0,d[4]],d[16]=a[0],d[17]=a[1],d[18]=a[2],a):(a=[void 0,d[3],d[4]],d[16]=a[0],d[17]=a[1],d[18]=a[2],a),a=[d[16],d[17],d[18]],d[5]=a[0],d[6]=a[1],d[7]=a[2],a))},function(a){return d[15]=new c.Map(),d[16]=d[15].set("success",d[5]),d[17]=d[15].set("failure",d[6]),d[18]=d[15].set("context",d[7]),d[19]=c.toJSON(d[15]),d[8]=d[19],d[9]=c.i64.of_float(Date.now()),d[10]=c.i64.random(),d[12]="Finishing execution. Execution time: ",d[13]=c.i64.to_string(c.i64.sub(d[9],d[0])),d[14]=" ms",d[11]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][taskSerializerEncryptedBackupsUploadProtobufOnly] ",d[11],d[12],d[11],d[13],d[11],d[14]].join("")),c.i64.eq(c.i64.mod_(d[10],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[15]=",",d[16]=c.createArray(),void 0!==void 0?d[17]=(d[16].push(void 0),d[16]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"taskSerializerEncryptedBackupsUploadProtobufOnly",[d[12],d[15],d[13],d[15],d[14]].join(""),d[16],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[8],c.i64.cast([0,50042]),void 0],e[0]=a[0],e[1]=a[1],e[2]=a[2],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsTaskSerializerEncryptedBackupsUploadProtobufOnlyStoredProcedure";e.exports=a}),null);
__d("LSTaskSerializerMuteThreadV2",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.db.table(32).fetch([[[a[0]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?(c[4]=b.createArray(),c[5]=(c[4].push("TaskSerializerMuteThreadV2: Task ID not found"),c[4]),c[6]=(c[4].push(a[0]),c[4]),c[7]=b.toJSON(c[4]),function(a){b.logger(a).mustfix(a)}(c[7]),f=[void 0,void 0,void 0],c[0]=f[0],c[1]=f[1],c[2]=f[2],f):(e=d.item,b.sequence([function(a){return c[8]=e.threadKey,b.db.table(9).fetch([[[c[8]]]]).next().then(function(d,e){var a=d.done;d=d.value;return a?(c[9]=b.createArray(),c[10]=(c[9].push("TaskSerializerMuteThreadV2: Thread not found"),c[9]),c[11]=(c[9].push(c[8]),c[9]),c[12]=b.toJSON(c[9]),function(a){b.logger(a).mustfix(a)}(c[12]),a=[void 0,void 0,void 0],c[4]=a[0],c[5]=a[1],c[6]=a[2],a):(e=d.item,b.sequence([function(a){return b.db.table(9).fetch([[[c[8]]]]).next().then(function(d,e){var a=d.done;d=d.value;return a?c[9]=b.i64.cast([0,1]):(e=d.item,c[14]=e.syncGroup,b.i64.neq(c[14],void 0)?c[13]=c[14]:c[13]=b.i64.cast([0,1]),c[9]=c[13])})},function(a){return c[11]=new b.Map(),c[11].set("thread_key",c[8]),c[11].set("mailbox_type",b.i64.cast([0,0])),c[11].set("mute_expire_time_ms",e.muteExpireTimeMs),c[11].set("sync_group",c[9]),c[12]=b.toJSON(c[11]),a=[c[12],b.i64.cast([0,144]),void 0],c[4]=a[0],c[5]=a[1],c[6]=a[2],a}]))})},function(a){return a=[c[4],c[5],c[6]],c[0]=a[0],c[1]=a[1],c[2]=a[2],a}]))})},function(a){return a=[c[0],c[1]],d[0]=a[0],d[1]=a[1],a}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxTaskSerializerMuteThreadV2StoredProcedure";e.exports=a}),null);
__d("LSTaskSerializerRemoveThread",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.db.table(32).fetch([[[a[0]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?(c[4]=b.createArray(),c[5]=(c[4].push("TaskSerializerRemoveThreadV2: Task ID not found"),c[4]),c[6]=(c[4].push(a[0]),c[4]),c[7]=b.toJSON(c[4]),function(a){b.logger(a).mustfix(a)}(c[7]),f=[void 0,void 0,void 0],c[0]=f[0],c[1]=f[1],c[2]=f[2],f):(e=d.item,c[7]=e.removeType,b.i64.neq(c[7],void 0)?(c[8]=new b.Map(),c[8].set("thread_key",e.threadKey),c[8].set("remove_type",c[7]),c[8].set("sync_group",e.syncGroup==null?b.i64.cast([0,1]):e.syncGroup),c[9]=b.toJSON(c[8]),f=[c[9],b.i64.cast([0,146]),void 0],c[4]=f[0],c[5]=f[1],c[6]=f[2],f):(d=[void 0,void 0,void 0],c[4]=d[0],c[5]=d[1],c[6]=d[2],d),e=[c[4],c[5],c[6]],c[0]=e[0],c[1]=e[1],c[2]=e[2],e)})},function(a){return a=[c[0],c[1]],d[0]=a[0],d[1]=a[1],a}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxTaskSerializerRemoveThreadStoredProcedure";e.exports=a}),null);
__d("LSTaskSerializerSendMessageV2",["LSSymmetricEncryptionCreateEncryptedString.nop","gkx"],(function(a,b,c,d,e,f,g){function a(){var a=arguments,b=a[a.length-1],d=[],e=[];return b.sequence([function(f){return b.sequence([function(e){return b.db.table(31).fetch([[[a[0]]]]).next().then(function(e,f){var g=e.done;e=e.value;return g?(d[4]=b.createArray(),d[5]=(d[4].push("task ID not found"),d[4]),d[6]=(d[4].push(a[0]),d[4]),d[7]=b.toJSON(d[4]),function(a){b.logger(a).mustfix(a)}(d[7]),g=[void 0,void 0,void 0],d[0]=g[0],d[1]=g[1],d[2]=g[2],g):(f=e.item,b.sequence([function(e){return d[11]=f.offlineThreadingId,d[12]=f.messageId,d[21]=f.threadAttributionSource,d[9]=f.platformRef,d[10]=f.platformToken,d[8]=f.replySourceId,d[13]=f.replySourceType,d[20]=f.sendType,d[22]=f.markThreadRead,d[14]=f.initiatingSource,d[15]=f.skipUrlPreviewGen,d[17]=f.textHasLinks,d[18]=f.dataclassParams,d[19]=f.multitabEnv,d[16]=f.richTextFormatType,b.db.table(12).fetch([[[d[11]]],"optimistic"]).next().then(function(f,g){var e=f.done;f=f.value;return e?(d[23]=b.createArray(),d[24]=(d[23].push("OTID not found"),d[23]),d[25]=(d[23].push(d[11]),d[23]),d[26]=b.toJSON(d[23]),function(a){b.logger(a).mustfix(a)}(d[26]),e=[void 0,void 0,void 0],d[4]=e[0],d[5]=e[1],d[6]=e[2],e):(g=f.item,b.sequence([function(e){return d[30]=g.text,d[27]=g.threadKey,d[31]=g.messageId,d[39]=g.senderId,d[29]=g.stickerId,d[33]=g.mentionOffsets,d[34]=g.mentionLengths,d[28]=g.mentionIds,d[35]=g.mentionTypes,d[38]=g.replyType,d[36]=g.isForwarded,d[32]=g.forwardScore,d[37]=g.hotEmojiSize,b.db.table(9).fetch([[[d[27]]]]).next().then(function(f,h){var e=f.done;f=f.value;return e?(d[40]=b.createArray(),d[41]=(d[40].push("thread not found"),d[40]),d[42]=(d[40].push(d[27]),d[40]),d[43]=b.toJSON(d[40]),function(a){b.logger(a).mustfix(a)}(d[43]),e=[void 0,void 0,void 0],d[23]=e[0],d[24]=e[1],d[25]=e[2],e):(h=f.item,b.sequence([function(c){return d[47]=h.threadName,d[46]=h.threadKey,d[48]=h.mailboxType,d[40]=h.threadType,d[49]=h.capabilities,d[50]=h.capabilities2,d[51]=h.capabilities3,d[52]=h.capabilities4,b.db.table(2).fetch([[[a[0]]]]).next().then(function(e,f){var c=e.done;e=e.value;return c?d[41]=!1:(f=e.item,b.sequence([function(c){return b.islc(b.db.table(2).fetch([[[f.queueName]],"queueNameTaskId"]),0,b.i64.to_float(b.i64.cast([0,1]))).next().then(function(e,f){var c=e.done;e=e.value;return c?d[53]=!1:(f=e.item,d[53]=b.i64.eq(f.taskId,a[0]))})},function(a){return d[41]=d[53]}]))})},function(a){return b.i64.eq(h.authorityLevel,b.i64.cast([0,20]))&&(b.i64.eq(d[40],b.i64.cast([0,2]))||b.i64.eq(d[40],b.i64.cast([0,5]))||b.i64.eq(d[40],b.i64.cast([0,26])))&&d[41]?b.sequence([function(a){return d[56]=d[20]==null?b.i64.cast([0,1]):d[20],b.db.table(9).fetch([[[d[27]]]]).next().then(function(c,e){var a=c.done;c=c.value;return a?d[53]=b.i64.cast([0,1]):(e=c.item,d[71]=e.syncGroup,b.i64.neq(d[71],void 0)?d[70]=d[71]:d[70]=b.i64.cast([0,1]),d[53]=d[70])})},function(a){return d[55]=new b.Map(),d[55].set("thread_id",d[27]),d[55].set("otid",d[11]),d[55].set("source",d[21]==null?b.i64.cast([0,0]):d[21]),d[55].set("send_type",b.i64.cast([0,1])),d[55].set("sync_group",d[53]),d[55].set("mark_thread_read",d[22]),b.i64.eq(d[56],b.i64.cast([0,1]))?b.resolve(d[55].set("text",d[30])):b.i64.eq(d[56],b.i64.cast([0,2]))?b.resolve(b.i64.neq(d[29],void 0)?(d[55].set("sticker_id",d[29]),d[55].set("send_type",d[56])):0):b.i64.eq(d[56],b.i64.cast([0,7]))?b.sequence([function(a){return b.db.table(16).fetch([[[d[27],d[31]]]]).next().then(function(b,c){var a=b.done;b=b.value;return a?(a=[void 0,void 0],d[70]=a[0],d[71]=a[1],a):(c=b.item,a=[c.filename,c.attributionAppId],d[70]=a[0],d[71]=a[1],a)})},function(a){return d[70]!==void 0?b.i64.neq(d[71],void 0)?(d[55].set("url",d[70]),d[55].set("attribution_app_id",d[71]),d[55].set("send_type",d[56])):0:0}]):b.i64.eq(d[56],b.i64.cast([0,3]))?b.sequence([function(a){return d[55].set("text",d[30]),d[70]=b.createArray(),d[71]=b.createArray(),b.forEach(b.sortBy(b.db.table(16).fetch([[[d[27],d[31]]]]),[["attachmentIndex","ASC"]]),function(a){a=a.item;return d[72]=a.offlineAttachmentId,d[73]=(d[70].push(b.i64.from_string(a.attachmentFbid)),d[70]),d[72]!==void 0?d[73]=(d[71].push(d[72]),d[71]):0})},function(a){return d[55].set("attachment_fbids",d[70]),b.i64.eq(d[56],b.i64.cast([0,9]))?d[55].set("offline_attachment_ids",d[71]):0,d[55].set("send_type",d[56])}]):b.i64.eq(d[56],b.i64.cast([0,9]))?b.sequence([function(a){return d[55].set("text",d[30]),d[70]=b.createArray(),d[71]=b.createArray(),b.forEach(b.sortBy(b.db.table(16).fetch([[[d[27],d[31]]]]),[["attachmentIndex","ASC"]]),function(a){a=a.item;return d[72]=a.offlineAttachmentId,d[73]=(d[70].push(b.i64.from_string(a.attachmentFbid)),d[70]),d[72]!==void 0?d[73]=(d[71].push(d[72]),d[71]):0})},function(a){return d[55].set("attachment_fbids",d[70]),b.i64.eq(d[56],b.i64.cast([0,9]))?d[55].set("offline_attachment_ids",d[71]):0,d[55].set("send_type",d[56])}]):b.i64.eq(d[56],b.i64.cast([0,10]))?b.sequence([function(a){return d[55].set("text",d[30]),d[70]=b.createArray(),d[71]=b.createArray(),b.forEach(b.sortBy(b.db.table(16).fetch([[[d[27],d[31]]]]),[["attachmentIndex","ASC"]]),function(a){a=a.item;return d[72]=a.offlineAttachmentId,d[73]=(d[70].push(b.i64.from_string(a.attachmentFbid)),d[70]),d[72]!==void 0?d[73]=(d[71].push(d[72]),d[71]):0})},function(a){return d[55].set("attachment_fbids",d[70]),b.i64.eq(d[56],b.i64.cast([0,9]))?d[55].set("offline_attachment_ids",d[71]):0,d[55].set("send_type",d[56])}]):b.i64.eq(d[56],b.i64.cast([0,4]))?b.sequence([function(a){return b.db.table(16).fetch([[[d[27],d[31]]]]).next().then(function(b,c){var a=b.done;b=b.value;return a?d[70]=void 0:(c=b.item,d[70]=c.attachmentFbid)})},function(a){return b.db.table(16).fetch([[[d[27],d[31]]]]).next().then(function(b,c){var a=b.done;b=b.value;return a?d[72]=void 0:(c=b.item,d[72]=c.actionUrl)})},function(a){return d[70]!==void 0?(d[55].set("text",d[30]),d[72]!==void 0?d[55].set("url",d[72]):0,d[55].set("forwarded_share_id",d[70]),d[55].set("send_type",d[56])):0}]):b.i64.eq(d[56],b.i64.cast([0,5]))?b.resolve(d[12]!==void 0?(d[55].set("forwarded_msg_id",d[12]),d[55].set("send_type",d[56]),b.i64.neq(d[32],void 0)?d[55].set("forward_score",d[32]):0,d[55].set("strip_forwarded_msg_caption",!1)):0):b.i64.eq(d[56],b.i64.cast([0,6]))?b.sequence([function(a){return b.db.table(16).fetch([[[d[27],d[31]]]]).next().then(function(b,c){var a=b.done;b=b.value;return a?(a=[void 0,void 0],d[70]=a[0],d[71]=a[1],a):(c=b.item,a=[c.filename,c.attributionAppId],d[70]=a[0],d[71]=a[1],a)})},function(a){return d[70]!==void 0?(d[55].set("url",d[70]),d[55].set("text",d[30]),d[55].set("send_type",d[56])):0}]):b.i64.eq(d[56],b.i64.cast([0,11]))?b.sequence([function(a){return b.db.table(16).fetch([[[d[27],d[31]]]]).next().then(function(b,c){var a=b.done;b=b.value;return a?(a=[void 0,void 0],d[70]=a[0],d[71]=a[1],a):(c=b.item,a=[c.actionUrl,c.attributionAppId],d[70]=a[0],d[71]=a[1],a)})},function(a){return d[70]!==void 0?(d[55].set("url",d[70]),c("gkx")("3272")?d[55].set("text",d[30]):0,d[55].set("send_type",d[56])):0}]):b.resolve(0)},function(a){return d[66]=d[8]===""?void 0:d[8],d[66]!==void 0?b.i64.neq(d[13],void 0)?(d[70]=new b.Map(),d[70].set("reply_source_id",d[66]),d[70].set("reply_source_type",d[13]),d[70].set("reply_type",d[38]==null?b.i64.cast([0,0]):d[38]),d[70].set("reply_source_attachment_id",void 0),d[55].set("reply_metadata",d[70])):0:0,d[67]=d[28]===""?void 0:d[28],d[67]!==void 0?(d[70]=d[33]===""?void 0:d[33],d[70]!==void 0?(d[71]=d[34]===""?void 0:d[34],d[71]!==void 0?(d[72]=new b.Map(),d[72].set("mention_ids",d[67]),d[72].set("mention_offsets",d[70]),d[72].set("mention_lengths",d[71]),d[72].set("mention_types",d[35]===""?void 0:d[35]),d[55].set("mention_data",d[72])):0):0):0,d[36]!==void 0?d[55].set("is_forwarded",d[36]):0,d[68]=d[9]===""?void 0:d[9],d[68]!==void 0?d[55].set("platform_ref",d[68]):0,d[69]=d[10]===""?void 0:d[10],d[69]!==void 0?d[55].set("platform_token",d[69]):0,[b.i64.cast([0,1]),b.i64.cast([0,2])].some(function(a){return b.i64.eq(d[56],a)})?b.i64.neq(d[37],void 0)?d[55].set("hot_emoji_size",d[37]):0:0,b.i64.neq(d[14],void 0)?d[55].set("initiating_source",d[14]):0,d[15]!==void 0?d[55].set("skip_url_preview_gen",d[15]):0,b.i64.neq(d[16],void 0)?d[55].set("rich_text_format_type",d[16]):0,b.resolve()},function(a){return d[17]!==void 0?d[55].set("text_has_links",d[17]):0,d[18]!==void 0?d[55].set("dataclass_params",d[18]):0,d[19]!==void 0?d[55].set("multitab_env",d[19]):0,b.filter(b.db.table(14).fetch([[[d[46],d[39]]]]),function(a){return b.i64.eq(a.threadKey,d[46])&&b.i64.eq(b.i64.cast([0,0]),d[48])&&b.i64.eq(a.contactId,d[39])}).next().then(function(c,e){var a=c.done;c=c.value;return a?d[57]=!1:(e=c.item,b.i64.eq(d[40],b.i64.cast([0,152]))?(d[71]=e.threadRoles,b.i64.lt(b.i64.cast([0,7]),b.i64.cast([0,0]))||b.i64.gt(b.i64.cast([0,7]),b.i64.cast([0,7]))?d[72]=!1:d[72]=!b.i64.eq(b.i64.and_(b.i64.lsl_(b.i64.cast([0,1]),b.i64.to_int32(b.i64.cast([0,7]))),d[71]),b.i64.cast([0,0])),d[73]=d[49],d[74]=d[50],d[75]=d[51],d[76]=d[52],d[78]=b.i64.div(b.i64.cast([0,223]),b.i64.cast([0,64])),d[79]=b.i64.lsl_(b.i64.cast([0,1]),b.i64.to_int32(b.i64.sub(b.i64.cast([0,223]),b.i64.mul(d[78],b.i64.cast([0,64]))))),b.i64.lt(b.i64.cast([0,223]),b.i64.cast([0,0]))||b.i64.gt(b.i64.cast([0,223]),b.i64.cast([0,246]))?d[77]=!1:(b.i64.eq(d[78],b.i64.cast([0,0]))?d[80]=!b.i64.eq(b.i64.and_(d[79],d[73]),b.i64.cast([0,0])):(b.i64.eq(d[78],b.i64.cast([0,1]))?d[81]=!b.i64.eq(b.i64.and_(d[79],d[74]),b.i64.cast([0,0])):(b.i64.eq(d[78],b.i64.cast([0,2]))?d[82]=!b.i64.eq(b.i64.and_(d[79],d[75]),b.i64.cast([0,0])):(b.i64.eq(d[78],b.i64.cast([0,3]))?d[83]=!b.i64.eq(b.i64.and_(d[79],d[76]),b.i64.cast([0,0])):d[83]=!1,d[82]=d[83]),d[81]=d[82]),d[80]=d[81]),d[77]=d[80]),d[72]===d[77]?0:(function(a){b.logger(a).mustfix(a)}("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting"),b["throw"]("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting")),d[70]=d[72]):d[70]=!1,d[57]=d[70])})},function(a){return d[57]?d[55].set("perform_action_as_page",!0):0,d[59]=b.createArray(),b.forEach(b.db.table(14).fetch([[[d[27]]]]),function(a){a=a.item;return d[70]=(d[59].push(a.contactId),d[59])})},function(a){return d[60]=new b.Map(),d[60].set("participants",d[59]),d[60].set("send_payload",d[55]),d[47]!==void 0?d[60].set("thread_name",d[47]):0,b.db.table(312).fetch([[[d[27]]]]).next().then(function(b,c){var a=b.done;b=b.value;return a?d[61]=void 0:(c=b.item,d[61]=c.metadata)})},function(a){return d[60].set("thread_metadata",d[61]),b.forEach(b.db.table(9).fetch([[[d[46]]]]),function(a){var b=a.update;a.item;return b({otidOfFirstMessage:g.offlineThreadingId})})},function(a){return d[61]===void 0||!1?(b.i64.eq(d[40],b.i64.cast([0,5]))||b.i64.eq(d[40],b.i64.cast([0,26]))?(function(a){b.logger(a).mustfix(a)}("For Marketplace & community chat subthreads, thread metadata cannot be null"),a=[void 0,void 0,void 0],d[70]=a[0],d[71]=a[1],d[72]=a[2],a):(d[73]=b.toJSON(d[60]),a=[d[73],b.i64.cast([0,130]),void 0],d[70]=a[0],d[71]=a[1],d[72]=a[2],a),a=[d[70],d[71],d[72]],d[63]=a[0],d[64]=a[1],d[65]=a[2],a):(b.i64.eq(d[40],b.i64.cast([0,5]))?(d[73]=b.toJSON(d[60]),a=[d[73],b.i64.cast([0,645]),void 0],d[70]=a[0],d[71]=a[1],d[72]=a[2],a):(b.i64.eq(d[40],b.i64.cast([0,26]))?(d[76]=b.toJSON(d[60]),a=[d[76],b.i64.cast([0,696]),void 0],d[73]=a[0],d[74]=a[1],d[75]=a[2],a):(b.i64.eq(d[40],b.i64.cast([0,2]))?(d[79]=b.toJSON(d[60]),a=[d[79],b.i64.cast([0,787]),void 0],d[76]=a[0],d[77]=a[1],d[78]=a[2],a):(d[79]=b.toJSON(d[60]),a=[d[79],b.i64.cast([0,645]),void 0],d[76]=a[0],d[77]=a[1],d[78]=a[2],a),a=[d[76],d[77],d[78]],d[73]=a[0],d[74]=a[1],d[75]=a[2],a),a=[d[73],d[74],d[75]],d[70]=a[0],d[71]=a[1],d[72]=a[2],a),a=[d[70],d[71],d[72]],d[63]=a[0],d[64]=a[1],d[65]=a[2],a),a=[d[63],d[64],d[65]],d[43]=a[0],d[44]=a[1],d[45]=a[2],a}]):b.sequence([function(a){return d[56]=d[20]==null?b.i64.cast([0,1]):d[20],b.db.table(9).fetch([[[d[27]]]]).next().then(function(c,e){var a=c.done;c=c.value;return a?d[53]=b.i64.cast([0,1]):(e=c.item,d[65]=e.syncGroup,b.i64.neq(d[65],void 0)?d[64]=d[65]:d[64]=b.i64.cast([0,1]),d[53]=d[64])})},function(a){return d[55]=new b.Map(),d[55].set("thread_id",d[27]),d[55].set("otid",d[11]),d[55].set("source",d[21]==null?b.i64.cast([0,0]):d[21]),d[55].set("send_type",b.i64.cast([0,1])),d[55].set("sync_group",d[53]),d[55].set("mark_thread_read",d[22]),b.i64.eq(d[56],b.i64.cast([0,1]))?b.resolve(d[55].set("text",d[30])):b.i64.eq(d[56],b.i64.cast([0,2]))?b.resolve(b.i64.neq(d[29],void 0)?(d[55].set("sticker_id",d[29]),d[55].set("send_type",d[56])):0):b.i64.eq(d[56],b.i64.cast([0,7]))?b.sequence([function(a){return b.db.table(16).fetch([[[d[27],d[31]]]]).next().then(function(b,c){var a=b.done;b=b.value;return a?(a=[void 0,void 0],d[64]=a[0],d[65]=a[1],a):(c=b.item,a=[c.filename,c.attributionAppId],d[64]=a[0],d[65]=a[1],a)})},function(a){return d[64]!==void 0?b.i64.neq(d[65],void 0)?(d[55].set("url",d[64]),d[55].set("attribution_app_id",d[65]),d[55].set("send_type",d[56])):0:0}]):b.i64.eq(d[56],b.i64.cast([0,3]))?b.sequence([function(a){return d[55].set("text",d[30]),d[64]=b.createArray(),d[65]=b.createArray(),b.forEach(b.sortBy(b.db.table(16).fetch([[[d[27],d[31]]]]),[["attachmentIndex","ASC"]]),function(a){a=a.item;return d[66]=a.offlineAttachmentId,d[67]=(d[64].push(b.i64.from_string(a.attachmentFbid)),d[64]),d[66]!==void 0?d[67]=(d[65].push(d[66]),d[65]):0})},function(a){return d[55].set("attachment_fbids",d[64]),b.i64.eq(d[56],b.i64.cast([0,9]))?d[55].set("offline_attachment_ids",d[65]):0,d[55].set("send_type",d[56])}]):b.i64.eq(d[56],b.i64.cast([0,9]))?b.sequence([function(a){return d[55].set("text",d[30]),d[64]=b.createArray(),d[65]=b.createArray(),b.forEach(b.sortBy(b.db.table(16).fetch([[[d[27],d[31]]]]),[["attachmentIndex","ASC"]]),function(a){a=a.item;return d[66]=a.offlineAttachmentId,d[67]=(d[64].push(b.i64.from_string(a.attachmentFbid)),d[64]),d[66]!==void 0?d[67]=(d[65].push(d[66]),d[65]):0})},function(a){return d[55].set("attachment_fbids",d[64]),b.i64.eq(d[56],b.i64.cast([0,9]))?d[55].set("offline_attachment_ids",d[65]):0,d[55].set("send_type",d[56])}]):b.i64.eq(d[56],b.i64.cast([0,10]))?b.sequence([function(a){return d[55].set("text",d[30]),d[64]=b.createArray(),d[65]=b.createArray(),b.forEach(b.sortBy(b.db.table(16).fetch([[[d[27],d[31]]]]),[["attachmentIndex","ASC"]]),function(a){a=a.item;return d[66]=a.offlineAttachmentId,d[67]=(d[64].push(b.i64.from_string(a.attachmentFbid)),d[64]),d[66]!==void 0?d[67]=(d[65].push(d[66]),d[65]):0})},function(a){return d[55].set("attachment_fbids",d[64]),b.i64.eq(d[56],b.i64.cast([0,9]))?d[55].set("offline_attachment_ids",d[65]):0,d[55].set("send_type",d[56])}]):b.i64.eq(d[56],b.i64.cast([0,4]))?b.sequence([function(a){return b.db.table(16).fetch([[[d[27],d[31]]]]).next().then(function(b,c){var a=b.done;b=b.value;return a?d[64]=void 0:(c=b.item,d[64]=c.attachmentFbid)})},function(a){return b.db.table(16).fetch([[[d[27],d[31]]]]).next().then(function(b,c){var a=b.done;b=b.value;return a?d[66]=void 0:(c=b.item,d[66]=c.actionUrl)})},function(a){return d[64]!==void 0?(d[55].set("text",d[30]),d[66]!==void 0?d[55].set("url",d[66]):0,d[55].set("forwarded_share_id",d[64]),d[55].set("send_type",d[56])):0}]):b.i64.eq(d[56],b.i64.cast([0,5]))?b.resolve(d[12]!==void 0?(d[55].set("forwarded_msg_id",d[12]),d[55].set("send_type",d[56]),b.i64.neq(d[32],void 0)?d[55].set("forward_score",d[32]):0,d[55].set("strip_forwarded_msg_caption",!1)):0):b.i64.eq(d[56],b.i64.cast([0,6]))?b.sequence([function(a){return b.db.table(16).fetch([[[d[27],d[31]]]]).next().then(function(b,c){var a=b.done;b=b.value;return a?(a=[void 0,void 0],d[64]=a[0],d[65]=a[1],a):(c=b.item,a=[c.filename,c.attributionAppId],d[64]=a[0],d[65]=a[1],a)})},function(a){return d[64]!==void 0?(d[55].set("url",d[64]),d[55].set("text",d[30]),d[55].set("send_type",d[56])):0}]):b.i64.eq(d[56],b.i64.cast([0,11]))?b.sequence([function(a){return b.db.table(16).fetch([[[d[27],d[31]]]]).next().then(function(b,c){var a=b.done;b=b.value;return a?(a=[void 0,void 0],d[64]=a[0],d[65]=a[1],a):(c=b.item,a=[c.actionUrl,c.attributionAppId],d[64]=a[0],d[65]=a[1],a)})},function(a){return d[64]!==void 0?(d[55].set("url",d[64]),c("gkx")("3272")?d[55].set("text",d[30]):0,d[55].set("send_type",d[56])):0}]):b.resolve(0)},function(a){return d[60]=d[8]===""?void 0:d[8],d[60]!==void 0?b.i64.neq(d[13],void 0)?(d[64]=new b.Map(),d[64].set("reply_source_id",d[60]),d[64].set("reply_source_type",d[13]),d[64].set("reply_type",d[38]==null?b.i64.cast([0,0]):d[38]),d[64].set("reply_source_attachment_id",void 0),d[55].set("reply_metadata",d[64])):0:0,d[61]=d[28]===""?void 0:d[28],d[61]!==void 0?(d[64]=d[33]===""?void 0:d[33],d[64]!==void 0?(d[65]=d[34]===""?void 0:d[34],d[65]!==void 0?(d[66]=new b.Map(),d[66].set("mention_ids",d[61]),d[66].set("mention_offsets",d[64]),d[66].set("mention_lengths",d[65]),d[66].set("mention_types",d[35]===""?void 0:d[35]),d[55].set("mention_data",d[66])):0):0):0,d[36]!==void 0?d[55].set("is_forwarded",d[36]):0,d[62]=d[9]===""?void 0:d[9],d[62]!==void 0?d[55].set("platform_ref",d[62]):0,d[63]=d[10]===""?void 0:d[10],d[63]!==void 0?d[55].set("platform_token",d[63]):0,[b.i64.cast([0,1]),b.i64.cast([0,2])].some(function(a){return b.i64.eq(d[56],a)})?b.i64.neq(d[37],void 0)?d[55].set("hot_emoji_size",d[37]):0:0,b.i64.neq(d[14],void 0)?d[55].set("initiating_source",d[14]):0,d[15]!==void 0?d[55].set("skip_url_preview_gen",d[15]):0,b.i64.neq(d[16],void 0)?d[55].set("rich_text_format_type",d[16]):0,b.resolve()},function(a){return d[17]!==void 0?d[55].set("text_has_links",d[17]):0,d[18]!==void 0?d[55].set("dataclass_params",d[18]):0,d[19]!==void 0?d[55].set("multitab_env",d[19]):0,b.filter(b.db.table(14).fetch([[[d[46],d[39]]]]),function(a){return b.i64.eq(a.threadKey,d[46])&&b.i64.eq(b.i64.cast([0,0]),d[48])&&b.i64.eq(a.contactId,d[39])}).next().then(function(c,e){var a=c.done;c=c.value;return a?d[57]=!1:(e=c.item,b.i64.eq(d[40],b.i64.cast([0,152]))?(d[65]=e.threadRoles,b.i64.lt(b.i64.cast([0,7]),b.i64.cast([0,0]))||b.i64.gt(b.i64.cast([0,7]),b.i64.cast([0,7]))?d[66]=!1:d[66]=!b.i64.eq(b.i64.and_(b.i64.lsl_(b.i64.cast([0,1]),b.i64.to_int32(b.i64.cast([0,7]))),d[65]),b.i64.cast([0,0])),d[67]=d[49],d[68]=d[50],d[69]=d[51],d[70]=d[52],d[72]=b.i64.div(b.i64.cast([0,223]),b.i64.cast([0,64])),d[73]=b.i64.lsl_(b.i64.cast([0,1]),b.i64.to_int32(b.i64.sub(b.i64.cast([0,223]),b.i64.mul(d[72],b.i64.cast([0,64]))))),b.i64.lt(b.i64.cast([0,223]),b.i64.cast([0,0]))||b.i64.gt(b.i64.cast([0,223]),b.i64.cast([0,246]))?d[71]=!1:(b.i64.eq(d[72],b.i64.cast([0,0]))?d[74]=!b.i64.eq(b.i64.and_(d[73],d[67]),b.i64.cast([0,0])):(b.i64.eq(d[72],b.i64.cast([0,1]))?d[75]=!b.i64.eq(b.i64.and_(d[73],d[68]),b.i64.cast([0,0])):(b.i64.eq(d[72],b.i64.cast([0,2]))?d[76]=!b.i64.eq(b.i64.and_(d[73],d[69]),b.i64.cast([0,0])):(b.i64.eq(d[72],b.i64.cast([0,3]))?d[77]=!b.i64.eq(b.i64.and_(d[73],d[70]),b.i64.cast([0,0])):d[77]=!1,d[76]=d[77]),d[75]=d[76]),d[74]=d[75]),d[71]=d[74]),d[66]===d[71]?0:(function(a){b.logger(a).mustfix(a)}("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting"),b["throw"]("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting")),d[64]=d[66]):d[64]=!1,d[57]=d[64])})},function(a){return d[57]?d[55].set("perform_action_as_page",!0):0,d[59]=b.toJSON(d[55]),a=[d[59],b.i64.cast([0,46]),void 0],d[43]=a[0],d[44]=a[1],d[45]=a[2],a}])},function(a){return a=[d[43],d[44],d[45]],d[23]=a[0],d[24]=a[1],d[25]=a[2],a}]))})},function(a){return a=[d[23],d[24],d[25]],d[4]=a[0],d[5]=a[1],d[6]=a[2],a}]))})},function(a){return a=[d[4],d[5],d[6]],d[0]=a[0],d[1]=a[1],d[2]=a[2],a}]))})},function(a){return a=[d[0],d[1]],e[0]=a[0],e[1]=a[1],a}])},function(a){return b.resolve(e)}])}a.__sproc_name__="LSMailboxTaskSerializerSendMessageV2StoredProcedure";b=a;g["default"]=b}),98);
__d("LSTaskSerializerSyncThreadCapabilities",[],(function(a,b,c,d,e,f){function a(){var a,b=arguments,c=b[b.length-1],d=[];return a=[void 0,void 0,void 0],d[0]=a[0],d[1]=a[1],d[2]=a[2],a,c.resolve(d)}a.__sproc_name__="LSMailboxTaskSerializerSyncThreadCapabilitiesStoredProcedure";e.exports=a}),null);
__d("LSACSExperimentCapability",[],(function(a,b,c,d,e,f){a=Object.freeze({RETRY_AFTER_TASK_SERIALIZATION_FAILURE_EXPONENTIAL_BACKOFF:0,BUMP_TOKEN_SYNC_TASK_AT_TASK_SERIALIZATION:1,INSERT_PENDING_TASK_PARENT_ROW_WHEN_NO_ACS_TOKENS_AT_TASK_INSERTION:2});f["default"]=a}),66);
__d("LSIsExperimentCapabilityEnabled.nop",["LSACSExperimentCapability","LSIntEnum","MetaConfig","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("MetaConfig")._("87"),k=c("MetaConfig")._("156");a=function(a,e,f,g){switch((i||(i=d("LSIntEnum"))).toNumber(f)){case c("LSACSExperimentCapability").BUMP_TOKEN_SYNC_TASK_AT_TASK_SERIALIZATION:return(h||(h=b("Promise"))).resolve([k]);case c("LSACSExperimentCapability").INSERT_PENDING_TASK_PARENT_ROW_WHEN_NO_ACS_TOKENS_AT_TASK_INSERTION:return(h||(h=b("Promise"))).resolve([!1]);case c("LSACSExperimentCapability").RETRY_AFTER_TASK_SERIALIZATION_FAILURE_EXPONENTIAL_BACKOFF:return(h||(h=b("Promise"))).resolve([j])}return(h||(h=b("Promise"))).resolve([!1])};g["default"]=a}),98);
__d("LSMailboxTaskCompletionApiOnTaskCompletion",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(233).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({success:a[1]})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSCoreMailboxTaskCompletionApiOnTaskCompletionStoredProcedure";e.exports=a}),null);
__d("LSVoprfHmac.nop",["ACSCipherSuiteModule","ACSTokenHmacUtil","Promise","XPlatReactTextEncoder","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f){a=d("ACSCipherSuiteModule").getACSCipherSuiteByValue(d("ACSCipherSuiteModule").VOPRF_RISTRETTO_HMACSHA512.value);if(!a)return(h||(h=b("Promise"))).resolve([void 0]);c=(yield d("ACSTokenHmacUtil").hmac(a.macAlgorithm,new Uint8Array(f).slice(),new(d("XPlatReactTextEncoder").TextEncoder)().encode(e)));return(h||(h=b("Promise"))).resolve([c.buffer])});function c(b,c,d,e){return a.apply(this,arguments)}return c}();g["default"]=a}),98);
__d("LSTaskSerializerUnauthenticatedTask",["LSArrayGetObjectAt","LSBase64Encode.nop","LSIsExperimentCapabilityEnabled.nop","LSMailboxTaskCompletionApiOnTaskCompletion","LSRemoveUsedTokens","LSVoprfHmac.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return c.db.table(311).fetch([[[a[0]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[0]=void 0:(b=a.item,d[0]=b.projectName)})},function(e){return d[0]!==void 0?c.sequence([function(e){return a[1]!==void 0?c.sequence([function(a){return d[9]=c.createArray(),d[10]=c.i64.of_float(Date.now()),c.forEach(c.filter(c.db.table(307).fetch(),function(a){return d[0]===a.projectName&&c.i64.gt(a.expirationTimestampMs,d[10])}),function(a){a=a.item;return d[16]=(d[9].push(a.configId),d[9])})},function(a){return c.sequence([function(a){return d[16]=c.createArray(),d[17]=c.i64.of_int32(d[9].length),c.i64.gt(d[17],c.i64.cast([0,0]))?c.loopAsync(d[17],function(a){return d[19]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[9],d[19]).then(function(a){return a=a,d[20]=a[0],d[21]=a[1],a})},function(a){return d[22]=(d[16].push(d[20]),d[16])}])}):c.resolve()},function(a){return d[18]=d[16].join(","),d[11]=d[18]}])},function(e){return c.filter(c.db.table(309).fetch(),function(a){return d[9].includes(a.configId)&&c.i64.gt(a.redeemLimit,c.i64.cast([0,0]))}).next().then(function(e,f){var g=e.done;e=e.value;return g?c.sequence([function(a){return c.nativeOperation(b("LSIsExperimentCapabilityEnabled.nop"),c.i64.cast([0,0]),d[0]).then(function(a){return a=a,d[16]=a[0],a})},function(e){return d[16]?c.sequence([function(b){return c.db.table(311).fetch([[[a[0]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[20]=c.i64.cast([0,0]):(e=b.item,d[20]=e.failureCount)})},function(b){return c.forEach(c.db.table(311).fetch([[[a[0]]]]),function(a){a=a.item;return c.forEach(c.db.table(311).fetch([[[a.taskId]]]),function(a){var b=a.update;a.item;return b({failureCount:c.i64.add(d[20],c.i64.cast([0,1]))})})})},function(a){return a=[void 0,void 0,c.i64.mul(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.mod_(d[20],c.i64.cast([0,7])))),c.i64.cast([0,500]))],d[17]=a[0],d[18]=a[1],d[19]=a[2],a}]):c.sequence([function(d){return c.storedProcedure(b("LSMailboxTaskCompletionApiOnTaskCompletion"),a[0],!1)},function(b){return d[20]=c.createArray(),d[21]=(d[20].push("Unauthenticated Task Serializer: no valid tokens"),d[20]),d[22]=(d[20].push(a[0]),d[20]),d[23]=(d[20].push(d[0]),d[20]),d[24]=c.toJSON(d[20]),function(a){c.logger(a).mustfix(a)}(d[24]),b=[void 0,void 0,void 0],d[17]=b[0],d[18]=b[1],d[19]=b[2],b}])},function(a){return a=[d[17],d[18],d[19]],d[12]=a[0],d[13]=a[1],d[14]=a[2],a}]):(f=e.item,c.sequence([function(e){return d[20]=f.tokenId,c.nativeOperation(b("LSVoprfHmac.nop"),a[2]==null?"":a[2],f.sharedSecret).then(function(a){return a=a,d[16]=a[0],a})},function(e){return c.blobs.neq(d[16],void 0)?c.sequence([function(a){return c.forEach(c.db.table(309).fetch([[[d[20]]]]),function(a){var b=a.update;a=a.item;return b({redeemLimit:c.i64.sub(a.redeemLimit,c.i64.cast([0,1]))})})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[16]).then(function(a){return a=a,d[21]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),f.nonce).then(function(a){return a=a,d[22]=a[0],a})},function(b){return d[23]=new c.Map(),d[23].set("config_id",f.configId),d[23].set("tag",d[21]==null?"":d[21]),d[23].set("aux",d[22]==null?"":d[22]),d[23].set("project_name",d[0]),d[24]=c.toJSON(d[23]),d[25]=new c.Map(),d[25].set("payload",a[2]==null?"":a[2]),d[25].set("token",d[24]),d[26]=c.toJSON(d[25]),b=[d[26],c.i64.from_string(a[1]),void 0],d[17]=b[0],d[18]=b[1],d[19]=b[2],b}]):c.sequence([function(a){return c.forEach(c.db.table(309).fetch([[[d[20]]]]),function(a){return a["delete"]()})},function(d){return c.storedProcedure(b("LSMailboxTaskCompletionApiOnTaskCompletion"),a[0],!1)},function(b){return d[21]=c.createArray(),d[22]=(d[21].push("Unauthenticated Task Serializer: hmac failed"),d[21]),d[23]=(d[21].push(a[0]),d[21]),d[24]=c.toJSON(d[21]),function(a){c.logger(a).mustfix(a)}(d[24]),b=[void 0,void 0,void 0],d[17]=b[0],d[18]=b[1],d[19]=b[2],b}])},function(a){return a=[d[17],d[18],d[19]],d[12]=a[0],d[13]=a[1],d[14]=a[2],a}]))})},function(a){return a=[d[12],d[13],d[14]],d[6]=a[0],d[7]=a[1],d[8]=a[2],a}]):c.sequence([function(d){return c.storedProcedure(b("LSMailboxTaskCompletionApiOnTaskCompletion"),a[0],!1)},function(b){return d[9]=c.createArray(),d[10]=(d[9].push("Unauthenticated Task Serializer: task has no write label"),d[9]),d[11]=(d[9].push(a[0]),d[9]),d[12]=c.toJSON(d[9]),function(a){c.logger(a).mustfix(a)}(d[12]),b=[void 0,void 0,void 0],d[6]=b[0],d[7]=b[1],d[8]=b[2],b}])},function(a){return a=[d[6],d[7],d[8]],d[2]=a[0],d[3]=a[1],d[4]=a[2],a}]):c.sequence([function(d){return c.storedProcedure(b("LSMailboxTaskCompletionApiOnTaskCompletion"),a[0],!1)},function(b){return d[6]=c.createArray(),d[7]=(d[6].push("Unauthenticated Task Serializer: anonymous_task_context row not found"),d[6]),d[8]=(d[6].push(a[0]),d[6]),d[9]=c.toJSON(d[6]),function(a){c.logger(a).mustfix(a)}(d[9]),b=[void 0,void 0,void 0],d[2]=b[0],d[3]=b[1],d[4]=b[2],b}])},function(a){return c.storedProcedure(b("LSRemoveUsedTokens"))},function(a){return d[0]!==void 0?c.sequence([function(a){return c.nativeOperation(b("LSIsExperimentCapabilityEnabled.nop"),c.i64.cast([0,1]),d[0]).then(function(a){return a=a,d[6]=a[0],a})},function(a){return d[6]?c.sequence([function(a){return c.i64.neq(d[4],void 0)?c.resolve(d[8]=!0):c.sequence([function(a){return d[10]=c.createArray(),d[11]=c.i64.of_float(Date.now()),c.forEach(c.filter(c.db.table(307).fetch(),function(a){return d[0]===a.projectName&&c.i64.gt(a.expirationTimestampMs,d[11])}),function(a){a=a.item;return d[15]=(d[10].push(a.configId),d[10])})},function(a){return c.sequence([function(a){return d[15]=c.createArray(),d[16]=c.i64.of_int32(d[10].length),c.i64.gt(d[16],c.i64.cast([0,0]))?c.loopAsync(d[16],function(a){return d[18]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[10],d[18]).then(function(a){return a=a,d[19]=a[0],d[20]=a[1],a})},function(a){return d[21]=(d[15].push(d[19]),d[15])}])}):c.resolve()},function(a){return d[17]=d[15].join(","),d[12]=d[17]}])},function(a){return c.filter(c.db.table(309).fetch(),function(a){return d[10].includes(a.configId)&&c.i64.gt(a.redeemLimit,c.i64.cast([0,0]))}).next().then(function(a,b){b=a.done;a=a.value;return b?d[13]=!0:(a.item,d[13]=!1)})},function(a){return d[8]=d[13]}])},function(a){return d[8]?c.sequence([function(a){return c.filter(c.db.table(310).fetch(),function(a){return a.projectName===d[0]}).next().then(function(a,b){var c=a.done;a=a.value;return c?d[10]=void 0:(b=a.item,d[10]=b.taskId)})},function(a){return d[9]=d[10]}]):c.resolve(d[9]=void 0)},function(a){return d[7]=d[9]}]):c.resolve(d[7]=void 0)},function(a){return d[5]=d[7]}]):c.resolve(d[5]=void 0)},function(a){return a=[d[2],d[3],d[4],d[5]],e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSAnonymousCredentialsTaskSerializerUnauthenticatedTaskStoredProcedure";e.exports=a}),null);
__d("LSTaskSerializerUpdateThreadName",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.db.table(32).fetch([[[a[0]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?(c[4]=b.createArray(),c[5]=(c[4].push("taskSerializerUpdateThreadName: Task ID not found"),c[4]),c[6]=(c[4].push(a[0]),c[4]),c[7]=b.toJSON(c[4]),function(a){b.logger(a).mustfix(a)}(c[7]),f=[void 0,void 0,void 0],c[0]=f[0],c[1]=f[1],c[2]=f[2],f):(e=d.item,b.sequence([function(a){return c[8]=e.threadKey,b.db.table(9).fetch([[[c[8]]]]).next().then(function(d,e){var a=d.done;d=d.value;return a?(c[9]=b.createArray(),c[10]=(c[9].push("taskSerializerUpdateThreadName: Thread not found"),c[9]),c[11]=(c[9].push(c[8]),c[9]),c[12]=b.toJSON(c[9]),function(a){b.logger(a).mustfix(a)}(c[12]),a=[void 0,void 0,void 0],c[4]=a[0],c[5]=a[1],c[6]=a[2],a):(e=d.item,b.sequence([function(a){return b.db.table(9).fetch([[[c[8]]]]).next().then(function(d,e){var a=d.done;d=d.value;return a?c[9]=b.i64.cast([0,1]):(e=d.item,c[14]=e.syncGroup,b.i64.neq(c[14],void 0)?c[13]=c[14]:c[13]=b.i64.cast([0,1]),c[9]=c[13])})},function(a){return c[11]=new b.Map(),c[11].set("thread_key",c[8]),c[11].set("thread_name",e.threadName==null?"":e.threadName),c[11].set("sync_group",c[9]),c[12]=b.toJSON(c[11]),a=[c[12],b.i64.cast([0,32]),void 0],c[4]=a[0],c[5]=a[1],c[6]=a[2],a}]))})},function(a){return a=[c[4],c[5],c[6]],c[0]=a[0],c[1]=a[1],c[2]=a[2],a}]))})},function(a){return a=[c[0],c[1],c[2]],d[0]=a[0],d[1]=a[1],d[2]=a[2],a}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxTaskSerializerUpdateThreadNameStoredProcedure";e.exports=a}),null);
__d("LSSerializeTask",["LSForceTaskExecutionImmediately","LSTaskSerializerAcsIssueNextSync","LSTaskSerializerE2eeMessageIntegrityCheckV2","LSTaskSerializerE2eeMetadataThreadIntegrityCheck","LSTaskSerializerEncryptedBackupAction","LSTaskSerializerEncryptedBackupsLoopingUpload","LSTaskSerializerEncryptedBackupsOpenUpload","LSTaskSerializerEncryptedBackupsRestoreWithSerializer","LSTaskSerializerEncryptedBackupsUpload","LSTaskSerializerEncryptedBackupsUploadProtobufOnly","LSTaskSerializerMuteThreadV2","LSTaskSerializerRemoveThread","LSTaskSerializerSendMessageV2","LSTaskSerializerSyncThreadCapabilities","LSTaskSerializerUnauthenticatedTask","LSTaskSerializerUpdateThreadName"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return a[1]==="46"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerSendMessageV2"),a[0]).then(function(a){return a=a,d[8]=a[0],d[9]=a[1],a})},function(a){return a=[d[8],c.i64.to_string(d[9]),void 0,void 0],d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],a}]):c.sequence([function(e){return a[1]==="144"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerMuteThreadV2"),a[0]).then(function(a){return a=a,d[12]=a[0],d[13]=a[1],a})},function(a){return a=[d[12],c.i64.to_string(d[13]),void 0,void 0],d[8]=a[0],d[9]=a[1],d[10]=a[2],d[11]=a[3],a}]):c.sequence([function(e){return a[1]==="146"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerRemoveThread"),a[0]).then(function(a){return a=a,d[16]=a[0],d[17]=a[1],a})},function(a){return a=[d[16],c.i64.to_string(d[17]),void 0,void 0],d[12]=a[0],d[13]=a[1],d[14]=a[2],d[15]=a[3],a}]):c.sequence([function(e){return a[1]==="32"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerUpdateThreadName"),a[0]).then(function(a){return a=a,d[20]=a[0],d[21]=a[1],d[22]=a[2],a})},function(a){return a=[d[20],c.i64.to_string(d[21]),void 0,void 0],d[16]=a[0],d[17]=a[1],d[18]=a[2],d[19]=a[3],a}]):c.sequence([function(e){return a[1]==="362"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerAcsIssueNextSync"),a[0]).then(function(a){return a=a,d[24]=a[0],d[25]=a[1],d[26]=a[2],a})},function(a){return a=[d[24],c.i64.to_string(d[25]),void 0,void 0],d[20]=a[0],d[21]=a[1],d[22]=a[2],d[23]=a[3],a}]):c.sequence([function(e){return a[1]==="50015"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerEncryptedBackupsRestoreWithSerializer"),a[0]).then(function(a){return a=a,d[28]=a[0],d[29]=a[1],d[30]=a[2],a})},function(a){return a=[d[28],c.i64.to_string(d[29]),void 0,void 0],d[24]=a[0],d[25]=a[1],d[26]=a[2],d[27]=a[3],a}]):c.sequence([function(e){return a[1]==="319"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerEncryptedBackupAction"),a[0]).then(function(a){return a=a,d[32]=a[0],d[33]=a[1],d[34]=a[2],a})},function(a){return a=[d[32],c.i64.to_string(d[33]),void 0,void 0],d[28]=a[0],d[29]=a[1],d[30]=a[2],d[31]=a[3],a}]):c.sequence([function(e){return a[1]==="50026"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerEncryptedBackupsUpload"),a[0]).then(function(a){return a=a,d[36]=a[0],d[37]=a[1],a})},function(a){return a=[d[36],c.i64.to_string(d[37]),void 0,void 0],d[32]=a[0],d[33]=a[1],d[34]=a[2],d[35]=a[3],a}]):c.sequence([function(e){return a[1]==="50042"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerEncryptedBackupsUploadProtobufOnly"),a[0]).then(function(a){return a=a,d[40]=a[0],d[41]=a[1],d[42]=a[2],a})},function(a){return a=[d[40],c.i64.to_string(d[41]),void 0,void 0],d[36]=a[0],d[37]=a[1],d[38]=a[2],d[39]=a[3],a}]):c.sequence([function(e){return a[1]==="700"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerE2eeMetadataThreadIntegrityCheck"),a[0]).then(function(a){return a=a,d[44]=a[0],d[45]=a[1],d[46]=a[2],a})},function(a){return a=[d[44],c.i64.to_string(d[45]),void 0,void 0],d[40]=a[0],d[41]=a[1],d[42]=a[2],d[43]=a[3],a}]):c.sequence([function(e){return a[1]==="705"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerE2eeMessageIntegrityCheckV2"),a[0]).then(function(a){return a=a,d[48]=a[0],d[49]=a[1],d[50]=a[2],a})},function(a){return a=[d[48],c.i64.to_string(d[49]),void 0,void 0],d[44]=a[0],d[45]=a[1],d[46]=a[2],d[47]=a[3],a}]):c.sequence([function(e){return a[1]==="50043"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerEncryptedBackupsLoopingUpload"),a[0]).then(function(a){return a=a,d[52]=a[0],d[53]=a[1],d[54]=a[2],a})},function(a){return a=[d[52],c.i64.to_string(d[53]),void 0,void 0],d[48]=a[0],d[49]=a[1],d[50]=a[2],d[51]=a[3],a}]):c.sequence([function(e){return a[1]==="50048"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerEncryptedBackupsOpenUpload"),a[0]).then(function(a){return a=a,d[56]=a[0],d[57]=a[1],a})},function(a){return a=[d[56],c.i64.to_string(d[57]),void 0,void 0],d[52]=a[0],d[53]=a[1],d[54]=a[2],d[55]=a[3],a}]):c.sequence([function(e){return a[1]==="160013"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerSyncThreadCapabilities"),a[0]).then(function(a){return a=a,d[60]=a[0],d[61]=a[1],d[62]=a[2],a})},function(a){return a=[d[60],c.i64.to_string(d[61]),void 0,void 0],d[56]=a[0],d[57]=a[1],d[58]=a[2],d[59]=a[3],a}]):c.resolve((e=[a[2],a[1],void 0,void 0],d[56]=e[0],d[57]=e[1],d[58]=e[2],d[59]=e[3],e))},function(a){return a=[d[56],d[57],d[58],d[59]],d[52]=a[0],d[53]=a[1],d[54]=a[2],d[55]=a[3],a}])},function(a){return a=[d[52],d[53],d[54],d[55]],d[48]=a[0],d[49]=a[1],d[50]=a[2],d[51]=a[3],a}])},function(a){return a=[d[48],d[49],d[50],d[51]],d[44]=a[0],d[45]=a[1],d[46]=a[2],d[47]=a[3],a}])},function(a){return a=[d[44],d[45],d[46],d[47]],d[40]=a[0],d[41]=a[1],d[42]=a[2],d[43]=a[3],a}])},function(a){return a=[d[40],d[41],d[42],d[43]],d[36]=a[0],d[37]=a[1],d[38]=a[2],d[39]=a[3],a}])},function(a){return a=[d[36],d[37],d[38],d[39]],d[32]=a[0],d[33]=a[1],d[34]=a[2],d[35]=a[3],a}])},function(a){return a=[d[32],d[33],d[34],d[35]],d[28]=a[0],d[29]=a[1],d[30]=a[2],d[31]=a[3],a}])},function(a){return a=[d[28],d[29],d[30],d[31]],d[24]=a[0],d[25]=a[1],d[26]=a[2],d[27]=a[3],a}])},function(a){return a=[d[24],d[25],d[26],d[27]],d[20]=a[0],d[21]=a[1],d[22]=a[2],d[23]=a[3],a}])},function(a){return a=[d[20],d[21],d[22],d[23]],d[16]=a[0],d[17]=a[1],d[18]=a[2],d[19]=a[3],a}])},function(a){return a=[d[16],d[17],d[18],d[19]],d[12]=a[0],d[13]=a[1],d[14]=a[2],d[15]=a[3],a}])},function(a){return a=[d[12],d[13],d[14],d[15]],d[8]=a[0],d[9]=a[1],d[10]=a[2],d[11]=a[3],a}])},function(a){return a=[d[8],d[9],d[10],d[11]],d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],a}])},function(e){return a[3]?c.resolve((d[1]==="60009"?(function(a){c.logger(a).mustfix(a)}(["Deidentified task with label ","60009"," is being executed through the 'identified' path. This should never happen!"].join("")),e=[void 0,void 0,void 0,void 0],d[8]=e[0],d[9]=e[1],d[10]=e[2],d[11]=e[3],e):(d[1]==="60006"?(function(a){c.logger(a).mustfix(a)}(["Deidentified task with label ","60006"," is being executed through the 'identified' path. This should never happen!"].join("")),e=[void 0,void 0,void 0,void 0],d[12]=e[0],d[13]=e[1],d[14]=e[2],d[15]=e[3],e):(d[1]==="60008"?(function(a){c.logger(a).mustfix(a)}(["Deidentified task with label ","60008"," is being executed through the 'identified' path. This should never happen!"].join("")),e=[void 0,void 0,void 0,void 0],d[16]=e[0],d[17]=e[1],d[18]=e[2],d[19]=e[3],e):(d[1]==="60011"?(function(a){c.logger(a).mustfix(a)}(["Deidentified task with label ","60011"," is being executed through the 'identified' path. This should never happen!"].join("")),e=[void 0,void 0,void 0,void 0],d[20]=e[0],d[21]=e[1],d[22]=e[2],d[23]=e[3],e):(d[1]==="765"?(function(a){c.logger(a).mustfix(a)}(["Deidentified task with label ","765"," is being executed through the 'identified' path. This should never happen!"].join("")),e=[void 0,void 0,void 0,void 0],d[24]=e[0],d[25]=e[1],d[26]=e[2],d[27]=e[3],e):(d[1]==="1006"?(function(a){c.logger(a).mustfix(a)}(["Deidentified task with label ","1006"," is being executed through the 'identified' path. This should never happen!"].join("")),e=[void 0,void 0,void 0,void 0],d[28]=e[0],d[29]=e[1],d[30]=e[2],d[31]=e[3],e):(d[1]==="160009"?(function(a){c.logger(a).mustfix(a)}(["Deidentified task with label ","160009"," is being executed through the 'identified' path. This should never happen!"].join("")),e=[void 0,void 0,void 0,void 0],d[32]=e[0],d[33]=e[1],d[34]=e[2],d[35]=e[3],e):(d[1]==="761"?(function(a){c.logger(a).mustfix(a)}(["Deidentified task with label ","761"," is being executed through the 'identified' path. This should never happen!"].join("")),e=[void 0,void 0,void 0,void 0],d[36]=e[0],d[37]=e[1],d[38]=e[2],d[39]=e[3],e):(d[1]==="1018"?(function(a){c.logger(a).mustfix(a)}(["Deidentified task with label ","1018"," is being executed through the 'identified' path. This should never happen!"].join("")),e=[void 0,void 0,void 0,void 0],d[40]=e[0],d[41]=e[1],d[42]=e[2],d[43]=e[3],e):(d[1]==="632"?(function(a){c.logger(a).mustfix(a)}(["Deidentified task with label ","632"," is being executed through the 'identified' path. This should never happen!"].join("")),e=[void 0,void 0,void 0,void 0],d[44]=e[0],d[45]=e[1],d[46]=e[2],d[47]=e[3],e):(d[1]==="384"?(function(a){c.logger(a).mustfix(a)}(["Deidentified task with label ","384"," is being executed through the 'identified' path. This should never happen!"].join("")),e=[void 0,void 0,void 0,void 0],d[48]=e[0],d[49]=e[1],d[50]=e[2],d[51]=e[3],e):(d[1]==="384"?(function(a){c.logger(a).mustfix(a)}(["Deidentified task with label ","384"," is being executed through the 'identified' path. This should never happen!"].join("")),e=[void 0,void 0,void 0,void 0],d[52]=e[0],d[53]=e[1],d[54]=e[2],d[55]=e[3],e):(e=[d[0],d[1],d[2],d[3]],d[52]=e[0],d[53]=e[1],d[54]=e[2],d[55]=e[3],e),e=[d[52],d[53],d[54],d[55]],d[48]=e[0],d[49]=e[1],d[50]=e[2],d[51]=e[3],e),e=[d[48],d[49],d[50],d[51]],d[44]=e[0],d[45]=e[1],d[46]=e[2],d[47]=e[3],e),e=[d[44],d[45],d[46],d[47]],d[40]=e[0],d[41]=e[1],d[42]=e[2],d[43]=e[3],e),e=[d[40],d[41],d[42],d[43]],d[36]=e[0],d[37]=e[1],d[38]=e[2],d[39]=e[3],e),e=[d[36],d[37],d[38],d[39]],d[32]=e[0],d[33]=e[1],d[34]=e[2],d[35]=e[3],e),e=[d[32],d[33],d[34],d[35]],d[28]=e[0],d[29]=e[1],d[30]=e[2],d[31]=e[3],e),e=[d[28],d[29],d[30],d[31]],d[24]=e[0],d[25]=e[1],d[26]=e[2],d[27]=e[3],e),e=[d[24],d[25],d[26],d[27]],d[20]=e[0],d[21]=e[1],d[22]=e[2],d[23]=e[3],e),e=[d[20],d[21],d[22],d[23]],d[16]=e[0],d[17]=e[1],d[18]=e[2],d[19]=e[3],e),e=[d[16],d[17],d[18],d[19]],d[12]=e[0],d[13]=e[1],d[14]=e[2],d[15]=e[3],e),e=[d[12],d[13],d[14],d[15]],d[8]=e[0],d[9]=e[1],d[10]=e[2],d[11]=e[3],e),e=[d[8],d[9],d[10],d[11]],d[4]=e[0],d[5]=e[1],d[6]=e[2],d[7]=e[3],e)):c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerUnauthenticatedTask"),a[0],d[1],d[0]).then(function(a){return a=a,d[8]=a[0],d[9]=a[1],d[10]=a[2],d[11]=a[3],a})},function(a){return c.i64.neq(d[11],void 0)?c.storedProcedure(b("LSForceTaskExecutionImmediately"),d[11]):c.resolve()},function(a){return a=[d[8],c.i64.to_string(d[9]),void 0,d[10]],d[4]=a[0],d[5]=a[1],d[6]=a[2],d[7]=a[3],a}])},function(a){return a=[d[4],d[5],d[6],d[7]],e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSCoreSerializeTaskStoredProcedure";e.exports=a}),null);
__d("LSSerializeTaskStoredProcedure",["LSSerializeTask","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.taskId;d[1]=b.taskLabel;d[2]=b.taskValue;d[3]=b.requiresAuthentication;return c("LSSerializeTask").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSBeginHandlingPendingTasksForQueue2",["I64","LSFactory","LSIntEnum","LSPendingTasksPluginType","LSSerializeTaskStoredProcedure","LSShape","LSVec","Promise","ReQL","XPlatReactCrypto","asyncToGeneratorRuntime","gkx","isNativeTask"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=500,l=3e4,m=5,n=50,o=7;function p(a,b){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield a.lightspeed_task_context.get(b));return a==null||a.requiresAuthentication});return q.apply(this,arguments)}function r(a,b){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.pending_tasks.index("queueNameTaskId")).getKeyRange(b)));return a==null?{context:void 0,failureCount:(i||(i=d("I64"))).neg_one,httpUrlOverride:void 0,minTimeToSyncTimestampMs:i.neg_one,pluginType:(j||(j=d("LSIntEnum"))).ofNumber(c("LSPendingTasksPluginType").LS_BROKER),queueName:""}:a});return s.apply(this,arguments)}function t(a,b){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.network_requests).getKeyRange(b)));return a==null?0:(i||(i=d("I64"))).to_float(a.lastSyncRequestTimestampMs)});return u.apply(this,arguments)}function v(a,b,c){b=(i||(i=d("I64"))).equal(a.failureCount,(i||(i=d("I64"))).zero)||b;if(b)return 0;b=(i||(i=d("I64"))).to_float(a.failureCount)>o?(i||(i=d("I64"))).to_float(a.failureCount)-o:(i||(i=d("I64"))).to_float(a.failureCount);a=Math.min((1<<Math.min(b-1,o))*k,l);b=c+a;return Math.max(b-Date.now(),0)}function w(){var a=Array.from(d("XPlatReactCrypto").getRandomValues(new Uint32Array(2)));a[0]>>>=1;return(i||(i=d("I64"))).add(i.lsl_(i.of_float(a[0]),32),i.of_float(a[1]))}function x(){var a=(i||(i=d("I64"))).of_float(Date.now());return i.and_(i.or_(i.lsl_(a,22),i.and_(w(),i.castExn([0,4194303]))),i.castExn([2147483647,4294967295]))}function y(a,b){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=x(),e=(yield a.network_requests.get(b,(i||(i=d("I64"))).neg_one));e==null?yield a.network_requests.add({epochId:c,failureCount:(i||(i=d("I64"))).zero,lastSentTimestampMs:i.zero,lastSyncRequestTimestampMs:i.of_float(Date.now()),syncDatabaseId:i.neg_one,taskQueueName:b}):yield a.network_requests.put(babelHelpers["extends"]({},e,{epochId:c,lastSyncRequestTimestampMs:(i||(i=d("I64"))).of_float(Date.now())}));return c});return z.apply(this,arguments)}function A(a,b){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.network_requests).getKeyRange(b).filter(function(a){return a.epochId!=null})))!=null});return B.apply(this,arguments)}function C(a,b,c){var e=(i||(i=d("I64"))).to_float(a.minTimeToSyncTimestampMs),f=Date.now();e=e-f;f=e<=0;return f?v(a,b,c):e}function D(a){return a.httpUrlOverride!=null||(i||(i=d("I64"))).to_float(a.failureCount)>o}function E(a){return a.timeoutTimestampMs!=null?(i||(i=d("I64"))).to_float(a.timeoutTimestampMs)<=Date.now():!1}function F(a){return a===90..toString()||a===130..toString()||a===153..toString()}function G(a,b,c,d,e){e=e===0?void 0:e;return{failureCount:e,label:a,payload:b,queueName:c,taskId:d}}function H(a,b,c){return I.apply(this,arguments)}function I(){I=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){a=(yield c("LSSerializeTaskStoredProcedure")(c("LSFactory")(a),{requiresAuthentication:e,taskId:b.taskId,taskLabel:b.context,taskValue:b.taskValue}));e=a[0];var f=a[1];a[2];a=a[3];if(e==null){if(a!=null)return{minRetryDelayMs:a};return}return G(f,e,b.queueName,b.taskId,(i||(i=d("I64"))).to_float(b.failureCount))});return I.apply(this,arguments)}function J(a,b,c){return K.apply(this,arguments)}function K(){K=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){if(b.context==null){yield a.pending_tasks["delete"](b.taskId);return}var d=E(b);if(d){yield a.pending_tasks["delete"](b.taskId);return}return H(a,b,c)});return K.apply(this,arguments)}function L(a,b){b=b>=(c("gkx")("26373")&&a===String(207)?n:m)||F(a);return!b}function M(a,b){return N.apply(this,arguments)}function N(){N=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield a.pending_tasks.get(b.taskId));c!=null&&(i||(i=d("I64"))).equal(b.firstExecutedTimestampMs,(i||(i=d("I64"))).zero)&&(yield a.pending_tasks.put(babelHelpers["extends"]({},c,{firstExecutedTimestampMs:(i||(i=d("I64"))).of_float(Date.now())})))});return N.apply(this,arguments)}function O(a,b){return P.apply(this,arguments)}function P(){P=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){if(c.length===0)return{epochId:void 0,tasks:[]};var e=[],f=c[0].httpUrlOverride,g=(yield (h||(h=b("Promise"))).all(c.map(function(b){return p(a,b.taskId)}))).some(Boolean);for(c of c){var j=c.httpUrlOverride===f,k=(yield p(a,c.taskId))===g;yield M(a,c);if(!j||!k)break;j=(yield J(a,c,g));if(j!=null&&j.payload!=null)e.push(j);else if((j==null?void 0:j.minRetryDelayMs)!=null){k=(yield a.pending_tasks.get(c.taskId));if(k!=null){yield a.pending_tasks.put(babelHelpers["extends"]({},k,{failureCount:(i||(i=d("I64"))).add((k=k.failureCount)!=null?k:(i||(i=d("I64"))).zero,i.one),minTimeToSyncTimestampMs:i.add(j.minRetryDelayMs,i.of_float(Date.now()))}))}}else yield a.pending_tasks["delete"](c.taskId);if(!L(c.context,e.length))break}return{epochId:void 0,tasks:e}});return P.apply(this,arguments)}function Q(a,b,c,d,e){return R.apply(this,arguments)}function R(){R=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d,e){e===void 0&&(e=!0);b=(yield O(a,b));var f=b.tasks;if(f.length===0)return{httpUrlOverride:void 0,networkPayload:void 0,nextSyncMs:void 0,queueName:c,skipRealtimeGateway:!1,workItemType:4};if(e===!0){f=(yield y(a,c));b.epochId=f}e=(yield r(a,c));return{httpUrlOverride:e.httpUrlOverride,networkPayload:b,nextSyncMs:void 0,queueName:c,skipRealtimeGateway:D(e),workItemType:d}});return R.apply(this,arguments)}function S(a,b,c){return T.apply(this,arguments)}function T(){T=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=(yield r(a,b)),g=(yield t(a,b));f=C(f,e,g);e=f!==0;if(e)return[{httpUrlOverride:void 0,networkPayload:void 0,nextSyncMs:f,queueName:b,skipRealtimeGateway:!1,workItemType:3}];g=[];e=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.pending_tasks.index("queueNameTaskId")).getKeyRange(b)));f=e.filter(c("isNativeTask"));if(f.length>0){f=(yield Q(a,f,b,2,c("gkx")("4778")===!0));g.push(f)}f=e.filter(function(a){return!c("isNativeTask")(a)});if(f.length>0){e=(yield Q(a,f,b,1));g.push(e)}return g});return T.apply(this,arguments)}function U(a,b,c){return V.apply(this,arguments)}function V(){V=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var d=!(yield A(a,b));return d?S(a,b,c):[{httpUrlOverride:void 0,networkPayload:void 0,nextSyncMs:void 0,queueName:b,skipRealtimeGateway:!1,workItemType:4}]});return V.apply(this,arguments)}function a(a,b){return W.apply(this,arguments)}function W(){W=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=b.ignoreSoftDelay;b=b.queueName;a=(yield U(a,b,e));return a.map(function(a){var b;return d("LSShape").ofRecord({network_payload:d("LSShape").ofRecord({epoch_id:(b=a.networkPayload)==null?void 0:b.epochId,tasks:c("LSVec").ofArray(((b=(b=a.networkPayload)==null?void 0:b.tasks)!=null?b:[]).map(function(a){var b;return d("LSShape").ofRecord({failure_count:a.failureCount!=null?(i||(i=d("I64"))).of_float(a.failureCount):void 0,label:(b=a.label)!=null?b:void 0,payload:a.payload,queue_name:a.queueName,task_id:a.taskId})}))}),next_sync_ms:a.nextSyncMs!=null?(i||(i=d("I64"))).of_float(a.nextSyncMs):void 0,queue_name:a.queueName,skip_realtime_gateway:a.skipRealtimeGateway,work_item_type:(j||(j=d("LSIntEnum"))).ofNumber(a.workItemType)})})});return W.apply(this,arguments)}a._updateTaskIfNeeded=M;a._getHeadOfNormalQueue=r;a._lastSyncRequestTimestampForQueue=t;a._exponentialBackoffForNormalQueue=v;a._generateNewEpoch=x;a._openNewEpochForQueue=y;a._isEpochOpenForQueue=A;a._calculateDelayForNormalQueue=C;a._queueShouldSkipRealtimeGateway=D;a._isNativeTask=c("isNativeTask");a._taskIsTimedOut=E;a._taskShouldStopBatching=F;a._buildTaskPayloadExpressionForNormalTaskWithParameters=G;a._buildTaskPayloadExpressionForValidatedNormalTask=H;a._buildTaskPayloadExpressionForUnvalidatedNormalTask=J;a._workForNormalQueueWithoutDelay=Q;a._workForNormalQueueWithClosedEpoch=S;a._buildWorkForNormalQueue=U;a._buildNetworkPayloadShapeForTasks=O;a._canContinueBatchingForQueue=L;g["default"]=a}),98);
__d("MWPBeginHandlingPendingTasksForQueue",["LSBeginHandlingFireForgetTasksForQueueStoredProcedure","LSBeginHandlingPendingTasksForQueue2","LSFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,d){var e=d.fireAndForgetTask,g=d.ignoreSoftDelay,h=d.queueName;d=(yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(e===!0){var b=(yield c("LSBeginHandlingFireForgetTasksForQueueStoredProcedure")(c("LSFactory")(a),{queueName:h}));b=b[0];return[b]}return c("LSBeginHandlingPendingTasksForQueue2")(a,{ignoreSoftDelay:g,queueName:h})});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":37"));return d});return h.apply(this,arguments)}g["default"]=a}),98);
__d("MWPlatformTaskUtils",["FBLogger","I64","JSScheduler","MetaConfig","Promise","ReQL","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,e){function f(){return g.apply(this,arguments)}function g(){g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{yield a(e)}catch(a){c("FBLogger")("messenger_web_product").catching(a).warn("Failed to calculate work for task queue %s",e.queueName)}});return g.apply(this,arguments)}if((j||(j=d("I64"))).gt(e.priority,(j||(j=d("I64"))).zero)&&c("MetaConfig")._("78")){var h=function(){f()};(i||(i=c("JSScheduler"))).scheduleLoggingPriCallback(h)}else c("promiseDone")(f())}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){try{yield a(b)}catch(a){c("FBLogger")("messenger_web_product").catching(a).warn("Failed to calculate work for fire forget queue %s",b.queueName)}});return m.apply(this,arguments)}function a(a,c){var e=new Set(),f=[],g=[];g.push(a.tables.pending_tasks.index("queueNameTaskId").subscribe(function(a,b){var c;if(b.operation==="delete"){e.add(a[0]);return}a=b.operation==="put"&&b.prevValue==null||b.operation==="add";c=b.operation==="put"&&(j||(j=d("I64"))).compare(b.value.failureCount,(c=(c=b.prevValue)==null?void 0:c.failureCount)!=null?c:(j||(j=d("I64"))).zero)>0;(a||c)&&e.add(b.value.queueName);(b.operation==="add"&&b.value.dataTraceId==null||b.value.dataTraceId==="")&&f.push(b.value)}));g.push(a.tables.network_requests.subscribe(function(a,b){a=a[0];if(a==="")return;b.operation==="delete"?e.add(a):b.value.epochId==null&&e.add(a)}));g.push(a.subscribeToCommit(function(){var g=Array.from(e);e.clear();f=[];g.forEach(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.pending_tasks.index("queueNameTaskId")).bounds({gte:[b]})));b!=null&&k(c,b)});return function(a){return e.apply(this,arguments)}}())}));return g}function e(a,e){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.pending_tasks))),c=new Set();for(b of b){if(c.has(b.queueName))continue;c.add(b.queueName);k(e,b)}})())}function n(a,e){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var g=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.pending_fire_and_forget_tasks)));yield (h||(h=b("Promise"))).all(g.map(function(a){return l(e,a)}));c("promiseDone")(a.runInTransaction(function(a){return(h||(h=b("Promise"))).all(g.map(function(b){return a.pending_fire_and_forget_tasks["delete"](b.taskId)}))},"readwrite","background",void 0,f.id+":196"))})())}function o(a,b){var c=!1,d=[];d.push(a.tables.pending_fire_and_forget_tasks.subscribe(function(a,b){if(b.operation==="delete")return;a=b.operation==="put"&&b.prevValue==null||b.operation==="add";a&&(c=!0)}));d.push(a.subscribeToCommit(function(){c&&n(a,b),c=!1}));return d}g.checkQueuesWhenPendingTaskTableUpdates=a;g.checkAllPendingTasksForWork=e;g.checkAllFireForgetTasksForWork=n;g.checkQueuesWhenPendingFireForgetTaskTableUpdates=o}),98);
__d("LSPlatformTaskSystemTransport",["CurrentMessengerUser","FBLogger","I64","JSResourceForInteraction","JSScheduler","LSDatabaseProviderType","LSHandleTaskSendFailureForQueue2","LSHandleTaskSendSuccessForQueue2","LSIntEnum","LSJson","LSMailboxInitialSyncCursor","LSPlatformRealtimeTransport","LSPlatformRequestId","LSPlatformRequestScheduler","LSPlatformServerResponseHandler","LSShape","LSVec","MWPBeginHandlingPendingTasksForQueue","MWPBumpEntityKey","MWPlatformTaskUtils","Promise","ReQL","asyncToGeneratorRuntime","cr:4031","cr:6668","gkx","isInstamadillo","promiseDone","qex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=500,m=c("JSResourceForInteraction")("publishLSPlatformDeidentifiedPayload").__setRef("LSPlatformTaskSystemTransport"),n=new Set([632,765,60011,1006].map(function(a){return a.toString()}));a=function(){function a(a,e,f,g){var h=this;this.key="ls";this.$8=!1;this.$18=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield c("MWPBeginHandlingPendingTasksForQueue")(h.$1,{ignoreSoftDelay:b,queueName:a}));for(a of b)yield h.$17(d("LSShape").toRecord(a))});return function(b,c){return a.apply(this,arguments)}}();this.$1=a;this.$2=e;this.$3=f;this.$4=g;this.$8=d("LSDatabaseProviderType").isProviderPersisted(a);this.$5=new(c("LSPlatformRequestScheduler"))();this.$6=new(c("LSPlatformServerResponseHandler"))(f);this.$7=this.$9();this.$10()}var e=a.prototype;e.$11=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(!(c("gkx")("26392")||c("isInstamadillo")())){var d=(yield this.$2.publish(b));return d}d=a.filter(function(a){return a.label!=null&&n.has(a.label)});if(d.length<a.length){d.length>0&&c("FBLogger")("maw_ohai").mustfix("Deidentifed tasks label %s sent together with normal tasks",d[0].label);a=(yield this.$2.publish(b));return a}a=d[0];d=(yield m.load());d=(yield d(babelHelpers["extends"]({},b,{taskLabel:a.label})));return d});function d(b,c){return a.apply(this,arguments)}return d}();e.$12=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield this.$1.runInTransaction(function(b){return c("LSHandleTaskSendFailureForQueue2")(b,a)},"readwrite",void 0,void 0,f.id+":150")});function d(b){return a.apply(this,arguments)}return d}();e.$13=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield this.$1.runInTransaction(function(b){return c("LSHandleTaskSendSuccessForQueue2")(b,a)},"readwrite","background",void 0,f.id+":159")});function d(b){return a.apply(this,arguments)}return d}();e.$14=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=c("LSVec").toArray(a.tasks).slice(0).map(function(a){return d("LSShape").toRecord(a)});a=a[0];if(a==null)return;a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(this.$1.tables.pending_tasks).getKeyRange(a.task_id)));return a==null?void 0:a.dataTraceId});function e(b){return a.apply(this,arguments)}return e}();e.$15=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=this;if(a.network_payload==null)return;var g=d("LSShape").toRecord(a.network_payload);(k||(k=c("JSScheduler"))).scheduleLoggingPriCallback(function(){return g&&(b("cr:6668")==null?void 0:b("cr:6668").recordTaskSending(g.tasks))});var i=this.$4;try{yield (j||(j=b("Promise"))).all(c("LSVec").toArray(g.tasks).map(function(a){return d("LSShape").toRecord(a)}).map(function(b){var g=c("LSPlatformRequestId").generate();return f.$11([b],{payload:d("LSJson").stringify(d("LSShape").ofRecord({label:b.label,payload:b.payload,version:i})),queueName:a.queue_name,requestId:g,syncChannel:d("LSMailboxInitialSyncCursor").syncChannel,type_:(h||(h=d("I64"))).of_int32(e)})}))}catch(a){}});function e(b,c){return a.apply(this,arguments)}return e}();e.$16=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){if(a.network_payload==null)return;var f=d("LSShape").toRecord(a.network_payload),g=c("LSVec").toArray(f.tasks).map(function(a){return d("LSShape").toRecord(a)}),j=(yield this.$14(f));(k||(k=c("JSScheduler"))).scheduleLoggingPriCallback(function(){return f&&(b("cr:6668")==null?void 0:b("cr:6668").recordTaskSending(f.tasks))});var l=c("LSPlatformRequestId").generate(),m,n=c("qex")._("789");if(n!=null&&n!=="default"){n=n+"."+(i||(i=d("LSIntEnum"))).toNumber(d("LSMailboxInitialSyncCursor").syncChannel)+"."+e.toString();d("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",n)}try{m=(yield this.$11(g,{payload:d("LSJson").stringify(d("LSShape").ofRecord(babelHelpers["extends"]({},f,{version_id:this.$4},j==null?{}:{data_trace_id:j}))),queueName:a.queue_name,requestId:l,syncChannel:d("LSMailboxInitialSyncCursor").syncChannel,type_:(h||(h=d("I64"))).of_int32(e)}))}catch(b){b.RE_EXN_ID===d("LSPlatformRealtimeTransport").Timeout?d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","send_fail_timeout"):b.RE_EXN_ID===d("LSPlatformRealtimeTransport").NotConnected?(d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","send_fail_notconnected"),c("FBLogger")("messenger_web_product").warn("Publishing a task to the server not connected")):(d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","send_fail_generic"),c("FBLogger")("messenger_web_product").warn("Error while publishing a task for request: %s, error %s",e,JSON.stringify(b))),yield this.$12(a.queue_name)}if(m!=null&&m.type==="taskresponse")try{n=m.downloadTask;var o=m.payload;j={experiments:o.ex,sp:o.sp,syncScript:o.payload,target:o.target,taskNames:g.map(function(a){return a.label}).filter(Boolean)};this.$8?yield this.$6.evalWhenReady(n,j):yield this.$3(j);yield this.$13(a.queue_name);(k||(k=c("JSScheduler"))).scheduleLoggingPriCallback(function(){return f&&(b("cr:6668")==null?void 0:b("cr:6668").recordTaskSent(f.tasks,o.payload))})}catch(b){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","handle_task_failure"),c("FBLogger")("messenger_web_product").catching(b).mustfix("Encountered an error while processing a task response via realtime transport"),yield this.$12(a.queue_name)}});function e(b,c){return a.apply(this,arguments)}return e}();e.decideWhatToDoWithTask=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){var h=this,i=(yield c("MWPBeginHandlingPendingTasksForQueue")(a,{fireAndForgetTask:g,ignoreSoftDelay:!1,queueName:e,transportKey:f}));c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){for(var a of i)yield h.$17(d("LSShape").toRecord(a))})())});function e(b,c,d,e){return a.apply(this,arguments)}return e}();e.$17=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=this.$5,f=this.$18;function g(a,b){e.schedule(function(){c("promiseDone")(f(a,!1))},a,b!=null?(h||(h=d("I64"))).to_float(b):l)}var i=(h||(h=d("I64"))).to_int32(a.work_item_type);switch(i){case 1:yield this.$16(a,3);break;case 5:yield this.$15(a,4);break;case 3:g(a.queue_name,a.next_sync_ms);break;case 2:yield b("cr:4031").handleLSWork(this.$1,a,d("CurrentMessengerUser").getAccountID());break;case 4:break;default:c("FBLogger")("messenger_web_product").warn("Unknown Task type of %s",i)}});function e(b){return a.apply(this,arguments)}return e}();e.$9=function(){var a=this,e=this.$1;return this.$2.onReconnect(function(){c("promiseDone")(e.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.network_requests).bounds({gte:d("ReQL").key("")})));yield (j||(j=b("Promise"))).all(e.map(function(b){b=b.taskQueueName;return c("LSHandleTaskSendFailureForQueue2")(a,b)}))});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":441")),a.$10()})};e.$10=function(){var a=this;d("MWPlatformTaskUtils").checkAllPendingTasksForWork(this.$1,function(b){b=b.queueName;return a.decideWhatToDoWithTask(a.$1,b)})};e.cleanup=function(){this.$7()};return a}();g["default"]=a}),98);
__d("MWPlatformTaskSystem",["LSPlatformRequestScheduler","MWPlatformTaskUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){var e=this;this.$1=a;this.$2=b;this.$3=new(c("LSPlatformRequestScheduler"))();this.$4=d("MWPlatformTaskUtils").checkQueuesWhenPendingTaskTableUpdates(a,function(b){var c=b.queueName;b=b.transportKey;return e.$6(a,c,b,!1)});this.$5=d("MWPlatformTaskUtils").checkQueuesWhenPendingFireForgetTaskTableUpdates(a,function(b){var c=b.queueName;b=b.transportKey;return e.$6(a,c,b,!0)});this.$7()}var e=a.prototype;e.$6=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d){yield this.$2.decideWhatToDoWithTask(a,b,c,d)});function c(b,c,d,e){return a.apply(this,arguments)}return c}();e.$7=function(){var a=this;d("MWPlatformTaskUtils").checkAllPendingTasksForWork(this.$1,function(b){b=b.queueName;return a.$6(a.$1,b)})};e.cleanup=function(){this.$4.forEach(function(a){return a()}),this.$5.forEach(function(a){return a()}),this.$2.cleanup()};return a}();g["default"]=a}),98);
__d("LSPlatformClientInit",["LSClearEpochBeforeResumeSync","LSDataTraceFlushDeferred","LSDeleteAllAndInsertConnectivityStatusStoredProcedure","LSFactory","LSIntEnum","LSInternetConnectionState","LSPlatformHardcodedInitSync","LSPlatformLsInitLog","LSPlatformRealtimeTransport","LSPlatformSyncSystemMaybeDeferred","LSPlatformTaskSystemTransport","MWPlatformTaskSystem","MessengerLogHistory","asyncToGeneratorRuntime","cr:3411","cr:7705","emptyFunction","gkx","promiseDone","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("MessengerLogHistory").getInstance("client_init");function j(a){var d=c("emptyFunction");b("cr:7705")!=null&&c("gkx")("23914")&&(d=b("cr:7705").listenForChangesToBackupState(a));return function(){d&&d()}}function k(a,b){var e=b==="Connected"?(h||(h=d("LSIntEnum"))).ofNumber(c("LSInternetConnectionState").CONNECTED):(h||(h=d("LSIntEnum"))).ofNumber(c("LSInternetConnectionState").NOT_CONNECTED);i.debug("Platform client sync connection status: ",b);c("promiseDone")(a.runInTransaction(function(a){return c("LSDeleteAllAndInsertConnectivityStatusStoredProcedure")(c("LSFactory")(a),{internetConnectionState:e})},"readwrite",void 0,void 0,f.id+":72"),function(){i.debug("Platform client sync connection status set successfully")},function(a){i.error("Platform client sync connection status set failed: "+(a==null?void 0:a.message));throw a})}function a(a,b,c,d,e){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,h){var l;i.debug("Platform client sync starting...");(l=d("LSPlatformLsInitLog")).addPoint("onstart_callback");g();l.addPoint("onstart_callback_end");i.debug("Getting datascript evaluator...");l.addPoint("ds_eval_registration");g=(yield e.getEval());i.debug("Getting datascript evaluator success");var m;try{m=b("cr:3411")!=null?b("cr:3411").registerEval(g)()(a):g()(a)}catch(b){c("recoverableViolation")("fail to register datascriptEvaluator","ls_web_init",{error:b}),m=g()(a)}d("LSPlatformLsInitLog").addPoint("ds_eval_registration_end");i.debug("Clearing epoch before resume sync...");yield d("LSClearEpochBeforeResumeSync").call(a);i.debug("Clearing epoch before resume sync success");d("LSPlatformLsInitLog").addPoint("create_client_end");e.sendHardcodedInitSync&&(i.debug("Starting hard-coded init sync..."),yield d("LSPlatformHardcodedInitSync").sendHardcodedInitSync(e,m,a,f),i.debug("Starting hard-coded init sync success"));i.debug("Starting realtime transport");var n=d("LSPlatformRealtimeTransport").LSPlatformRealtimeTransport(e.realtimeUnderylingTransport,e.appId,f);i.debug("Starting task system");var o=new(c("MWPlatformTaskSystem"))(a,new(c("LSPlatformTaskSystemTransport"))(a,n,m,e.schemaVersion));i.debug("Starting sync system");var p=null;c("promiseDone")(c("LSPlatformSyncSystemMaybeDeferred")(),function(b){p=b(a,n,m,e.schemaVersion,f,e.executeGraphQLLightSpeedRequest)});i.debug("Starting backup state listeners");var q=j(a),r;i.debug("Watching for expired traces");c("promiseDone")(d("LSDataTraceFlushDeferred").watchForExpiredTraces(a).then(function(a){r=a}));i.debug("Subscribing to mqtt sync status change events");n.onConnectionStatusChange(function(b){k(a,b)});i.debug("Platform client sync starting sucess");return{cleanup:function(){var b;i.debug("Platform client sync cleaning up");h(a);o==null?void 0:o.cleanup();(b=p)==null?void 0:b.cleanup();n.cleanup();q();r==null?void 0:r()}}});return l.apply(this,arguments)}g.init=a}),98);
__d("LSPlatformDeviceId",["ChannelClientID","FBLogger","LSCookie","MqttWebDeviceID","gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(){if(c("gkx")("21118"))return c("MqttWebDeviceID").clientID;else return c("ChannelClientID").getID()}b=h();function a(a){a==null&&c("FBLogger")("messenger_browser_clients").info("Missed provider type for deviceId");return a==="persisted"?d("LSCookie").get().d:h()}g.deviceId=b;g.getDeviceIdForProviderType=a}),98);
__d("LSPlatformClient",["ExecutionEnvironment","FBLogger","LSCometSSRDatabase","LSDatabaseProviderType","LSPlatformClientInit","LSPlatformDeviceId","LSPlatformLsInitLog","MAWMICSafe","Promise","asyncToGeneratorRuntime","cr:7473","emptyFunction","getErrorSafe"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("emptyFunction").thatReturns((i||(i=b("Promise"))).resolve());function k(a,e){var f,g=function(){var g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=d("LSPlatformDeviceId").getDeviceIdForProviderType("ephemeral");f=(yield d("LSPlatformClientInit").init(a,e,b,c("emptyFunction"),c("emptyFunction")))});return function(){return g.apply(this,arguments)}}();return{cleanup:function(){var a;(a=f)==null?void 0:a.cleanup()},db:a,start:g}}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){if(b("cr:7473")==null)throw c("FBLogger")("messenger_web_product").mustfixThrow("LSPlatformClientWithLock is null for PDB enabled");e=(yield b("cr:7473").make(a,e));e.isTabWithoutClient()===!0&&(d("MAWMICSafe").markEvent("ls_init_end"),d("MAWMICSafe").markEvent("occamadillo_thread_mapping_end"),d("MAWMICSafe").addBoolAnnotation("LsInitSkipped",!0),d("LSPlatformLsInitLog").addPoint("no_ls_sync"),d("LSPlatformLsInitLog").endSuccess());return{cleanup:c("emptyFunction"),db:a,start:j}});return m.apply(this,arguments)}function a(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if((h||(h=c("ExecutionEnvironment"))).canUseDOM){var e=(yield a.getDb());d("LSPlatformLsInitLog").addPoint("create_client_start");if(d("LSDatabaseProviderType").isProviderPersisted(e)&&b("cr:7473")!==null)try{return l(e,a)}catch(a){d("LSPlatformLsInitLog").addAnnotations({string:{client_for_pdb_error:c("getErrorSafe")(a).message}});d("LSPlatformLsInitLog").fail("client_for_pdb_error");throw a}return k(e,a)}return{cleanup:c("emptyFunction"),db:c("LSCometSSRDatabase"),start:j}});return n.apply(this,arguments)}g.make=a}),98);
__d("LSPlatformClientProviderWithImmediateLoadingStrategy.react",["LSPlatformClient","LSPlatformClientProvider.react","Promise","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function k(){return(h||(h=b("Promise"))).resolve({make:d("LSPlatformClient").make})}function a(a){var b=a.children,d=a.errorFallback;a=a.placeholder;return j.jsx(c("LSPlatformClientProvider.react"),{errorFallback:d,loadLSPlatformClient:k,placeholder:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSDatascriptEvaluatorMaybeDeferred",["cr:6586"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:6586")}),98);
__d("LSPlatformGraphQLLightspeedRequestForIGDQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"deviceId"},{defaultValue:null,kind:"LocalArgument",name:"requestId"},{defaultValue:null,kind:"LocalArgument",name:"requestPayload"},{defaultValue:null,kind:"LocalArgument",name:"requestType"}],b=[{alias:null,args:[{kind:"Variable",name:"device_id",variableName:"deviceId"},{kind:"Variable",name:"request_id",variableName:"requestId"},{kind:"Variable",name:"request_payload",variableName:"requestPayload"},{kind:"Variable",name:"request_type",variableName:"requestType"}],concreteType:"LightspeedWebResponse",kind:"LinkedField",name:"lightspeed_web_request_for_igd",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"payload",storageKey:null},{alias:null,args:null,concreteType:"LightspeedWebRequestDependency",kind:"LinkedField",name:"dependencies",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"experiments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"target",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"LSPlatformGraphQLLightspeedRequestForIGDQuery",selections:b,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"LSPlatformGraphQLLightspeedRequestForIGDQuery",selections:b},params:{id:"7289167067878883",metadata:{},name:"LSPlatformGraphQLLightspeedRequestForIGDQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("LSPlatformGraphQLLightspeedRequestForIGD",["CometRelay","LSPlatformGraphQLLightspeedRequestForIGDQuery.graphql","XPlatRelayEnvironment"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,c,e,f){return d("CometRelay").fetchQuery(d("XPlatRelayEnvironment").getRelayEnvironment(),h!==void 0?h:h=b("LSPlatformGraphQLLightspeedRequestForIGDQuery.graphql"),{deviceId:a,requestId:c,requestPayload:e,requestType:f}).toPromise().then(function(a){return a==null?void 0:a.lightspeed_web_request_for_igd})}g["default"]=a}),98);
__d("LSPlatformDefaultUnderlyingApi",["Promise","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return c("emptyFunction")}function d(){return(h||(h=b("Promise"))).resolve()}e={cleanup:c("emptyFunction"),onConnectionStatusChange:a,onReconnect:a,publish:d,subscribe:a};g["default"]=e}),98);
__d("shouldStubUnderlyingTransport",["ExecutionEnvironment"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return!(h||(h=c("ExecutionEnvironment"))).canUseDOM&&!(h||(h=c("ExecutionEnvironment"))).isInWorker}g["default"]=a}),98);
__d("LSPlatformMqttRealtimeTransport",["I64","LSIntEnum","LSPlatformDefaultUnderlyingApi","LSPlatformRealtimeTransport","Promise","promiseDone","shouldStubUnderlyingTransport"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a){return[{payload:JSON.stringify({ls_fdid:"",ls_sv:a}),qos:1,topic:"/ls_app_settings"}]}function l(a){var e={contents:a.getConnectionState()},f={contents:function(){}},g={contents:new(j||(j=b("Promise")))(function(a,b){f.contents=a})},k={onMQTTStateChanged:function(a){a==="Connected"?f.contents():a==="Disconnected"&&e.contents==="Connected"&&(g.contents=new(j||(j=b("Promise")))(function(a,b){f.contents=a})),e.contents=a}};e.contents==="Connected"&&f.contents();a.subscribeChannelEvents(k);return[function(){a.unsubscribeChannelEvents(k)},function(e,f){return g.contents.then(function(){return new(j||(j=b("Promise")))(function(b,g){c("promiseDone")(a.publish("/ls_req",e,{listener:{onEvent:function(a){if(a==="NOT_CONNECTED")return g({RE_EXN_ID:d("LSPlatformRealtimeTransport").NotConnected})}},qos:(h||(h=d("I64"))).equal(f,(i||(i=d("LSIntEnum"))).ofNumber(4))?0:1,skipBuffer:!1}),function(){return b()},function(a){if(a.message==="Publish Timed Out")return g({RE_EXN_ID:d("LSPlatformRealtimeTransport").Timeout});else return g(a)})})})}]}var m={contents:void 0};function a(a,b,d){if(c("shouldStubUnderlyingTransport")())return c("LSPlatformDefaultUnderlyingApi");var e=d.getInstance(b),f={getPublishMessages:function(){return k(a)}};e.registerExtraConnectPayloadProvider(f);var g={onMQTTStateChanged:function(a){var b=m.contents;if(b!=null)return b(a)}};e.subscribeChannelEvents(g);var h=e.subscribe("/ls_foreground_state",function(){});b=l(e);var i=b[0];b=b[1];return{cleanup:function(){e.unregisterExtraConnectPayloadProvider(f),d.shutdownAndClear(),e.unsubscribeChannelEvents(g),h(),i()},onConnectionStatusChange:function(a){m.contents=a;return function(){m.contents=void 0}},onReconnect:function(a){var b={contents:e.getConnectionState()},c={contents:b.contents==="Connected"},d={onMQTTStateChanged:function(d){d==="Connected"&&(c.contents&&b.contents!=="Connected"&&a(),c.contents=!0),b.contents=d}};e.subscribeChannelEvents(d);return function(){e.unsubscribeChannelEvents(d)}},publish:b,subscribe:function(a){return e.subscribe("/ls_resp",function(b){return a(b)})}}}g["default"]=a}),98);
__d("LSVersion",[],(function(a,b,c,d,e,f){e.exports="8207685352615881"}),null);
__d("getMWLSRegion",["MessengerWebRegion"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("MessengerWebRegion").regionNullable;return a==null?"":a}g["default"]=a}),98);
__d("LSPlatformInstagramConfig",["CurrentUser","IGDOverLSMqttChannel","LSDatabaseSingleton","LSDatascriptEvaluatorMaybeDeferred","LSPlatformGraphQLLightspeedRequestForIGD","LSPlatformMessengerSyncParams","LSPlatformMqttRealtimeTransport","LSSuspense","LSVersion","getMWLSRegion"],(function(a,b,c,d,e,f,g){"use strict";var h,i;f=c("CurrentUser").getAppID();var j=c("getMWLSRegion")();f=f==null?"1217981644879628":f;function a(){return(i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton}function b(a,b){return c("LSPlatformMqttRealtimeTransport")(c("LSVersion"),b,{getInstance:d("IGDOverLSMqttChannel").getInstance,shutdownAndClear:d("IGDOverLSMqttChannel").shutdownAndClear})}function e(){return c("LSDatascriptEvaluatorMaybeDeferred")()}f={appId:f,executeGraphQLLightSpeedRequest:c("LSPlatformGraphQLLightspeedRequestForIGD"),getDb:a,getEval:e,platformName:"Instagram",realtimeUnderylingTransport:b,region:j,schemaVersion:c("LSVersion"),sendHardcodedInitSync:!0,syncParams:c("LSPlatformMessengerSyncParams")};a=(h||(h=c("LSSuspense"))).makeWithValue(f);g.configEagerlyLoaded=a}),98);
__d("IGDPageSetup.react",["CometErrorBoundary.react","CometPlaceholder.react","CurrentUser","I64","IGDRouteProvider.react","LSPlatformClientProviderWithDeferredLoadingStrategy.react","LSPlatformClientProviderWithImmediateLoadingStrategy.react","LSPlatformConfigContext","LSPlatformInstagramConfig","MWLSThreadDisplayContext","MWPActor.react","cr:497","cr:7347","deferredLoadComponent","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));e=h;var k=e.Fragment,l=e.c,m=(f=b("cr:497"))!=null?f:b("cr:7347"),n=c("deferredLoadComponent")(c("requireDeferred")("IGDInboxErrorState.react").__setRef("IGDPageSetup.react")),o=function(a){return a?void 0:function(a){return j.jsx(n,{error:a})}},p=(i||(i=d("I64"))).of_string(c("CurrentUser").getEIMU());function a(a){var b=l(15),e=a.children,f=a.disableRouteProvider,g=a.placeholder,h=a.shouldUseDeferredLoadingStrategy;a=a.threadDisplayType;f=f===void 0?!1:f;g=g===void 0?null:g;h=h===void 0?!1:h;var i=h?c("LSPlatformClientProviderWithDeferredLoadingStrategy.react"):c("LSPlatformClientProviderWithImmediateLoadingStrategy.react");f=f?k:d("IGDRouteProvider.react").IGDRouteContextProvider;var n;b[0]!==h?(n=o(h),b[0]=h,b[1]=n):n=b[1];b[2]!==e?(h=m==null?e:j.jsx(m,{children:e}),b[2]=e,b[3]=h):h=b[3];b[4]!==a||b[5]!==h?(e=j.jsx(d("MWLSThreadDisplayContext").MWLSThreadDisplayContextProvider,{value:a,children:h}),b[4]=a,b[5]=h,b[6]=e):e=b[6];b[7]!==f||b[8]!==e?(a=j.jsx(d("MWPActor.react").MWPActorProvider,{actorId:p,children:j.jsx(f,{children:e})}),b[7]=f,b[8]=e,b[9]=a):a=b[9];b[10]!==i||b[11]!==n||b[12]!==g||b[13]!==a?(h=j.jsx(c("CometErrorBoundary.react"),{fallback:void 0,children:j.jsx(c("CometPlaceholder.react"),{fallback:null,children:j.jsx(d("LSPlatformConfigContext").LSPlatformConfigProvider,{config:d("LSPlatformInstagramConfig").configEagerlyLoaded,children:j.jsx(i,{errorFallback:n,placeholder:g,children:a})})})}),b[10]=i,b[11]=n,b[12]=g,b[13]=a,b[14]=h):h=b[14];return h}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("$",["fb-error-lite"],(function(a,b,c,d,e,f,g){function a(a){return h(a,typeof a==="string"?document.getElementById(a):a)}function b(a){return h(a,typeof a==="string"?document.getElementById(a):a)}function h(a,b){if(!b){a=c("fb-error-lite").err('Tried to get element with id of "%s" but it is not present on the page',String(a));a.taalOpcodes=a.taalOpcodes||[];a.taalOpcodes=[c("fb-error-lite").TAALOpcode.PREVIOUS_FILE];throw a}return b}a.fromIDOrElement=b;g["default"]=a}),98);
__d("AccessibilityWebAssistiveTechTypedLoggerLite",["generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:AccessibilityWebAssistiveTechLoggerConfig")}),null);
__d("ArbiterMixin",["Arbiter","guid"],(function(a,b,c,d,e,f,g){var h="arbiter$"+c("guid")(),i=Object.prototype.hasOwnProperty;a={_getArbiterInstance:function(){return i.call(this,h)?this[h]:this[h]=new(c("Arbiter"))()},inform:function(a,b,c){return this._getArbiterInstance().inform(a,b,c)},subscribe:function(a,b,c){return this._getArbiterInstance().subscribe(a,b,c)},subscribeOnce:function(a,b,c){return this._getArbiterInstance().subscribeOnce(a,b,c)},unsubscribe:function(a){this._getArbiterInstance().unsubscribe(a)},unsubscribeCurrentSubscription:function(){this._getArbiterInstance().unsubscribeCurrentSubscription()},releaseCurrentPersistentEvent:function(){this._getArbiterInstance().releaseCurrentPersistentEvent()},registerCallback:function(a,b){return this._getArbiterInstance().registerCallback(a,b)},query:function(a){return this._getArbiterInstance().query(a)}};b=a;g["default"]=b}),98);
__d("CSS",["$","CSSCore"],(function(a,b,c,d,e,f,g){var h=typeof window!="undefined"?window.CSS:null,i="hidden_elem";h=h&&h.supports.bind(h);function a(a,b){c("$").fromIDOrElement(a).className=b||"";return a}function j(a,b){return a instanceof Document||a instanceof Text?!1:d("CSSCore").hasClass(c("$").fromIDOrElement(a),b)}function b(a,b){return a instanceof Document||a instanceof Text?!1:d("CSSCore").matchesSelector(c("$").fromIDOrElement(a),b)}function k(a,b){return d("CSSCore").addClass(c("$").fromIDOrElement(a),b)}function l(a,b){return d("CSSCore").removeClass(c("$").fromIDOrElement(a),b)}function m(a,b,e){return d("CSSCore").conditionClass(c("$").fromIDOrElement(a),b,!!e)}function n(a,b){return m(a,b,!j(a,b))}function e(a){return!j(a,i)}function f(a){return k(a,i)}function o(a){return l(a,i)}function p(a){return n(a,i)}function q(a,b){return m(a,i,!b)}g.supports=h;g.setClass=a;g.hasClass=j;g.matchesSelector=b;g.addClass=k;g.removeClass=l;g.conditionClass=m;g.toggleClass=n;g.shown=e;g.hide=f;g.show=o;g.toggle=p;g.conditionShow=q}),98);
__d("createArrayFromMixed",["invariant"],(function(a,b,c,d,e,f,g,h){function i(a){var b=a.length;!Array.isArray(a)&&(typeof a==="object"||typeof a==="function")||h(0,3914);typeof b==="number"||h(0,3915);b===0||b-1 in a||h(0,3916);typeof a.callee!=="function"||h(0,3917);if(a.hasOwnProperty)try{return Array.prototype.slice.call(a)}catch(a){}var c=Array(b);for(var d=0;d<b;d++)c[d]=a[d];return c}function j(a){return!!a&&(typeof a==="object"||typeof a==="function")&&"length"in a&&!("setInterval"in a)&&typeof a.nodeType!=="number"&&(Array.isArray(a)||"callee"in a||"item"in a)}function a(a){if(!j(a))return[a];else if(Array.isArray(a))return a.slice();else return i(a)}g["default"]=a}),98);
__d("createObjectFrom",[],(function(a,b,c,d,e,f){function g(a,b){if(b===void 0)return g(a,!0);var c={};if(Array.isArray(b))for(var d=a.length-1;d>=0;d--)c[a[d]]=b[d];else for(d=a.length-1;d>=0;d--)c[a[d]]=b;return c}f["default"]=g}),66);
__d("isElementNode",["isNode"],(function(a,b,c,d,e,f){function a(a){return b("isNode")(a)&&a.nodeType==1}e.exports=a}),null);
__d("DOMQuery",["CSS","FBLogger","containsNode","createArrayFromMixed","createObjectFrom","ge","ifRequired","isElementNode","isNode"],(function(a,b,c,d,e,f,g){var h=/^\.-?[_a-zA-Z]+[\w-]*$/;function i(a,b){return a.hasAttribute?a.hasAttribute(b):a.getAttribute(b)!==null}function a(a,b){a=j(a,b);return a[0]}function b(a,b,c){b=j(a,b);a=j(a,c);b.length===1&&a.length===1&&b[0]===a[0]?c=b:c=b.concat(a);return c[0]}function j(a,b){if(!a||!a.getElementsByTagName)return[];b=b.split(" ");var e=[a];for(var f=0;f<b.length;f++){if(e.length===0)break;if(b[f]==="")continue;var g=b[f],j=b[f],k=[],l=!1;if(g.charAt(0)=="^")if(f===0)l=!0,g=g.slice(1);else return[];g=g.replace(/\[(?:[^=\]]*=(?:\"[^\"]*\"|\'[^\']*\'))?|[.#]/g," $&");g=g.split(" ");var m=g[0]||"*",n=m=="*",o=g[1]&&g[1].charAt(0)=="#";if(o){o=c("ge")(g[1].slice(1),a,m);if(o&&(n||o.tagName.toLowerCase()==m))for(var p=0;p<e.length;p++)if(l&&c("containsNode")(o,e[p])){k=[o];break}else if(document==e[p]||c("containsNode")(e[p],o)&&e[p]!==o){k=[o];break}}else{o=[];p=e.length;var q,r=!l&&j.indexOf("[")<0&&document.querySelectorAll;for(var s=0;s<p;s++){if(l){q=[];var t=e[s].parentNode;while(c("isElementNode")(t))(n||t.tagName.toLowerCase()==m)&&q.push(t),t=t.parentNode}else r?h.test(j)?q=e[s].getElementsByClassName(j.substring(1)):q=e[s].querySelectorAll(j):q=e[s].getElementsByTagName(m);t=q.length;for(var u=0;u<t;u++)o.push(q[u])}if(!r)for(q=1;q<g.length;q++){t=g[q];u=t.charAt(0)==".";n=t.substring(1);for(s=0;s<o.length;s++){p=o[s];if(!p||p.nodeType!==1)continue;if(u){d("CSS").hasClass(p,n)||delete o[s];continue}else{j=t.slice(1,t.length-1);m=j.indexOf("=");if(m<0){if(!i(p,j)){delete o[s];continue}}else{r=j.substr(0,m);j=j.substr(m+1);j=j.slice(1,j.length-1);if(p.getAttribute(r)!=j){delete o[s];continue}}}}}for(s=0;s<o.length;s++)if(o[s]){k.push(o[s]);if(l)break}}e=k}return e}function e(){var a=window.getSelection;if(a)return a()+"";else{a=document.selection;if(a)return a.createRange().text}return null}function f(a,b){(typeof a==="string"||typeof b==="string")&&c("FBLogger")("dom_query").info("Support for node IDs is deprecated. Use containsNode(ge(<id1>), ge(<id2>)) instead");return c("containsNode")(c("ge")(a),c("ge")(b))}function k(){var a=c("ifRequired")("Quickling",function(a){return a.isActive()?c("ge")("content"):null});return a||document.body}function l(a,b){b=c("createArrayFromMixed")(b).join("|").toUpperCase().split("|");b=c("createObjectFrom")(b);return c("isNode")(a)&&a.nodeName in b}function m(a){return l(a,["input","textarea"])||a.contentEditable==="true"}g.find=a;g.findPushSafe=b;g.scry=j;g.getSelection=e;g.contains=f;g.getRootElement=k;g.isNodeOfType=l;g.isInputNode=m}),98);
__d("DOMEvent",["invariant"],(function(a,b,c,d,e,f,g,h){a=function(){function a(a){this.event=a||window.event,typeof this.event.srcElement!=="unknown"||h(0,5798),this.target=this.event.target||this.event.srcElement}var b=a.prototype;b.preventDefault=function(){var a=this.event;a.preventDefault?(a.preventDefault(),"defaultPrevented"in a||(a.defaultPrevented=!0)):a.returnValue=!1;return this};b.isDefaultPrevented=function(){var a=this.event;return"defaultPrevented"in a?a.defaultPrevented:a.returnValue===!1};b.stopPropagation=function(){var a=this.event;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0;return this};b.kill=function(){this.stopPropagation().preventDefault();return this};a.killThenCall=function(b){return function(c){new a(c).kill();return b()}};return a}();g["default"]=a}),98);
__d("dedupString",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b;return Object.keys((b={},b[a]=0,b))[0]}f["default"]=a}),66);
__d("wrapFunction",[],(function(a,b,c,d,e,f){var g={};function a(a,b,c){var d=b in g?g[b](a,c):a;return function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return d.apply(this,b)}}a.setWrapper=function(a,b){g[b]=a};f["default"]=a}),66);
__d("DOMEventListener",["invariant","dedupString","emptyFunction","passiveEventListenerUtil","wrapFunction"],(function(a,b,c,d,e,f,g){var h=b("passiveEventListenerUtil").isPassiveEventListenerSupported,i,j;window.addEventListener?(i=function(a,c,d,e){e===void 0&&(e=!1),d.wrapper=b("wrapFunction")(d,"entry",b("dedupString")("DOMEventListener.add "+c)),a.addEventListener(c,d.wrapper,h?e:!1)},j=function(a,b,c,d){d===void 0&&(d=!1),a.removeEventListener(b,c.wrapper,h?d:!1)}):window.attachEvent?(i=function(a,c,d,e){e===void 0,d.wrapper=b("wrapFunction")(d,"entry","DOMEventListener.add "+c),a.attachEvent||g(0,2798),a.attachEvent("on"+c,d.wrapper)},j=function(a,b,c,d){d===void 0,a.detachEvent||g(0,2799),a.detachEvent("on"+b,c.wrapper)}):j=i=b("emptyFunction");a={add:function(a,b,c,d){d===void 0&&(d=!1);i(a,b,c,d);return{remove:function(){j(a,b,c,d)}}},remove:j};e.exports=a}),null);
__d("EventProfiler",["cr:708886"],(function(a,b,c,d,e,f,g){g["default"]=b("cr:708886")}),98);
__d("Scroll",[],(function(a,b,c,d,e,f){function g(a,b){return!!b&&(a===b.documentElement||a===b.body)}function a(a){var b;if(a==null)return 0;var c=a.ownerDocument;return g(a,c)?(c==null?void 0:(b=c.body)==null?void 0:b.scrollTop)||(c==null?void 0:(b=c.documentElement)==null?void 0:b.scrollTop)||0:a.scrollTop||0}function b(a,b){if(a==null)return;var c=a.ownerDocument;g(a,c)?((c==null?void 0:c.body)&&(c.body.scrollTop=b||0),(c==null?void 0:c.documentElement)&&(c.documentElement.scrollTop=b||0)):a.scrollTop=b||0}function c(a){var b,c=a.ownerDocument;return g(a,c)?(c==null?void 0:(b=c.body)==null?void 0:b.scrollLeft)||(c==null?void 0:(b=c.documentElement)==null?void 0:b.scrollLeft)||0:a.scrollLeft||0}function d(a,b){var c=a.ownerDocument;g(a,c)?((c==null?void 0:c.body)&&(c.body.scrollLeft=b||0),(c==null?void 0:c.documentElement)&&(c.documentElement.scrollLeft=b||0)):a.scrollLeft=b||0}f.getTop=a;f.setTop=b;f.getLeft=c;f.setLeft=d}),66);
__d("FlowMigrationUtilsForLegacyFiles",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";var h="flow_typing_for_legacy_code";function a(a){c("FBLogger")(h).blameToPreviousFile().event(h+".bad_call").mustfix(a);return new Error("["+h+"] "+a)}g.invariantViolation=a}),98);
__d("getDocumentScrollElement",["FlowMigrationUtilsForLegacyFiles"],(function(a,b,c,d,e,f,g){"use strict";var h=typeof navigator!=="undefined"&&navigator.userAgent.indexOf("AppleWebKit")>-1;function a(a){a=a||document;if(a.scrollingElement)return a.scrollingElement;a=!h&&a.compatMode==="CSS1Compat"?a.documentElement:a.body;a||d("FlowMigrationUtilsForLegacyFiles").invariantViolation("null result in getDocumentScrollElement");return a}g["default"]=a}),98);
__d("getObjectValues",[],(function(a,b,c,d,e,f){function a(a){var b=[];for(var c in a)b.push(a[c]);return b}f["default"]=a}),66);
__d("Event",["$","Arbiter","DOMEvent","DOMEventListener","DOMQuery","DataStore","ErrorGuard","EventProfiler","ExecutionEnvironment","FBLogger","Parent","Scroll","TimeSlice","UserAgent","dedupString","fb-error","getDocumentScrollElement","getObjectValues"],(function(a,b,c,d,e,f){var g,h,i=b("fb-error").TAAL,j="Event.listeners";Event.prototype||(Event.prototype={});function k(a){(a.type==="click"||a.type==="mouseover"||a.type==="keydown")&&b("Arbiter").inform("Event/stop",{event:a})}var l=function(){"use strict";function a(a,b,c){this.cancelBubble=!1,this.target=a,this.type=b,this.data=c}var c=a.prototype;c.getData=function(){this.data=this.data||{};return this.data};c.stop=function(){return Event.stop(this)};c.prevent=function(){return Event.prevent(this)};c.isDefaultPrevented=function(){return Event.isDefaultPrevented(this)};c.kill=function(){return Event.kill(this)};c.getTarget=function(){return new(b("DOMEvent"))(this).target||null};return a}();function m(a){if(a instanceof l)return a;a||(!window.addEventListener&&document.createEventObject?a=window.event?document.createEventObject(window.event):{}:a={});if(!a._inherits_from_prototype)for(var b in Event.prototype)try{a[b]=Event.prototype[b]}catch(a){}return a}Object.assign(Event.prototype,{_inherits_from_prototype:!0,getRelatedTarget:function(){var a=this.relatedTarget||(this.fromElement===this.srcElement?this.toElement:this.fromElement);return a&&a.nodeType?a:null},getModifiers:function(){var a={control:!!this.ctrlKey,shift:!!this.shiftKey,alt:!!this.altKey,meta:!!this.metaKey};a.access=b("UserAgent").isPlatform("Mac OS X")?a.control:a.alt;a.any=a.control||a.shift||a.alt||a.meta;return a},isRightClick:function(){return this.which?this.which===3:this.button&&this.button===2},isMiddleClick:function(){return this.which?this.which===2:this.button&&this.button===4},isDefaultRequested:function(){return this.getModifiers().any||this.isMiddleClick()||this.isRightClick()}},l.prototype);c={listen:function(a,c,d,e,f){typeof d==="function"&&(d=b("TimeSlice").guard(d,b("dedupString")("Event.js "+c+" handler")));!f||typeof f==="boolean"?f={passive:!1}:f={passive:f.passive||!1};if(!(g||(g=b("ExecutionEnvironment"))).canUseDOM)return new u(a,d,null,c,e,null,f);typeof a==="string"&&(a=b("$")(a));typeof e==="undefined"&&(e=Event.Priority.NORMAL);if(typeof c==="object"){var h={};for(var k in c)h[k]=Event.listen(a,k,c[k],e,f);return h}if(c.match(/^on/i))throw new TypeError("Bad event name `"+c+"': use `click', not `onclick'.");if(!a){k=i.blameToPreviousFrame(new Error("Cannot listen to an undefined element."));b("FBLogger")("event").catching(k).mustfix("Tried to listen to element of type %s",c);throw k}if(a.nodeName=="LABEL"&&c=="click"){h=a.getElementsByTagName("input");a=h.length==1?h[0]:a}else if(a===window&&c==="scroll"){k=b("getDocumentScrollElement")();k!==document.documentElement&&k!==document.body&&(a=k)}h=b("DataStore").get(a,j,{});k=o[c];k&&(c=k.base,k.wrap&&(d=k.wrap(d)));q(a,h,c,f);k=h[c];e in k||(k[e]=[]);var l=k[e].length;d=new u(a,d,h,c,e,l,f);k[e][l]=d;k.numHandlers++;f.passive||(k.numNonPassiveHandlers++,p(a,h[c],c));return d},stop:function(a){var c=new(b("DOMEvent"))(a).stopPropagation();k(c.event);return a},prevent:function(a){new(b("DOMEvent"))(a).preventDefault();return a},isDefaultPrevented:function(a){return new(b("DOMEvent"))(a).isDefaultPrevented(a)},kill:function(a){a=new(b("DOMEvent"))(a).kill();k(a.event);return!1},getKeyCode:function(a){a=new(b("DOMEvent"))(a).event;if(!a)return!1;switch(a.keyCode){case 63232:return 38;case 63233:return 40;case 63234:return 37;case 63235:return 39;case 63272:case 63273:case 63275:return null;case 63276:return 33;case 63277:return 34}if(a.shiftKey)switch(a.keyCode){case 33:case 34:case 37:case 38:case 39:case 40:return null}return a.keyCode},getPriorities:function(){if(!n){var a=b("getObjectValues")(Event.Priority);a.sort(function(a,b){return a-b});n=a}return n},fire:function(a,b,c){c=new l(a,b,c);var d;do{var e=Event.__getHandler(a,b);e&&(d=e(c));a=a.parentNode}while(a&&d!==!1&&!c.cancelBubble);return d!==!1},__fire:function(a,b,c){a=Event.__getHandler(a,b);if(a)return a(m(c))},__getHandler:function(a,c){var d=b("DataStore").get(a,j);return d&&d[c]?d[c].domHandler:a["on"+c]},getPosition:function(a){a=new(b("DOMEvent"))(a).event;var c=b("getDocumentScrollElement")(),d=a.clientX+b("Scroll").getLeft(c);a=a.clientY+b("Scroll").getTop(c);return{x:d,y:a}}};Object.assign(Event,c);var n=null;d=function(a){return function(c){if(!b("DOMQuery").contains(this,c.getRelatedTarget()))return a.call(this,c)}};var o;!window.navigator.msPointerEnabled?o={mouseenter:{base:"mouseover",wrap:d},mouseleave:{base:"mouseout",wrap:d}}:o={mousedown:{base:"MSPointerDown"},mousemove:{base:"MSPointerMove"},mouseup:{base:"MSPointerUp"},mouseover:{base:"MSPointerOver"},mouseout:{base:"MSPointerOut"},mouseenter:{base:"MSPointerOver",wrap:d},mouseleave:{base:"MSPointerOut",wrap:d}};if(b("UserAgent").isBrowser("Firefox < 52")){f=function(a,b){b=m(b);var c=b.getTarget();while(c)Event.__fire(c,a,b),c=c.parentNode};document.documentElement.addEventListener("focus",f.bind(null,"focusin"),!0);document.documentElement.addEventListener("blur",f.bind(null,"focusout"),!0)}var p=function(a,c,d){var e=c.numNonPassiveHandlers==0;e!=c.options.passive&&(c.domHandlerRemover.remove(),c.options.passive=e,c.domHandlerRemover=b("DOMEventListener").add(a,d,c.domHandler,{passive:e}))},q=function(a,c,d,e){if(d in c)return;var f=b("TimeSlice").guard(t.bind(a,d),b("dedupString")("Event listenHandler "+d));c[d]={numHandlers:0,numNonPassiveHandlers:0,domHandlerRemover:b("DOMEventListener").add(a,d,f,e),domHandler:f,options:e};c="on"+d;if(a[c]){f=a===document.documentElement?Event.Priority._BUBBLE:Event.Priority.TRADITIONAL;var g=a[c];a[c]=null;Event.listen(a,d,g,f,e)}};function r(a){return!a.href.endsWith("#")?!1:a.href===document.location.href||a.href===document.location.href+"#"}function s(a,b){return a.nodeName==="INPUT"&&a.type===b}var t=b("EventProfiler").__wrapEventListenHandler(function(a,c){c=m(c);if(!b("DataStore").get(this,j))throw new Error("Bad listenHandler context.");var d=b("DataStore").get(this,j)[a];if(!d)throw new Error("No registered handlers for `"+a+"'.");if(a=="click"||a=="contextmenu"||a=="mousedown"&&c.which==2){a=c.getTarget();var e=b("Parent").byTag(a,"a");e instanceof HTMLAnchorElement&&e.href&&r(e)&&!s(a,"file")&&!s(a,"submit")&&c.prevent()}e=Event.getPriorities();for(a=0;a<e.length;a++){var f=e[a];if(f in d){f=d[f];for(var g=0;g<f.length;g++){if(!f[g])continue;var h=f[g].fire(this,c);if(h===!1)return c.kill();else c.cancelBubble&&c.stop()}}}return c.returnValue});Event.Priority={URGENT:-20,TRADITIONAL:-10,NORMAL:0,_BUBBLE:1e3};var u=function(){"use strict";function a(a,b,c,d,e,f,g){this.$1=a,this.$2=b,this.$3=c,this.$7=d,this.$6=e,this.$4=f,this.$5=g}var c=a.prototype;c.isRemoved=function(){return!this.$3};c.remove=function(){if((g||(g=b("ExecutionEnvironment"))).canUseDOM){if(this.isRemoved()){b("FBLogger")("Event").warn("Event handler has already been removed");return}var a=this.$3[this.$7];a.numHandlers<=1?(a.domHandlerRemover.remove(),delete this.$3[this.$7]):(delete a[this.$6][this.$4],a.numHandlers--,this.$5.passive||(a.numNonPassiveHandlers--,p(this.$1,this.$3[this.$7],this.$7)));this.$3=null}};c.fire=function(a,c){return(g||(g=b("ExecutionEnvironment"))).canUseDOM?(h||(h=b("ErrorGuard"))).applyWithGuard(this.$2,a,[c],{name:"eventhandler:"+c.type+":"+(typeof a.name=="string"?a.name:a.id)}):!0};return a}();a.$E=Event.$E=m;e.exports=Event}),null);
__d("TrustedTypesLinkTagHTMLPolicy",["TrustedTypes","err"],(function(a,b,c,d,e,f,g){"use strict";a={createHTML:function(a){if(a==="<link />")return a;throw c("err")("Violating Trusted Type policies. Only works for '<link />' strings.")}};b=c("TrustedTypes").createPolicy("link-tag-html",a);d=b;g["default"]=d}),98);
__d("getMarkupWrap",["invariant","ExecutionEnvironment","TrustedTypesLinkTagHTMLPolicy"],(function(a,b,c,d,e,f,g,h){var i,j=(i||c("ExecutionEnvironment")).canUseDOM?document.createElement("div"):null,k={};b=[1,'<select multiple="true">',"</select>"];d=[1,"<table>","</table>"];e=[3,"<table><tbody><tr>","</tr></tbody></table>"];var l=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],m={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:b,option:b,caption:d,colgroup:d,tbody:d,tfoot:d,thead:d,td:e,th:e};f=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];f.forEach(function(a){m[a]=l,k[a]=!0});function a(a){a=a;!j&&h(0,144);Object.prototype.hasOwnProperty.call(m,a)||(a="*");Object.prototype.hasOwnProperty.call(k,a)||(a==="*"?j.innerHTML=c("TrustedTypesLinkTagHTMLPolicy").createHTML("<link />"):j.innerHTML="<"+a+"></"+a+">",k[a]=!j.firstChild);return k[a]?m[a]:null}g["default"]=a}),98);
__d("createNodesFromMarkup",["invariant","ExecutionEnvironment","TrustedTypesNoOpPolicy_DO_NOT_USE","getMarkupWrap"],(function(a,b,c,d,e,f,g,h){var i,j=(i||c("ExecutionEnvironment")).canUseDOM?document.createElement("div"):null,k=/^\s*<(\w+)/;function l(a){a=a.match(k);return a&&a[1].toLowerCase()}function a(a,b){var d=j;!j&&h(0,5001);var e=l(a);e=e&&c("getMarkupWrap")(e);if(e){d.innerHTML=e[1]+a+e[2];e=e[0];while(e--)d=d.lastChild}else d.innerHTML=c("TrustedTypesNoOpPolicy_DO_NOT_USE").createHTML(a);e=d.getElementsByTagName("script");e.length&&(b||h(0,5002),Array.from(e).forEach(b));a=Array.from(d.childNodes);while(d.lastChild)d.removeChild(d.lastChild);return a}g["default"]=a}),98);
__d("evalGlobal",[],(function(a,b,c,d,e,f){function a(a){if(typeof a!=="string")throw new TypeError("JS sent to evalGlobal is not a string. Only strings are permitted.");if(!a)return;var b=document.createElement("script");try{b.appendChild(document.createTextNode(a))}catch(c){b.text=a}a=document.getElementsByTagName("head")[0]||document.documentElement;a.appendChild(b);a.removeChild(b)}f["default"]=a}),66);
__d("HTML",["invariant","Bootloader","FBLogger","createNodesFromMarkup","emptyFunction","evalGlobal"],(function(a,b,c,d,e,f,g){var h=/(<(\w+)[^>]*?)\/>/g,i={abbr:!0,area:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0};a=function(){"use strict";function a(c){c&&typeof c.__html==="string"&&(c=c.__html);if(!(this instanceof a))return c instanceof a?c:new a(c);if(c){var d=typeof c;d==="string"||g(0,277,d)}this._markup=c||"";this._defer=!1;this._nodes=null;this._inlineJS=b("emptyFunction");this._rootNode=null;this._hasInlineJs=!1}var c=a.prototype;c.toString=function(){return this._markup};c.getContent=function(){return this._markup};c.getNodes=function(){this._fillCache();return this._nodes};c.getRootNode=function(){this._rootNode&&g(0,278);var a=this.getNodes();if(a.length===1)this._rootNode=a[0];else{var b=document.createDocumentFragment();for(var c=0;c<a.length;c++)b.appendChild(a[c]);this._rootNode=b}return this._rootNode};c.getAction=function(){var a=this;this._fillCache();var b=function(){a._inlineJS()};return this._defer?function(){setTimeout(b,0)}:b};c._fillCache=function(){if(this._nodes!==null)return;if(!this._markup){this._nodes=[];return}var a=this._markup.replace(h,function(a,b,c){return i[c.toLowerCase()]?a:b+"></"+c+">"}),c=null;a=b("createNodesFromMarkup")(a,function(a){b("FBLogger")("staticresources").warn("HTML: encountered script node while parsing, hasSrc=%s, type=%s",Boolean(a.src),a.type==null||a.type===""?"<unknown>":a.type),a.type!=="application/ld+json"&&a.type!=="application/json"&&(c=c||[],c.push(a.src?b("Bootloader").requestJSResource_UNSAFE_NEEDS_REVIEW_BY_SECURITY_AND_XFN.bind(b("Bootloader"),a.src):b("evalGlobal").bind(null,a.innerHTML)),a.parentNode.removeChild(a))});c&&(this._hasInlineJs=!0,this._inlineJS=function(){for(var a=0;a<c.length;a++)c[a]()});this._nodes=a};c.setDeferred=function(a){this._defer=!!a;return this};c.hasInlineJs=function(){return this._hasInlineJs};a.isHTML=function(b){return!!b&&(b instanceof a||b.__html!==void 0)};a.replaceJSONWrapper=function(b){return b&&b.__html!==void 0?new a(b.__html):b};return a}();e.exports=a}),null);
__d("TrustedTypesIEFixDOMPolicy",["TrustedTypes"],(function(a,b,c,d,e,f,g){"use strict";a={createHTML:function(a){return a}};b=c("TrustedTypes").createPolicy("dom-ie-fix",a);d=b;g["default"]=d}),98);
__d("UserAgent_DEPRECATED",[],(function(a,b,c,d,e,f){var g=!1,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;function x(){if(g)return;g=!0;var a=navigator.userAgent,b=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(a),c=/(Mac OS X)|(Windows)|(Linux)/.exec(a);s=/\b(iPhone|iP[ao]d)/.exec(a);t=/\b(iP[ao]d)/.exec(a);q=/Android/i.exec(a);u=/FBAN\/\w+;/i.exec(a);v=/FBAN\/mLite;/i.exec(a);w=/Mobile/i.exec(a);r=!!/Win64/.exec(a);if(b){h=b[1]?parseFloat(b[1]):b[5]?parseFloat(b[5]):NaN;h&&document&&document.documentMode&&(h=document.documentMode);var d=/(?:Trident\/(\d+.\d+))/.exec(a);m=d?parseFloat(d[1])+4:h;i=b[2]?parseFloat(b[2]):NaN;j=b[3]?parseFloat(b[3]):NaN;k=b[4]?parseFloat(b[4]):NaN;k?(b=/(?:Chrome\/(\d+\.\d+))/.exec(a),l=b&&b[1]?parseFloat(b[1]):NaN):l=NaN}else h=i=j=l=k=NaN;if(c){if(c[1]){d=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(a);n=d?parseFloat(d[1].replace("_",".")):!0}else n=!1;o=!!c[2];p=!!c[3]}else n=o=p=!1}function y(){return x()||h}function a(){return x()||m>h}function b(){return y()&&r}function c(){return x()||i}function d(){return x()||j}function z(){return x()||k}function e(){return z()}function A(){return x()||l}function B(){return x()||o}function C(){return x()||n}function D(){return x()||p}function E(){return x()||s}function F(){return x()||s||t||q||w}function G(){return x()||v!=null?null:u}function H(){return x()||q}function I(){return x()||t}f.ie=y;f.ieCompatibilityMode=a;f.ie64=b;f.firefox=c;f.opera=d;f.webkit=z;f.safari=e;f.chrome=A;f.windows=B;f.osx=C;f.linux=D;f.iphone=E;f.mobile=F;f.nativeApp=G;f.android=H;f.ipad=I}),66);
__d("isScalar",[],(function(a,b,c,d,e,f){function a(a){return/string|number|boolean/.test(typeof a)}f["default"]=a}),66);
__d("DOM",["$","DOMQuery","Event","FBLogger","FbtResultBase","HTML","TrustedTypesIEFixDOMPolicy","UserAgent_DEPRECATED","createArrayFromMixed","fb-error","isNode","isScalar","isTextNode"],(function(a,b,c,d,e,f,g){a=function(a,b,c){a=document.createElement(a);b&&h.setAttributes(a,b);c!=null&&h.setContent(a,c);return a};var h={find:(b=d("DOMQuery")).find,findPushSafe:b.findPushSafe,scry:b.scry,getSelection:b.getSelection,contains:b.contains,getRootElement:b.getRootElement,isNodeOfType:b.isNodeOfType,isInputNode:b.isInputNode,create:a,setAttributes:function(a,b){b.type&&(a.type=b.type);for(var d in b){var e=b[d],f=/^on/i.test(d);f&&typeof e!=="function"&&c("FBLogger")("dom").warn("Handlers passed to DOM.setAttributes must be functions. Handler passed for %s was %s",d,typeof e);if(d=="type")continue;else d=="style"?typeof e==="string"?a.style.cssText=e:Object.assign(a.style,e):f?c("Event").listen(a,d.substr(2),e):d in a?a[d]=e:a.setAttribute&&a.setAttribute(d,e)}},prependContent:function(a,b){if(!a)throw c("fb-error").TAAL.blameToPreviousFile(new Error("reference element is not a node"));return j(b,a,function(b){a.firstChild?a.insertBefore(b,a.firstChild):a.appendChild(b)})},insertAfter:function(a,b){if(!a||!a.parentNode)throw c("fb-error").TAAL.blameToPreviousFile(new Error("reference element does not have a parent"));var d=a.parentNode;return j(b,d,function(b){a.nextSibling?d.insertBefore(b,a.nextSibling):d.appendChild(b)})},insertBefore:function(a,b){if(!a||!a.parentNode)throw c("fb-error").TAAL.blameToPreviousFile(new Error("reference element does not have a parent"));var d=a.parentNode;return j(b,d,function(b){d.insertBefore(b,a)})},setContent:function(a,b){if(!a)throw c("fb-error").TAAL.blameToPreviousFile(new Error("reference element is not a node"));while(a.firstChild)i(a.firstChild);return h.appendContent(a,b)},appendContent:function(a,b){if(!a)throw c("fb-error").TAAL.blameToPreviousFile(new Error("reference element is not a node"));return j(b,a,function(b){a.appendChild(b)})},replace:function(a,b){if(!a||!a.parentNode)throw c("fb-error").TAAL.blameToPreviousFile(new Error("reference element does not have a parent"));var d=a.parentNode;return j(b,d,function(b){d.replaceChild(b,a)})},remove:function(a){i(typeof a==="string"?c("$")(a):a)},empty:function(a){a=typeof a==="string"?c("$")(a):a;while(a.firstChild)i(a.firstChild)}};function i(a){a.parentNode&&a.parentNode.removeChild(a)}function j(a,b,e){a=c("HTML").replaceJSONWrapper(a);if(a instanceof c("HTML")&&b.firstChild===null&&-1===a.toString().indexOf("<script")){var f=d("UserAgent_DEPRECATED").ie();if(!f||f>7&&!d("DOMQuery").isNodeOfType(b,["table","tbody","thead","tfoot","tr","select","fieldset"])){var g=f?'<em style="display:none;">&nbsp;</em>':"";b.innerHTML=c("TrustedTypesIEFixDOMPolicy").createHTML(g+a);f&&b.removeChild(b.firstChild);return Array.from(b.childNodes)}}else if(c("isTextNode")(b)){b.data=a;return[a]}g=document.createDocumentFragment();var h;f=[];b=[];var i=!1;a=c("createArrayFromMixed")(a);a.length===1&&a[0]instanceof c("FbtResultBase")&&(a=a[0].getContents());for(var j=0;j<a.length;j++){h=c("HTML").replaceJSONWrapper(a[j]);if(h instanceof c("HTML")){b.push(h.getAction());var k=h.getNodes();!i&&h.hasInlineJs()&&(c("FBLogger")("staticresources").warn("DOM: adding HTML which contains inline JS"),i=!0);for(var l=0;l<k.length;l++)f.push(k[l]),g.appendChild(k[l])}else if(c("isScalar")(h)||h instanceof c("FbtResultBase")){l=document.createTextNode(h);f.push(l);g.appendChild(l)}else c("isNode")(h)?(f.push(h),g.appendChild(h)):(Array.isArray(h)&&c("FBLogger")("dom").warn("Nest arrays not supported"),h!==null&&c("FBLogger")("dom").warn("No way to set content %s",h))}e(g);b.forEach(function(a){a()});return f}e=h;g["default"]=e}),98);
__d("AsyncDOM",["CSS","DOM","FBLogger"],(function(a,b,c,d,e,f){a={invoke:function(a,c){for(var d=0;d<a.length;++d){var e=a[d],f=e[0],g=e[1],h=e[2];e=e[3];h=h&&c||null;g&&(h=b("DOM").scry(h||document.documentElement,g)[0]);h||b("FBLogger")("async_dom").warn("Could not find relativeTo element for %s AsyncDOM operation based on selector: %s",f,g);switch(f){case"hide":b("CSS").hide(h);break;case"show":b("CSS").show(h);break;case"setContent":b("DOM").setContent(h,e);break;case"appendContent":b("DOM").appendContent(h,e);break;case"prependContent":b("DOM").prependContent(h,e);break;case"insertAfter":b("DOM").insertAfter(h,e);break;case"insertBefore":b("DOM").insertBefore(h,e);break;case"remove":b("DOM").remove(h);break;case"replace":b("DOM").replace(h,e);break;default:b("FBLogger")("async_dom").warn("Received invalid command %s for AsyncDOM operation",f)}}}};e.exports=a}),null);
__d("AsyncResponse",["invariant","Bootloader","FBLogger","HTML","WebDriverConfig"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(){function a(a,b){this.error=0,this.errorSummary=null,this.errorDescription=null,this.onload=null,this.replay=!1,this.payload=b,this.request=a,this.silentError=!1,this.transientError=!1,this.blockedAction=!1,this.is_last=!0,this.responseHeaders=null}var b=a.prototype;b.getRequest=function(){return this.request};b.getPayload=function(){return this.payload};b.toError=function(){this.error!==0||h(0,5599);var a=this.errorSummary||"",b=this.getErrorDescriptionString()||"",c=new Error(a.toString()+": "+b);Object.assign(c,{code:this.error,description:this.errorDescription||"",descriptionString:b,response:this,summary:a,isSilent:this.silentError,isTransient:this.transientError});return c};b.getError=function(){return this.error};b.getErrorSummary=function(){return this.errorSummary};b.setErrorSummary=function(a){a=a===void 0?null:a;this.errorSummary=a;return this};b.getErrorDescription=function(){return this.errorDescription};b.getErrorDescriptionString=function(){var a=this.getErrorDescription();if(a==null)return null;if(c("HTML").isHTML(a)){var b=new(c("HTML"))(a);return b.getRootNode().textContent}return a.toString()};b.getErrorIsWarning=function(){return!!this.errorIsWarning};b.isSilent=function(){return!!this.silentError};b.isTransient=function(){return!!this.transientError};b.isBlockedAction=function(){return!!this.blockedAction};b.getResponseHeader=function(a){var b=this.responseHeaders;if(!b)return null;b=b.replace(/^\n/,"");a=a.toLowerCase();b=b.split("\r\n");for(var c=0;c<b.length;++c){var d=b[c],e=d.indexOf(": ");if(e<=0)continue;var f=d.substring(0,e).toLowerCase();if(f===a)return d.substring(e+2)}return null};a.defaultErrorHandler=function(b){try{!b.silentError?a.verboseErrorHandler(b):c("FBLogger")("async_response").catching(b.toError()).warn("default error handler called")}catch(a){alert(b)}};a.verboseErrorHandler=function(a,b){c("Bootloader").loadModules(["ExceptionDialog"],function(c){return c.showAsyncError(a,b)},"AsyncResponse")};return a}();g["default"]=a}),98);
__d("FetchStreamConfig",[],(function(a,b,c,d,e,f){a=Object.freeze({delim:"/*<!-- fetch-stream -->*/"});f["default"]=a}),66);
__d("StreamBlockReader",["Promise","regeneratorRuntime"],(function(a,b,c,d,e,f){var g;a=function(){function a(a){var c=this;if(!a.getReader)throw new Error("No getReader method found on given object");this.$3=a.getReader();this.$1="";this.$2=null;this.$4=!1;this.$5="utf-8";this.$6="";this.$9=!1;this.$8=function(){return(g||(g=b("Promise"))).reject("Sorry, you are somehow using this too early.")};this.$7=new(g||(g=b("Promise")))(function(a,b){c.$8=a})}var c=a.prototype;c.changeEncoding=function(a){if(this.$2)throw new Error("Decoder already in use, encoding cannot be changed");this.$5=a};c.$10=function(){if(!self.TextDecoder)throw new Error("TextDecoder is not supported here");this.$2||(this.$2=new self.TextDecoder(this.$5));return this.$2};c.$11=function(){if(this.$9)throw new Error("Something else is already reading from this reader");this.$9=!0};c.$12=function(){this.$9=!1};c.isDone=function(){return this.$4};c.$13=function(){var a,c,d,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:if(!(this.$6!=="")){f.next=4;break}a=this.$6;this.$6="";return f.abrupt("return",a);case 4:if(!this.isDone()){f.next=6;break}throw new Error("You cannot read from a stream that is done");case 6:f.next=8;return b("regeneratorRuntime").awrap(this.$3.read());case 8:c=f.sent;d=c.done;e=c.value;this.$4=d;d&&this.$8();return f.abrupt("return",e?this.$10().decode(e,{stream:!d}):"");case 14:case"end":return f.stop()}},null,this)};c.readNextBlock=function(){var a;return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:this.$11();a=this.$13();this.$12();return b.abrupt("return",a);case 4:case"end":return b.stop()}},null,this)};c.readUntilStringOrEnd=function(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(this.readUntilOneOfStringOrEnd_DO_NOT_USE([a]));case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},null,this)};c.readUntilStringOrThrow=function(a){var c,d,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:if(a){f.next=2;break}throw new Error("cannot read empty string");case 2:this.$11(),c="",d=0;case 5:if(this.isDone()){f.next=23;break}f.t0=c;f.next=9;return b("regeneratorRuntime").awrap(this.$13());case 9:c=f.t0+=f.sent;if(!(c.length<a.length)){f.next=12;break}return f.abrupt("continue",5);case 12:e=c.substring(d).indexOf(a);if(!(e!==-1)){f.next=20;break}e+=d;this.$6=c.substring(e+a.length);this.$12();return f.abrupt("return",c.substring(0,e));case 20:d=c.length-a.length+1;case 21:f.next=5;break;case 23:this.$6=c;this.$12();throw new Error("Breakpoint not found");case 26:case"end":return f.stop()}},null,this)};c.readUntilOneOfStringOrEnd_DO_NOT_USE=function(a){var c,d,e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:this.$11(),c="";case 2:if(this.isDone()){g.next=20;break}g.t0=c;g.next=6;return b("regeneratorRuntime").awrap(this.$13());case 6:c=g.t0+=g.sent,d=0;case 8:if(!(d<a.length)){g.next=18;break}e=a[d];f=c.indexOf(e);if(!(f!==-1)){g.next=15;break}this.$6=c.substring(f+e.length);this.$12();return g.abrupt("return",c.substring(0,f));case 15:d++;g.next=8;break;case 18:g.next=2;break;case 20:this.$12();return g.abrupt("return",c);case 22:case"end":return g.stop()}},null,this)};c.waitUntilDone=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",this.$7);case 1:case"end":return a.stop()}},null,this)};return a}();f["default"]=a}),66);
__d("mixin",[],(function(a,b,c,d,e,f){function a(){var a=function(){},b=0,c;while(b<0||arguments.length<=b?void 0:arguments[b]){c=b<0||arguments.length<=b?void 0:arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a.prototype[d]=c[d]);b+=1}return a}f["default"]=a}),66);
__d("FetchStreamTransport",["ArbiterMixin","FetchStreamConfig","StreamBlockReader","TimeSlice","URI","asyncToGeneratorRuntime","mixin","nullthrows"],(function(a,b,c,d,e,f,g){var h,i=0;a=function(a){babelHelpers.inheritsLoose(d,a);function d(b){var c;if(!self.ReadableStream||!self.fetch||!Request||!TextDecoder)throw new Error("fetch stream transport is not supported here");c=a.call(this)||this;c.$FetchStreamTransport$p_6=null;c.$FetchStreamTransport$p_1=b;c.$FetchStreamTransport$p_3=!1;c.$FetchStreamTransport$p_4=!1;c.$FetchStreamTransport$p_5=!1;c.$FetchStreamTransport$p_2=++i;return babelHelpers.assertThisInitialized(c)||babelHelpers.assertThisInitialized(c)}var e=d.prototype;e.hasFinished=function(){return this.$FetchStreamTransport$p_5};e.getRequestURI=function(){return new(h||(h=c("URI")))(this.$FetchStreamTransport$p_1).addQueryData({__a:1,__adt:this.$FetchStreamTransport$p_2,__req:"fetchstream_"+this.$FetchStreamTransport$p_2,ajaxpipe_fetch_stream:1})};e.send=function(){if(this.$FetchStreamTransport$p_3)throw new Error("FetchStreamTransport instances cannot be re-used.");this.$FetchStreamTransport$p_3=!0;var a=new Request(this.getRequestURI().toString(),{mode:"same-origin",credentials:"include"});this.$FetchStreamTransport$p_6=c("TimeSlice").getGuardedContinuation("FetchStreamTransport: waiting on first response");a=self.fetch(a,{redirect:"follow"});this.$FetchStreamTransport$p_7(a)};e.$FetchStreamTransport$p_7=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this,d;try{d=(yield a)}catch(a){this.abort()}if(!d||!d.body||!d.ok){this.abort();return}var e=new(c("StreamBlockReader"))(d.body);a=function*(){var a=(yield e.readUntilStringOrEnd(c("FetchStreamConfig").delim));if(b.$FetchStreamTransport$p_4)return"break";c("nullthrows")(b.$FetchStreamTransport$p_6)(function(){var d=JSON.parse(a);e.isDone()||d.finished?b.$FetchStreamTransport$p_5=!0:b.$FetchStreamTransport$p_6=c("TimeSlice").getGuardedContinuation("FetchStreamTransport: waiting on next response");b.inform("response",d.content)})};while(!this.$FetchStreamTransport$p_5&&!this.$FetchStreamTransport$p_4){var f=(yield* a());if(f==="break")break}});function d(b){return a.apply(this,arguments)}return d}();e.abort=function(){var a=this;if(this.$FetchStreamTransport$p_4||this.$FetchStreamTransport$p_5)return;this.$FetchStreamTransport$p_4=!0;this.$FetchStreamTransport$p_5=!0;if(this.$FetchStreamTransport$p_6){var b=this.$FetchStreamTransport$p_6;b(function(){a.inform("abort")})}else this.inform("abort")};return d}(c("mixin")(c("ArbiterMixin")));g["default"]=a}),98);
__d("HTTPErrors",["emptyFunction"],(function(a,b,c,d,e,f,g){function a(a){return{summary:"HTTP Error",description:"Unknown HTTP error #"+a}}b={get:a,getAll:c("emptyFunction").thatReturns(new Map())};d=b;g["default"]=d}),98);
__d("SessionName",["SessionNameConfig"],(function(a,b,c,d,e,f){e.exports={getName:function(){return b("SessionNameConfig").seed}}}),null);
__d("bind",[],(function(a,b,c,d,e,f){function a(a,b){var c=Array.prototype.slice.call(arguments,2);if(typeof b!=="string")return Function.prototype.bind.apply(b,[a].concat(c));function d(){var d=c.concat(Array.prototype.slice.call(arguments));if(a[b])return a[b].apply(a,d)}d.toString=function(){return"bound lazily: "+a[b]};return d}e.exports=a}),null);
__d("executeAfter",[],(function(a,b,c,d,e,f){function a(a,b,c){return function(){a.apply(c||this,arguments),b.apply(c||this,arguments)}}e.exports=a}),null);
__d("isSparkDotMetaDotComURI",[],(function(a,b,c,d,e,f){var g=new RegExp("(^|\\.)spark\\.meta\\.com$","i"),h=["https"];function a(a){if(a.isEmpty()&&a.toString()!=="#")return!1;return!a.getDomain()&&!a.getProtocol()?!1:h.indexOf(a.getProtocol())!==-1&&g.test(a.getDomain())}f["default"]=a}),66);
__d("AsyncRequest",["errorCode","fbt","invariant","Arbiter","AsyncDOM","AsyncRequestConfig","AsyncResponse","Bootloader","CSS","DTSG","DTSG_ASYNC","Deferred","Env","ErrorGuard","Event","FBLogger","FetchStreamTransport","HTTPErrors","HasteResponse","PHPQuerySerializer","Parent","Promise","ResourceTimingsStore","ResourceTypes","Run","ScriptPath","ServerJS","SessionName","TimeSlice","URI","UserAgent_DEPRECATED","ZeroRewrites","bind","clearTimeout","emptyFunction","executeAfter","fb-error","ge","getAsyncHeaders","getAsyncParams","gkx","goURI","isBulletinDotComURI","isEmpty","isFacebookURI","isHorizonDotMetaDotComURI","isInternalFBURI","isMessengerDotComURI","isSparkDotMetaDotComURI","isWorkDotMetaDotComURI","isWorkplaceDotComURI","isWorkroomsDotComURI","performanceAbsoluteNow","promiseDone","replaceTransportMarkers","setTimeout","setTimeoutAcrossTransitions","unrecoverableViolation","uriIsRelativePath"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";var k,l,m,n,o,p,q;e=19e3;f=500;var r=1006,s=1004,t=1010,u=new Set([f,t,s,r]),v=!1;d("Run").onAfterUnload(function(){v=!0});function w(){return v}function x(a){return"onprogress"in a}function y(a){return"upload"in a&&"onprogress"in a.upload}function z(a){return"withCredentials"in a}function A(a){return a.status in{0:1,12029:1,12030:1,12031:1,12152:1}}function B(a){a=!a||typeof a==="function";a||c("FBLogger")("asyncresponse").mustfix("AsyncRequest response handlers must be functions. Pass a function, or use bind() to build one.");return a}var C=2,D=C,E=!1;c("Arbiter").subscribe("page_transition",function(a,b){!E?D=b.id:E=!1});var F="for (;;);",G=F.length,H=function(){function a(b){var e=this,f;this._allowIrrelevantRequests=!1;this._delayPreDisplayJS=!1;this._shouldReplaceTransportMarkers=!1;this._dispatchErrorResponse=function(a,b){var d=a.getError();e.clearStatusIndicator();if(!e._isRelevant()||d===t){e.abort();return}if(e._isServerDialogErrorCode(d)){var f=d==1357008||d==1357007;e.interceptHandler(a);d==1357041?e._solveQuicksandChallenge(a):d==1357007?e._displayServerDialog(a,f,!0):e._displayServerDialog(a,f)}else if(e.initialHandler(a)!==!1){c("clearTimeout")(e.timer);try{b(a)}catch(b){e.finallyHandler(a);throw b}e.finallyHandler(a)}};this._onStateChange=function(){var b=e.transport;if(!b)return;try{a._inflightCount--;d("ResourceTimingsStore").measureResponseReceived(c("ResourceTypes").XHR,e.resourceTimingStoreUID);try{b.getResponseHeader("X-FB-Debug")&&(e._xFbServer=b.getResponseHeader("X-FB-Debug"),c("fb-error").ErrorXFBDebug.add(e._xFbServer))}catch(a){}if(b.status>=200&&b.status<300)a.lastSuccessTime=Date.now(),e._handleXHRResponse(b);else if(d("UserAgent_DEPRECATED").webkit()&&typeof b.status==="undefined")e._invokeErrorHandler(1002);else if(c("AsyncRequestConfig").retryOnNetworkError&&A(b)&&e.remainingRetries>0&&!e._requestTimeout){e.remainingRetries--;delete e.transport;e.send(!0);return}else e._invokeErrorHandler();e.getOption("asynchronous_DEPRECATED")!==!1&&delete e.transport}catch(a){if(w())return;delete e.transport;e.remainingRetries>0?(e.remainingRetries--,e.send(!0)):(e.getOption("suppressErrorAlerts")||c("FBLogger")("AsyncRequest").catching(a).mustfix("AsyncRequest exception when attempting to handle a state change"),e._invokeErrorHandler(1007))}};this._handleTimeout=function(){e.continuation.last(function(){e._requestTimeout=!0;var a=e.timeoutHandler;e.abandon();a&&a(e);c("setTimeout")(function(){c("Arbiter").inform("AsyncRequest/timeout",{request:e})},0)})};this.continuation=c("TimeSlice").getPlaceholderReusableContinuation();this.transport=null;this.method="POST";this.uri="";this.timeout=null;this.timer=null;this.initialHandler=f=c("emptyFunction");this.handler=null;this.uploadProgressHandler=null;this.errorHandler=c("AsyncResponse").defaultErrorHandler;this.transportErrorHandler=null;this.timeoutHandler=null;this.interceptHandler=f;this.finallyHandler=f;this.abortHandler=f;this.serverDialogCancelHandler=null;this.relativeTo=null;this.statusElement=null;this.statusClass="";this.data={};this.headers={};this.file=null;this.context={};this.readOnly=!1;this.writeRequiredParams=[];this.remainingRetries=0;this.userActionID="-";this.resourceTimingStoreUID=d("ResourceTimingsStore").getUID(c("ResourceTypes").XHR,b!=null?b.toString():"");this.flushedResponseTextParseIndex=0;this.option={asynchronous_DEPRECATED:!0,suppressErrorHandlerWarning:!1,suppressEvaluation:!1,suppressErrorAlerts:!1,retries:0,bundle:!1,handleErrorAfterUnload:!1,useFetchTransport:!1};this.transportErrorHandler=c("bind")(this,"errorHandler");b!==void 0&&this.setURI(b);this.setAllowCrossPageTransition(c("AsyncRequestConfig").asyncRequestsSurviveTransitionsDefault||!1)}var e=a.prototype;e._dispatchResponse=function(a){this.clearStatusIndicator();if(!this._isRelevant()){this._invokeErrorHandler(t);return}if(this.initialHandler(a)===!1)return;c("clearTimeout")(this.timer);var b,d=this.getHandler();if(d)try{b=this._shouldSuppressJS(d(a))}catch(b){a.is_last&&this.finallyHandler(a);throw b}b||this._handleJSResponse(a);a.is_last&&this.finallyHandler(a)};e._shouldSuppressJS=function(b){return b===a.suppressOnloadToken};e._handlePreDisplayServerJS=function(a,b){var d=!1,e=[],f=function(){if(d){c("FBLogger")("AsyncResponse").warn("registerToBlockDisplayUntilDone_DONOTUSE called after AsyncResponse display started. This is a no-op.");return function(){}}var a,b=new(c("Deferred"))();e.push(b.getPromise());return c("TimeSlice").guard(function(){a&&c("clearTimeout")(a),b.resolve()},"AsyncRequestDisplayBlockingEvent",{propagationType:c("TimeSlice").PropagationType.EXECUTION})};a.handle(b,{bigPipeContext:{registerToBlockDisplayUntilDone_DONOTUSE:f}});d=!0;return e};e._hasEvalDomOp=function(a){return a&&a.length?a.some(function(a){return a[0]==="eval"}):!1};e._handleJSResponse=function(a){var b=this.getRelativeTo(),e=a.domops,f=a.dtsgToken,g=a.dtsgAsyncGetToken,h=a.jsmods,i=a.savedServerJSInstance;i&&i instanceof c("ServerJS")?i=i:i=new(c("ServerJS"))();i.setRelativeTo(b);if(h){var j={define:h.define,instances:h.instances,markup:h.markup};delete h.define;delete h.instances;delete h.markup;this._hasEvalDomOp(e)&&(j.elements=h.elements,delete h.elements);i.handle(j)}j=new(m||(m=c("URI")))(this.uri);(!j.getDomain()&&!j.getProtocol()||document.location.origin===j.getOrigin())&&(f&&d("DTSG").setToken(f),g&&d("DTSG_ASYNC").setToken(g));e&&(q||(q=c("ErrorGuard"))).applyWithGuard(function(){return d("AsyncDOM").invoke(e,b)},null,[],{errorType:"warn"});h&&i.handle(h);this._handleJSRegisters(a,"onload");this._handleJSRegisters(a,"onafterload")};e._handleJSRegisters=function(a,b){a=a[b];if(a)for(b=0;b<a.length;b++){var d=null,e=a[b],f=e.match(/^\"caller:([^\"]+?)\";(.*)/);f!=null&&(d=f[1],e=f[2]);(q||(q=c("ErrorGuard"))).applyWithGuard(new Function(e),this,[]);c("FBLogger")("comet_infra").info("Detected dynamic new Function(...) call in AsyncRequest._handleJSRegisters(...).",new(m||(m=c("URI")))(this.uri).getPath(),d)}};e.invokeResponseHandler=function(a){var e=this;if(typeof a.redirect!=="undefined"){c("setTimeout")(function(){e.setURI(a.redirect,!0).send()},0);return}if(a.bootloadOnly!==void 0){var f=typeof a.bootloadOnly==="string"?JSON.parse(a.bootloadOnly):a.bootloadOnly,g=function(a){c("TimeSlice").guard(function(){c("Bootloader").loadPredictedResourceMap(a)},"Bootloader.loadPredictedResourceMap",{root:!0})()};for(f of f)g(f);return}if(!this.handler&&!this.errorHandler&&!this.transportErrorHandler&&!this.preBootloadHandler&&this.initialHandler===c("emptyFunction")&&this.finallyHandler===c("emptyFunction"))return;var h=a.asyncResponse;if(typeof h!=="undefined"){if(!this._isRelevant()){this._invokeErrorHandler(t);return}h.updateScriptPath&&c("ScriptPath").set(h.updateScriptPath.path,h.updateScriptPath.token,h.updateScriptPath.extra_info);h.lid&&(this._responseTime=Date.now(),this.lid=h.lid);d("HasteResponse").handleSRPayload((g=h.hsrp)!=null?g:{});var i,j;if(h.getError()&&!h.getErrorIsWarning()){f=this.getErrorHandler().bind(this);i=(q||(q=c("ErrorGuard"))).guard(this._dispatchErrorResponse,{name:"AsyncRequest#_dispatchErrorResponse for "+this.getURI()});i=i.bind(this,h,f);j="error"}else{i=(q||(q=c("ErrorGuard"))).guard(this._dispatchResponse.bind(this),{name:"AsyncRequest#_dispatchResponse for "+this.getURI()});i=i.bind(this,h);j="response";g=h.domops;if(!this._delayPreDisplayJS&&h.jsmods&&h.jsmods.pre_display_requires&&!this._hasEvalDomOp(g)){f=h.jsmods;g={define:f.define,instances:f.instances,markup:f.markup};delete f.define;delete f.instances;delete f.markup;g.pre_display_requires=f.pre_display_requires;delete f.pre_display_requires;f=new(c("ServerJS"))();f.setRelativeTo(this.getRelativeTo());h.savedServerJSInstance=f;var k=this._handlePreDisplayServerJS(f,g);if(k&&k.length){var m=i;i=function(){c("promiseDone")((l||(l=b("Promise"))).all(k).then(m))}}}}var o=(n||(n=c("performanceAbsoluteNow")))();i=c("executeAfter")(i,function(){c("Arbiter").inform("AsyncRequest/"+j,{request:e,response:h,ts:o})});this.preBootloadHandler&&this.preBootloadHandler(h);c("Bootloader").loadResources((f=h.allResources)!=null?f:[],{onAll:c("AsyncRequestConfig").immediateDispatch?i:function(){c("setTimeout")(i,0)}})}else typeof a.transportError!=="undefined"?this._xFbServer?this._invokeErrorHandler(1008):this._invokeErrorHandler(1012):this._invokeErrorHandler(1007)};e._invokeErrorHandler=function(a){var b=this,d=this.transport;if(!d)return;var e;if(this.responseText==="")e=1002;else if(this._requestAborted)e=1011;else{try{e=a||d.status||s}catch(a){e=1005}!1===navigator.onLine&&(e=r)}var f,g;a=!0;if(e===r)g=i._("__JHASH__zia6hGr6i8P__JHASH__"),f=i._("__JHASH__PjKFkAw4Nck__JHASH__");else if(e>=300&&e<=399){g=i._("__JHASH__SUtyZBh0Rzk__JHASH__");f=i._("__JHASH__StinKHRkRou__JHASH__");var h=d.getResponseHeader("Location");h&&c("goURI")(h,!0);a=!0}else g=i._("__JHASH__zR4dpqEC6W7__JHASH__"),f=i._("__JHASH__7UBdKMXdKi6__JHASH__");var j=new(c("AsyncResponse"))(this,d);Object.assign(j,{error:e,errorSummary:g,errorDescription:f,silentError:a});c("setTimeout")(function(){c("Arbiter").inform("AsyncRequest/error",{request:b,response:j})},0);if(w()&&!this.getOption("handleErrorAfterUnload"))return;if(!this.transportErrorHandler){c("FBLogger")("asyncresponse").mustfix("Async request to %s failed with a %d error, but there was no error handler available to deal with it.",this.getURI(),e);return}h=this.getTransportErrorHandler().bind(this);!(this.getOption("suppressErrorAlerts")||u.has(e))?c("FBLogger")("asyncresponse").addToCategoryKey(String(e)).mustfix("Async request failed with error %s: %s when requesting %s",e,f.toString(),this.getURI()):u.has(e)&&c("FBLogger")("asyncresponse").addToCategoryKey(String(e)).warn("Async request failed with error %s: %s when requesting %s",e,f.toString(),this.getURI());(q||(q=c("ErrorGuard"))).applyWithGuard(this._dispatchErrorResponse,this,[j,h])};e._isServerDialogErrorCode=function(a){return a==1357008||a==1357007||a==1357041||a==1442002||a==1357001};e._solveQuicksandChallenge=function(a){var b=this,d=a.getPayload();c("Bootloader").loadModules(["QuickSandSolver"],function(a){a.solveAndSendRequestBack(b,d)},"AsyncRequest")};e._displayServerDialog=function(a,b,d){var e=this;d===void 0&&(d=!1);var f=a.getPayload();if(f.__dialog!==void 0){this._displayServerLegacyDialog(a,b);return}b=f.__dialogx;new(c("ServerJS"))().handle(b);if(f.__should_use_mwa_reauth===!0){c("Bootloader").loadModules(["MWADeveloperReauthBarrier"],function(b){b.registerRequest(f.__dialogID,e,a)},"AsyncRequest");return}c("Bootloader").loadModules(["ConfirmationDialog"],function(b){b.setupConfirmation(a,e,d)},"AsyncRequest")};e._displayServerLegacyDialog=function(a,b){var d=this,e=a.getPayload().__dialog;if(c("gkx")("20935")){var f;c("FBLogger")("comet_infra").addMetadata("COMET_INFRA","ERROR_CODE",a.getError().toString()).addMetadata("COMET_INFRA","ERROR_URL",(f=(f=a.request)==null?void 0:f.getURI())!=null?f:"unknown").mustfix("AsyncRequest._displayServerLegacyDialog called in Comet")}c("Bootloader").loadModules(["Dialog"],function(c){c=new c(e);b&&c.setHandler(d._displayConfirmationHandler.bind(d,c));c.setCancelHandler(function(){var b=d.getServerDialogCancelHandler();try{b&&b(a)}catch(a){throw a}finally{d.finallyHandler(a)}}).setCausalElement(d.relativeTo).show()},"AsyncRequest")};e._displayConfirmationHandler=function(a){this.data.confirmed=1,Object.assign(this.data,a.getFormData()),this.send()};e.$1=function(a){a.subscribe("response",this._handleJSONPResponse.bind(this)),a.subscribe("abort",this._handleJSONPAbort.bind(this)),this.transport=a};e._handleJSONPResponse=function(a,b){a=this.transport;if(!a)return;b.bootloadOnly||(this.is_first=this.is_first===void 0);b=this._interpretResponse(b);b.asyncResponse&&(b.asyncResponse.is_first=this.is_first,b.asyncResponse.is_last=a.hasFinished());this.invokeResponseHandler(b);a.hasFinished()&&delete this.transport};e._handleJSONPAbort=function(){this._invokeErrorHandler(),delete this.transport};e._handleXHRResponse=function(a){var b;if(this.getOption("suppressEvaluation"))b={asyncResponse:new(c("AsyncResponse"))(this,a)};else try{this._handleFlushedResponse();a=a.responseText;a=this._filterOutFlushedText(a);a=this._unshieldResponseText(a);a=JSON.parse(a);b=this._interpretResponse(a)}catch(a){b=a.message,c("FBLogger")("async_request").catching(a).warn("Failed to handle response")}this.invokeResponseHandler(b)};e._handleFlushedResponse=function(){var a=this.flushedResponseHandler,b=this.transport;if(a&&b){var c=b.responseText.indexOf(F);c=c===-1?b.responseText.length:c;a(b.responseText.substring(this.flushedResponseTextParseIndex,c));this.flushedResponseTextParseIndex=c}};e._unshieldResponseText=function(a){if(a.length<=G)throw new Error("Response too short on async");var b=0;while(a.charAt(b)==" "||a.charAt(b)=="\n")b++;b&&a.substring(b,b+G)==F;return a.substring(b+G)};e._filterOutFlushedText=function(a){if(!this.flushedResponseHandler)return a;var b=a.indexOf(F);return b<0?a:a.substr(b)};e._interpretResponse=function(a){if(a.redirect)return{redirect:a.redirect};if(a.bootloadOnly)return{bootloadOnly:a.bootloadOnly};var b=a.error&&this._isServerDialogErrorCode(a.error);this._shouldReplaceTransportMarkers&&a.payload&&!b&&c("replaceTransportMarkers")({relativeTo:this.getRelativeTo(),bigPipeContext:null},a.payload);b=new(c("AsyncResponse"))(this);if(a.__ar!=1)c("FBLogger")("AsyncRequest").warn("AsyncRequest to endpoint %s returned a JSON response, but it is not properly formatted. The endpoint needs to provide a response using the AsyncResponse class in PHP.",this.getURI()),b.payload=a;else{Object.assign(b,a);a=this.transport;a&&a.getAllResponseHeaders!==void 0&&(b.responseHeaders=a.getAllResponseHeaders())}return{asyncResponse:b}};e._isMultiplexable=function(){if(this.getOption("useFetchTransport")){c("FBLogger")("AsyncRequest").mustfix("You cannot bundle AsyncRequest that uses iframe transport.");return!1}if(!c("isFacebookURI")(new(m||(m=c("URI")))(this.uri))){c("FBLogger")("AsyncRequest").mustfix("You can not bundle AsyncRequest sent to non-facebook URIs.  Uri: %s",this.getURI());return!1}if(!this.getOption("asynchronous_DEPRECATED")){c("FBLogger")("AsyncRequest").mustfix("We cannot bundle synchronous AsyncRequests");return!1}return!0};e.handleResponse=function(a){a=this._interpretResponse(a);this.invokeResponseHandler(a)};e.setMethod=function(a){this.method=a.toString().toUpperCase();return this};e.getMethod=function(){return this.method};e.setData=function(a){this.data=a;return this};e.setRequestHeader=function(a,b){this.headers[a]=b;return this};e.setRawData=function(a){this.rawData=a;return this};e.getData=function(){return this.data};e.setContextData=function(a,b,c){c=c===void 0?!0:c;c&&(this.context["_log_"+a]=b);return this};e._setUserActionID=function(){this.userActionID=(d("SessionName").getName()||"-")+"/-"};e.setURI=function(a,b){b===void 0&&(b=!1);typeof a==="string"&&a.match(/^\/?u_\d+_\d+/)&&c("FBLogger")("asyncrequest").warn("Invalid URI %s",a);var e=new(m||(m=c("URI")))(a);if(this.getOption("useFetchTransport")&&!c("isFacebookURI")(e)){b&&j(0,45284);return this}if(!this._allowCrossOrigin&&!this.getOption("useFetchTransport")&&!e.isSameOrigin()&&!c("uriIsRelativePath")(e)){b&&j(0,45285);return this}this._setUserActionID();if(!a||e.isEmpty()){c("FBLogger")("async_request").mustfix("URI cannot be empty");return this}this.uri=d("ZeroRewrites").rewriteURI(e);return this};e.getURI=function(){return this.uri.toString()};e.delayPreDisplayJS=function(a){a===void 0&&(a=!0);this._delayPreDisplayJS=a;return this};e.setInitialHandler=function(a){this.initialHandler=a;return this};e.setPayloadHandler=function(a){this.setHandler(function(b){a(b.payload)});return this};e.setHandler=function(a){B(a)&&(this.handler=a);return this};e.setFlushedResponseHandler=function(a){B(a)&&(this.flushedResponseHandler=a);return this};e.getHandler=function(){return this.handler||c("emptyFunction")};e.setProgressHandler=function(a){B(a)&&(this.progressHandler=a);return this};e.setUploadProgressHandler=function(a){B(a)&&(this.uploadProgressHandler=a);return this};e.setErrorHandler=function(a){B(a)&&(this.errorHandler=a);return this};e.setTransportErrorHandler=function(a){this.transportErrorHandler=a;return this};e.getErrorHandler=function(){return this.errorHandler||c("emptyFunction")};e.getTransportErrorHandler=function(){return this.transportErrorHandler||c("emptyFunction")};e.setTimeoutHandler=function(a,b){B(b)&&(this.timeout=a,this.timeoutHandler=b);return this};e.resetTimeout=function(a){if(!(this.timeoutHandler===null))if(a===null)this.timeout=null,c("clearTimeout")(this.timer),this.timer=null;else{var b=!this._allowCrossPageTransition;this.timeout=a;c("clearTimeout")(this.timer);b?this.timer=c("setTimeout")(this._handleTimeout.bind(this),this.timeout):this.timer=c("setTimeoutAcrossTransitions")(this._handleTimeout.bind(this),this.timeout)}return this};e.setNewSerial=function(){this.id=++C;return this};e.setInterceptHandler=function(a){this.interceptHandler=a;return this};e.setFinallyHandler=function(a){this.finallyHandler=a;return this};e.setAbortHandler=function(a){this.abortHandler=a;return this};e.getServerDialogCancelHandler=function(){return this.serverDialogCancelHandler};e.setServerDialogCancelHandler=function(a){this.serverDialogCancelHandler=a;return this};e.setPreBootloadHandler=function(a){this.preBootloadHandler=a;return this};e.setReadOnly=function(a){typeof a!=="boolean"||(this.readOnly=a);return this};e.getReadOnly=function(){return this.readOnly};e.setRelativeTo=function(a){this.relativeTo=a;return this};e.getRelativeTo=function(){return this.relativeTo};e.setStatusClass=function(a){this.statusClass=a;return this};e.setStatusElement=function(a){this.statusElement=a;return this};e.getStatusElement=function(){return c("ge")(this.statusElement)};e._isRelevant=function(){if(this._allowCrossPageTransition)return!0;return!this.id?!0:this.id>D};e.clearStatusIndicator=function(){var a=this.getStatusElement();a&&(d("CSS").removeClass(a,"async_saving"),d("CSS").removeClass(a,this.statusClass))};e._addStatusIndicator=function(){var a=this.getStatusElement();a&&(d("CSS").addClass(a,"async_saving"),d("CSS").addClass(a,this.statusClass))};e.specifiesWriteRequiredParams=function(){var a=this;return this.writeRequiredParams.every(function(b){a.data[b]=a.data[b]||(o||(o=c("Env")))[b]||(c("ge")(b)||{}).value;return a.data[b]!==void 0?!0:!1})};e.setOption=function(a,b){typeof this.option[a]!=="undefined"&&(this.option[a]=b);return this};e.getOption=function(a){typeof this.option[a]==="undefined";return this.option[a]};e.abort=function(){var a=this;this.continuation.last(function(){var b=a.transport;if(b){var d=a.getTransportErrorHandler();a.setOption("suppressErrorAlerts",!0);a.setTransportErrorHandler(c("emptyFunction"));a._requestAborted=!0;b.abort();a.setTransportErrorHandler(d)}a.abortHandler();K.unschedule(a)})};e.abandon=function(){var a=this;this.continuation.last(function(){var b;c("clearTimeout")(a.timer);a.setOption("suppressErrorAlerts",!0).setHandler(b=c("emptyFunction")).setErrorHandler(b).setTransportErrorHandler(b).setProgressHandler(b).setUploadProgressHandler(b);b=a.transport;b&&(a._requestAborted=!0,x(b)&&delete b.onprogress,y(b)&&delete b.upload.onprogress,b.abort());a.abortHandler();K.unschedule(a)})};e.setNectarModuleDataSafe=function(a){var b=this.setNectarModuleData;b&&b.call(this,a);return this};e.setAllowCrossPageTransition=function(a){this._allowCrossPageTransition=!!a;this.timer&&this.resetTimeout(this.timeout);return this};e.getAllowIrrelevantRequests=function(){return this._allowIrrelevantRequests};e.setAllowIrrelevantRequests=function(a){this._allowIrrelevantRequests=a;return this};e.setAllowCrossOrigin=function(a){this._allowCrossOrigin=a;return this};e.setAllowCredentials=function(a){this._allowCredentials=a;return this};e.setIsBackgroundRequest=function(a){this._isBackgroundRequest=a;return this};e.setReplaceTransportMarkers=function(a){a===void 0&&(a=!0);this._shouldReplaceTransportMarkers=a;return this};e.sendAndReturnAbortHandler=function(){var a=this;this.send();return function(){return a.abort()}};e.send=function(b){var e=this;b=b||!1;if(!this.uri)return!1;this.errorHandler||!this.getOption("suppressErrorHandlerWarning");this.getOption("useFetchTransport")&&this.method!="GET"&&this.setMethod("GET");this.timeoutHandler!==null&&this.getOption("useFetchTransport");if(!this.getReadOnly()){this.specifiesWriteRequiredParams();if(this.method!="POST")return!1}if(document.location.search.toString().includes(this.uri.toString()))return!1;if(this.uri.toString().includes("/../")||this.uri.toString().includes("\\../")||this.uri.toString().includes("/..\\")||this.uri.toString().includes("\\..\\"))return!1;Object.assign(this.data,c("getAsyncParams")(this.method));(p||(p=c("isEmpty")))(this.context)||(Object.assign(this.data,this.context),this.data.ajax_log=1);(o||(o=c("Env"))).force_param&&Object.assign(this.data,(o||(o=c("Env"))).force_param);this._setUserActionID();if(this.getOption("bundle")&&this._isMultiplexable()){K.schedule(this);return!0}this.setNewSerial();this.getOption("asynchronous_DEPRECATED")||this.uri.addQueryData({__sjax:1});c("Arbiter").inform("AsyncRequest/send",{request:this,ts:(n||(n=c("performanceAbsoluteNow")))()});var f,g;this.method=="GET"&&this.uri.addQueryData({fb_dtsg_ag:d("DTSG_ASYNC").getToken()});this.method=="GET"||this.rawData?(f=this.uri.addQueryData(this.data).toString(),g=this.rawData||""):(this._allowCrossOrigin&&this.uri.addQueryData({__a:1}),f=this.uri.toString(),g=(k||(k=d("PHPQuerySerializer"))).serialize(this.data));if(this.transport)return!1;if(this.getOption("useFetchTransport"))try{var h=new(c("FetchStreamTransport"))(this.uri);this.$1(h);this._markRequestSent();h.send();return!0}catch(a){this.setOption("useFetchTransport",!1)}this.flushedResponseHandler&&(this.flushedResponseTextParseIndex=0);var i;try{i=d("ZeroRewrites").getTransportBuilderForURI(this.uri)()}catch(a){throw c("unrecoverableViolation")(a.message,"comet_infra",{},{blameToPreviousFrame:1})}if(!i)return!1;this.schedule("AsyncRequest.send");i.onreadystatechange=function(){var a=e.transport;a&&a.readyState>=2&&a.readyState<=3&&e._handleFlushedResponse();i.readyState===4&&e.continuation.last(e._onStateChange)};this.progressHandler&&x(i)&&(i.onprogress=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];e.continuation(function(){e.progressHandler&&e.progressHandler.apply(e,b)})});this.uploadProgressHandler&&y(i)&&(i.upload.onprogress=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];e.continuation(function(){e.uploadProgressHandler&&e.uploadProgressHandler.apply(e,b)})});b||(this.remainingRetries=this.getOption("retries"));this.transport=i;try{i.open(this.method,f,c("gkx")("25571")?!0:this.getOption("asynchronous_DEPRECATED"))}catch(a){return!1}if(!this.uri.isSameOrigin()&&!c("uriIsRelativePath")(this.uri)&&!this.getOption("useFetchTransport")){if(!z(i))return!1;this._canSendCredentials()&&(i.withCredentials=!0)}this.method=="POST"&&!this.rawData&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded");this.uri.toString().includes("adsmanager")&&c("gkx")("1221")&&this.method.toLowerCase()==="get"&&i.setRequestHeader("x-fb-tenant-routing-control","ads_manager_read_regions");this._isBackgroundRequest&&i.setRequestHeader("X-FB-BACKGROUND-STATE","1");var j=c("getAsyncHeaders")(this.uri);Object.keys(j).forEach(function(a){i&&i.setRequestHeader(a,j[a])});c("Arbiter").inform("AsyncRequest/will_send",{request:this});if(i)for(h in this.headers)Object.prototype.hasOwnProperty.call(this.headers,h)&&i.setRequestHeader(h,this.headers[h]);this._addStatusIndicator();this._markRequestSent();i.send(g);this.timeout!==null&&this.resetTimeout(this.timeout);a._inflightCount++;return!0};e.schedule=function(a){this.continuation=c("TimeSlice").getReusableContinuation(a)};e._canSendCredentials=function(){if(this._allowCredentials===!1)return!1;var a=new(m||(m=c("URI")))(this.uri);return c("isBulletinDotComURI")(a)||c("isFacebookURI")(a)||c("isInternalFBURI")(a)||c("isMessengerDotComURI")(a)||c("isWorkplaceDotComURI")(a)||c("isWorkroomsDotComURI")(a)||c("isWorkDotMetaDotComURI")(a)||c("isHorizonDotMetaDotComURI")(a)||c("isSparkDotMetaDotComURI")(a)};e._markRequestSent=function(){var a=new(m||(m=c("URI")))(this.getURI()).getQualifiedURI().toString();d("ResourceTimingsStore").updateURI(c("ResourceTypes").XHR,this.resourceTimingStoreUID,a);d("ResourceTimingsStore").annotate(c("ResourceTypes").XHR,this.resourceTimingStoreUID).addStringAnnotation("uri",a);d("ResourceTimingsStore").measureRequestSent(c("ResourceTypes").XHR,this.resourceTimingStoreUID)};e.promisePayload=function(a){return this.exec().then(function(a){return a.payload},function(a){throw a.toError()})};e.exec=function(a){var d=this;if(this.getHandler()!==c("emptyFunction")||this.getErrorHandler()!==c("AsyncResponse").defaultErrorHandler)throw new Error("exec is an async function and does not allow previously set handlers");return new(l||(l=b("Promise")))(function(b,c){d.setHandler(b).setErrorHandler(c).send(a)})};a.bootstrap=function(b,e,f){var g="GET",h=!0,i={};(f||e&&e.rel=="async-post")&&(g="POST",h=!1,b&&(b=new(m||(m=c("URI")))(b),i=b.getQueryData(),b.setQueryData({})));f=d("Parent").byClass(e,"stat_elem")||e;if(f&&d("CSS").hasClass(f,"async_saving"))return!1;b=new a(b).setReadOnly(h).setMethod(g).setData(i).setNectarModuleDataSafe(e).setRelativeTo(e);e&&(b.setHandler(function(a){c("Event").fire(e,"success",{response:a})}),b.setErrorHandler(function(a){c("Event").fire(e,"error",{response:a})!==!1&&c("AsyncResponse").defaultErrorHandler(a)}));if(f instanceof HTMLElement){b.setStatusElement(f);h=f.getAttribute("data-status-class");h&&b.setStatusClass(h)}b.send();return!1};a.bootstrap_UNSAFE_LET_ANYONE_IMPERSONATE_THE_USER_FOR_THESE_WRITES=function(b,c,d){a.bootstrap(b,c,d)};a.post=function(b,c){new a(b).setReadOnly(!1).setMethod("POST").setData(c).send();return!1};a.post_UNSAFE_LET_ANYONE_IMPERSONATE_THE_USER_FOR_THESE_WRITES=function(b,c){a.post(b,c)};a.getLastID=function(){return C};a.ignoreUpdate=function(){E=!0};a.getInflightCount=function(){return this._inflightCount};return a}();H._inflightCount=0;var I,J=[],K=function(){function a(){this._requests=[]}var b=a.prototype;b.add=function(a){this._requests.push(a)};b.remove=function(a){var b=this._requests,c=this._requestsSent;for(var d=0,e=b.length;d<e;d++)b[d]===a&&(c?b[d]=null:b.splice(d,1))};b.send=function(){this._requestsSent&&j(0,4390);this._requestsSent=!0;this._wrapperRequest=null;var a=this._requests;if(!a.length)return;var b;if(a.length===1)b=a[0];else{a=a.filter(Boolean).map(function(a){return[a.uri.getPath(),(k||(k=d("PHPQuerySerializer"))).serialize(a.data)]});b=this._wrapperRequest=new H("/ajax/proxy.php").setAllowCrossPageTransition(!0).setData({data:a}).setHandler(this._handler.bind(this)).setTransportErrorHandler(this._transportErrorHandler.bind(this))}b&&b.setOption("bundle",!1).send()};b._handler=function(a){var b=this,c=a.getPayload().responses;if(c.length!==this._requests.length)return;a=function(a){var d=b._requests[a];if(!d)return"continue";var e=d.uri.getPath();b._wrapperRequest&&(d.id=b._wrapperRequest.id);if(c[a][0]!==e){d.continuation.last(function(){d.invokeResponseHandler({transportError:"Wrong response order in bundled request to "+e})});return"continue"}d.continuation.last(function(){d.handleResponse(c[a][1])})};for(var d=0;d<this._requests.length;d++){var e=a(d);if(e==="continue")continue}J.splice(J.indexOf(this,1))};b._transportErrorHandler=function(a){var b=this,c={transportError:a.errorDescription};a=this._requests.filter(Boolean).map(function(a){b._wrapperRequest&&(a.id=b._wrapperRequest.id);a.invokeResponseHandler(c);return a.uri.getPath()})};a.schedule=function(b){b.schedule("AsyncMultiplex.schedule");I||(I=new a(),J.push(I),c("TimeSlice").guard(function(){c("setTimeoutAcrossTransitions")(function(){I&&(I.send(),I=null)},0)},"AsyncMultiplex.schedule",{propagationType:c("TimeSlice").PropagationType.ORPHAN})());I.add(b);return I};a.unschedule=function(a){J.forEach(function(b){b.remove(a)})};return a}();H.suppressOnloadToken={};a.AsyncRequest=H;g["default"]=H}),226);
__d("AsyncTypedRequest",["AsyncRequest"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){b=a.call(this,b)||this;b.setReplaceTransportMarkers();return b}var c=b.prototype;c.promisePayload=function(b){return a.prototype.promisePayload.call(this,b)};c.setPayloadHandler=function(b){a.prototype.setPayloadHandler.call(this,b);return this};return b}(c("AsyncRequest"));g["default"]=a}),98);
__d("BDSignalBufferData",[],(function(a,b,c,d,e,f){"use strict";a={};b=a;f["default"]=b}),66);
__d("SignalValueContext",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.cn=a}var b=a.prototype;b.getSignalValueContextName=function(){return this.cn};return a}();f["default"]=a}),66);
__d("BDSignalCollectorBase",["BDSignalBufferData","SignalValueContext","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.signalType=a}var d=a.prototype;d.executeSignalCollection=function(){throw new Error("Child class responsibility to implement executeSignalCollection")};d.executeAsyncSignalCollection=function(){var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(this.executeSignalCollection());case 2:a=c.sent;return c.abrupt("return",a);case 4:case"end":return c.stop()}},null,this)};a.getSanitizedURI=function(){var a=window.location.href,b=a.indexOf("?");return b<0?a:a.substring(0,b)};d.getContext=function(){return new(c("SignalValueContext"))(a.getSanitizedURI())};d.throwIfNotInitialized=function(){if(!(this.signalType in c("BDSignalBufferData")))throw new Error("Signal is not intialized")};return a}();g["default"]=a}),98);
__d("BDBiometricSignalCollectorBase",["BDSignalCollectorBase","err"],(function(a,b,c,d,e,f,g){"use strict";a="biometric_signal_collected";b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.listenForSignals=function(){throw c("err")("Child class responsibility to implement listenForSignals")};d.executeSignalCollection=function(){throw c("err")("executeAsyncSignalCollection and executeSignalCollection should not be called on biometric signals")};return b}(c("BDSignalCollectorBase"));g.BIOMETRIC_SIGNAL_COLLECTED_EVENT_NAME=a;g.BDBiometricSignalCollectorBase=b}),98);
__d("BDSignalWrapper",["BDSignalBufferData","SignalCollectorMap"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.signalFlags=a,this.signalType=b}var b=a.prototype;b.getSignalCollector=function(){return c("SignalCollectorMap").get(this.signalType)};b.getBufferConfig=function(){return c("BDSignalBufferData")[this.signalType]};return a}();g["default"]=a}),98);
__d("BDLoggingConstants",[],(function(a,b,c,d,e,f){"use strict";a={ERROR:"error",WARNING:"warning",INFO:"info"};b={KEY_NOT_FOUND:"key_not_found",APPEND_SIGNAL:"bd_append_signal",APPEND_SIGNAL_FAIL:"bd_append_signal_fail",HB_COLLECTED:"append_hb",HB_COLLECTION_FAILED:"hb_collection_failed",BD_EXCEPTION:"bd_exception",SIGNAL_NOT_IMPLEMENTED:"signal_not_implemented",SIGNAL_VALUE_NULL:"signal_value_null",EMPTY_SIGNAL_CONFIG:"empty_signal_config",INVALID_BUFFER_SIZE:"invalid_buffer_size",INVALID_DURATION:"invalid_duration",SIGNAL_FLAGS_MISSING:"signal_flags_missing",DYNAMIC_SIGNAL_COLLECTION_STARTED:"dynamic_signal_collection_started",BIOMETRIC_SIGNAL_COLLECTION_STARTED:"biometric_signal_collection_started",INVALID_GUID:"invalid_guid",INVALID_LENGTH:"invalid_length",GET_LOCAL_STORAGE_ERROR:"get_local_storage_error",WEB_STORAGE:"web_storage",PARSE_CONFIG_ERROR:"parse_config_error",HB_START_FAILURE:"hb_start_failure",HB_ALREADY_RUNNING:"hb_already_running",TRY_RESTARTING_HB:"try_restarting_hb",BANZAI_LOG_ERROR:"banzai_log_error"};c="JS";f.LEVELS=a;f.OPERATIONS=b;f.COMPONENT_NAME=c}),66);
__d("BDOperationTypedLogger",["Banzai","GeneratedLoggerUtils"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:BDOperationLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:BDOperationLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:BDOperationLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setBdSessionID=function(a){this.$1.bd_session_id=a;return this};c.setComponent=function(a){this.$1.component=a;return this};c.setDurationUs=function(a){this.$1.duration_us=a;return this};c.setExceptionMessage=function(a){this.$1.exception_message=a;return this};c.setExceptionStackTrace=function(a){this.$1.exception_stack_trace=a;return this};c.setExceptionType=function(a){this.$1.exception_type=a;return this};c.setIntValue=function(a){this.$1.int_value=a;return this};c.setLevel=function(a){this.$1.level=a;return this};c.setOperation=function(a){this.$1.operation=a;return this};c.setOperationInfo=function(a){this.$1.operation_info=b("GeneratedLoggerUtils").serializeMap(a);return this};c.setSessionlets=function(a){this.$1.sessionlets=b("GeneratedLoggerUtils").serializeVector(a);return this};return a}();c={bd_session_id:!0,component:!0,duration_us:!0,exception_message:!0,exception_stack_trace:!0,exception_type:!0,int_value:!0,level:!0,operation:!0,operation_info:!0,sessionlets:!0};f["default"]=a}),66);
__d("BDOperationLogHelper",["BDLoggingConstants","BDOperationTypedLogger","Random"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){h(a,d("BDLoggingConstants").LEVELS.INFO,b,c,e)}function b(a,b,c,e){h(a,d("BDLoggingConstants").LEVELS.WARNING,b,c,e)}function e(a,b,c,e){h(a,d("BDLoggingConstants").LEVELS.ERROR,b,c,e)}function h(a,b,e,f,g){f===void 0&&(f={});if(d("Random").coinflip(i(e))){if(f===null)throw new Error("opeartion info null");f.source=a;new(c("BDOperationTypedLogger"))().setLevel(b).setDurationUs(g).setOperation(e).setComponent(d("BDLoggingConstants").COMPONENT_NAME).setOperationInfo(f).log()}}function i(a){var b=d("BDLoggingConstants").OPERATIONS;switch(a){case b.APPEND_SIGNAL:case b.HB_COLLECTED:case b.GET_LOCAL_STORAGE_ERROR:case b.WEB_STORAGE:case b.SIGNAL_NOT_IMPLEMENTED:case b.BIOMETRIC_SIGNAL_COLLECTION_STARTED:return 1e3;default:return 1}}g.logInfo=a;g.logWarning=b;g.logError=e;g.log=h;g.getFlipSamplingByOperation=i}),98);
__d("SignalErrorValueTypeDef",[],(function(a,b,c,d,e,f){"use strict";var g="ec",h="en",i="es",j=500;a=function(){function a(a,b,c){this.$1=a,this.$2=b,c!=null&&(this.$3=c.substr(0,j))}var b=a.prototype;b.getErrorCode=function(){return this.$1};b.getErrorName=function(){return this.$2};b.getErrorDetails=function(){return this.$3};b.isEqual=function(a){return this.$1===a.getErrorCode()&&this.$3===a.getErrorDetails()&&this.$2===a.getErrorName()};b.toJSON=function(){var a={};a[g]=this.$1;switch(this.$1){case 0:a[h]=this.$2;a[i]=this.$3;break}return a};return a}();f.SignalErrorValueTypeDef=a}),66);
__d("SignalValueTypeDef",["BDLoggingConstants","BDOperationLogHelper","SignalErrorValueTypeDef"],(function(a,b,c,d,e,f,g){"use strict";var h="SignalValueTypeDef",i="t",j="ctx",k="v",l="e",m={NUMBER:"NUMBER",STRING:"STRING",BOOLEAN:"BOOLEAN",CUSTOM_OBJECT:"CUSTOM_OBJECT",INT_ARRAY:"INT_ARRAY",TOUCH:"TOUCH",MAP:"MAP",LIST:"LIST",SENSOR:"SENSOR",ERROR:"ERROR"};a=function(){function a(a,b,c,d,e){this.$1=a,this.$2=b,this.$3=c,this.$4=d,this.$5=e!=null?e:0}var b=a.prototype;b.getTimeStampMS=function(){return this.$1};b.getSignalContext=function(){return this.$2};b.getSignalValue=function(){return this.$3};b.getSignalValueType=function(){return this.$4};b.isEqual=function(a,b){if(a==null){d("BDOperationLogHelper").logWarning(h,d("BDLoggingConstants").OPERATIONS.SIGNAL_VALUE_NULL);return!1}if(this.getSignalValueType()!==a.getSignalValueType())return!1;if(this.getSignalValueType()===m.ERROR&&a.getSignalValueType()===m.ERROR)return this.equalValue(a);var c=!1;b.has(128)&&(c=this.equalValue(a));b.has(256)&&(c=c&&this.getSignalContext()!=null&&a.getSignalContext()!=null&&this.getSignalContext().getSignalValueContextName()===a.getSignalContext().getSignalValueContextName());b.has(512)&&(c=c&&Math.abs(this.getTimeStampMS()-a.getTimeStampMS())<=this.$5);return c};b.equalValue=function(a){if(this.isPrimitiveType())return this.getSignalValue()===a.getSignalValue();throw new Error("Must implement in the subclasses")};b.toJSON=function(a){var b={};a&&(b[i]=this.$1/1e3,this.$2!=null&&(b[j]=this.$2));this.$3==null?b[l]=new(d("SignalErrorValueTypeDef").SignalErrorValueTypeDef)(2):this.addValueOrErrorToJSON(b);return b};b.addValueOrErrorToJSON=function(a){if(this.isPrimitiveType())a[k]=this.$3;else throw new Error("Must implement in the subclasses")};b.isPrimitiveType=function(){switch(typeof this.$3){case"number":case"boolean":case"string":return!0;default:return!1}};return a}();g.BD_VALUE=k;g.BD_ERROR=l;g.VALUE_TYPES=m;g.SignalValueTypeDef=a}),98);
__d("ErrorSignalValueType",["SignalValueTypeDef"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,e){return a.call(this,b,c,e,d("SignalValueTypeDef").VALUE_TYPES.ERROR)||this}var c=b.prototype;c.equalValue=function(a){return this.getSignalValue().isEqual(a.getSignalValue())};c.addValueOrErrorToJSON=function(a){a[d("SignalValueTypeDef").BD_ERROR]=this.getSignalValue().toJSON()};return b}(d("SignalValueTypeDef").SignalValueTypeDef);g["default"]=a}),98);
__d("NumberSignalValueType",["SignalValueTypeDef"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,e){return a.call(this,b,c,e,d("SignalValueTypeDef").VALUE_TYPES.NUMBER)||this}return b}(d("SignalValueTypeDef").SignalValueTypeDef);g["default"]=a}),98);
__d("BDConnectionRTTSignalCollector",["BDSignalCollectorBase","ErrorSignalValueType","NumberSignalValueType","SignalErrorValueTypeDef"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var e=a.prototype;e.executeSignalCollection=function(){if(navigator.connection!=null&&navigator.connection.rtt!=null){var a=navigator.connection.rtt;a=new(c("NumberSignalValueType"))(Date.now(),this.getContext(),a)}else a=new(c("ErrorSignalValueType"))(Date.now(),this.getContext(),new(d("SignalErrorValueTypeDef").SignalErrorValueTypeDef)(3,"navigator.connection.rtt not supported"));return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30004,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("CustomObjectSignalValueType",["SignalValueTypeDef"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,e){return a.call(this,b,c,e,d("SignalValueTypeDef").VALUE_TYPES.CUSTOM_OBJECT)||this}var c=b.prototype;c.equalValue=function(a){return this.getSignalValue().isEqual(a.getSignalValue())};c.addValueOrErrorToJSON=function(a){a[d("SignalValueTypeDef").BD_VALUE]=this.getSignalValue().toJSON()};return b}(d("SignalValueTypeDef").SignalValueTypeDef);g["default"]=a}),98);
__d("HeartbeatObject",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.isAppForeground=!0}var b=a.prototype;b.toJSON=function(){return{f:this.isAppForeground}};b.isEqual=function(a){return!1};return a}();f["default"]=a}),66);
__d("BDHeartbeatSignalCollector",["BDSignalCollectorBase","CustomObjectSignalValueType","HeartbeatObject"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=new(c("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(c("HeartbeatObject"))());return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:38e3,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("KeyDownUpObject",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.action=null,this.key_code=null,this.action=a,this.key_code=b}var b=a.prototype;b.toJSON=function(){return{action:this.action,key_code:this.key_code}};b.isEqual=function(b){return b instanceof a?this.action===b.action&&this.key_code===b.key_code:!1};return a}();f["default"]=a}),66);
__d("BDKeyDownUpSignalCollector",["BDBiometricSignalCollectorBase","CustomObjectSignalValueType","KeyDownUpObject","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var e=a.prototype;e.listenForSignals=function(){var a=this;c("gkx")("21049")&&(document.addEventListener("keydown",function(b){return a.collectSignals(2)}),document.addEventListener("keyup",function(b){return a.collectSignals(1)}))};e.collectSignals=function(a){a=new(c("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(c("KeyDownUpObject"))(a,0));a={signalId:this.signalType,data:{valueOrError:a}};window.dispatchEvent(new CustomEvent(d("BDBiometricSignalCollectorBase").BIOMETRIC_SIGNAL_COLLECTED_EVENT_NAME,{detail:a}))};return a}(d("BDBiometricSignalCollectorBase").BDBiometricSignalCollectorBase),i=null,j={signalType:30100,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("StringArrayObject",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.strings=[],this.strings=a}var b=a.prototype;b.toJSON=function(){return this.strings};b.isEqual=function(b){if(!(b instanceof a))return!1;if(b.strings===this.strings)return!0;if(b.strings.length!==this.strings.length)return!1;for(var c=0;c<this.strings.length;c++)if(this.strings[c]!==b.strings[c])return!1;return!0};return a}();f["default"]=a}),66);
__d("BDLanguagesSignalCollector",["BDSignalCollectorBase","CustomObjectSignalValueType","StringArrayObject"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=[].concat(navigator.languages);a=new(c("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(c("StringArrayObject"))(a));return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30003,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDMimeTypeCountSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=navigator.mimeTypes?navigator.mimeTypes.length:-1;a=new(c("NumberSignalValueType"))(Date.now(),this.getContext(),a);return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30002,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BooleanSignalValueType",["SignalValueTypeDef"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,e){return a.call(this,b,c,e,d("SignalValueTypeDef").VALUE_TYPES.BOOLEAN)||this}return b}(d("SignalValueTypeDef").SignalValueTypeDef);g["default"]=a}),98);
__d("BDTouchOrMouseSignalCollectorBase",["BDBiometricSignalCollectorBase","BDLoggingConstants","BDOperationLogHelper","BooleanSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h="BDTouchOrMouseSignalCollectorBase";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d){var e;e=a.call(this,b)||this;e.eventsToSubscribe=[];e.pauseTimeout=60*60*1e3;e.eventsToSubscribe=c;e.pauseTimeout=d;e.handler=function(a){return e.collectSignals(a)};return e}var e=b.prototype;e.listenForSignals=function(){this.collectSignals(),this.addListeners()};e.addListeners=function(){var a=this;this.eventsToSubscribe.forEach(function(b){try{document.addEventListener(b,a.handler)}catch(a){d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.BD_EXCEPTION,{e:a})}})};e.pauseListeners=function(){var a=this;this.eventsToSubscribe.forEach(function(b){document.removeEventListener(b,a.handler)});window.setTimeout(function(){return a.addListeners()},this.pauseTimeout)};e.collectSignals=function(a){a=a!=null;a&&this.pauseListeners();a=new(c("BooleanSignalValueType"))(Date.now(),this.getContext(),a);a={signalId:this.signalType,data:{valueOrError:a}};window.dispatchEvent(new CustomEvent(d("BDBiometricSignalCollectorBase").BIOMETRIC_SIGNAL_COLLECTED_EVENT_NAME,{detail:a}))};return b}(d("BDBiometricSignalCollectorBase").BDBiometricSignalCollectorBase);g["default"]=a}),98);
__d("BDMousePresenceSignalCollector",["BDTouchOrMouseSignalCollectorBase"],(function(a,b,c,d,e,f,g){"use strict";var h=60*60*1e3,i=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,k.signalType,["mousedown","mousemove"],h)||this}return a}(c("BDTouchOrMouseSignalCollectorBase")),j=null,k={signalType:30106,get:function(){j==null&&(j=new i());return j}};a=k;g["default"]=a}),98);
__d("StringSignalValueType",["SignalValueTypeDef"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,e){return a.call(this,b,c,e,d("SignalValueTypeDef").VALUE_TYPES.STRING)||this}return b}(d("SignalValueTypeDef").SignalValueTypeDef);g["default"]=a}),98);
__d("BDNavigatorAppVersionSignalCollector",["BDSignalCollectorBase","StringSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=navigator.appVersion;a=new(c("StringSignalValueType"))(Date.now(),this.getContext(),a);return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30013,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDNavigatorHardwareConcurrencySignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a;a=new(c("NumberSignalValueType"))(Date.now(),this.getContext(),(a=navigator.hardwareConcurrency)!=null?a:0);return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30018,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDNavigatorMaxTouchPointSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=new(c("NumberSignalValueType"))(Date.now(),this.getContext(),navigator.maxTouchPoints);return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30093,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDNavigatorNotificationPermissionSignalCollector",["BDSignalCollectorBase","ErrorSignalValueType","SignalErrorValueTypeDef","StringSignalValueType","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=function(e){babelHelpers.inheritsLoose(a,e);function a(){return e.call(this,j.signalType)||this}var f=a.prototype;f.executeAsyncSignalCollection=function(){var a,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:f.prev=0;if(!navigator.permissions){f.next=8;break}f.next=4;return b("regeneratorRuntime").awrap(navigator.permissions.query({name:"notifications"}));case 4:e=f.sent;a=new(c("StringSignalValueType"))(Date.now(),this.getContext(),e.state);f.next=9;break;case 8:a=new(c("ErrorSignalValueType"))(Date.now(),this.getContext(),new(d("SignalErrorValueTypeDef").SignalErrorValueTypeDef)(3,"navigator.permissions not supported"));case 9:f.next=14;break;case 11:f.prev=11,f.t0=f["catch"](0),a=new(c("ErrorSignalValueType"))(Date.now(),this.getContext(),new(d("SignalErrorValueTypeDef").SignalErrorValueTypeDef)(3,"notifications cannot be queried from navigator.permissions"));case 14:return f.abrupt("return",{valueOrError:a});case 15:case"end":return f.stop()}},null,this,[[0,11]])};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30008,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDNavigatorPlatformSignalCollector",["BDSignalCollectorBase","StringSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=new(c("StringSignalValueType"))(Date.now(),this.getContext(),navigator.platform);return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30015,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDNavigatorPluginsFileExtensionsSignalCollector",["BDSignalCollectorBase","ErrorSignalValueType","SignalErrorValueTypeDef","StringArrayObject"],(function(a,b,c,d,e,f,g){"use strict";var h=10,i=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,k.signalType)||this}var e=a.prototype;e.executeSignalCollection=function(){var a=null;try{var b=navigator.plugins?navigator.plugins.length:0,e=new Set();for(var f=0;f<b;f++){var g=navigator.plugins[f].filename;if(!g)continue;var i=g.indexOf(".");if(i==-1||i==g.length-1)continue;e.add(g.substr(i+1));if(e.size>=h)break}e.size&&(a=new(c("StringArrayObject"))(Array.from(e)))}catch(b){a=new(c("ErrorSignalValueType"))(Date.now(),this.getContext(),new(d("SignalErrorValueTypeDef").SignalErrorValueTypeDef)(3,"navigator.plugins is not defined"))}return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),j=null,k={signalType:30019,get:function(){j==null&&(j=new i());return j}};a=k;g["default"]=a}),98);
__d("BDNavigatorUserAgentSignalCollector",["BDSignalCollectorBase","StringSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=new(c("StringSignalValueType"))(Date.now(),this.getContext(),navigator.userAgent);return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30094,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDNavigatorVendorSignalCollector",["BDSignalCollectorBase","StringSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=navigator.vendor;a=new(c("StringSignalValueType"))(Date.now(),this.getContext(),a);return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30012,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDNotificationPermissionSignalCollector",["BDSignalCollectorBase","ErrorSignalValueType","SignalErrorValueTypeDef","StringSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var e=a.prototype;e.executeSignalCollection=function(){var a;window.Notification?a=new(c("StringSignalValueType"))(Date.now(),this.getContext(),Notification.permission):a=new(c("ErrorSignalValueType"))(Date.now(),this.getContext(),new(d("SignalErrorValueTypeDef").SignalErrorValueTypeDef)(3,"Notification not supported"));return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30007,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDPluginCountSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=navigator.plugins?navigator.plugins.length:-1;a=new(c("NumberSignalValueType"))(Date.now(),this.getContext(),a);return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30001,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDTimezoneOffsetSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a;a=new(c("NumberSignalValueType"))(Date.now(),this.getContext(),(a=new Date().getTimezoneOffset())!=null?a:999);return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30040,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDTouchPresenceSignalCollector",["BDTouchOrMouseSignalCollectorBase"],(function(a,b,c,d,e,f,g){"use strict";var h=60*60*1e3,i=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,k.signalType,["touchstart","touchcancel"],h)||this}return a}(c("BDTouchOrMouseSignalCollectorBase")),j=null,k={signalType:30107,get:function(){j==null&&(j=new i());return j}};a=k;g["default"]=a}),98);
__d("BDWebdriverSignalCollector",["BDSignalCollectorBase","BooleanSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=!!navigator.webdriver;a=new(c("BooleanSignalValueType"))(Date.now(),this.getContext(),a);return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:3e4,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDWebglSupportSignalCollector",["BDSignalCollectorBase","BooleanSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=document.createElement("canvas"),b=null;try{b=a.getContext("webgl")||a.getContext("experimental-webgl")}catch(a){}a=Boolean(b);b=new(c("BooleanSignalValueType"))(Date.now(),this.getContext(),a);return{valueOrError:b}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30022,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDWindowHistoryLengthSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=new(c("NumberSignalValueType"))(Date.now(),this.getContext(),window.history?window.history.length:0);return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30095,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("DimensionObject",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.width=null,this.height=null,this.width=a,this.height=b}var b=a.prototype;b.toJSON=function(){return{w:this.width,h:this.height}};b.isEqual=function(b){if(b instanceof a)return this.width===b.width&&this.height===b.height;else return!1};return a}();f["default"]=a}),66);
__d("BDWindowOuterDimensionSignalCollector",["BDSignalCollectorBase","CustomObjectSignalValueType","DimensionObject"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=window.innerHeight,b=window.innerWidth;b=new(c("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(c("DimensionObject"))(b,a));return{valueOrError:b}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30005,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("SignalCollectorMap",["BDConnectionRTTSignalCollector","BDHeartbeatSignalCollector","BDHeartbeatV2SignalCollector","BDKeyDownUpSignalCollector","BDLanguagesSignalCollector","BDMimeTypeCountSignalCollector","BDMousePresenceSignalCollector","BDNavigatorAppVersionSignalCollector","BDNavigatorHardwareConcurrencySignalCollector","BDNavigatorMaxTouchPointSignalCollector","BDNavigatorNotificationPermissionSignalCollector","BDNavigatorPlatformSignalCollector","BDNavigatorPluginsFileExtensionsSignalCollector","BDNavigatorUserAgentSignalCollector","BDNavigatorVendorSignalCollector","BDNotificationPermissionSignalCollector","BDPluginCountSignalCollector","BDTimezoneOffsetSignalCollector","BDTouchPresenceSignalCollector","BDWebdriverSignalCollector","BDWebglSupportSignalCollector","BDWindowHistoryLengthSignalCollector","BDWindowOuterDimensionSignalCollector"],(function(a,b,c,d,e,f,g){"use strict";a={get:function(a){switch(a){case 3e4:return c("BDWebdriverSignalCollector").get();case 30001:return c("BDPluginCountSignalCollector").get();case 30002:return c("BDMimeTypeCountSignalCollector").get();case 30003:return c("BDLanguagesSignalCollector").get();case 30004:return c("BDConnectionRTTSignalCollector").get();case 30005:return c("BDWindowOuterDimensionSignalCollector").get();case 30007:return c("BDNotificationPermissionSignalCollector").get();case 30008:return c("BDNavigatorNotificationPermissionSignalCollector").get();case 30012:return c("BDNavigatorVendorSignalCollector").get();case 30013:return c("BDNavigatorAppVersionSignalCollector").get();case 30015:return c("BDNavigatorPlatformSignalCollector").get();case 30018:return c("BDNavigatorHardwareConcurrencySignalCollector").get();case 30019:return c("BDNavigatorPluginsFileExtensionsSignalCollector").get();case 30022:return c("BDWebglSupportSignalCollector").get();case 30040:return c("BDTimezoneOffsetSignalCollector").get();case 30093:return c("BDNavigatorMaxTouchPointSignalCollector").get();case 30094:return c("BDNavigatorUserAgentSignalCollector").get();case 30095:return c("BDWindowHistoryLengthSignalCollector").get();case 30100:return c("BDKeyDownUpSignalCollector").get();case 30106:return c("BDMousePresenceSignalCollector").get();case 30107:return c("BDTouchPresenceSignalCollector").get();case 38e3:return c("BDHeartbeatSignalCollector").get();case 38001:return c("BDHeartbeatV2SignalCollector").get()}}};b=a;g["default"]=b}),98);
__d("HeartbeatV2Object",["HeartbeatObject"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;c.id="";c.id=b;return c}var c=b.prototype;c.toJSON=function(){return{f:this.isAppForeground,id:this.id}};return b}(c("HeartbeatObject"));g["default"]=a}),98);
__d("BDHeartbeatV2SignalCollector",["BDClientConfig","BDSignalCollectorBase","CustomObjectSignalValueType","HeartbeatV2Object"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=new(c("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(c("HeartbeatV2Object"))(c("BDClientConfig").get().getHeartbeatVersion()));return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:38001,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDClientConfig",["BDLoggingConstants","BDOperationLogHelper","BDSignalWrapper"],(function(a,b,c,d,e,f,g){"use strict";var h="BDClientConfig",i=function(){function a(){this.staticSignalBufferSize=1,this.dynamicSignalBufferSize=1,this.biometricSignalBufferSize=1,this.staticSignals=[],this.dynamicSignals=[],this.biometricSignals=[],this.biometricSignalsMap=new Map(),this.heartbeatSignal=new(c("BDSignalWrapper"))([],38001),this.bufferSizeBySignalIdMap={},this.periodicCollectionIntervalMs=Number.MAX_SAFE_INTEGER,this.signalConfigGenerationTimeStampMs=0,this.suspiciousTiersFlushDurationMs=Number.MAX_SAFE_INTEGER,this.allTiersFlushDurationMs=Number.MAX_SAFE_INTEGER,this.heartbeatIntervalMs=-1,this.parsingDone=!1,this.sid=-1,this.hbVersion="",this.bufferSizeBySignalIdMap[38001]=1}var b=a.prototype;b.setStaticSignalBufferSize=function(a){a>0?this.staticSignalBufferSize=a:d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.INVALID_BUFFER_SIZE,{size:a.toString(),type:"s"});return this};b.getStaticSignalBufferSize=function(){return this.staticSignalBufferSize};b.setDynamicSignalBufferSize=function(a){a>1?this.dynamicSignalBufferSize=a:d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.INVALID_BUFFER_SIZE,{size:a.toString(),type:"d"});return this};b.getDynamicSignalBufferSize=function(){return this.dynamicSignalBufferSize};b.setBiometricSignalBufferSize=function(a){a>1?this.biometricSignalBufferSize=a:d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.INVALID_BUFFER_SIZE,{size:a.toString(),type:"b"});return this};b.setSID=function(a){this.sid=a;return this};b.setHeartbeatVersion=function(a){this.hbVersion=a;return this};b.getHeartbeatVersion=function(){return this.hbVersion};b.getBiometricSignalBufferSize=function(){return this.biometricSignalBufferSize};b.setConfigGenerationTimeStamp=function(a){this.signalConfigGenerationTimeStampMs=a;return this};b.getConfigGenerationTimeStamp=function(){return this.signalConfigGenerationTimeStampMs};b.setHeartbeatIntervalMinutes=function(a){this.heartbeatIntervalMs=a*60*1e3;return this};b.getHeartbeatIntervalMs=function(){return this.heartbeatIntervalMs};b.setSuspiciousTiersFlushDurationMinutes=function(a){a>0?this.suspiciousTiersFlushDurationMs=a*60*1e3:d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.INVALID_DURATION,{size:a.toString(),type:"fds"});return this};b.getSuspiciousTiersFlushDurationMs=function(){return this.suspiciousTiersFlushDurationMs};b.setAllTiersFlushDurationMinutes=function(a){a>0?this.allTiersFlushDurationMs=a*60*1e3:d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.INVALID_DURATION,{size:a.toString(),type:"fda"});return this};b.getAllTiersFlushDurationMs=function(){return this.allTiersFlushDurationMs};b.addMultipleSignalsToClientConfig=function(a){var b=this;a.forEach(function(a){return b.addSignalToClientConfig(a)});return this};b.addSignalToClientConfig=function(a){var b=a.getSignalFlags(),d=a.getSignalId();if(d===38e3)return this;var e=new(c("BDSignalWrapper"))(b,d);if(d===38001){this.heartbeatSignal=e;return this}!b.includes(2)?this.staticSignals.push(e):b.includes(4)?this.biometricSignals.push(e):this.dynamicSignals.push(e);a.getBufferSize()>0&&(this.bufferSizeBySignalIdMap[a.getSignalId()]=a.getBufferSize());return this};b.setPeriodicCollectionIntervalSeconds=function(a){a>0?this.periodicCollectionIntervalMs=a*1e3:d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.INVALID_DURATION,{size:a.toString(),type:"pi"});return this};b.getPeriodicCollectionIntervalMs=function(){return this.periodicCollectionIntervalMs};b.getDynamicSignals=function(){return this.dynamicSignals};b.getStaticSignals=function(){return this.staticSignals};b.getBiometricSignals=function(){return this.biometricSignals};b.getBiometricSignalsMap=function(){this.biometricSignalsMap.size===0&&this.biometricSignals.length>0&&(this.biometricSignalsMap=this.biometricSignals.reduce(function(a,b){return a.set(b.signalType,b)},new Map()));return this.biometricSignalsMap};b.getHeartbeatSignal=function(){return this.heartbeatSignal};b.getBufferSizeBySignalId=function(a){return this.bufferSizeBySignalIdMap[a]};b.setParsingDone=function(a){this.parsingDone=a};b.isParsingDone=function(){return this.parsingDone};return a}(),j=null;a={get:function(){j==null&&(j=new i());return j}};b=a;g["default"]=b}),98);
__d("BDCollectionTypeEnum",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({STATIC:0,DYNAMIC:1,BIOMETRIC:2});f["default"]=a}),66);
__d("BotDetection_SignalFlags",[],(function(a,b,c,d,e,f){a=Object.freeze({ACTIVE:1,DYNAMIC:2,BIOMETRIC:4,DEPRECATED:8,WEB:16,IOS_NATIVE:32,ANDROID_NATIVE:64,EQUAL_BY_VALUE:128,EQUAL_BY_CONTEXT:256,EQUAL_BY_TIMESTAMP:512,SUSPICIOUS_TIER:1024,PARANOID_TIER:2048,RANDOM_SAMPLE_TIER_DEPRECATED:4096,BENIGN_TIER:262144,EMPLOYEES_TIER:524288,BUNDLE:8192,ONSITE:16384,OFFSITE:32768,OFFSITE_SENSITIVE:65536,SENSITIVE:131072});f["default"]=a}),66);
__d("BDServerSignalConfig",["BDLoggingConstants","BDOperationLogHelper","BotDetection_SignalFlags"],(function(a,b,c,d,e,f,g){"use strict";var h="BDServerSignalConfig";a=function(){function a(a,b,c){this.parsedSignalFlags=[],this.signalId=a,this.signalFlags=b,this.bufferSize=c}var b=a.prototype;b.getSignalId=function(){return this.signalId};b.getSignalFlags=function(){var a=this;if(this.parsedSignalFlags.length===0){var b=Object.keys(c("BotDetection_SignalFlags"));b.forEach(function(b){(c("BotDetection_SignalFlags")[b]&a.signalFlags)===c("BotDetection_SignalFlags")[b]&&a.parsedSignalFlags.push(c("BotDetection_SignalFlags")[b])})}this.parsedSignalFlags.length===0&&d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.SIGNAL_FLAGS_MISSING,{id:this.signalId.toString(),flags:this.signalFlags.toString()});return this.parsedSignalFlags};b.getBufferSize=function(){return this.bufferSize!=null?this.bufferSize:0};return a}();g["default"]=a}),98);
__d("BDServerConfig",["BDClientConfig","BDLoggingConstants","BDOperationLogHelper","BDServerSignalConfig"],(function(a,b,c,d,e,f,g){"use strict";var h="BDServerConfig";function a(a){var b=[];try{var e=JSON.parse(a.sc),f=new Map(e.c);f.forEach(function(a,d){return b.push(new(c("BDServerSignalConfig"))(d,a))});if(f.size===0){d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.EMPTY_SIGNAL_CONFIG);return}f=c("BDClientConfig").get();f.setPeriodicCollectionIntervalSeconds(a.i).addMultipleSignalsToClientConfig(b).setConfigGenerationTimeStamp(e.t).setAllTiersFlushDurationMinutes(a.fda).setSuspiciousTiersFlushDurationMinutes(a.fds).setHeartbeatIntervalMinutes(a.hbi).setStaticSignalBufferSize(a.sbs).setDynamicSignalBufferSize(a.dbs).setBiometricSignalBufferSize(a.bbs).setSID(a.sid).setHeartbeatVersion(a.hbv).setParsingDone(!0)}catch(a){d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.PARSE_CONFIG_ERROR,{e:a})}}g.parseConfig=a}),98);
__d("BDSignalBuffer",["BDClientConfig","BDCollectionTypeEnum","BDLoggingConstants","BDOperationLogHelper","BDSignalBufferData"],(function(a,b,c,d,e,f,g){"use strict";var h="BDSignalBuffer";function a(a,b,d){if(a in c("BDSignalBufferData"))return;var e=1;b!==void 0&&(e=b);c("BDSignalBufferData")[a]={values:[],max_buffer_size:e,signal_flags:(b=d)!=null?b:[]}}function i(a){if(a in c("BDSignalBufferData"))c("BDSignalBufferData")[a].values=[];else throw new Error("Tried to clear signal buffer that was not intialized:")}function b(a,b){if(a in c("BDSignalBufferData")){var e=c("BDSignalBufferData")[a],f=e.max_buffer_size;e.values.length>=f&&e.values.shift();e.values.push(b);d("BDOperationLogHelper").logInfo(h,d("BDLoggingConstants").OPERATIONS.APPEND_SIGNAL,{id:a.toString()})}else{d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.APPEND_SIGNAL_FAIL,{id:a.toString()});throw new Error("Tried to append signal that was not intialized:")}}function e(){var a=c("BDClientConfig").get();a=a.getBiometricSignals();a.forEach(function(a){a.signalType in c("BDSignalBufferData")&&i(a.signalType)})}function f(a){var b;a=c("BDSignalBufferData")[a];b=a==null?void 0:(b=a.values)==null?void 0:b.length;return b!=null&&b>0?a.values[b-1]:{valueOrError:void 0}}function j(a){return c("BDSignalBufferData")[a].values}function k(a){var b={};for(var d=0;d<a.length;d++){var e=a[d];e in c("BDSignalBufferData")&&(b[e]=j(e).map(function(a){return a.valueOrError}))}return b}function l(a){a=m(a);return JSON.stringify(k(a))}function m(a){var b=c("BDClientConfig").get(),d=[];a.forEach(function(a){switch(a){case c("BDCollectionTypeEnum").STATIC:d=[].concat(d,b.getStaticSignals());break;case c("BDCollectionTypeEnum").DYNAMIC:d=[].concat(d,b.getDynamicSignals());break;case c("BDCollectionTypeEnum").BIOMETRIC:d=[].concat(d,b.getBiometricSignals());break}});return d.map(function(a){return a.signalType})}g.initialize=a;g.clearBuffer=i;g.appendSignal=b;g.clearBiometricSignals=e;g.getLastSignalFormatBySignalId=f;g.retrieveSignal=j;g.retrieveSignals=k;g.getSignalsAsJSONString=l;g._getSignalIdsByCollectionType=m}),98);
__d("BDUtils",[],(function(a,b,c,d,e,f){"use strict";function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=Math.random()*16|0;a=a=="x"?b:b&3|8;return a.toString(16)})}f.uuid=a}),66);
__d("BdPdcSignalsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743095");b=d("FalcoLoggerInternal").create("bd_pdc_signals",a);e=b;g["default"]=e}),98);
__d("SignalCollectionManager",["BDBiometricSignalCollectorBase","BDClientConfig","BDLoggingConstants","BDOperationLogHelper","BDSignalBuffer","Promise","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i="SignalCollectionManager",j=function(){function a(){var a=this;this.$1=!1;this.$6=function(b){if(b instanceof CustomEvent&&b.detail!=null&&b.detail.data!=null){var d=c("BDClientConfig").get().getBiometricSignalsMap().get(b.detail.signalId);d!=null&&a.$4(b.detail.data,d)}}}var e=a.prototype;e.collectSignals=function(a){var c=this,d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:d=[];a.forEach(function(a){a.signalFlags.includes(4)?c.$2(a):d.push(c.$3(a))});e.next=4;return b("regeneratorRuntime").awrap((h||(h=b("Promise"))).all(d));case 4:case"end":return e.stop()}},null,this)};e.isEqualToLastCollectedSignal=function(a,b){var c=d("BDSignalBuffer").getLastSignalFormatBySignalId(b.signalType);return c.valueOrError==void 0?!1:a.isEqual(c.valueOrError,new Set(b.signalFlags))};e.getCircularBufferSize=function(a){var b=c("BDClientConfig").get(),d=b.getBufferSizeBySignalId(a.signalType);if(d!=null&&b.getBufferSizeBySignalId(a.signalType)>0)return d;if(!a.signalFlags.includes(2))return b.getStaticSignalBufferSize();else if(a.signalFlags.includes(4))return b.getBiometricSignalBufferSize();else return b.getDynamicSignalBufferSize()};e.$3=function(a){var c,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:c=a.getSignalCollector();if(!(c!=null)){f.next=12;break}f.prev=2;f.next=5;return b("regeneratorRuntime").awrap(c.executeAsyncSignalCollection());case 5:e=f.sent;this.$4(e,a);f.next=12;break;case 9:f.prev=9,f.t0=f["catch"](2),d("BDOperationLogHelper").logError(i,d("BDLoggingConstants").OPERATIONS.BD_EXCEPTION,{error:f.t0});case 12:case"end":return f.stop()}},null,this,[[2,9]])};e.$2=function(a){this.$5();a=a.getSignalCollector();a!=null&&a instanceof d("BDBiometricSignalCollectorBase").BDBiometricSignalCollectorBase&&a.listenForSignals()};e.$5=function(){if(this.$1)return;window.addEventListener(d("BDBiometricSignalCollectorBase").BIOMETRIC_SIGNAL_COLLECTED_EVENT_NAME,this.$6);this.$1=!0};e.$4=function(a,b){b.getBufferConfig()==null&&d("BDSignalBuffer").initialize(b.signalType,this.getCircularBufferSize(b),b.signalFlags),a.valueOrError&&!this.isEqualToLastCollectedSignal(a.valueOrError,b)&&d("BDSignalBuffer").appendSignal(b.signalType,a)};return a}(),k=null;a={get:function(){k==null&&(k=new j());return k}};e=a;g["default"]=e}),98);
__d("BDClientSignalCollectionTrigger",["BDClientConfig","BDCollectionTypeEnum","BDLoggingConstants","BDOperationLogHelper","BDServerConfig","BDSignalBuffer","BDUtils","BdPdcSignalsFalcoEvent","Promise","SignalCollectionManager","WebStorage","javascript-blowfish","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j="BDClientSignalCollectionTrigger",k="signal_flush_timestamp",l=!1,m=!1,n=!1,o=!1,p=0,q=0,r=0,s=30,t=5,u,v,w=d("BDUtils").uuid(),x=c("BDClientConfig").get(),y=Object.freeze({NONE:0,VITAL:1,CRITICAL:2}),z={startSignalCollection:function(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:x.setSID(a.sid);if(l){c.next=15;break}l=!0;d("BDServerConfig").parseConfig(a);if(x.isParsingDone()){c.next=8;break}d("BDOperationLogHelper").logError(j,d("BDLoggingConstants").OPERATIONS.PARSE_CONFIG_ERROR,{config:JSON.stringify(a)});l=!1;return c.abrupt("return");case 8:a!=null&&(q=a.hbcbc&&a.hbcbc>0?a.hbcbc:q,r=a.hbvbc&&a.hbvbc>0?a.hbvbc:r,s=a.hbbi&&a.hbbi>0?a.hbbi:s);z.startHeartbeatDelayed();v=new(i||(i=b("Promise")))(function(a,b){try{x.getDynamicSignals().length>0&&(z.collectDynamicSignals(),d("BDOperationLogHelper").logInfo(j,d("BDLoggingConstants").OPERATIONS.DYNAMIC_SIGNAL_COLLECTION_STARTED,{ts:Date.now().toString()})),x.getBiometricSignals().length>0&&(z.collectBiometricSignals(),d("BDOperationLogHelper").logInfo(j,d("BDLoggingConstants").OPERATIONS.BIOMETRIC_SIGNAL_COLLECTION_STARTED,{ts:Date.now().toString()})),a()}catch(a){b(a)}});c.next=13;return b("regeneratorRuntime").awrap(v);case 13:c.next=15;return b("regeneratorRuntime").awrap(z.startSignalPosting());case 15:l&&!n&&!o&&t>0&&(t-=1,d("BDOperationLogHelper").logWarning(j,d("BDLoggingConstants").OPERATIONS.TRY_RESTARTING_HB),z.startHeartbeatDelayed());case 16:case"end":return c.stop()}},null,this)},retrieveSignals:function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(v);case 2:a.next=4;return b("regeneratorRuntime").awrap(z.postSignals([c("BDCollectionTypeEnum").DYNAMIC,c("BDCollectionTypeEnum").BIOMETRIC,c("BDCollectionTypeEnum").STATIC]));case 4:case"end":return a.stop()}},null,this)},postSignals:function(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(z.collectStaticSignals());case 2:z._postSignalsHelper(d("BDSignalBuffer").getSignalsAsJSONString(a),y.NONE)&&z.setTimestampInStorage(Date.now(),k);case 3:case"end":return c.stop()}},null,this)},_postSignalsHelper:function(a,b){if(a.length<=2)return!1;var e=x.getConfigGenerationTimeStamp(),f=z.encryptDataUsingAsid(w,a);a=function(){return{asid:w,ct:e,sjd:f,sid:x.sid}};var g=!1;try{b===y.CRITICAL?c("BdPdcSignalsFalcoEvent").logCritical(a):b===y.VITAL?c("BdPdcSignalsFalcoEvent").logImmediately(a):c("BdPdcSignalsFalcoEvent").log(a),g=!0}catch(a){d("BDOperationLogHelper").logError(j,d("BDLoggingConstants").OPERATIONS.BANZAI_LOG_ERROR,a),g=!1}finally{return g}},getInitialVector:function(a){if(a.length!==16){d("BDOperationLogHelper").logError(j,d("BDLoggingConstants").OPERATIONS.INVALID_LENGTH);return""}var b="";for(var c=0;c<8;c++)b+=String.fromCharCode(a.charCodeAt(c)^a.charCodeAt(8+c));return b},encryptDataUsingAsid:function(a,b){if(a.length!==36){d("BDOperationLogHelper").logError(j,d("BDLoggingConstants").OPERATIONS.INVALID_GUID);return b}a=a.slice(19,23)+a.slice(24,36);var e=z.getInitialVector(a);a=new(c("javascript-blowfish"))(a,"cbc");return a.base64Encode(a.encrypt(b,e))},startSignalPosting:function(){var a,c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:a=z.getTimestampInStorage(k);c=Date.now()-a;if(!(c>=x.getAllTiersFlushDurationMs())){d.next=7;break}d.next=5;return b("regeneratorRuntime").awrap(z.postSignalsIntermittently());case 5:d.next=8;break;case 7:window.setTimeout(function(){z.postSignalsIntermittently()},x.getAllTiersFlushDurationMs()-c);case 8:case"end":return d.stop()}},null,this)},postSignalsIntermittently:function(){z.postSignals([c("BDCollectionTypeEnum").STATIC]),window.setInterval(function(){z.postSignals([c("BDCollectionTypeEnum").STATIC,c("BDCollectionTypeEnum").DYNAMIC,c("BDCollectionTypeEnum").BIOMETRIC])},x.getAllTiersFlushDurationMs())},setTimestampInStorage:function(a,b){var e=(h||(h=c("WebStorage"))).getLocalStorage();if(!e){d("BDOperationLogHelper").logWarning(j,d("BDLoggingConstants").OPERATIONS.GET_LOCAL_STORAGE_ERROR);return}e=h.setItemGuarded(e,b,a.toString());e!=null&&d("BDOperationLogHelper").logWarning(j,d("BDLoggingConstants").OPERATIONS.WEB_STORAGE,{error:e.message})},getTimestampInStorage:function(a){var b=(h||(h=c("WebStorage"))).getLocalStorage();if(!b){d("BDOperationLogHelper").logWarning(j,d("BDLoggingConstants").OPERATIONS.GET_LOCAL_STORAGE_ERROR);return 0}b=b.getItem(a);if(b==null)return 0;a=Number.parseInt(b,10);return Number.isFinite(a)?a:0},resetHeartbeatStartedForTest:function(){n=!1,o=!1},startHeartbeatDelayed:function(){if(n||o)return;var a=z.getTimestampInStorage(z.HEARTBEAT_TIMESTAMP_STORAGE_KEY);a=Date.now()-a;try{a>=x.getHeartbeatIntervalMs()?z.startHeartbeat():(window.setTimeout(function(){return z.startHeartbeat()},x.getHeartbeatIntervalMs()-a),o=!0)}catch(b){d("BDOperationLogHelper").logError(j,d("BDLoggingConstants").OPERATIONS.HB_START_FAILURE,{lastBeatSince:a.toString(),hbi:x.getHeartbeatIntervalMs().toString(),e:b})}},HEARTBEAT_TIMESTAMP_STORAGE_KEY:"hb_timestamp",startHeartbeat:function(){!n&&x.getHeartbeatIntervalMs()>0&&(z.collectHeartbeatTimes(q,r),p!==0&&(window.clearInterval(p),d("BDOperationLogHelper").logWarning(j,d("BDLoggingConstants").OPERATIONS.HB_ALREADY_RUNNING)),p=window.setInterval(function(){return z.collectHeartbeatTimes(q,r)},x.getHeartbeatIntervalMs()),n=!0)},collectHeartbeatTimes:function(a,b){if(a<=0&&b<=0)return;a>0&&z.collectHeartbeat(y.CRITICAL);b>0&&z.collectHeartbeat(y.VITAL);(a>1||b>1)&&window.setTimeout(function(){return z.collectHeartbeatTimes(a-1,b-1)},s*1e3)},collectHeartbeat:function(a){var b;b=x==null?void 0:(b=x.getHeartbeatSignal())==null?void 0:(b=b.getSignalCollector())==null?void 0:b.executeSignalCollection();if(b==null){d("BDOperationLogHelper").logError(j,d("BDLoggingConstants").OPERATIONS.HB_COLLECTION_FAILED,{urgency:a.toString()});return}else d("BDOperationLogHelper").logInfo(j,d("BDLoggingConstants").OPERATIONS.HB_COLLECTED,{urgency:a.toString()});z.postHeartbeat(a,b)&&z.setTimestampInStorage(Date.now(),z.HEARTBEAT_TIMESTAMP_STORAGE_KEY)},postHeartbeat:function(a,b){var c={};c[38001]=[b==null?void 0:b.valueOrError];b=JSON.stringify(c);return z._postSignalsHelper(b,a)},collectStaticSignals:function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(z.collectSignalsOneTime(x.getStaticSignals()));case 2:case"end":return a.stop()}},null,this)},collectDynamicSignals:function(){z.stopDynamicSignalCollection(),u=window.setInterval(function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(z.collectSignalsOneTime(x.getDynamicSignals()));case 2:case"end":return a.stop()}},null,this)},x.getPeriodicCollectionIntervalMs())},collectBiometricSignals:function(){z.collectSignalsOneTime(x.getBiometricSignals())},stopDynamicSignalCollection:function(){u!=null&&(window.clearInterval(u),u=null)},collectSignalsOneTime:function(a){return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return b("regeneratorRuntime").awrap(c("SignalCollectionManager").get().collectSignals(a));case 2:case"end":return d.stop()}},null,this)},startLoginTimeSignalCollection:function(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:if(m){c.next=9;break}m=!0;d("BDServerConfig").parseConfig(a);c.next=5;return b("regeneratorRuntime").awrap(z.collectSignalsOneTime(x.getDynamicSignals()));case 5:c.next=7;return b("regeneratorRuntime").awrap(z.collectSignalsOneTime(x.getBiometricSignals()));case 7:c.next=9;return b("regeneratorRuntime").awrap(z.collectSignalsOneTime(x.getStaticSignals()));case 9:case"end":return c.stop()}},null,this)},getSignalsAsJSONString:function(){return d("BDSignalBuffer").getSignalsAsJSONString([c("BDCollectionTypeEnum").DYNAMIC,c("BDCollectionTypeEnum").STATIC,c("BDCollectionTypeEnum").BIOMETRIC])}};a=z;g["default"]=a}),98);
__d("BDCometSignalCollectionTrigger",["BDClientSignalCollectionTrigger","BDSignalCollectionData"],(function(a,b,c,d,e,f,g){"use strict";function a(){c("BDClientSignalCollectionTrigger").startSignalCollection(c("BDSignalCollectionData"))}g.initSignalCollection=a}),98);
__d("Chromedome",["fbt"],(function(a,b,c,d,e,f,g,h){function i(){if(document.domain==null)return null;var a=document.domain,b=/^intern\./.test(a);if(b)return null;b=/(^|\.)facebook\.(com|sg)$/.test(a);if(b)return"facebook";b=/(^|\.)instagram\.com$/.test(a);if(b)return"instagram";b=/(^|\.)threads\.net$/.test(a);if(b)return"threads";b=/(^|\.)messenger\.com$/.test(a);return b?"messenger":null}function j(a){if(a==="instagram")return h._("__JHASH__1V4qdh25Bnb__JHASH__");return a==="threads"?h._("__JHASH__JSeBwAKhGJH__JHASH__"):h._("__JHASH__S8hqZ4zKptW__JHASH__")}function a(a){if(top!==window)return;a=i();if(a==null)return;var b=h._("__JHASH__4REdQ6uuqzn__JHASH__");a=j(a);var c=h._("__JHASH__1jNE2MHDhX-__JHASH__",[h._param("url","https://www.facebook.com/selfxss")]),d="font-family:helvetica; font-size:20px; ";[[b,d+"font-size:50px; font-weight:bold; color:red; -webkit-text-stroke:1px black;"],[a,d],[c,d],["",""]].map(function(a){window.setTimeout(console.log.bind(console,"\n%c"+a[0].toString(),a[1]))})}g.start=a}),226);
__d("ClientConsistencyFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1764786");b=d("FalcoLoggerInternal").create("client_consistency",a);e=b;g["default"]=e}),98);
__d("WebBrowserDimensionsTypedLoggerLite",["generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:WebBrowserDimensionsLoggerConfig")}),null);
__d("CometBrowserDimensionsLogger",["CometDebounce","Cookie","ExecutionEnvironment","SiteData","WebBrowserDimensionsTypedLoggerLite","getViewportDimensions","isInIframe"],(function(a,b,c,d,e,f,g){"use strict";var h,i=null,j=!1,k={height:0,width:0};function l(){i===null&&(i=c("getViewportDimensions")());return i}function m(){var a=c("getViewportDimensions")(),b=a.height;a=a.width;(k.width!==a||k.height!==b)&&(k={height:b,width:a},c("Cookie").set("wd",a+"x"+b))}function n(){if(!(h||(h=c("ExecutionEnvironment"))).canUseDOM||c("isInIframe")()||j)return;j=!0;m();window.addEventListener("resize",c("CometDebounce")(m,{wait:250}),{passive:!0});window.addEventListener("focus",m,{passive:!0})}function a(a){var b,d=l();n();b={client_hint_width:a==null?void 0:a.clientHintWidth,pixel_ratio:(b=window.devicePixelRatio)!=null?b:1,screen_x:window.screen.width,screen_y:window.screen.height,server_pixel_ratio:c("SiteData").pr,server_viewport_x:a==null?void 0:a.viewportWidth,server_viewport_y:a==null?void 0:a.viewportHeight,viewport_x:d.width,viewport_y:d.height};window.navigator&&window.navigator.hardwareConcurrency&&(b.cpu_cores_count=window.navigator.hardwareConcurrency);if(window.innerWidth>0&&window.outerWidth>0){a=Math.round(window.outerWidth/window.innerWidth*100)/100;b.zoom_ratio=a}if(window.getComputedStyle&&document.documentElement!=null){d=window.getComputedStyle(document.documentElement);d!=null&&(b.document_font_size=d.fontSize)}c("WebBrowserDimensionsTypedLoggerLite").log(b)}g.init=a}),98);
__d("CometChromeDome",["JSScheduler","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("Chromedome").__setRef("CometChromeDome");function a(){i.onReady(function(a){(h||(h=d("JSScheduler"))).scheduleLoggingPriCallback(function(){a.start({})})})}g.init=a}),98);
__d("CometIconWirelessSlashFilled.react",["CometSVGIcon.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsx(c("CometSVGIcon.react"),babelHelpers["extends"]({viewBox:"0 0 24 24"},a,{children:i.jsx("path",{d:"M23.7805.2195c.2925.293.2925.768 0 1.061l-22.5 22.5C1.134 23.927.942 24 .75 24c-.192 0-.384-.073-.5305-.2195-.2925-.293-.2925-.768 0-1.061l12.1967947-12.1971509c-2.3773758-.1150468-4.79162015.7286756-6.6038447 2.5401009-.3905.3905-1.0235.3905-1.414 0-.3905-.3905-.3905-1.024 0-1.414 2.65728981-2.65728981 6.3696459-3.62280965 9.8005664-2.90852144l2.430738-2.43186193C11.7816792 4.58111626 6.15198938 5.65271062 2.27735 9.52735c-.3905.3905-1.0235.3905-1.414 0-.3905-.3905-.3905-1.0235 0-1.414 4.6714534-4.67191574 11.571522-5.78608437 17.3096457-3.34843552L22.7195.2195c.293-.2925.768-.2925 1.061 0zM12 18.5c.6905 0 1.25.5595 1.25 1.25S12.6905 21 12 21s-1.25-.5595-1.25-1.25.5595-1.25 1.25-1.25zm1.4175-4.81495c.9705.2455 1.8905.741 2.6485 1.499.3905.3905.3905 1.0235 0 1.414-.1955.1955-.451.293-.707.293-.256 0-.512-.0975-.707-.293-.7835333-.7835333-1.8301422-1.1445778-2.8581093-1.0880116L11.574 15.52855l1.8435-1.8435zm3.8154-3.8154c.848.4725 1.649 1.059 2.3685 1.779.391.39.391 1.023 0 1.414-.195.195-.451.293-.707.293-.2555 0-.5115-.098-.707-.293-.7285-.728-1.5575-1.291-2.439-1.7085zm2.1908-2.1908l1.4425-1.4425c.8.545 1.5615 1.168 2.2705 1.877.3905.3905.3905 1.0235 0 1.414-.1955.1955-.451.293-.707.293-.256 0-.5115-.0975-.707-.293-.5933333-.59333333-1.2283333-1.11861111-1.895162-1.57959491L19.4237 7.67885l1.4425-1.4425z"})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometNetworkStatusToast",["fbt","ix","BaseToasterStateManager","CometIconWirelessSlashFilled.react","CometRelayEnvironmentFactory","NetworkStatus","SVGIcon","TetraIcon.react","cometPushToast","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l=null;function m(a){a=a.online;var b=c("BaseToasterStateManager").getInstance();l!=null&&(b.expire(l),l=null);l=a?d("cometPushToast").cometPushToast({icon:k.jsx(c("TetraIcon.react"),{color:"positive",icon:d("fbicon")._(i("485124"),24)}),message:h._("__JHASH__Twor-U8sZs8__JHASH__")},4e3,b):d("cometPushToast").cometPushToast({action:{label:h._("__JHASH__mzjg0e604Yh__JHASH__"),onPress:function(){d("CometRelayEnvironmentFactory").commitLocalUpdateForEachEnvironment(function(a,b,c){c.invalidateStore()})}},icon:k.jsx(c("TetraIcon.react"),{color:"disabled",icon:d("SVGIcon").legacySVGIcon(c("CometIconWirelessSlashFilled.react")),size:24}),message:h._("__JHASH__px_Aor7szAo__JHASH__")},Infinity,b)}function a(){c("NetworkStatus").onChange(m)}g.subscribe=a}),226);
__d("FDSButtonGroup.react",["CometFocusTableContext","CometRow.react","CometRowItem.react","TetraButton.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext,k={resetFlexBasis:{flexBasis:"xdl72j9",$$css:!0}},l="secondary";function m(a){var b=j(c("CometFocusTableContext"));b=b.FocusCell;a=a.children;return b!=null?i.jsx(b,{children:a}):a}m.displayName=m.name+" [from "+f.id+"]";function a(a){var b=a.align,d=b===void 0?"justify":b;b=a.direction;b=b===void 0?"forward":b;var e=a.expanding;e=e===void 0?!1:e;var f=a.paddingHorizontal,g=a.paddingTop,h=a.paddingVertical,j=a.primary,n=a.secondary,o=a.size,p=a.verticalAlign,q=a.wrap;q=q===void 0?"none":q;var r=[],s=[],t=null;if(j!=null){var u=j.ref,v=j.testid;v=babelHelpers.objectWithoutPropertiesLoose(j,["ref","testid"]);t=i.jsx(m,{children:i.jsx(c("TetraButton.react"),babelHelpers["extends"]({},v,{ref:u,size:o,testid:void 0}))});r.push({hidden:i.jsx(c("TetraButton.react"),babelHelpers["extends"]({},v,{disabled:!0,padding:"normal",size:o})),visible:t})}if(n!=null){j=n.ref;u=n.testid;v=babelHelpers.objectWithoutPropertiesLoose(n,["ref","testid"]);r.push({hidden:i.jsx(c("TetraButton.react"),babelHelpers["extends"]({},v,{disabled:!0,padding:"normal",size:o,type:"secondary"})),visible:i.jsx(m,{children:i.jsx(c("TetraButton.react"),babelHelpers["extends"]({},v,{ref:j,size:o,testid:void 0,type:"secondary"}))})})}else if(a.secondaryIcon!=null){s.push(i.jsx(c("CometRowItem.react"),{children:i.jsx(m,{children:i.jsx(c("TetraButton.react"),babelHelpers["extends"]({},a.secondaryIcon,{labelIsHidden:!0,size:o,type:(u=a.secondaryIcon.type)!=null?u:l}))})},"secondary-icon"))}else if(a.secondaryIconGroup!=null){n=a.secondaryIconGroup;v=n.primaryIcon;j=n.secondaryIcon;s.push(i.jsx(c("CometRowItem.react"),{children:i.jsx(m,{children:i.jsx(c("TetraButton.react"),babelHelpers["extends"]({},v,{labelIsHidden:!0,size:o,type:(u=v.type)!=null?u:l}))})},"secondary-icon-1"),i.jsx(c("CometRowItem.react"),{children:i.jsx(m,{children:i.jsx(c("TetraButton.react"),babelHelpers["extends"]({},j,{labelIsHidden:!0,size:o,type:(a=j.type)!=null?a:l}))})},"secondary-icon-2"))}n=r.map(function(a,b){return i.jsx(c("CometRowItem.react"),{expanding:d==="justify",xstyle:k.resetFlexBasis,children:r.map(function(a,c){return i.jsx(i.Fragment,{children:b!==c?i.jsx("div",{"aria-hidden":!0,className:"xqtp20y x6ikm8r x10wlt62 xlshs6z",children:a.hidden}):a.visible},c)})},b)});v=t!=null?i.jsx(c("CometRowItem.react"),{expanding:d==="justify",xstyle:k.resetFlexBasis,children:t},"primary"):null;u=[v].concat(s);o=r.length===2;j=o||t==null?n:u;a=b==="forward"?j:j.reverse();return i.jsx(c("CometRow.react"),{align:d,expanding:e,paddingHorizontal:f,paddingTop:g,paddingVertical:h,spacing:8,verticalAlign:p,wrap:q,children:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometOnBeforeUnloadDialog.react",["fbt","CometTrackingNodeProvider.react","FDSButtonGroup.react","FDSCardedDialogLegacy.react","FDSText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=a.disabled;b=b===void 0?!1:b;var d=a.onClose,e=a.onCloseButtonPress,f=a.primaryAction,g=a.secondaryAction,i=a.body,k=a.cancel,l=a.confirm;a=a.title;var m=function(){f(),d()},n=function(){g(),d()};return j.jsx(c("CometTrackingNodeProvider.react"),{trackingNode:163,children:j.jsxs(c("FDSCardedDialogLegacy.react"),{onClose:function(){e(),d()},testid:void 0,title:a,titleHorizontalAlignment:"start",withCloseButton:!0,children:[j.jsx("div",{className:"xz9dl7a x1pi30zi xsag5q8 x1swvt13 x1n2onr6",children:j.jsx(c("FDSText.react"),{type:"body3",children:i})}),j.jsx("div",{className:"x78zum5 x1q0g3np x13a6bvl xexx8yu x4uap5 x1l90r2v xkhd6sd",children:j.jsx(c("FDSButtonGroup.react"),{direction:"backward",paddingHorizontal:16,primary:{disabled:b,label:(a=l)!=null?a:h._("__JHASH__dV9Vz_8TRow__JHASH__"),onPress:m,testid:"CometOnBeforeUnloadDialogConfirmButton"},secondary:{disabled:b,label:(i=k)!=null?i:h._("__JHASH__vfZ0qXC5Zmr__JHASH__"),onPress:n,reduceEmphasis:!0,testid:"CometOnBeforeUnloadDialogCancelButton"}})})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("CometPixelRatioUpdater",["Cookie","Run","WebPixelRatio"],(function(a,b,c,d,e,f,g){"use strict";var h="dpr";function i(a){c("Cookie").set(h,String(a))}function j(){window.devicePixelRatio!==d("WebPixelRatio").get()&&i(window.devicePixelRatio)}function a(){j(),d("Run").onBeforeUnload(j,!1),"onpagehide"in window&&window.addEventListener("pageHide",j)}g.startDetecting=a}),98);
__d("CometVirtualCursorStatus",["UserAgent","cr:1345969","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h=null,i=null;function j(){i||(i=window.addEventListener("blur",function(){h=null,k()}))}function k(){i&&(i.remove(),i=null)}function a(a){h=a.keyCode,j()}function d(a){h=null,k()}if(typeof window!=="undefined"&&window.document&&window.document.createElement){f=document.documentElement;if(f)if(f.addEventListener)f.addEventListener("keydown",a,!0),f.addEventListener("keyup",d,!0);else if(f.attachEvent){f=f.attachEvent;f("onkeydown",a);f("onkeyup",d)}}var l={getKeyDownCode:function(){return h},isKeyDown:function(){return!!h}},m=!1,n=!1,o=null,p=!1;function q(a){var b=new Set(),d=l.isKeyDown(),e=a.WEBKIT_FORCE_AT_MOUSE_DOWN,f=a.clientX,g=a.clientY,h=a.isTrusted,i=a.mozInputSource,j=a.offsetX,k=a.offsetY,o=a.webkitForce;f===0&&g===0&&j>=0&&k>=0&&n&&h&&i==null&&b.add("Chrome");m&&n&&!d&&o!=null&&o<e&&j===0&&k===0&&i==null&&b.add("Safari-edge");f===0&&g===0&&j<0&&k<0&&n&&i==null&&b.add("Safari-old");if(!m&&!n&&!d&&h&&c("UserAgent").isBrowser("IE >= 10")&&i==null){o=a.target;e=o.clientHeight;d=o.clientWidth;f<0&&g<0?b.add("IE"):(j<0||j>d)&&(k<0||k>e)&&b.add("MSIE")}i===0&&h&&b.add("Firefox");return b}function r(){m=!0,c("setTimeout")(function(){m=!1},0)}function s(){n=!0,c("setTimeout")(function(){n=!1},0)}function t(a){p&&b("cr:1345969").log({extra_data:{source_app:"comet"},indicated_browsers:o,is_virtual_cursor_action:a})}function u(a){o===null&&(o=Array.from(q(a)));p=o!=null&&o.length>0;a=a.target!=null&&a.target.getAttribute!=null&&a.target.getAttribute("data-accessibilityid")==="virtual_cursor_trigger";t(a);c("setTimeout")(function(){p=!1,o=null},0)}function e(){document.addEventListener("click",u,!0),document.addEventListener("mousedown",r,!0),document.addEventListener("mouseup",s,!0)}g.initLogging=e}),98);
__d("SimplePageLoadLogger",["ODS","performance"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(){(i||(i=d("ODS"))).bumpEntityKey(1678,"www_client_navigations",j())}function j(){if((h||(h=c("performance"))).navigation==null||(h||(h=c("performance"))).navigation.type==null)return"UNSUPPORTED";switch((h||(h=c("performance"))).navigation.type){case(h||(h=c("performance"))).navigation.TYPE_NAVIGATE:return"NAVIGATE";case(h||(h=c("performance"))).navigation.TYPE_RELOAD:return"RELOAD";case(h||(h=c("performance"))).navigation.TYPE_BACK_FORWARD:return"BACK_FORWARD";case(h||(h=c("performance"))).navigation.TYPE_RESERVED:return"RESERVED";default:return"UNKNOWN"}}g.logPageNavigationType=a}),98);
__d("StringTransformations",[],(function(a,b,c,d,e,f){"use strict";a={unicodeEscape:function(a){return a.replace(/[^A-Za-z0-9\-\.\:\_\$\/\+\=]/g,function(a){a=a.charCodeAt(0).toString(16);return"\\u"+("0000"+a.toUpperCase()).slice(-4)})},unicodeUnescape:function(a){return a.replace(/(\\u[0-9A-Fa-f]{4})/g,function(a){return String.fromCharCode(parseInt(a.slice(2),16))})}};f["default"]=a}),66);
__d("WebStorageMonster",["AsyncRequest","CacheStorage","Event","ExecutionEnvironment","NetworkStatus","StringTransformations","UserActivity","WebStorage","WebStorageCleanupReason","WebStorageMonsterLoggingURI","ifRequired","isEmpty","killswitch","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=1e4,l=5,m=!1;function n(a){var b={};for(var d in a){var e=a.getItem(d),f=c("StringTransformations").unicodeEscape(d);typeof e==="string"&&(b[f]=e.length)}return b}function o(a){var b=(h||(h=c("WebStorage"))).getLocalStorage();if(!b||a==null||!a.keys)return;r._getLocalStorageKeys().forEach(function(c){a.keys.includes(c)&&b.removeItem(c)})}function p(a){var b=(h||(h=c("WebStorage"))).getLocalStorage();b&&r._getLocalStorageKeys().forEach(function(c){a.some(function(a){return new RegExp(a).test(c)})||b.removeItem(c)})}function q(a,b){a===void 0&&(a=!1);b===void 0&&(b=k);if(c("UserActivity").isActive(b)){var d=Math.max(k,Math.floor(b/l));c("setTimeoutAcrossTransitions")(function(){q(a,d)},d)}else{r.cleanNow(a);var e=!c("killswitch")("WEB_STORAGE_MONSTER_DONT_RESCHEDULE_ON_RUN");if(e){var f=b*l;c("setTimeoutAcrossTransitions")(function(){q(a,f)},f)}}}var r={_getLocalStorageKeys:function(){var a=(h||(h=c("WebStorage"))).getLocalStorage();return a?Object.keys(a):[]},cleanNow:function(a){a===void 0&&(a=!1);var b=Date.now(),d={},e=(h||(h=c("WebStorage"))).getLocalStorage();e&&(d.local_storage=n(e));e=h.getSessionStorage();e&&(d.session_storage=n(e));e=!(i||(i=c("isEmpty")))(d);var f=Date.now();d.logtime=f-b;if(e){var g,j=c("WebStorageMonsterLoggingURI").uri;if(j===null)return null;var k=function(){new(c("AsyncRequest"))(j).setData(d).setHandler(function(b){b=b.getPayload();b&&b.keys&&(b.keys=b.keys.map(c("StringTransformations").unicodeUnescape));a||o(b);c("NetworkStatus").reportSuccess()}).setErrorHandler(function(){c("NetworkStatus").reportError()}).setOption("retries",2).send()};if(c("NetworkStatus").isOnline())k();else{f=function(a){a=a.online;a&&(k(),g.remove())};g=c("NetworkStatus").onChange(f)}}},cleanOnLogout:function(a,b){d("WebStorageCleanupReason").setLastCleanupReason(b);c("CacheStorage").disablePersistentWrites();c("ifRequired")("WebAsyncStorage",function(a){a.disablePersistentWrites()});a?p(a):p([]);b=(h||(h=c("WebStorage"))).getSessionStorage();b&&b.clear();c("ifRequired")("WebAsyncStorage",function(a){a.clear(function(){})})},registerLogoutForm:function(a,b){c("Event").listen(a,"submit",function(a){r.cleanOnLogout(b,"WebStorageMonster.registerLogoutForm")})},schedule:function(a){a===void 0&&(a=!1);if(m||!(j||(j=c("ExecutionEnvironment"))).isInBrowser)return;m=!0;q(a)}};a=r;g["default"]=a}),98);
__d("CometRootDeferredShared",["CometBootloaderLoggerUtil","CometOfflineTracing","CometVirtualCursorStatus","DeferredCookie","ErrorGuard","JSScheduler","SimplePageLoadLogger","WebStorageMonster","cr:10026","cr:1201738","cr:1332233","cr:1402","cr:1516609","cr:1813330","cr:2718","cr:6931","currentCometRouterInstance","vc-tracker"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=null;function a(a){var e=a.blLoggingCavalryFields,f=a.deferredCookies;(i||(i=c("ErrorGuard"))).applyWithGuard(function(){return d("CometBootloaderLoggerUtil").initLogging(e)},null,[]);i.applyWithGuard(function(){return d("CometVirtualCursorStatus").initLogging()},null,[]);b("cr:1402")!=null&&(i||(i=c("ErrorGuard"))).applyWithGuard(function(){return b("cr:1402").subscribe()},null,[]);i.applyWithGuard(function(){return d("CometOfflineTracing").initialize()},null,[]);b("cr:10026")!=null&&(i||(i=c("ErrorGuard"))).applyWithGuard(function(){return b("cr:10026")(function(){var a;return(a=d("currentCometRouterInstance").get())==null?void 0:(a=a.getCurrentRouterState())==null?void 0:(a=a.main)==null?void 0:a.route})},null,[]);i.applyWithGuard(function(){return d("SimplePageLoadLogger").logPageNavigationType()},null,[]);(h||(h=d("JSScheduler"))).scheduleSpeculativeCallback(function(){c("WebStorageMonster").schedule()});b("cr:1201738")&&c("vc-tracker").VisualCompletionTraceObserver.subscribe(function(a){a.interactionType==="INITIAL_LOAD"&&b("cr:1201738").init("comet.idle")});j&&c("vc-tracker").VisualCompletionTraceObserver.subscribe(function(a){a.interactionType==="INITIAL_LOAD"&&j.init()});Object.keys(f).forEach(function(a){var b=f[a],d=b.expiration_for_js,e=b.first_party_only,g=b.path,h=b.secure;b=b.value;c("DeferredCookie").addToQueue(a,b,d,g,e,!1,h)});b("cr:1332233")&&(i||(i=c("ErrorGuard"))).applyWithGuard(function(){return b("cr:1332233")()},null,[]);b("cr:1516609")!=null&&(i||(i=c("ErrorGuard"))).applyWithGuard(function(){return b("cr:1516609").initSignalCollection()},null,[]);b("cr:1813330")&&(i||(i=c("ErrorGuard"))).applyWithGuard(function(){return b("cr:1813330").init()},null,[]);b("cr:2718")&&(i||(i=c("ErrorGuard"))).applyWithGuard(function(){return b("cr:2718").init()},null,[]);b("cr:6931")&&(i||(i=c("ErrorGuard"))).applyWithGuard(function(){return b("cr:6931").init()},null,[])}g.initDeferred=a}),98);
__d("EventProfilerSham",[],(function(a,b,c,d,e,f){a={__wrapEventListenHandler:function(a){return a},tagCurrentActiveInteractionsAs:function(a){},setCurrentAdAccountId:function(a){},setAdsConfig:function(a){}};b=a;f["default"]=b}),66);
__d("IGDSPrivateToast.react",["BaseTheme.react","IGDSBox.react","IGDSText.react","IGDSThemeConfig","react","stylex","useCurrentDisplayMode","useFadeEffect"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||(i=d("react"))).c,k=i,l="x1xuf6tn-B",m={actionableToast:{"@media (max-width: 767px)_width":"xeroabh","@media (min-width: 768px)_minWidth":"x1ww3oar",$$css:!0},fadeIn:{animationDuration:"xs4xyr0",animationName:"x1wpepyw",animationTimingFunction:"x4hg4is",opacity:"x1iy03kw",$$css:!0},fadeOut:{animationDuration:"xs4xyr0",animationName:"xqf3suz",animationTimingFunction:"x4hg4is",opacity:"xg01cxk",$$css:!0},messageBox:{flexBasis:"x1t1x2f9",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",height:"x5yr21d",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},rootBox:{flexBasis:"x1t1x2f9",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",$$css:!0},toast:{alignItems:"x6s0dn4",backgroundColor:"x1jx94hy",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",boxShadow:"xdy0x9s",display:"x78zum5",flexShrink:"x2lah0s",justifyContent:"x1qughib",opacity:"xg01cxk",paddingTop:"xyamay9",paddingEnd:"xc73u3c",paddingBottom:"x1l90r2v",paddingStart:"x5ib6vp",textAlign:"x2b8uid",$$css:!0}};b=k.forwardRef(a);function a(a,b){var d=j(29),e=a.actionComponent,f=a["data-testid"],g=a.icon,i=a.isVisible,n=a.message,o=a.messageSecondary,p=a.onClose;a=a.target;a=a===void 0?"center":a;var q=c("useFadeEffect")(i);q[0];var r=q[1];q=q[2];var s=c("useCurrentDisplayMode")();s=s==="dark"?"light":"dark";var t=c("BaseTheme.react"),u=!0,v=c("IGDSThemeConfig"),w="alert";a=(h||(h=c("stylex")))(m.toast,a==="center"&&e==null?null:m.actionableToast,r&&m.fadeIn,!i&&m.fadeOut);d[0]!==p?(r=function(a){a.animationName===l&&p!=null&&p()},d[0]=p,d[1]=r):r=d[1];d[2]!==g?(i=g!=null&&k.jsx(c("IGDSBox.react"),{marginEnd:3,children:g}),d[2]=g,d[3]=i):i=d[3];d[4]!==n?(g=k.jsx(c("IGDSText.react").Body,{maxLines:1,textAlign:"start",zeroMargin:!0,children:n}),d[4]=n,d[5]=g):g=d[5];d[6]!==o?(n=o!=null&&k.jsx(c("IGDSBox.react"),{marginTop:1,children:k.jsx(c("IGDSText.react").Body,{color:"secondaryText",maxLines:1,textAlign:"start",zeroMargin:!0,children:o})}),d[6]=o,d[7]=n):n=d[7];d[8]!==g||d[9]!==n?(o=k.jsxs(c("IGDSBox.react"),{direction:"column",justifyContent:"center",xstyle:m.messageBox,children:[g,n]}),d[8]=g,d[9]=n,d[10]=o):o=d[10];d[11]!==b||d[12]!==i||d[13]!==o?(g=k.jsxs(c("IGDSBox.react"),{alignItems:"center",containerRef:b,direction:"row",overflow:"hidden",xstyle:m.rootBox,children:[i,o]}),d[11]=b,d[12]=i,d[13]=o,d[14]=g):g=d[14];d[15]!==e?(n=e!=null&&k.jsx("div",{className:"x1c4vz4f x2lah0s",children:e}),d[15]=e,d[16]=n):n=d[16];d[17]!==a||d[18]!==r||d[19]!==g||d[20]!==n?(b=k.jsxs("div",{className:a,onAnimationEnd:r,children:[g,n]}),d[17]=a,d[18]=r,d[19]=g,d[20]=n,d[21]=b):b=d[21];d[22]!==t||d[23]!==v||d[24]!==s||d[25]!==q||d[26]!==f||d[27]!==b?(i=k.jsx(t,{"aria-atomic":u,config:v,displayMode:s,ref:q,role:w,testid:void 0,children:b}),d[22]=t,d[23]=v,d[24]=s,d[25]=q,d[26]=f,d[27]=b,d[28]=i):i=d[28];return i}e=b;g["default"]=e}),98);
__d("IGDSPrivateToastContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({onHideFactory:null});g["default"]=b}),98);
__d("IGDSPrivateToaster.react",["BaseContextualLayer.react","DateConsts","IGDSPrivateToast.react","IGDSPrivateToastContext","PolarisUA","clearTimeout","react","setTimeout","stylex","useSinglePartialViewImpression"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;b.useCallback;var k=b.useEffect,l=b.useLayoutEffect;b.useMemo;var m=b.useRef,n=b.useState,o=b.c,p={bottomContainer:{alignItems:"x6s0dn4",bottom:"x3h4tne",display:"x78zum5",flexDirection:"xdt5ytf",left:"x1nrll8i",start:null,end:null,position:"xixxii4",transform:"xjebx4m",$$css:!0},bottomLeftContainer:{alignItems:"x6s0dn4",bottom:"x3h4tne",display:"x78zum5",flexDirection:"xdt5ytf",position:"xixxii4",start:"x3f4u1h",left:null,right:null,$$css:!0},centerContainer:{left:"x1nrll8i",start:null,end:null,position:"xixxii4",top:"xwa60dl",transform:"x11lhmoz",zIndex:"x1vjfegm",$$css:!0}},q=3*d("DateConsts").MS_PER_SEC;function r(a){var b=o(29),d=a.config;a=a.toast;var e=n("transition"),f=e[0],g=e[1];e=n(null);var h=e[0],i=e[1],p=d.isVisible===!1;e=n(p);var r=e[0],s=e[1],t=m(null),u=d.isSticky!=null&&d.isSticky,w=d.duration!=null?d.duration:q,x;b[0]!==p?(e=function(){return s(!p)},x=[p],b[0]=p,b[1]=e,b[2]=x):(e=b[1],x=b[2]);l(e,x);b[3]!==r||b[4]!==u||b[5]!==w?(e=function(){r&&!u?t.current=c("setTimeout")(function(){s(!1)},w):c("clearTimeout")(t.current);return function(){return c("clearTimeout")(t.current)}},b[3]=r,b[4]=u,b[5]=w,b[6]=e):e=b[6];b[7]!==r||b[8]!==d||b[9]!==w||b[10]!==u?(x=[r,d,w,u],b[7]=r,b[8]=d,b[9]=w,b[10]=u,b[11]=x):x=b[11];k(e,x);b[12]!==h||b[13]!==f||b[14]!==d.onAfterHide?(e=function(){h==null?void 0:h(f),d.onAfterHide==null?void 0:d.onAfterHide()},b[12]=h,b[13]=f,b[14]=d.onAfterHide,b[15]=e):e=b[15];var y=e;b[16]===Symbol["for"]("react.memo_cache_sentinel")?(x=function(a){i(function(b){return a});return function(a){s(!1),g(a)}},b[16]=x):x=b[16];e=x;b[17]===Symbol["for"]("react.memo_cache_sentinel")?(x={onHideFactory:e},b[17]=x):x=b[17];e=x;x=e;b[18]===Symbol["for"]("react.memo_cache_sentinel")?(e="xjkvuk6",b[18]=e):e=b[18];var z;b[19]!==r||b[20]!==y?(z=function(){r||y()},b[19]=r,b[20]=y,b[21]=z):z=b[21];b[22]!==d||b[23]!==r||b[24]!==a?(x=j.jsx(c("IGDSPrivateToastContext").Provider,{value:x,children:j.jsx(v,{config:d,isVisible:r,toast:a})}),b[22]=d,b[23]=r,b[24]=a,b[25]=x):x=b[25];b[26]!==z||b[27]!==x?(a=j.jsx("div",{className:e,onAnimationEnd:z,children:x}),b[26]=z,b[27]=x,b[28]=a):a=b[28];return a}function a(a){var b=o(19),e=a["data-testid"];a=a.items;var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=d("PolarisUA").isMobile(),b[0]=f):f=b[0];var g=f;f=m(null);if(a.length===0)return null;var h,i,k;b[1]!==a?(h=[],i=[],k=[],a.map(function(a){bb5:switch(a.toast.target){case"center":h.push(a);break bb5;case"bottom":i.push(a);break bb5;case"bottom-left":g?i.push(a):k.push(a);break bb5;default:w(a.toast)?i.push(a):h.push(a)}}),b[1]=a,b[2]=h,b[3]=i,b[4]=k):(h=b[2],i=b[3],k=b[4]);b[5]!==e||b[6]!==h?(a=j.jsx(t,{"data-testid":void 0,items:h,target:"center"}),b[5]=e,b[6]=h,b[7]=a):a=b[7];var l;b[8]!==e||b[9]!==i?(l=j.jsx(t,{"data-testid":void 0,items:i,target:"bottom"}),b[8]=e,b[9]=i,b[10]=l):l=b[10];var n;b[11]!==e||b[12]!==k?(n=j.jsx(t,{"data-testid":void 0,items:k,target:"bottom-left"}),b[11]=e,b[12]=k,b[13]=n):n=b[13];b[14]!==f||b[15]!==a||b[16]!==l||b[17]!==n?(e=j.jsxs(c("BaseContextualLayer.react"),{contextRef:f,children:[a,l,n]}),b[14]=f,b[15]=a,b[16]=l,b[17]=n,b[18]=e):e=b[18];return e}function s(a){switch(a){case"center":return p.centerContainer;case"bottom-left":return p.bottomLeftContainer;case"bottom":default:return p.bottomContainer}}function t(a){var b=o(8),d=a["data-testid"],e=a.items;a=a.target;if(e.length>0){var f;b[0]!==a?(f=(h||(h=c("stylex")))(s(a)),b[0]=a,b[1]=f):f=b[1];b[2]!==e?(a=e.map(u),b[2]=e,b[3]=a):a=b[3];b[4]!==f||b[5]!==d||b[6]!==a?(e=j.jsx("div",{className:f,"data-testid":void 0,children:a}),b[4]=f,b[5]=d,b[6]=a,b[7]=e):e=b[7];return e}return null}function u(a){var b=a.config;a=a.toast;return j.jsx(r,{config:b,toast:a},b.key)}u.displayName=u.name+" [from "+f.id+"]";function v(a){var b=o(10),d=a.config,e=a.isVisible;a=a.toast;var f=c("useSinglePartialViewImpression")({onImpressionStart:d==null?void 0:d.onImpressionCallback}),g;b[0]!==a.actionComponent||b[1]!==a.icon||b[2]!==a.message||b[3]!==a.messageSecondary||b[4]!==a.target||b[5]!==d.key||b[6]!==d.onAfterHide||b[7]!==e||b[8]!==f?(g=j.jsx(c("IGDSPrivateToast.react"),{actionComponent:a.actionComponent,"data-testid":void 0,icon:a.icon,isVisible:e,message:a.message,messageSecondary:a.messageSecondary,onClose:d.onAfterHide,ref:f,target:a.target}),b[0]=a.actionComponent,b[1]=a.icon,b[2]=a.message,b[3]=a.messageSecondary,b[4]=a.target,b[5]=d.key,b[6]=d.onAfterHide,b[7]=e,b[8]=f,b[9]=g):g=b[9];return g}function w(a){return a.actionComponent!=null}g["default"]=a}),98);
__d("IGDSSaveFilledIcon.react",["IGDSSavePanoFilledIcon.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsx(c("IGDSSavePanoFilledIcon.react"),babelHelpers["extends"]({},a))}a.displayName=a.name+" [from "+f.id+"]";b=i.memo(a);g["default"]=b}),98);
__d("InstagramWebNotificationFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5614");b=d("FalcoLoggerInternal").create("instagram_web_notification",a);e=b;g["default"]=e}),98);
__d("LogWebMemoryUsageFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1765264");b=d("FalcoLoggerInternal").create("log_web_memory_usage",a);e=b;g["default"]=e}),98);
__d("PolarisBackgroundFeedDataFetchEager",["CometRelay","CurrentUser","PolarisFeedActionLoadFeedPageExtras","PolarisFeedQueryConstants","PolarisFeedTimelineRootV2DirectQuery.graphql","PolarisFeedTimelineRootV2Query.graphql","PolarisRelayEnvironmentFactory","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=c("PolarisRelayEnvironmentFactory").getForActorID(c("CurrentUser").getPossiblyNonFacebookUserID()),e=d("PolarisFeedQueryConstants").FEED_TIMELINE_REQUEST_BODY;d("CometRelay").fetchQuery(b,c("gkx")("1746")?c("PolarisFeedTimelineRootV2DirectQuery.graphql"):c("PolarisFeedTimelineRootV2Query.graphql"),{data:e,variant:String("home")}).subscribe({});a.dispatch(d("PolarisFeedActionLoadFeedPageExtras").loadFeedPageExtras())}g.runBackgroundFeedDataFetch=a}),98);
__d("PolarisClipsPagePhoto.react",["fbt","PolarisPhoto.react","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=(j||(j=d("react"))).c,l=j,m={image:{alignItems:"x1qjc9v5",borderTopWidth:"x972fbf",borderEndWidth:"xcfux6l",borderBottomWidth:"x1qhh985",borderStartWidth:"xm0m39n",boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",flexShrink:"x2lah0s",fontSize:"xk390pu",height:"x18dl8mb",marginTop:"xdj266r",marginEnd:"x11i5rnm",marginBottom:"xat24cr",marginStart:"x1mh8g0r",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",position:"x1n2onr6",verticalAlign:"x11njtxf",width:"xrostsh","@media (max-width: 735px)_height":"x1rrdvvk","@media (max-width: 735px)_width":"x1tgtcet",$$css:!0}};function a(a){var b=k(8),d=a.itemThumbnail;a=a.xstyle;var e;b[0]!==a?(e=(i||(i=c("stylex")))(m.image,a),b[0]=a,b[1]=e):e=b[1];b[2]===Symbol["for"]("react.memo_cache_sentinel")?(a=h._("__JHASH__S-VZl7blJQQ__JHASH__"),b[2]=a):a=b[2];b[3]!==d?(a=l.jsx(c("PolarisPhoto.react"),{accessibilityCaption:a,setCrossOriginToUndefinedDONOTUSE:!0,src:d}),b[3]=d,b[4]=a):a=b[4];b[5]!==e||b[6]!==a?(d=l.jsx("div",{className:e,children:a}),b[5]=e,b[6]=a,b[7]=d):d=b[7];return d}g["default"]=a}),226);
__d("PolarisInitWindowsPWAKeyCommand",["ExecutionEnvironment","PolarisUA"],(function(a,b,c,d,e,f,g){"use strict";var h,i=!1;function a(){if(i)return;(h||(h=c("ExecutionEnvironment"))).canUseDOM&&d("PolarisUA").isDesktopPWA()&&(window.addEventListener("keydown",function(a){a.ctrlKey&&a.key==="r"&&window.location.reload()}),i=!0)}g["default"]=a}),98);
__d("PolarisLogPushNotification",["InstagramODS","InstagramWebNotificationFalcoEvent","PolarisConfig","PolarisQueryParams","URI","polarisReferrerFormatter"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){d("PolarisQueryParams").isPushNotificationParam()&&(c("InstagramWebNotificationFalcoEvent").log(function(){var a;return{landing_page_url:(a=d("polarisReferrerFormatter").sanitizeReferrer(window.location.pathname))!=null?a:"",ndid:(a=d("PolarisQueryParams").getNdidParam())!=null?a:"",target_user_id:(a=d("PolarisConfig").getViewerId())!=null?a:"",web_push_event_name:"web_push_clicked"}}),i())}function i(){try{var a=new(h||(h=c("URI")))(window.location.href);a.removeQueryData("utm_source");a.removeQueryData("ndid");window.history.replaceState({},null,a)}catch(a){c("InstagramODS").incr("web.notifications.remove_utm.failure")}}g["default"]=a}),98);
__d("PolarisLoggedOutIntentDialog.react",["fbt","IGDSBox.react","IGDSCommentPanoFilledIcon.react","IGDSDirectPanoFilledIcon.react","IGDSHeartFilledIcon.react","IGDSSaveFilledIcon.react","IGDSText.react","PolarisAppsellUnit.react","PolarisAssetManagerGlyphMapping","PolarisClipsPagePhoto.react","PolarisIGCoreIcon.react","PolarisIGCoreSheetOrModal","PolarisLoggedOutCtaImpressionLogger","PolarisLoggedOutCtaLogger","PolarisLoggedOutLoginConstants","PolarisLoggedOutLoginOrSignupRow.react","PolarisNavigationActions","PolarisReactRedux.react","PolarisStoriesContext","PolarisUserAvatar.react","cr:1954","nullthrows","polarisUserSelectors","react","usePolarisPageID"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));e=i;e.useCallback;var k=e.useContext,l=e.useEffect,m=e.c,n=72,o=3;function p(a){var b=m(18);a=a.loginSource;var e=d("PolarisReactRedux.react").useSelector(q),f,g,i;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(i=h._("__JHASH__EubW9vzR0uu__JHASH__"),b[0]=i):i=b[0];i=i;bb0:switch(a){case"post_feedback_comment":f=c("IGDSCommentPanoFilledIcon.react");var k;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(k=h._("__JHASH__j7fL_QYzq4H__JHASH__"),b[1]=k):k=b[1];i=k;break bb0;case"post_feedback_save":f=c("IGDSSaveFilledIcon.react");b[2]===Symbol["for"]("react.memo_cache_sentinel")?(k=h._("__JHASH__jMkSX3tePAz__JHASH__"),b[2]=k):k=b[2];i=k;break bb0;case"reel_feedback_direct":f=c("IGDSDirectPanoFilledIcon.react");b[3]===Symbol["for"]("react.memo_cache_sentinel")?(k=h._("__JHASH__dCpyyTpkyrM__JHASH__"),b[3]=k):k=b[3];i=k;break bb0;case"post_feedback_like":case"story_feedback_like":f=c("IGDSHeartFilledIcon.react");b[4]===Symbol["for"]("react.memo_cache_sentinel")?(k=h._("__JHASH__WwSdYzGxN9Q__JHASH__"),b[4]=k):k=b[4];i=k;g="ig-badge"}b[5]!==e||b[6]!==a?(k=e!=null?a==="clips_save_audio"?j.jsx(c("PolarisClipsPagePhoto.react"),{itemThumbnail:e,xstyle:{}}):j.jsx(c("PolarisUserAvatar.react"),{isLink:!1,profilePictureUrl:e,size:n}):j.jsx(c("PolarisIGCoreIcon.react"),{alt:h._("__JHASH__EubW9vzR0uu__JHASH__"),icon:d("PolarisAssetManagerGlyphMapping").ICONS.APP_ICON_45}),b[5]=e,b[6]=a,b[7]=k):k=b[7];a=k;b[8]!==a?(k=j.jsx(c("IGDSBox.react"),{alignItems:"center",height:n,justifyContent:"center",marginBottom:o,position:"relative",children:a}),b[8]=a,b[9]=k):k=b[9];b[10]!==f||b[11]!==e||b[12]!==i||b[13]!==g?(a=f!=null&&e!=null&&j.jsx(c("IGDSBox.react"),{alignItems:"center",bottom:!0,height:24,justifyContent:"center",marginBottom:2,marginStart:1,position:"absolute",right:!0,width:24,children:j.jsx("div",{className:"x1hw97mu xvlca1e",children:j.jsx(f,{alt:i,color:g,size:18})})}),b[10]=f,b[11]=e,b[12]=i,b[13]=g,b[14]=a):a=b[14];b[15]!==k||b[16]!==a?(e=j.jsxs(c("IGDSBox.react"),{marginBottom:o,position:"relative",width:n,children:[k,a]}),b[15]=k,b[16]=a,b[17]=e):e=b[17];return e}function q(a){if(a.navigation.loggedOutIntentThumbnail!=null)return a.navigation.loggedOutIntentThumbnail;return a.navigation.loggedOutIntentUsername!=null?d("polarisUserSelectors").getUserByUsername(a,a.navigation.loggedOutIntentUsername).profilePictureUrl:null}function a(){var a,e=m(26),f=d("PolarisReactRedux.react").useSelector(t),g=c("usePolarisPageID")();a=(a=d("PolarisReactRedux.react").useSelector(s))!=null?a:window.location.href;var h=d("PolarisReactRedux.react").useDispatch(),i=d("PolarisReactRedux.react").useSelector(r),n=d("PolarisLoggedOutLoginConstants").getContentTextFromIntentSource(f,i);i=d("PolarisLoggedOutLoginConstants").getContentSubtextFromIntentSource(f,i);var o,q;e[0]!==g?(o=function(){d("PolarisLoggedOutCtaLogger").logLoggedOutCtaEvent({ctaType:"intent_dialog",ctaVersion:"",eventName:"impression",module:g}),d("PolarisLoggedOutCtaImpressionLogger").logLoggedOutCtaImpressionEvent("half_sheet",g)},q=[g],e[0]=g,e[1]=o,e[2]=q):(o=e[1],q=e[2]);l(o,q);o=k(d("PolarisStoriesContext").StoriesContext);var u=o.updateStoriesContext;e[3]!==h||e[4]!==u?(q=function(){h(d("PolarisNavigationActions").closeLoggedOutIntentDialog()),u({isLoggedOutIntentDialogActive:!1,isPaused:!1})},e[3]=h,e[4]=u,e[5]=q):q=e[5];o=q;e[6]!==f?(q=j.jsx(p,{loginSource:f}),e[6]=f,e[7]=q):q=e[7];var v;e[8]!==n?(v=j.jsx(c("IGDSBox.react"),{marginBottom:3,width:"100%",children:j.jsx(c("IGDSText.react").Title,{textAlign:"center",children:n})}),e[8]=n,e[9]=v):v=e[9];e[10]!==i?(n=j.jsx(c("IGDSBox.react"),{marginBottom:5,width:"100%",children:j.jsx(c("IGDSText.react").Body,{color:"secondaryText",textAlign:"center",children:i})}),e[10]=i,e[11]=n):n=e[11];e[12]!==g?(i=j.jsx(c("IGDSBox.react"),{width:"100%",children:b("cr:1954")?j.jsx(b("cr:1954"),{ctaType:"intent_dialog",ctaTypeV2:"half_sheet"}):j.jsx(c("PolarisAppsellUnit.react"),{appInstallCampaign:g,ctaType:"intent_dialog",ctaTypeV2:"half_sheet",hideText:!0})}),e[12]=g,e[13]=i):i=e[13];var w;e[14]!==a||e[15]!==f?(w=j.jsx(c("PolarisLoggedOutLoginOrSignupRow.react"),{ctaType:"intent_dialog",ctaTypeV2:"half_sheet",loginReturnPath:a,loginSource:f}),e[14]=a,e[15]=f,e[16]=w):w=e[16];e[17]!==q||e[18]!==v||e[19]!==n||e[20]!==i||e[21]!==w?(a=j.jsxs(c("IGDSBox.react"),{alignItems:"center",marginBottom:2,paddingX:4,paddingY:3,width:"100%",children:[q,v,n,i,w]}),e[17]=q,e[18]=v,e[19]=n,e[20]=i,e[21]=w,e[22]=a):a=e[22];e[23]!==o||e[24]!==a?(f=j.jsx(d("PolarisIGCoreSheetOrModal").IGCoreSheetOrModal,{canMaximize:!1,canMinimize:!0,"data-testid":void 0,onClose:o,children:a}),e[23]=o,e[24]=a,e[25]=f):f=e[25];return f}function r(a){return a.navigation.loggedOutIntentUsername}function s(a){return a.navigation.displayedRoute}function t(a){return c("nullthrows")(a.navigation.loggedOutIntentSource)}g["default"]=a}),226);
__d("ServiceWorkerCacheManagement",["regeneratorRuntime"],(function(a,b,c,d,e,f){function a(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:if(!("caches"in self)){a.next=3;break}a.next=3;return b("regeneratorRuntime").awrap(caches["delete"]("sr-cache-1"));case 3:case"end":return a.stop()}},null,this)}f.manageCache=a}),66);
__d("WebPerfDeviceInfoLogFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1871697");b=d("FalcoLoggerInternal").create("web_perf_device_info_log",a);e=b;g["default"]=e}),98);
__d("XDeviceClassRealtimeControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/web_perf/get_perf_level/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("WebDevicePerfInfoLogging",["AsyncTypedRequest","JSScheduler","Promise","WebDevicePerfInfoData","WebPerfDeviceInfoLogFalcoEvent","XDeviceClassRealtimeControllerRouteBuilder","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){var b=document.createElement("canvas");b=b.getContext("webgl")||b.getContext("experimental-webgl");if(!b)return;var c=b.getExtension("WEBGL_debug_renderer_info");if(!c)return;var d=b.getParameter(c.UNMASKED_RENDERER_WEBGL);b=b.getParameter(c.UNMASKED_VENDOR_WEBGL);a.gpu_vendor=b;a.gpu_renderer=d}function k(){var a=window.navigator,b={};a&&a.hardwareConcurrency!==void 0&&(b.cpu_cores=a.hardwareConcurrency);a&&a.deviceMemory!==void 0&&(b.ram=a.deviceMemory);c("WebDevicePerfInfoData").needsFullUpdate&&j(b);return b}function l(){var a=k();c("WebPerfDeviceInfoLogFalcoEvent").log(function(){var b;return{cpu_cores:(b=a.cpu_cores)!=null?b:null,ram:(b=a.ram)!=null?b:null,gpu_renderer:(b=a.gpu_renderer)!=null?b:null,gpu_vendor:(b=a.gpu_vendor)!=null?b:null}})}function m(){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=k();a=(yield new(c("AsyncTypedRequest"))(c("XDeviceClassRealtimeControllerRouteBuilder").buildURL({})).setData(a).promisePayload());return a.devicePerfClassLevel});return n.apply(this,arguments)}function a(){(c("WebDevicePerfInfoData").needsFullUpdate||c("WebDevicePerfInfoData").needsPartialUpdate)&&(i||(i=d("JSScheduler"))).scheduleSpeculativeCallback(l)}function e(){return new(h||(h=b("Promise")))(function(a,b){c("WebDevicePerfInfoData").needsFullUpdate||c("WebDevicePerfInfoData").needsPartialUpdate?(i||(i=d("JSScheduler"))).scheduleSpeculativeCallback(function(){m().then(a)["catch"](b)}):a()})}g.doLog=a;g.doLogPromise=e}),98);
__d("goURIWWW",["URI"],(function(a,b,c,d,e,f,g){"use strict";var h;g["default"]=(h||c("URI")).go}),98);
__d("polarisDebugLogODS",["cr:4890"],(function(a,b,c,d,e,f,g){"use strict";function a(a,c){b("cr:4890")==null?void 0:b("cr:4890")(a,c)}g["default"]=a}),98);/*FB_PKG_DELIM*/
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("core-util-is-1.0.2",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){function a(a){return Array.isArray?Array.isArray(a):p(a)==="[object Array]"}g.isArray=a;function b(a){return typeof a==="boolean"}g.isBoolean=b;function c(a){return a===null}g.isNull=c;function d(a){return a==null}g.isNullOrUndefined=d;function e(a){return typeof a==="number"}g.isNumber=e;function f(a){return typeof a==="string"}g.isString=f;function h(a){return typeof a==="symbol"}g.isSymbol=h;function i(a){return a===void 0}g.isUndefined=i;function j(a){return p(a)==="[object RegExp]"}g.isRegExp=j;function k(a){return typeof a==="object"&&a!==null}g.isObject=k;function l(a){return p(a)==="[object Date]"}g.isDate=l;function m(a){return p(a)==="[object Error]"||a instanceof Error}g.isError=m;function n(a){return typeof a==="function"}g.isFunction=n;function o(a){return a===null||typeof a==="boolean"||typeof a==="number"||typeof a==="string"||typeof a==="symbol"||typeof a==="undefined"}g.isPrimitive=o;g.isBuffer=Buffer.isBuffer;function p(a){return Object.prototype.toString.call(a)}}var j=!1;function k(){j||(j=!0,i());return h.exports}function a(a){switch(a){case void 0:return k()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("immediate-3.0.6",[],(function(a,b,c,d,e,f){"use strict";c={};var g={exports:c};function h(){var b=a.MutationObserver||a.WebKitMutationObserver,c;if(process.browser)if(b){var d=0;b=new b(j);var e=a.document.createTextNode("");b.observe(e,{characterData:!0});c=function(){e.data=d=++d%2}}else if(!a.setImmediate&&typeof a.MessageChannel!=="undefined"){var f=new a.MessageChannel();f.port1.onmessage=j;c=function(){f.port2.postMessage(0)}}else"document"in a&&"onreadystatechange"in a.document.createElement("script")?c=function(){var b=a.document.createElement("script");b.onreadystatechange=function(){j(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null};a.document.documentElement.appendChild(b)}:c=function(){setTimeout(j,0)};else c=function(){process.nextTick(j)};var h,i=[];function j(){h=!0;var a,b,c=i.length;while(c){b=i;i=[];a=-1;while(++a<c)b[a]();c=i.length}h=!1}g.exports=k;function k(a){i.push(a)===1&&!h&&c()}}var i=!1;function j(){i||(i=!0,h());return g.exports}function b(a){switch(a){case void 0:return j()}}e.exports=b}),null);
/**
 * License: https://www.facebook.com/legal/license/Hnt8PzozZpk/
 */
__d("inherits-2.0.3",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){typeof Object.create==="function"?g.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:g.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype;a.prototype=new c();a.prototype.constructor=a}}var i=!1;function j(){i||(i=!0,h());return g.exports}c={};var k={exports:c};function l(){try{var a={};if(typeof a.inherits!=="function")throw"";k.exports=a.inherits}catch(a){k.exports=j()}}var m=!1;function n(){m||(m=!0,l());return k.exports}function a(a){switch(a){case void 0:return n()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("isarray-1.0.0",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){var a={}.toString;g.exports=Array.isArray||function(b){return a.call(b)=="[object Array]"}}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("lie-3.3.0",["immediate-3.0.6"],(function(a,b,c,d,e,f){"use strict";function a(a){return a&&typeof a==="object"&&"default"in a?a["default"]:a}var g=a(b("immediate-3.0.6"));d={};var h={exports:d};function i(){var a=g();function b(){}var c={},d=["REJECTED"],e=["FULFILLED"],f=["PENDING"];if(!process.browser)var i=["UNHANDLED"];h.exports=j;function j(a){if(typeof a!=="function")throw new TypeError("resolver must be a function");this.state=f;this.queue=[];this.outcome=void 0;process.browser||(this.handled=i);a!==b&&n(this,a)}j.prototype["finally"]=function(c){if(typeof c!=="function")return this;var d=this.constructor;return this.then(a,b);function a(a){function b(){return a}return d.resolve(c()).then(b)}function b(a){function b(){throw a}return d.resolve(c()).then(b)}};j.prototype["catch"]=function(a){return this.then(null,a)};j.prototype.then=function(a,c){if(typeof a!=="function"&&this.state===e||typeof c!=="function"&&this.state===d)return this;var g=new this.constructor(b);process.browser||this.handled===i&&(this.handled=null);if(this.state!==f){var h=this.state===e?a:c;l(g,h,this.outcome)}else this.queue.push(new k(g,a,c));return g};function k(a,b,c){this.promise=a,typeof b==="function"&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),typeof c==="function"&&(this.onRejected=c,this.callRejected=this.otherCallRejected)}k.prototype.callFulfilled=function(a){c.resolve(this.promise,a)};k.prototype.otherCallFulfilled=function(a){l(this.promise,this.onFulfilled,a)};k.prototype.callRejected=function(a){c.reject(this.promise,a)};k.prototype.otherCallRejected=function(a){l(this.promise,this.onRejected,a)};function l(b,d,e){a(function(){var a;try{a=d(e)}catch(a){return c.reject(b,a)}a===b?c.reject(b,new TypeError("Cannot resolve promise with itself")):c.resolve(b,a)})}c.resolve=function(a,b){var d=o(m,b);if(d.status==="error")return c.reject(a,d.value);d=d.value;if(d)n(a,d);else{a.state=e;a.outcome=b;d=-1;var f=a.queue.length;while(++d<f)a.queue[d].callFulfilled(b)}return a};c.reject=function(b,c){b.state=d;b.outcome=c;process.browser||b.handled===i&&a(function(){b.handled===i&&process.emit("unhandledRejection",c,b)});var e=-1,f=b.queue.length;while(++e<f)b.queue[e].callRejected(c);return b};function m(a){var b=a&&a.then;if(a&&(typeof a==="object"||typeof a==="function")&&typeof b==="function")return function(){b.apply(a,arguments)}}function n(a,b){var d=!1;function e(b){if(d)return;d=!0;c.reject(a,b)}function f(b){if(d)return;d=!0;c.resolve(a,b)}function g(){b(f,e)}g=o(g);g.status==="error"&&e(g.value)}function o(a,b){var c={};try{c.value=a(b),c.status="success"}catch(a){c.status="error",c.value=a}return c}j.resolve=p;function p(a){return a instanceof this?a:c.resolve(new this(b),a)}j.reject=q;function q(a){var d=new this(b);return c.reject(d,a)}j.all=r;function r(a){var d=this;if(Object.prototype.toString.call(a)!=="[object Array]")return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);var g=new Array(e),h=0,i=-1,j=new this(b);while(++i<e)k(a[i],i);return j;function k(b,a){d.resolve(b).then(i,function(a){f||(f=!0,c.reject(j,a))});function i(b){g[a]=b,++h===e&&!f&&(f=!0,c.resolve(j,g))}}}j.race=s;function s(a){var d=this;if(Object.prototype.toString.call(a)!=="[object Array]")return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);var g=-1,h=new this(b);while(++g<e)i(a[g]);return h;function i(a){d.resolve(a).then(function(a){f||(f=!0,c.resolve(h,a))},function(a){f||(f=!0,c.reject(h,a))})}}}var j=!1;function k(){j||(j=!0,i());return h.exports}function c(a){switch(a){case void 0:return k()}}e.exports=c}),null);
/**
 * License: https://www.facebook.com/legal/license/cr2jmG-CdKo/
 */
__d("pako-1.0.8",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){var a=typeof Uint8Array!=="undefined"&&typeof Uint16Array!=="undefined"&&typeof Int32Array!=="undefined";function b(a,b){return Object.prototype.hasOwnProperty.call(a,b)}g.assign=function(a){var c=Array.prototype.slice.call(arguments,1);while(c.length){var d=c.shift();if(!d)continue;if(typeof d!=="object")throw new TypeError(d+"must be non-object");for(var e in d)b(d,e)&&(a[e]=d[e])}return a};g.shrinkBuf=function(a,b){if(a.length===b)return a;if(a.subarray)return a.subarray(0,b);a.length=b;return a};var c={arraySet:function(a,b,c,d,e){if(b.subarray&&a.subarray){a.set(b.subarray(c,c+d),e);return}for(var f=0;f<d;f++)a[e+f]=b[c+f]},flattenChunks:function(a){var b,c,d,e,f;d=0;for(b=0,c=a.length;b<c;b++)d+=a[b].length;d=new Uint8Array(d);e=0;for(b=0,c=a.length;b<c;b++)f=a[b],d.set(f,e),e+=f.length;return d}},d={arraySet:function(a,b,c,d,e){for(var f=0;f<d;f++)a[e+f]=b[c+f]},flattenChunks:function(a){return[].concat.apply([],a)}};g.setTyped=function(a){a?(g.Buf8=Uint8Array,g.Buf16=Uint16Array,g.Buf32=Int32Array,g.assign(g,c)):(g.Buf8=Array,g.Buf16=Array,g.Buf32=Array,g.assign(g,d))};g.setTyped(a)}var j=!1;function k(){j||(j=!0,i());return h.exports}var l={},m={exports:l};function n(){var a=k(),b=4,c=0,d=1,e=2;function f(a){var b=a.length;while(--b>=0)a[b]=0}var g=0,h=1,i=2,j=3,m=258,n=29,o=256,p=o+1+n,q=30,r=19,aa=2*p+1,s=15,t=16,u=7,v=256,w=16,x=17,y=18,z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],A=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ba=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ca=512,C=new Array((p+2)*2);f(C);var da=new Array(q*2);f(da);var D=new Array(ca);f(D);var ea=new Array(m-j+1);f(ea);var fa=new Array(n);f(fa);var E=new Array(q);f(E);function ga(a,b,c,d,e){this.static_tree=a,this.extra_bits=b,this.extra_base=c,this.elems=d,this.max_length=e,this.has_stree=a&&a.length}var ha,F,G;function H(a,b){this.dyn_tree=a,this.max_code=0,this.stat_desc=b}function ia(a){return a<256?D[a]:D[256+(a>>>7)]}function ja(a,b){a.pending_buf[a.pending++]=b&255,a.pending_buf[a.pending++]=b>>>8&255}function I(a,b,c){a.bi_valid>t-c?(a.bi_buf|=b<<a.bi_valid&65535,ja(a,a.bi_buf),a.bi_buf=b>>t-a.bi_valid,a.bi_valid+=c-t):(a.bi_buf|=b<<a.bi_valid&65535,a.bi_valid+=c)}function J(a,b,c){I(a,c[b*2],c[b*2+1])}function ka(a,b){var c=0;do c|=a&1,a>>>=1,c<<=1;while(--b>0);return c>>>1}function la(a){a.bi_valid===16?(ja(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=a.bi_buf&255,a.bi_buf>>=8,a.bi_valid-=8)}function ma(a,b){var c=b.dyn_tree,d=b.max_code,e=b.stat_desc.static_tree,f=b.stat_desc.has_stree,g=b.stat_desc.extra_bits,h=b.stat_desc.extra_base;b=b.stat_desc.max_length;var i,j,k,l,m,n=0;for(k=0;k<=s;k++)a.bl_count[k]=0;c[a.heap[a.heap_max]*2+1]=0;for(i=a.heap_max+1;i<aa;i++){j=a.heap[i];k=c[c[j*2+1]*2+1]+1;k>b&&(k=b,n++);c[j*2+1]=k;if(j>d)continue;a.bl_count[k]++;l=0;j>=h&&(l=g[j-h]);m=c[j*2];a.opt_len+=m*(k+l);f&&(a.static_len+=m*(e[j*2+1]+l))}if(n===0)return;do{k=b-1;while(a.bl_count[k]===0)k--;a.bl_count[k]--;a.bl_count[k+1]+=2;a.bl_count[b]--;n-=2}while(n>0);for(k=b;k!==0;k--){j=a.bl_count[k];while(j!==0){m=a.heap[--i];if(m>d)continue;c[m*2+1]!==k&&(a.opt_len+=(k-c[m*2+1])*c[m*2],c[m*2+1]=k);j--}}}function na(a,b,c){var d=new Array(s+1),e=0,f;for(f=1;f<=s;f++)d[f]=e=e+c[f-1]<<1;for(f=0;f<=b;f++){c=a[f*2+1];if(c===0)continue;a[f*2]=ka(d[c]++,c)}}function K(){var a,b,c,d=new Array(s+1);b=0;for(c=0;c<n-1;c++){fa[c]=b;for(a=0;a<1<<z[c];a++)ea[b++]=c}ea[b-1]=c;b=0;for(c=0;c<16;c++){E[c]=b;for(a=0;a<1<<A[c];a++)D[b++]=c}b>>=7;for(;c<q;c++){E[c]=b<<7;for(a=0;a<1<<A[c]-7;a++)D[256+b++]=c}for(c=0;c<=s;c++)d[c]=0;a=0;while(a<=143)C[a*2+1]=8,a++,d[8]++;while(a<=255)C[a*2+1]=9,a++,d[9]++;while(a<=279)C[a*2+1]=7,a++,d[7]++;while(a<=287)C[a*2+1]=8,a++,d[8]++;na(C,p+1,d);for(a=0;a<q;a++)da[a*2+1]=5,da[a*2]=ka(a,5);ha=new ga(C,z,o+1,p,s);F=new ga(da,A,0,q,s);G=new ga(new Array(0),B,0,r,u)}function oa(a){var b;for(b=0;b<p;b++)a.dyn_ltree[b*2]=0;for(b=0;b<q;b++)a.dyn_dtree[b*2]=0;for(b=0;b<r;b++)a.bl_tree[b*2]=0;a.dyn_ltree[v*2]=1;a.opt_len=a.static_len=0;a.last_lit=a.matches=0}function L(a){a.bi_valid>8?ja(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0}function pa(b,c,d,e){L(b),e&&(ja(b,d),ja(b,~d)),a.arraySet(b.pending_buf,b.window,c,d,b.pending),b.pending+=d}function qa(a,b,c,d){var e=b*2,f=c*2;return a[e]<a[f]||a[e]===a[f]&&d[b]<=d[c]}function M(a,b,c){var d=a.heap[c],e=c<<1;while(e<=a.heap_len){e<a.heap_len&&qa(b,a.heap[e+1],a.heap[e],a.depth)&&e++;if(qa(b,d,a.heap[e],a.depth))break;a.heap[c]=a.heap[e];c=e;e<<=1}a.heap[c]=d}function ra(a,b,c){var d,e,f=0,g,h;if(a.last_lit!==0)do d=a.pending_buf[a.d_buf+f*2]<<8|a.pending_buf[a.d_buf+f*2+1],e=a.pending_buf[a.l_buf+f],f++,d===0?J(a,e,b):(g=ea[e],J(a,g+o+1,b),h=z[g],h!==0&&(e-=fa[g],I(a,e,h)),d--,g=ia(d),J(a,g,c),h=A[g],h!==0&&(d-=E[g],I(a,d,h)));while(f<a.last_lit);J(a,v,b)}function N(a,b){var c=b.dyn_tree,d=b.stat_desc.static_tree,e=b.stat_desc.has_stree,f=b.stat_desc.elems,g,h=-1,i;a.heap_len=0;a.heap_max=aa;for(g=0;g<f;g++)c[g*2]!==0?(a.heap[++a.heap_len]=h=g,a.depth[g]=0):c[g*2+1]=0;while(a.heap_len<2)i=a.heap[++a.heap_len]=h<2?++h:0,c[i*2]=1,a.depth[i]=0,a.opt_len--,e&&(a.static_len-=d[i*2+1]);b.max_code=h;for(g=a.heap_len>>1;g>=1;g--)M(a,c,g);i=f;do g=a.heap[1],a.heap[1]=a.heap[a.heap_len--],M(a,c,1),e=a.heap[1],a.heap[--a.heap_max]=g,a.heap[--a.heap_max]=e,c[i*2]=c[g*2]+c[e*2],a.depth[i]=(a.depth[g]>=a.depth[e]?a.depth[g]:a.depth[e])+1,c[g*2+1]=c[e*2+1]=i,a.heap[1]=i++,M(a,c,1);while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1];ma(a,b);na(c,h,a.bl_count)}function O(a,b,c){var d,e=-1,f,g=b[0*2+1],h=0,i=7,j=4;g===0&&(i=138,j=3);b[(c+1)*2+1]=65535;for(d=0;d<=c;d++){f=g;g=b[(d+1)*2+1];if(++h<i&&f===g)continue;else h<j?a.bl_tree[f*2]+=h:f!==0?(f!==e&&a.bl_tree[f*2]++,a.bl_tree[w*2]++):h<=10?a.bl_tree[x*2]++:a.bl_tree[y*2]++;h=0;e=f;g===0?(i=138,j=3):f===g?(i=6,j=3):(i=7,j=4)}}function P(a,b,c){var d,e=-1,f,g=b[0*2+1],h=0,i=7,j=4;g===0&&(i=138,j=3);for(d=0;d<=c;d++){f=g;g=b[(d+1)*2+1];if(++h<i&&f===g)continue;else if(h<j)do J(a,f,a.bl_tree);while(--h!==0);else f!==0?(f!==e&&(J(a,f,a.bl_tree),h--),J(a,w,a.bl_tree),I(a,h-3,2)):h<=10?(J(a,x,a.bl_tree),I(a,h-3,3)):(J(a,y,a.bl_tree),I(a,h-11,7));h=0;e=f;g===0?(i=138,j=3):f===g?(i=6,j=3):(i=7,j=4)}}function Q(a){var b;O(a,a.dyn_ltree,a.l_desc.max_code);O(a,a.dyn_dtree,a.d_desc.max_code);N(a,a.bl_desc);for(b=r-1;b>=3;b--)if(a.bl_tree[ba[b]*2+1]!==0)break;a.opt_len+=3*(b+1)+5+5+4;return b}function sa(a,b,c,d){var e;I(a,b-257,5);I(a,c-1,5);I(a,d-4,4);for(e=0;e<d;e++)I(a,a.bl_tree[ba[e]*2+1],3);P(a,a.dyn_ltree,b-1);P(a,a.dyn_dtree,c-1)}function R(a){var b=4093624447,e;for(e=0;e<=31;e++,b>>>=1)if(b&1&&a.dyn_ltree[e*2]!==0)return c;if(a.dyn_ltree[9*2]!==0||a.dyn_ltree[10*2]!==0||a.dyn_ltree[13*2]!==0)return d;for(e=32;e<o;e++)if(a.dyn_ltree[e*2]!==0)return d;return c}var ta=!1;function S(a){ta||(K(),ta=!0),a.l_desc=new H(a.dyn_ltree,ha),a.d_desc=new H(a.dyn_dtree,F),a.bl_desc=new H(a.bl_tree,G),a.bi_buf=0,a.bi_valid=0,oa(a)}function T(a,b,c,d){I(a,(g<<1)+(d?1:0),3),pa(a,b,c,!0)}function U(a){I(a,h<<1,3),J(a,v,C),la(a)}function V(a,c,d,f){var g,j,k=0;a.level>0?(a.strm.data_type===e&&(a.strm.data_type=R(a)),N(a,a.l_desc),N(a,a.d_desc),k=Q(a),g=a.opt_len+3+7>>>3,j=a.static_len+3+7>>>3,j<=g&&(g=j)):g=j=d+5;d+4<=g&&c!==-1?T(a,c,d,f):a.strategy===b||j===g?(I(a,(h<<1)+(f?1:0),3),ra(a,C,da)):(I(a,(i<<1)+(f?1:0),3),sa(a,a.l_desc.max_code+1,a.d_desc.max_code+1,k+1),ra(a,a.dyn_ltree,a.dyn_dtree));oa(a);f&&L(a)}function W(a,b,c){a.pending_buf[a.d_buf+a.last_lit*2]=b>>>8&255;a.pending_buf[a.d_buf+a.last_lit*2+1]=b&255;a.pending_buf[a.l_buf+a.last_lit]=c&255;a.last_lit++;b===0?a.dyn_ltree[c*2]++:(a.matches++,b--,a.dyn_ltree[(ea[c]+o+1)*2]++,a.dyn_dtree[ia(b)*2]++);return a.last_lit===a.lit_bufsize-1}l._tr_init=S;l._tr_stored_block=T;l._tr_flush_block=V;l._tr_tally=W;l._tr_align=U}var o=!1;function p(){o||(o=!0,n());return m.exports}b={};var q={exports:b};function r(){function a(a,b,c,d){var e=a&65535|0;a=a>>>16&65535|0;var f;while(c!==0){f=c>2e3?2e3:c;c-=f;do e=e+b[d++]|0,a=a+e|0;while(--f);e%=65521;a%=65521}return e|a<<16|0}q.exports=a}var aa=!1;function s(){aa||(aa=!0,r());return q.exports}c={};var t={exports:c};function u(){function a(){var a,b=[];for(var c=0;c<256;c++){a=c;for(var d=0;d<8;d++)a=a&1?3988292384^a>>>1:a>>>1;b[c]=a}return b}var b=a();function c(a,c,d,e){var f=b;d=e+d;a^=-1;for(e=e;e<d;e++)a=a>>>8^f[(a^c[e])&255];return a^-1}t.exports=c}var v=!1;function w(){v||(v=!0,u());return t.exports}d={};var x={exports:d};function y(){x.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}}var z=!1;function A(){z||(z=!0,y());return x.exports}var B={},ba={exports:B};function ca(){var a=k(),b=p(),c=s(),d=w(),e=A(),f=0,g=1,h=3,i=4,j=5,l=0,m=1,n=-2,o=-3,q=-5,r=-1,aa=1,t=2,u=3,v=4,x=0,y=2,z=8,ba=9,ca=15,C=8,da=29,D=256,ea=D+1+da,fa=30,E=19,ga=2*ea+1,ha=15,F=3,G=258,H=G+F+1,ia=32,ja=42,I=69,J=73,ka=91,la=103,ma=113,na=666,K=1,oa=2,L=3,pa=4,qa=3;function M(a,b){a.msg=e[b];return b}function ra(a){return(a<<1)-(a>4?9:0)}function N(a){var b=a.length;while(--b>=0)a[b]=0}function O(b){var c=b.state,d=c.pending;d>b.avail_out&&(d=b.avail_out);if(d===0)return;a.arraySet(b.output,c.pending_buf,c.pending_out,d,b.next_out);b.next_out+=d;c.pending_out+=d;b.total_out+=d;b.avail_out-=d;c.pending-=d;c.pending===0&&(c.pending_out=0)}function P(a,c){b._tr_flush_block(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,c),a.block_start=a.strstart,O(a.strm)}function Q(a,b){a.pending_buf[a.pending++]=b}function sa(a,b){a.pending_buf[a.pending++]=b>>>8&255,a.pending_buf[a.pending++]=b&255}function R(b,e,f,g){var h=b.avail_in;h>g&&(h=g);if(h===0)return 0;b.avail_in-=h;a.arraySet(e,b.input,b.next_in,h,f);b.state.wrap===1?b.adler=c(b.adler,e,h,f):b.state.wrap===2&&(b.adler=d(b.adler,e,h,f));b.next_in+=h;b.total_in+=h;return h}function ta(a,b){var c=a.max_chain_length,d=a.strstart,e,f=a.prev_length,g=a.nice_match,h=a.strstart>a.w_size-H?a.strstart-(a.w_size-H):0,i=a.window,j=a.w_mask,k=a.prev,l=a.strstart+G,m=i[d+f-1],n=i[d+f];a.prev_length>=a.good_match&&(c>>=2);g>a.lookahead&&(g=a.lookahead);do{e=b;if(i[e+f]!==n||i[e+f-1]!==m||i[e]!==i[d]||i[++e]!==i[d+1])continue;d+=2;e++;do;while(i[++d]===i[++e]&&i[++d]===i[++e]&&i[++d]===i[++e]&&i[++d]===i[++e]&&i[++d]===i[++e]&&i[++d]===i[++e]&&i[++d]===i[++e]&&i[++d]===i[++e]&&d<l);e=G-(l-d);d=l-G;if(e>f){a.match_start=b;f=e;if(e>=g)break;m=i[d+f-1];n=i[d+f]}}while((b=k[b&j])>h&&--c!==0);return f<=a.lookahead?f:a.lookahead}function S(b){var c=b.w_size,d,e,f,g;do{g=b.window_size-b.lookahead-b.strstart;if(b.strstart>=c+(c-H)){a.arraySet(b.window,b.window,c,c,0);b.match_start-=c;b.strstart-=c;b.block_start-=c;e=b.hash_size;d=e;do f=b.head[--d],b.head[d]=f>=c?f-c:0;while(--e);e=c;d=e;do f=b.prev[--d],b.prev[d]=f>=c?f-c:0;while(--e);g+=c}if(b.strm.avail_in===0)break;e=R(b.strm,b.window,b.strstart+b.lookahead,g);b.lookahead+=e;if(b.lookahead+b.insert>=F){f=b.strstart-b.insert;b.ins_h=b.window[f];b.ins_h=(b.ins_h<<b.hash_shift^b.window[f+1])&b.hash_mask;while(b.insert){b.ins_h=(b.ins_h<<b.hash_shift^b.window[f+F-1])&b.hash_mask;b.prev[f&b.w_mask]=b.head[b.ins_h];b.head[b.ins_h]=f;f++;b.insert--;if(b.lookahead+b.insert<F)break}}}while(b.lookahead<H&&b.strm.avail_in!==0)}function T(a,b){var c=65535;c>a.pending_buf_size-5&&(c=a.pending_buf_size-5);for(;;){if(a.lookahead<=1){S(a);if(a.lookahead===0&&b===f)return K;if(a.lookahead===0)break}a.strstart+=a.lookahead;a.lookahead=0;var d=a.block_start+c;if(a.strstart===0||a.strstart>=d){a.lookahead=a.strstart-d;a.strstart=d;P(a,!1);if(a.strm.avail_out===0)return K}if(a.strstart-a.block_start>=a.w_size-H){P(a,!1);if(a.strm.avail_out===0)return K}}a.insert=0;if(b===i){P(a,!0);return a.strm.avail_out===0?L:pa}if(a.strstart>a.block_start){P(a,!1);if(a.strm.avail_out===0)return K}return K}function U(a,c){var d;for(;;){if(a.lookahead<H){S(a);if(a.lookahead<H&&c===f)return K;if(a.lookahead===0)break}d=0;a.lookahead>=F&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+F-1])&a.hash_mask,d=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);d!==0&&a.strstart-d<=a.w_size-H&&(a.match_length=ta(a,d));if(a.match_length>=F){d=b._tr_tally(a,a.strstart-a.match_start,a.match_length-F);a.lookahead-=a.match_length;if(a.match_length<=a.max_lazy_match&&a.lookahead>=F){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+F-1])&a.hash_mask,a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(--a.match_length!==0);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask}else d=b._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(d){P(a,!1);if(a.strm.avail_out===0)return K}}a.insert=a.strstart<F-1?a.strstart:F-1;if(c===i){P(a,!0);return a.strm.avail_out===0?L:pa}if(a.last_lit){P(a,!1);if(a.strm.avail_out===0)return K}return oa}function V(a,c){var d,e;for(;;){if(a.lookahead<H){S(a);if(a.lookahead<H&&c===f)return K;if(a.lookahead===0)break}d=0;a.lookahead>=F&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+F-1])&a.hash_mask,d=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);a.prev_length=a.match_length;a.prev_match=a.match_start;a.match_length=F-1;d!==0&&a.prev_length<a.max_lazy_match&&a.strstart-d<=a.w_size-H&&(a.match_length=ta(a,d),a.match_length<=5&&(a.strategy===aa||a.match_length===F&&a.strstart-a.match_start>4096)&&(a.match_length=F-1));if(a.prev_length>=F&&a.match_length<=a.prev_length){d=a.strstart+a.lookahead-F;e=b._tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-F);a.lookahead-=a.prev_length-1;a.prev_length-=2;do++a.strstart<=d&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+F-1])&a.hash_mask,a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(--a.prev_length!==0);a.match_available=0;a.match_length=F-1;a.strstart++;if(e){P(a,!1);if(a.strm.avail_out===0)return K}}else if(a.match_available){e=b._tr_tally(a,0,a.window[a.strstart-1]);e&&P(a,!1);a.strstart++;a.lookahead--;if(a.strm.avail_out===0)return K}else a.match_available=1,a.strstart++,a.lookahead--}a.match_available&&(b._tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0);a.insert=a.strstart<F-1?a.strstart:F-1;if(c===i){P(a,!0);return a.strm.avail_out===0?L:pa}if(a.last_lit){P(a,!1);if(a.strm.avail_out===0)return K}return oa}function W(a,c){var d,e,g,h=a.window;for(;;){if(a.lookahead<=G){S(a);if(a.lookahead<=G&&c===f)return K;if(a.lookahead===0)break}a.match_length=0;if(a.lookahead>=F&&a.strstart>0){e=a.strstart-1;d=h[e];if(d===h[++e]&&d===h[++e]&&d===h[++e]){g=a.strstart+G;do;while(d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&e<g);a.match_length=G-(g-e);a.match_length>a.lookahead&&(a.match_length=a.lookahead)}}a.match_length>=F?(d=b._tr_tally(a,1,a.match_length-F),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(d=b._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++);if(d){P(a,!1);if(a.strm.avail_out===0)return K}}a.insert=0;if(c===i){P(a,!0);return a.strm.avail_out===0?L:pa}if(a.last_lit){P(a,!1);if(a.strm.avail_out===0)return K}return oa}function X(a,c){var d;for(;;){if(a.lookahead===0){S(a);if(a.lookahead===0){if(c===f)return K;break}}a.match_length=0;d=b._tr_tally(a,0,a.window[a.strstart]);a.lookahead--;a.strstart++;if(d){P(a,!1);if(a.strm.avail_out===0)return K}}a.insert=0;if(c===i){P(a,!0);return a.strm.avail_out===0?L:pa}if(a.last_lit){P(a,!1);if(a.strm.avail_out===0)return K}return oa}function ua(a,b,c,d,e){this.good_length=a,this.max_lazy=b,this.nice_length=c,this.max_chain=d,this.func=e}var va;va=[new ua(0,0,0,0,T),new ua(4,4,8,4,U),new ua(4,5,16,8,U),new ua(4,6,32,32,U),new ua(4,4,16,16,V),new ua(8,16,32,32,V),new ua(8,16,128,128,V),new ua(8,32,128,256,V),new ua(32,128,258,1024,V),new ua(32,258,258,4096,V)];function wa(a){a.window_size=2*a.w_size,N(a.head),a.max_lazy_match=va[a.level].max_lazy,a.good_match=va[a.level].good_length,a.nice_match=va[a.level].nice_length,a.max_chain_length=va[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=F-1,a.match_available=0,a.ins_h=0}function Y(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=z,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(ga*2),this.dyn_dtree=new a.Buf16((2*fa+1)*2),this.bl_tree=new a.Buf16((2*E+1)*2),N(this.dyn_ltree),N(this.dyn_dtree),N(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(ha+1),this.heap=new a.Buf16(2*ea+1),N(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*ea+1),N(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function xa(a){var c;if(!a||!a.state)return M(a,n);a.total_in=a.total_out=0;a.data_type=y;c=a.state;c.pending=0;c.pending_out=0;c.wrap<0&&(c.wrap=-c.wrap);c.status=c.wrap?ja:ma;a.adler=c.wrap===2?0:1;c.last_flush=f;b._tr_init(c);return l}function Z(a){var b=xa(a);b===l&&wa(a.state);return b}function $(a,b){if(!a||!a.state)return n;if(a.state.wrap!==2)return n;a.state.gzhead=b;return l}function ya(b,c,d,e,f,g){if(!b)return n;var h=1;c===r&&(c=6);e<0?(h=0,e=-e):e>15&&(h=2,e-=16);if(f<1||f>ba||d!==z||e<8||e>15||c<0||c>9||g<0||g>v)return M(b,n);e===8&&(e=9);var i=new Y();b.state=i;i.strm=b;i.wrap=h;i.gzhead=null;i.w_bits=e;i.w_size=1<<i.w_bits;i.w_mask=i.w_size-1;i.hash_bits=f+7;i.hash_size=1<<i.hash_bits;i.hash_mask=i.hash_size-1;i.hash_shift=~~((i.hash_bits+F-1)/F);i.window=new a.Buf8(i.w_size*2);i.head=new a.Buf16(i.hash_size);i.prev=new a.Buf16(i.w_size);i.lit_bufsize=1<<f+6;i.pending_buf_size=i.lit_bufsize*4;i.pending_buf=new a.Buf8(i.pending_buf_size);i.d_buf=1*i.lit_bufsize;i.l_buf=(1+2)*i.lit_bufsize;i.level=c;i.strategy=g;i.method=d;return Z(b)}function za(a,b){return ya(a,b,z,ca,C,x)}function Aa(a,c){var e,k;if(!a||!a.state||c>j||c<0)return a?M(a,n):n;k=a.state;if(!a.output||!a.input&&a.avail_in!==0||k.status===na&&c!==i)return M(a,a.avail_out===0?q:n);k.strm=a;e=k.last_flush;k.last_flush=c;if(k.status===ja)if(k.wrap===2)a.adler=0,Q(k,31),Q(k,139),Q(k,8),!k.gzhead?(Q(k,0),Q(k,0),Q(k,0),Q(k,0),Q(k,0),Q(k,k.level===9?2:k.strategy>=t||k.level<2?4:0),Q(k,qa),k.status=ma):(Q(k,(k.gzhead.text?1:0)+(k.gzhead.hcrc?2:0)+(k.gzhead.extra?4:0)+(k.gzhead.name?8:0)+(k.gzhead.comment?16:0)),Q(k,k.gzhead.time&255),Q(k,k.gzhead.time>>8&255),Q(k,k.gzhead.time>>16&255),Q(k,k.gzhead.time>>24&255),Q(k,k.level===9?2:k.strategy>=t||k.level<2?4:0),Q(k,k.gzhead.os&255),k.gzhead.extra&&k.gzhead.extra.length&&(Q(k,k.gzhead.extra.length&255),Q(k,k.gzhead.extra.length>>8&255)),k.gzhead.hcrc&&(a.adler=d(a.adler,k.pending_buf,k.pending,0)),k.gzindex=0,k.status=I);else{var o=z+(k.w_bits-8<<4)<<8,p;k.strategy>=t||k.level<2?p=0:k.level<6?p=1:k.level===6?p=2:p=3;o|=p<<6;k.strstart!==0&&(o|=ia);o+=31-o%31;k.status=ma;sa(k,o);k.strstart!==0&&(sa(k,a.adler>>>16),sa(k,a.adler&65535));a.adler=1}if(k.status===I)if(k.gzhead.extra){p=k.pending;while(k.gzindex<(k.gzhead.extra.length&65535)){if(k.pending===k.pending_buf_size){k.gzhead.hcrc&&k.pending>p&&(a.adler=d(a.adler,k.pending_buf,k.pending-p,p));O(a);p=k.pending;if(k.pending===k.pending_buf_size)break}Q(k,k.gzhead.extra[k.gzindex]&255);k.gzindex++}k.gzhead.hcrc&&k.pending>p&&(a.adler=d(a.adler,k.pending_buf,k.pending-p,p));k.gzindex===k.gzhead.extra.length&&(k.gzindex=0,k.status=J)}else k.status=J;if(k.status===J)if(k.gzhead.name){p=k.pending;do{if(k.pending===k.pending_buf_size){k.gzhead.hcrc&&k.pending>p&&(a.adler=d(a.adler,k.pending_buf,k.pending-p,p));O(a);p=k.pending;if(k.pending===k.pending_buf_size){o=1;break}}k.gzindex<k.gzhead.name.length?o=k.gzhead.name.charCodeAt(k.gzindex++)&255:o=0;Q(k,o)}while(o!==0);k.gzhead.hcrc&&k.pending>p&&(a.adler=d(a.adler,k.pending_buf,k.pending-p,p));o===0&&(k.gzindex=0,k.status=ka)}else k.status=ka;if(k.status===ka)if(k.gzhead.comment){p=k.pending;do{if(k.pending===k.pending_buf_size){k.gzhead.hcrc&&k.pending>p&&(a.adler=d(a.adler,k.pending_buf,k.pending-p,p));O(a);p=k.pending;if(k.pending===k.pending_buf_size){o=1;break}}k.gzindex<k.gzhead.comment.length?o=k.gzhead.comment.charCodeAt(k.gzindex++)&255:o=0;Q(k,o)}while(o!==0);k.gzhead.hcrc&&k.pending>p&&(a.adler=d(a.adler,k.pending_buf,k.pending-p,p));o===0&&(k.status=la)}else k.status=la;k.status===la&&(k.gzhead.hcrc?(k.pending+2>k.pending_buf_size&&O(a),k.pending+2<=k.pending_buf_size&&(Q(k,a.adler&255),Q(k,a.adler>>8&255),a.adler=0,k.status=ma)):k.status=ma);if(k.pending!==0){O(a);if(a.avail_out===0){k.last_flush=-1;return l}}else if(a.avail_in===0&&ra(c)<=ra(e)&&c!==i)return M(a,q);if(k.status===na&&a.avail_in!==0)return M(a,q);if(a.avail_in!==0||k.lookahead!==0||c!==f&&k.status!==na){p=k.strategy===t?X(k,c):k.strategy===u?W(k,c):va[k.level].func(k,c);(p===L||p===pa)&&(k.status=na);if(p===K||p===L){a.avail_out===0&&(k.last_flush=-1);return l}if(p===oa){c===g?b._tr_align(k):c!==j&&(b._tr_stored_block(k,0,0,!1),c===h&&(N(k.head),k.lookahead===0&&(k.strstart=0,k.block_start=0,k.insert=0)));O(a);if(a.avail_out===0){k.last_flush=-1;return l}}}if(c!==i)return l;if(k.wrap<=0)return m;k.wrap===2?(Q(k,a.adler&255),Q(k,a.adler>>8&255),Q(k,a.adler>>16&255),Q(k,a.adler>>24&255),Q(k,a.total_in&255),Q(k,a.total_in>>8&255),Q(k,a.total_in>>16&255),Q(k,a.total_in>>24&255)):(sa(k,a.adler>>>16),sa(k,a.adler&65535));O(a);k.wrap>0&&(k.wrap=-k.wrap);return k.pending!==0?l:m}function Ba(a){var b;if(!a||!a.state)return n;b=a.state.status;if(b!==ja&&b!==I&&b!==J&&b!==ka&&b!==la&&b!==ma&&b!==na)return M(a,n);a.state=null;return b===ma?M(a,o):l}function Ca(b,d){var e=d.length,f,g,h,i,j;if(!b||!b.state)return n;f=b.state;g=f.wrap;if(g===2||g===1&&f.status!==ja||f.lookahead)return n;g===1&&(b.adler=c(b.adler,d,e,0));f.wrap=0;e>=f.w_size&&(g===0&&(N(f.head),f.strstart=0,f.block_start=0,f.insert=0),j=new a.Buf8(f.w_size),a.arraySet(j,d,e-f.w_size,f.w_size,0),d=j,e=f.w_size);j=b.avail_in;h=b.next_in;i=b.input;b.avail_in=e;b.next_in=0;b.input=d;S(f);while(f.lookahead>=F){e=f.strstart;d=f.lookahead-(F-1);do f.ins_h=(f.ins_h<<f.hash_shift^f.window[e+F-1])&f.hash_mask,f.prev[e&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=e,e++;while(--d);f.strstart=e;f.lookahead=F-1;S(f)}f.strstart+=f.lookahead;f.block_start=f.strstart;f.insert=f.lookahead;f.lookahead=0;f.match_length=f.prev_length=F-1;f.match_available=0;b.next_in=h;b.input=i;b.avail_in=j;f.wrap=g;return l}B.deflateInit=za;B.deflateInit2=ya;B.deflateReset=Z;B.deflateResetKeep=xa;B.deflateSetHeader=$;B.deflate=Aa;B.deflateEnd=Ba;B.deflateSetDictionary=Ca;B.deflateInfo="pako deflate (from Nodeca project)"}var C=!1;function da(){C||(C=!0,ca());return ba.exports}var D={},ea={exports:D};function fa(){var a=k(),b=!0,c=!0;try{String.fromCharCode.apply(null,[0])}catch(a){b=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(a){c=!1}var d=new a.Buf8(256);for(var e=0;e<256;e++)d[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;d[254]=d[254]=1;D.string2buf=function(b){var c,d,e,f,g,h=b.length,i=0;for(f=0;f<h;f++)d=b.charCodeAt(f),(d&64512)===55296&&f+1<h&&(e=b.charCodeAt(f+1),(e&64512)===56320&&(d=65536+(d-55296<<10)+(e-56320),f++)),i+=d<128?1:d<2048?2:d<65536?3:4;c=new a.Buf8(i);for(g=0,f=0;g<i;f++)d=b.charCodeAt(f),(d&64512)===55296&&f+1<h&&(e=b.charCodeAt(f+1),(e&64512)===56320&&(d=65536+(d-55296<<10)+(e-56320),f++)),d<128?c[g++]=d:d<2048?(c[g++]=192|d>>>6,c[g++]=128|d&63):d<65536?(c[g++]=224|d>>>12,c[g++]=128|d>>>6&63,c[g++]=128|d&63):(c[g++]=240|d>>>18,c[g++]=128|d>>>12&63,c[g++]=128|d>>>6&63,c[g++]=128|d&63);return c};function f(d,e){if(e<65534&&(d.subarray&&c||!d.subarray&&b))return String.fromCharCode.apply(null,a.shrinkBuf(d,e));var f="";for(var g=0;g<e;g++)f+=String.fromCharCode(d[g]);return f}D.buf2binstring=function(a){return f(a,a.length)};D.binstring2buf=function(b){var c=new a.Buf8(b.length);for(var d=0,e=c.length;d<e;d++)c[d]=b.charCodeAt(d);return c};D.buf2string=function(a,b){var c,e,g,h;b=b||a.length;var i=new Array(b*2);for(e=0,c=0;c<b;){g=a[c++];if(g<128){i[e++]=g;continue}h=d[g];if(h>4){i[e++]=65533;c+=h-1;continue}g&=h===2?31:h===3?15:7;while(h>1&&c<b)g=g<<6|a[c++]&63,h--;if(h>1){i[e++]=65533;continue}g<65536?i[e++]=g:(g-=65536,i[e++]=55296|g>>10&1023,i[e++]=56320|g&1023)}return f(i,e)};D.utf8border=function(a,b){var c;b=b||a.length;b>a.length&&(b=a.length);c=b-1;while(c>=0&&(a[c]&192)===128)c--;if(c<0)return b;return c===0?b:c+d[a[c]]>b?c:b}}var E=!1;function ga(){E||(E=!0,fa());return ea.exports}f={};var ha={exports:f};function F(){function a(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}ha.exports=a}var G=!1;function H(){G||(G=!0,F());return ha.exports}var ia={},ja={exports:ia};function I(){var a=da(),b=k(),c=ga(),d=A(),e=H(),f=Object.prototype.toString,g=0,h=4,i=0,j=1,l=2,m=-1,n=0,o=8;function p(g){if(!(this instanceof p))return new p(g);this.options=b.assign({level:m,method:o,chunkSize:16384,windowBits:15,memLevel:8,strategy:n,to:""},g||{});g=this.options;g.raw&&g.windowBits>0?g.windowBits=-g.windowBits:g.gzip&&g.windowBits>0&&g.windowBits<16&&(g.windowBits+=16);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new e();this.strm.avail_out=0;var h=a.deflateInit2(this.strm,g.level,g.method,g.windowBits,g.memLevel,g.strategy);if(h!==i)throw new Error(d[h]);g.header&&a.deflateSetHeader(this.strm,g.header);if(g.dictionary){var j;typeof g.dictionary==="string"?j=c.string2buf(g.dictionary):f.call(g.dictionary)==="[object ArrayBuffer]"?j=new Uint8Array(g.dictionary):j=g.dictionary;h=a.deflateSetDictionary(this.strm,j);if(h!==i)throw new Error(d[h]);this._dict_set=!0}}p.prototype.push=function(d,e){var k=this.strm,m=this.options.chunkSize;if(this.ended)return!1;e=e===~~e?e:e===!0?h:g;typeof d==="string"?k.input=c.string2buf(d):f.call(d)==="[object ArrayBuffer]"?k.input=new Uint8Array(d):k.input=d;k.next_in=0;k.avail_in=k.input.length;do{k.avail_out===0&&(k.output=new b.Buf8(m),k.next_out=0,k.avail_out=m);d=a.deflate(k,e);if(d!==j&&d!==i){this.onEnd(d);this.ended=!0;return!1}(k.avail_out===0||k.avail_in===0&&(e===h||e===l))&&(this.options.to==="string"?this.onData(c.buf2binstring(b.shrinkBuf(k.output,k.next_out))):this.onData(b.shrinkBuf(k.output,k.next_out)))}while((k.avail_in>0||k.avail_out===0)&&d!==j);if(e===h){d=a.deflateEnd(this.strm);this.onEnd(d);this.ended=!0;return d===i}if(e===l){this.onEnd(i);k.avail_out=0;return!0}return!0};p.prototype.onData=function(a){this.chunks.push(a)};p.prototype.onEnd=function(a){a===i&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=b.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};function q(a,b){b=new p(b);b.push(a,!0);if(b.err)throw b.msg||d[b.err];return b.result}function r(a,b){b=b||{};b.raw=!0;return q(a,b)}function aa(a,b){b=b||{};b.gzip=!0;return q(a,b)}ia.Deflate=p;ia.deflate=q;ia.deflateRaw=r;ia.gzip=aa}var J=!1;function ka(){J||(J=!0,I());return ja.exports}b={};var la={exports:b};function ma(){var a=30,b=12;la.exports=function(c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,aa,s,t,u,v,w,x,y,z,A;e=c.state;f=c.next_in;z=c.input;g=f+(c.avail_in-5);h=c.next_out;A=c.output;d=h-(d-c.avail_out);i=h+(c.avail_out-257);j=e.dmax;k=e.wsize;l=e.whave;m=e.wnext;n=e.window;o=e.hold;p=e.bits;q=e.lencode;r=e.distcode;aa=(1<<e.lenbits)-1;s=(1<<e.distbits)-1;top:do{p<15&&(o+=z[f++]<<p,p+=8,o+=z[f++]<<p,p+=8);t=q[o&aa];dolen:for(;;){u=t>>>24;o>>>=u;p-=u;u=t>>>16&255;if(u===0)A[h++]=t&65535;else if(u&16){v=t&65535;u&=15;u&&(p<u&&(o+=z[f++]<<p,p+=8),v+=o&(1<<u)-1,o>>>=u,p-=u);p<15&&(o+=z[f++]<<p,p+=8,o+=z[f++]<<p,p+=8);t=r[o&s];dodist:for(;;){u=t>>>24;o>>>=u;p-=u;u=t>>>16&255;if(u&16){w=t&65535;u&=15;p<u&&(o+=z[f++]<<p,p+=8,p<u&&(o+=z[f++]<<p,p+=8));w+=o&(1<<u)-1;if(w>j){c.msg="invalid distance too far back";e.mode=a;break top}o>>>=u;p-=u;u=h-d;if(w>u){u=w-u;if(u>l&&e.sane){c.msg="invalid distance too far back";e.mode=a;break top}x=0;y=n;if(m===0){x+=k-u;if(u<v){v-=u;do A[h++]=n[x++];while(--u);x=h-w;y=A}}else if(m<u){x+=k+m-u;u-=m;if(u<v){v-=u;do A[h++]=n[x++];while(--u);x=0;if(m<v){u=m;v-=u;do A[h++]=n[x++];while(--u);x=h-w;y=A}}}else{x+=m-u;if(u<v){v-=u;do A[h++]=n[x++];while(--u);x=h-w;y=A}}while(v>2)A[h++]=y[x++],A[h++]=y[x++],A[h++]=y[x++],v-=3;v&&(A[h++]=y[x++],v>1&&(A[h++]=y[x++]))}else{x=h-w;do A[h++]=A[x++],A[h++]=A[x++],A[h++]=A[x++],v-=3;while(v>2);v&&(A[h++]=A[x++],v>1&&(A[h++]=A[x++]))}}else if((u&64)===0){t=r[(t&65535)+(o&(1<<u)-1)];continue dodist}else{c.msg="invalid distance code";e.mode=a;break top}break}}else if((u&64)===0){t=q[(t&65535)+(o&(1<<u)-1)];continue dolen}else if(u&32){e.mode=b;break top}else{c.msg="invalid literal/length code";e.mode=a;break top}break}}while(f<g&&h<i);v=p>>3;f-=v;p-=v<<3;o&=(1<<p)-1;c.next_in=f;c.next_out=h;c.avail_in=f<g?5+(g-f):5-(f-g);c.avail_out=h<i?257+(i-h):257-(h-i);e.hold=o;e.bits=p;return}}var na=!1;function K(){na||(na=!0,ma());return la.exports}c={};var oa={exports:c};function L(){var a=k(),b=15,c=852,d=592,e=0,f=1,g=2,h=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],j=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];oa.exports=function(k,m,n,o,p,q,r,aa){var s=aa.bits,t,u,v,w,x,y,z,A,B,ba,ca,C,da,D,ea=0,fa,E=new a.Buf16(b+1),ga=new a.Buf16(b+1),ha=0,F,G,H;for(t=0;t<=b;t++)E[t]=0;for(u=0;u<o;u++)E[m[n+u]]++;s=s;for(w=b;w>=1;w--)if(E[w]!==0)break;s>w&&(s=w);if(w===0){p[q++]=1<<24|64<<16|0;p[q++]=1<<24|64<<16|0;aa.bits=1;return 0}for(v=1;v<w;v++)if(E[v]!==0)break;s<v&&(s=v);z=1;for(t=1;t<=b;t++){z<<=1;z-=E[t];if(z<0)return-1}if(z>0&&(k===e||w!==1))return-1;ga[1]=0;for(t=1;t<b;t++)ga[t+1]=ga[t]+E[t];for(u=0;u<o;u++)m[n+u]!==0&&(r[ga[m[n+u]]++]=u);k===e?(ga=o=r,fa=19):k===f?(ga=h,ea-=257,o=i,ha-=257,fa=256):(ga=j,o=l,fa=-1);B=0;u=0;t=v;D=q;x=s;y=0;C=-1;A=1<<s;da=A-1;if(k===f&&A>c||k===g&&A>d)return 1;for(;;){F=t-y;r[u]<fa?(G=0,H=r[u]):r[u]>fa?(G=o[ha+r[u]],H=ga[ea+r[u]]):(G=32+64,H=0);ba=1<<t-y;ca=1<<x;v=ca;do ca-=ba,p[D+(B>>y)+ca]=F<<24|G<<16|H|0;while(ca!==0);ba=1<<t-1;while(B&ba)ba>>=1;ba!==0?(B&=ba-1,B+=ba):B=0;u++;if(--E[t]===0){if(t===w)break;t=m[n+r[u]]}if(t>s&&(B&da)!==C){y===0&&(y=s);D+=v;x=t-y;z=1<<x;while(x+y<w){z-=E[x+y];if(z<=0)break;x++;z<<=1}A+=1<<x;if(k===f&&A>c||k===g&&A>d)return 1;C=B&da;p[C]=s<<24|x<<16|D-q|0}}B!==0&&(p[D+B]=t-y<<24|64<<16|0);aa.bits=s;return 0}}var pa=!1;function qa(){pa||(pa=!0,L());return oa.exports}var M={},ra={exports:M};function N(){var a=k(),b=s(),c=w(),d=K(),e=qa(),f=0,g=1,h=2,i=4,j=5,l=6,m=0,n=1,o=2,p=-2,q=-3,r=-4,aa=-5,t=8,u=1,v=2,x=3,y=4,z=5,A=6,B=7,ba=8,ca=9,C=10,da=11,D=12,ea=13,fa=14,E=15,ga=16,ha=17,F=18,G=19,H=20,ia=21,ja=22,I=23,J=24,ka=25,la=26,ma=27,na=28,oa=29,L=30,pa=31,ra=32,N=852,O=592,P=15,Q=P;function sa(a){return(a>>>24&255)+(a>>>8&65280)+((a&65280)<<8)+((a&255)<<24)}function R(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ta(b){var c;if(!b||!b.state)return p;c=b.state;b.total_in=b.total_out=c.total=0;b.msg="";c.wrap&&(b.adler=c.wrap&1);c.mode=u;c.last=0;c.havedict=0;c.dmax=32768;c.head=null;c.hold=0;c.bits=0;c.lencode=c.lendyn=new a.Buf32(N);c.distcode=c.distdyn=new a.Buf32(O);c.sane=1;c.back=-1;return m}function S(a){var b;if(!a||!a.state)return p;b=a.state;b.wsize=0;b.whave=0;b.wnext=0;return ta(a)}function T(a,b){var c,d;if(!a||!a.state)return p;d=a.state;b<0?(c=0,b=-b):(c=(b>>4)+1,b<48&&(b&=15));if(b&&(b<8||b>15))return p;d.window!==null&&d.wbits!==b&&(d.window=null);d.wrap=c;d.wbits=b;return S(a)}function U(a,b){var c;if(!a)return p;c=new R();a.state=c;c.window=null;c=T(a,b);c!==m&&(a.state=null);return c}function V(a){return U(a,Q)}var W=!0,X,ua;function va(b){if(W){var c;X=new a.Buf32(512);ua=new a.Buf32(32);c=0;while(c<144)b.lens[c++]=8;while(c<256)b.lens[c++]=9;while(c<280)b.lens[c++]=7;while(c<288)b.lens[c++]=8;e(g,b.lens,0,288,X,0,b.work,{bits:9});c=0;while(c<32)b.lens[c++]=5;e(h,b.lens,0,32,ua,0,b.work,{bits:5});W=!1}b.lencode=X;b.lenbits=9;b.distcode=ua;b.distbits=5}function wa(b,c,d,e){var f;b=b.state;b.window===null&&(b.wsize=1<<b.wbits,b.wnext=0,b.whave=0,b.window=new a.Buf8(b.wsize));e>=b.wsize?(a.arraySet(b.window,c,d-b.wsize,b.wsize,0),b.wnext=0,b.whave=b.wsize):(f=b.wsize-b.wnext,f>e&&(f=e),a.arraySet(b.window,c,d-e,f,b.wnext),e-=f,e?(a.arraySet(b.window,c,d-e,e,0),b.wnext=e,b.whave=b.wsize):(b.wnext+=f,b.wnext===b.wsize&&(b.wnext=0),b.whave<b.wsize&&(b.whave+=f)));return 0}function Y(k,s){var w,K,qa,M,N,O,P,Q,R,ta,S,T,U,V,W,X,ua,Y,xa,Z=new a.Buf8(4),$,ya,za=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!k||!k.state||!k.output||!k.input&&k.avail_in!==0)return p;w=k.state;w.mode===D&&(w.mode=ea);N=k.next_out;qa=k.output;P=k.avail_out;M=k.next_in;K=k.input;O=k.avail_in;Q=w.hold;R=w.bits;ta=O;S=P;xa=m;inf_leave:for(;;)switch(w.mode){case u:if(w.wrap===0){w.mode=ea;break}while(R<16){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if(w.wrap&2&&Q===35615){w.check=0;Z[0]=Q&255;Z[1]=Q>>>8&255;w.check=c(w.check,Z,2,0);Q=0;R=0;w.mode=v;break}w.flags=0;w.head&&(w.head.done=!1);if(!(w.wrap&1)||(((Q&255)<<8)+(Q>>8))%31){k.msg="incorrect header check";w.mode=L;break}if((Q&15)!==t){k.msg="unknown compression method";w.mode=L;break}Q>>>=4;R-=4;Y=(Q&15)+8;if(w.wbits===0)w.wbits=Y;else if(Y>w.wbits){k.msg="invalid window size";w.mode=L;break}w.dmax=1<<Y;k.adler=w.check=1;w.mode=Q&512?C:D;Q=0;R=0;break;case v:while(R<16){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.flags=Q;if((w.flags&255)!==t){k.msg="unknown compression method";w.mode=L;break}if(w.flags&57344){k.msg="unknown header flags set";w.mode=L;break}w.head&&(w.head.text=Q>>8&1);w.flags&512&&(Z[0]=Q&255,Z[1]=Q>>>8&255,w.check=c(w.check,Z,2,0));Q=0;R=0;w.mode=x;case x:while(R<32){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.head&&(w.head.time=Q);w.flags&512&&(Z[0]=Q&255,Z[1]=Q>>>8&255,Z[2]=Q>>>16&255,Z[3]=Q>>>24&255,w.check=c(w.check,Z,4,0));Q=0;R=0;w.mode=y;case y:while(R<16){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.head&&(w.head.xflags=Q&255,w.head.os=Q>>8);w.flags&512&&(Z[0]=Q&255,Z[1]=Q>>>8&255,w.check=c(w.check,Z,2,0));Q=0;R=0;w.mode=z;case z:if(w.flags&1024){while(R<16){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.length=Q;w.head&&(w.head.extra_len=Q);w.flags&512&&(Z[0]=Q&255,Z[1]=Q>>>8&255,w.check=c(w.check,Z,2,0));Q=0;R=0}else w.head&&(w.head.extra=null);w.mode=A;case A:if(w.flags&1024){T=w.length;T>O&&(T=O);T&&(w.head&&(Y=w.head.extra_len-w.length,w.head.extra||(w.head.extra=new Array(w.head.extra_len)),a.arraySet(w.head.extra,K,M,T,Y)),w.flags&512&&(w.check=c(w.check,K,T,M)),O-=T,M+=T,w.length-=T);if(w.length)break inf_leave}w.length=0;w.mode=B;case B:if(w.flags&2048){if(O===0)break inf_leave;T=0;do Y=K[M+T++],w.head&&Y&&w.length<65536&&(w.head.name+=String.fromCharCode(Y));while(Y&&T<O);w.flags&512&&(w.check=c(w.check,K,T,M));O-=T;M+=T;if(Y)break inf_leave}else w.head&&(w.head.name=null);w.length=0;w.mode=ba;case ba:if(w.flags&4096){if(O===0)break inf_leave;T=0;do Y=K[M+T++],w.head&&Y&&w.length<65536&&(w.head.comment+=String.fromCharCode(Y));while(Y&&T<O);w.flags&512&&(w.check=c(w.check,K,T,M));O-=T;M+=T;if(Y)break inf_leave}else w.head&&(w.head.comment=null);w.mode=ca;case ca:if(w.flags&512){while(R<16){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if(Q!==(w.check&65535)){k.msg="header crc mismatch";w.mode=L;break}Q=0;R=0}w.head&&(w.head.hcrc=w.flags>>9&1,w.head.done=!0);k.adler=w.check=0;w.mode=D;break;case C:while(R<32){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}k.adler=w.check=sa(Q);Q=0;R=0;w.mode=da;case da:if(w.havedict===0){k.next_out=N;k.avail_out=P;k.next_in=M;k.avail_in=O;w.hold=Q;w.bits=R;return o}k.adler=w.check=1;w.mode=D;case D:if(s===j||s===l)break inf_leave;case ea:if(w.last){Q>>>=R&7;R-=R&7;w.mode=ma;break}while(R<3){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.last=Q&1;Q>>>=1;R-=1;switch(Q&3){case 0:w.mode=fa;break;case 1:va(w);w.mode=H;if(s===l){Q>>>=2;R-=2;break inf_leave}break;case 2:w.mode=ha;break;case 3:k.msg="invalid block type",w.mode=L}Q>>>=2;R-=2;break;case fa:Q>>>=R&7;R-=R&7;while(R<32){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if((Q&65535)!==(Q>>>16^65535)){k.msg="invalid stored block lengths";w.mode=L;break}w.length=Q&65535;Q=0;R=0;w.mode=E;if(s===l)break inf_leave;case E:w.mode=ga;case ga:T=w.length;if(T){T>O&&(T=O);T>P&&(T=P);if(T===0)break inf_leave;a.arraySet(qa,K,M,T,N);O-=T;M+=T;P-=T;N+=T;w.length-=T;break}w.mode=D;break;case ha:while(R<14){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.nlen=(Q&31)+257;Q>>>=5;R-=5;w.ndist=(Q&31)+1;Q>>>=5;R-=5;w.ncode=(Q&15)+4;Q>>>=4;R-=4;if(w.nlen>286||w.ndist>30){k.msg="too many length or distance symbols";w.mode=L;break}w.have=0;w.mode=F;case F:while(w.have<w.ncode){while(R<3){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.lens[za[w.have++]]=Q&7;Q>>>=3;R-=3}while(w.have<19)w.lens[za[w.have++]]=0;w.lencode=w.lendyn;w.lenbits=7;$={bits:w.lenbits};xa=e(f,w.lens,0,19,w.lencode,0,w.work,$);w.lenbits=$.bits;if(xa){k.msg="invalid code lengths set";w.mode=L;break}w.have=0;w.mode=G;case G:while(w.have<w.nlen+w.ndist){for(;;){U=w.lencode[Q&(1<<w.lenbits)-1];V=U>>>24;W=U>>>16&255;X=U&65535;if(V<=R)break;if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if(X<16)Q>>>=V,R-=V,w.lens[w.have++]=X;else{if(X===16){ya=V+2;while(R<ya){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}Q>>>=V;R-=V;if(w.have===0){k.msg="invalid bit length repeat";w.mode=L;break}Y=w.lens[w.have-1];T=3+(Q&3);Q>>>=2;R-=2}else if(X===17){ya=V+3;while(R<ya){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}Q>>>=V;R-=V;Y=0;T=3+(Q&7);Q>>>=3;R-=3}else{ya=V+7;while(R<ya){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}Q>>>=V;R-=V;Y=0;T=11+(Q&127);Q>>>=7;R-=7}if(w.have+T>w.nlen+w.ndist){k.msg="invalid bit length repeat";w.mode=L;break}while(T--)w.lens[w.have++]=Y}}if(w.mode===L)break;if(w.lens[256]===0){k.msg="invalid code -- missing end-of-block";w.mode=L;break}w.lenbits=9;$={bits:w.lenbits};xa=e(g,w.lens,0,w.nlen,w.lencode,0,w.work,$);w.lenbits=$.bits;if(xa){k.msg="invalid literal/lengths set";w.mode=L;break}w.distbits=6;w.distcode=w.distdyn;$={bits:w.distbits};xa=e(h,w.lens,w.nlen,w.ndist,w.distcode,0,w.work,$);w.distbits=$.bits;if(xa){k.msg="invalid distances set";w.mode=L;break}w.mode=H;if(s===l)break inf_leave;case H:w.mode=ia;case ia:if(O>=6&&P>=258){k.next_out=N;k.avail_out=P;k.next_in=M;k.avail_in=O;w.hold=Q;w.bits=R;d(k,S);N=k.next_out;qa=k.output;P=k.avail_out;M=k.next_in;K=k.input;O=k.avail_in;Q=w.hold;R=w.bits;w.mode===D&&(w.back=-1);break}w.back=0;for(;;){U=w.lencode[Q&(1<<w.lenbits)-1];V=U>>>24;W=U>>>16&255;X=U&65535;if(V<=R)break;if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if(W&&(W&240)===0){Y=V;$=W;ua=X;for(;;){U=w.lencode[ua+((Q&(1<<Y+$)-1)>>Y)];V=U>>>24;W=U>>>16&255;X=U&65535;if(Y+V<=R)break;if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}Q>>>=Y;R-=Y;w.back+=Y}Q>>>=V;R-=V;w.back+=V;w.length=X;if(W===0){w.mode=la;break}if(W&32){w.back=-1;w.mode=D;break}if(W&64){k.msg="invalid literal/length code";w.mode=L;break}w.extra=W&15;w.mode=ja;case ja:if(w.extra){ya=w.extra;while(R<ya){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.length+=Q&(1<<w.extra)-1;Q>>>=w.extra;R-=w.extra;w.back+=w.extra}w.was=w.length;w.mode=I;case I:for(;;){U=w.distcode[Q&(1<<w.distbits)-1];V=U>>>24;W=U>>>16&255;X=U&65535;if(V<=R)break;if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if((W&240)===0){Y=V;$=W;ua=X;for(;;){U=w.distcode[ua+((Q&(1<<Y+$)-1)>>Y)];V=U>>>24;W=U>>>16&255;X=U&65535;if(Y+V<=R)break;if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}Q>>>=Y;R-=Y;w.back+=Y}Q>>>=V;R-=V;w.back+=V;if(W&64){k.msg="invalid distance code";w.mode=L;break}w.offset=X;w.extra=W&15;w.mode=J;case J:if(w.extra){ya=w.extra;while(R<ya){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.offset+=Q&(1<<w.extra)-1;Q>>>=w.extra;R-=w.extra;w.back+=w.extra}if(w.offset>w.dmax){k.msg="invalid distance too far back";w.mode=L;break}w.mode=ka;case ka:if(P===0)break inf_leave;T=S-P;if(w.offset>T){T=w.offset-T;if(T>w.whave&&w.sane){k.msg="invalid distance too far back";w.mode=L;break}T>w.wnext?(T-=w.wnext,U=w.wsize-T):U=w.wnext-T;T>w.length&&(T=w.length);$=w.window}else $=qa,U=N-w.offset,T=w.length;T>P&&(T=P);P-=T;w.length-=T;do qa[N++]=$[U++];while(--T);w.length===0&&(w.mode=ia);break;case la:if(P===0)break inf_leave;qa[N++]=w.length;P--;w.mode=ia;break;case ma:if(w.wrap){while(R<32){if(O===0)break inf_leave;O--;Q|=K[M++]<<R;R+=8}S-=P;k.total_out+=S;w.total+=S;S&&(k.adler=w.check=w.flags?c(w.check,qa,S,N-S):b(w.check,qa,S,N-S));S=P;if((w.flags?Q:sa(Q))!==w.check){k.msg="incorrect data check";w.mode=L;break}Q=0;R=0}w.mode=na;case na:if(w.wrap&&w.flags){while(R<32){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if(Q!==(w.total&4294967295)){k.msg="incorrect length check";w.mode=L;break}Q=0;R=0}w.mode=oa;case oa:xa=n;break inf_leave;case L:xa=q;break inf_leave;case pa:return r;case ra:default:return p}k.next_out=N;k.avail_out=P;k.next_in=M;k.avail_in=O;w.hold=Q;w.bits=R;if((w.wsize||S!==k.avail_out&&w.mode<L&&(w.mode<ma||s!==i))&&wa(k,k.output,k.next_out,S-k.avail_out)){w.mode=pa;return r}ta-=k.avail_in;S-=k.avail_out;k.total_in+=ta;k.total_out+=S;w.total+=S;w.wrap&&S&&(k.adler=w.check=w.flags?c(w.check,qa,S,k.next_out-S):b(w.check,qa,S,k.next_out-S));k.data_type=w.bits+(w.last?64:0)+(w.mode===D?128:0)+(w.mode===H||w.mode===E?256:0);(ta===0&&S===0||s===i)&&xa===m&&(xa=aa);return xa}function xa(a){if(!a||!a.state)return p;var b=a.state;b.window&&(b.window=null);a.state=null;return m}function Z(a,b){if(!a||!a.state)return p;a=a.state;if((a.wrap&2)===0)return p;a.head=b;b.done=!1;return m}function $(a,c){var d=c.length,e,f;if(!a||!a.state)return p;e=a.state;if(e.wrap!==0&&e.mode!==da)return p;if(e.mode===da){f=1;f=b(f,c,d,0);if(f!==e.check)return q}f=wa(a,c,d,d);if(f){e.mode=pa;return r}e.havedict=1;return m}M.inflateReset=S;M.inflateReset2=T;M.inflateResetKeep=ta;M.inflateInit=V;M.inflateInit2=U;M.inflate=Y;M.inflateEnd=xa;M.inflateGetHeader=Z;M.inflateSetDictionary=$;M.inflateInfo="pako inflate (from Nodeca project)"}var O=!1;function P(){O||(O=!0,N());return ra.exports}d={};var Q={exports:d};function sa(){Q.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}}var R=!1;function ta(){R||(R=!0,sa());return Q.exports}f={};var S={exports:f};function T(){function a(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}S.exports=a}var U=!1;function V(){U||(U=!0,T());return S.exports}var W={},X={exports:W};function ua(){var a=P(),b=k(),c=ga(),d=ta(),e=A(),f=H(),g=V(),h=Object.prototype.toString;function i(j){if(!(this instanceof i))return new i(j);this.options=b.assign({chunkSize:16384,windowBits:0,to:""},j||{});var k=this.options;k.raw&&k.windowBits>=0&&k.windowBits<16&&(k.windowBits=-k.windowBits,k.windowBits===0&&(k.windowBits=-15));k.windowBits>=0&&k.windowBits<16&&!(j&&j.windowBits)&&(k.windowBits+=32);k.windowBits>15&&k.windowBits<48&&((k.windowBits&15)===0&&(k.windowBits|=15));this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new f();this.strm.avail_out=0;j=a.inflateInit2(this.strm,k.windowBits);if(j!==d.Z_OK)throw new Error(e[j]);this.header=new g();a.inflateGetHeader(this.strm,this.header);if(k.dictionary){typeof k.dictionary==="string"?k.dictionary=c.string2buf(k.dictionary):h.call(k.dictionary)==="[object ArrayBuffer]"&&(k.dictionary=new Uint8Array(k.dictionary));if(k.raw){j=a.inflateSetDictionary(this.strm,k.dictionary);if(j!==d.Z_OK)throw new Error(e[j])}}}i.prototype.push=function(e,f){var g=this.strm,i=this.options.chunkSize,j=this.options.dictionary,k,l,m,n=!1;if(this.ended)return!1;f=f===~~f?f:f===!0?d.Z_FINISH:d.Z_NO_FLUSH;typeof e==="string"?g.input=c.binstring2buf(e):h.call(e)==="[object ArrayBuffer]"?g.input=new Uint8Array(e):g.input=e;g.next_in=0;g.avail_in=g.input.length;do{g.avail_out===0&&(g.output=new b.Buf8(i),g.next_out=0,g.avail_out=i);e=a.inflate(g,d.Z_NO_FLUSH);e===d.Z_NEED_DICT&&j&&(e=a.inflateSetDictionary(this.strm,j));e===d.Z_BUF_ERROR&&n===!0&&(e=d.Z_OK,n=!1);if(e!==d.Z_STREAM_END&&e!==d.Z_OK){this.onEnd(e);this.ended=!0;return!1}g.next_out&&((g.avail_out===0||e===d.Z_STREAM_END||g.avail_in===0&&(f===d.Z_FINISH||f===d.Z_SYNC_FLUSH))&&(this.options.to==="string"?(k=c.utf8border(g.output,g.next_out),l=g.next_out-k,m=c.buf2string(g.output,k),g.next_out=l,g.avail_out=i-l,l&&b.arraySet(g.output,g.output,k,l,0),this.onData(m)):this.onData(b.shrinkBuf(g.output,g.next_out))));g.avail_in===0&&g.avail_out===0&&(n=!0)}while((g.avail_in>0||g.avail_out===0)&&e!==d.Z_STREAM_END);e===d.Z_STREAM_END&&(f=d.Z_FINISH);if(f===d.Z_FINISH){e=a.inflateEnd(this.strm);this.onEnd(e);this.ended=!0;return e===d.Z_OK}if(f===d.Z_SYNC_FLUSH){this.onEnd(d.Z_OK);g.avail_out=0;return!0}return!0};i.prototype.onData=function(a){this.chunks.push(a)};i.prototype.onEnd=function(a){a===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=b.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};function j(a,b){b=new i(b);b.push(a,!0);if(b.err)throw b.msg||e[b.err];return b.result}function l(a,b){b=b||{};b.raw=!0;return j(a,b)}W.Inflate=i;W.inflate=j;W.inflateRaw=l;W.ungzip=j}var va=!1;function wa(){va||(va=!0,ua());return X.exports}b={};var Y={exports:b};function xa(){var a=k().assign,b=ka(),c=wa(),d=ta(),e={};a(e,b,c,d);Y.exports=e}var Z=!1;function $(){Z||(Z=!0,xa());return Y.exports}function a(a){switch(a){case void 0:return $()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("process-nextick-args-2.0.0",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?g.exports={nextTick:a}:g.exports=process;function a(a,b,c,d){if(typeof a!=="function")throw new TypeError('"callback" argument must be a function');var e=arguments.length,f,g;switch(e){case 0:case 1:return process.nextTick(a);case 2:return process.nextTick(function(){a.call(null,b)});case 3:return process.nextTick(function(){a.call(null,b,c)});case 4:return process.nextTick(function(){a.call(null,b,c,d)});default:f=new Array(e-1);g=0;while(g<f.length)f[g++]=arguments[g];return process.nextTick(function(){a.apply(null,f)})}}}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("safe-buffer-5.1.2",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){var a={},b=a.Buffer;function c(a,b){for(var c in a)b[c]=a[c]}b.from&&b.alloc&&b.allocUnsafe&&b.allocUnsafeSlow?h.exports=a:(c(a,g),g.Buffer=d);function d(a,c,d){return b(a,c,d)}c(b,d);d.from=function(a,c,d){if(typeof a==="number")throw new TypeError("Argument must not be a number");return b(a,c,d)};d.alloc=function(a,c,d){if(typeof a!=="number")throw new TypeError("Argument must be a number");a=b(a);c!==void 0?typeof d==="string"?a.fill(c,d):a.fill(c):a.fill(0);return a};d.allocUnsafe=function(a){if(typeof a!=="number")throw new TypeError("Argument must be a number");return b(a)};d.allocUnsafeSlow=function(b){if(typeof b!=="number")throw new TypeError("Argument must be a number");return a.SlowBuffer(b)}}var j=!1;function k(){j||(j=!0,i());return h.exports}function a(a){switch(a){case void 0:return k()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("util-deprecate-1.0.2",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){g.exports={}.deprecate}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("readable-stream-2.3.6",["safe-buffer-5.1.2","process-nextick-args-2.0.0","core-util-is-1.0.2","inherits-2.0.3","util-deprecate-1.0.2","isarray-1.0.0"],(function(a,b,c,d,e,f){"use strict";function c(a){return a&&typeof a==="object"&&"default"in a?a["default"]:a}var g=c(b("safe-buffer-5.1.2")),h=c(b("process-nextick-args-2.0.0")),i=c(b("core-util-is-1.0.2")),j=c(b("inherits-2.0.3")),k=c(b("util-deprecate-1.0.2")),l=c(b("isarray-1.0.0"));c={};var m={exports:c};function n(){m.exports={}}var o=!1;function p(){o||(o=!0,n());return m.exports}b={};var q={exports:b};function r(){function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var b=g().Buffer,c={};function d(a,b,c){a.copy(b,c)}q.exports=function(){function c(){a(this,c),this.head=null,this.tail=null,this.length=0}c.prototype.push=function(a){a={data:a,next:null};this.length>0?this.tail.next=a:this.head=a;this.tail=a;++this.length};c.prototype.unshift=function(a){a={data:a,next:this.head};this.length===0&&(this.tail=a);this.head=a;++this.length};c.prototype.shift=function(){if(this.length===0)return;var a=this.head.data;this.length===1?this.head=this.tail=null:this.head=this.head.next;--this.length;return a};c.prototype.clear=function(){this.head=this.tail=null,this.length=0};c.prototype.join=function(a){if(this.length===0)return"";var b=this.head,c=""+b.data;while(b=b.next)c+=a+b.data;return c};c.prototype.concat=function(a){if(this.length===0)return b.alloc(0);if(this.length===1)return this.head.data;a=b.allocUnsafe(a>>>0);var c=this.head,e=0;while(c)d(c.data,a,e),e+=c.data.length,c=c.next;return a};return c}();c&&c.inspect&&c.inspect.custom&&(q.exports.prototype[c.inspect.custom]=function(){var a=c.inspect({length:this.length});return this.constructor.name+" "+a})}var s=!1;function t(){s||(s=!0,r());return q.exports}c={};var u={exports:c};function v(){var a=h();function b(b,c){var e=this,f=this._readableState&&this._readableState.destroyed,g=this._writableState&&this._writableState.destroyed;if(f||g){c?c(b):b&&(!this._writableState||!this._writableState.errorEmitted)&&a.nextTick(d,this,b);return this}this._readableState&&(this._readableState.destroyed=!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(b||null,function(b){!c&&b?(a.nextTick(d,e,b),e._writableState&&(e._writableState.errorEmitted=!0)):c&&c(b)});return this}function c(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function d(a,b){a.emit("error",b)}u.exports={destroy:b,undestroy:c}}var w=!1;function x(){w||(w=!0,v());return u.exports}b={};var y={exports:b};function z(){var b=h();y.exports=w;function c(a){var b=this;this.next=null;this.entry=null;this.finish=function(){Q(b,a)}}var d=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:b.nextTick,e;w.WritableState=u;var f=i();f.inherits=j();var l={deprecate:k()},m=p(),n=g().Buffer,o=a.Uint8Array||function(){};function q(a){return n.from(a)}function r(a){return n.isBuffer(a)||a instanceof o}var s=x();f.inherits(w,m);function t(){}function u(a,b){e=e||F();a=a||{};var d=b instanceof e;this.objectMode=!!a.objectMode;d&&(this.objectMode=this.objectMode||!!a.writableObjectMode);var f=a.highWaterMark,g=a.writableHighWaterMark,h=this.objectMode?16:16*1024;f||f===0?this.highWaterMark=f:d&&(g||g===0)?this.highWaterMark=g:this.highWaterMark=h;this.highWaterMark=Math.floor(this.highWaterMark);this.finalCalled=!1;this.needDrain=!1;this.ending=!1;this.ended=!1;this.finished=!1;this.destroyed=!1;f=a.decodeStrings===!1;this.decodeStrings=!f;this.defaultEncoding=a.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(a){H(b,a)};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=!1;this.errorEmitted=!1;this.bufferedRequestCount=0;this.corkedRequestsFree=new c(this)}u.prototype.getBuffer=function(){var a=this.bufferedRequest,b=[];while(a)b.push(a),a=a.next;return b};(function(){try{Object.defineProperty(u.prototype,"buffer",{get:l.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(a){}})();var v;typeof Symbol==="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]==="function"?(v=Function.prototype[Symbol.hasInstance],Object.defineProperty(w,Symbol.hasInstance,{value:function(a){if(v.call(this,a))return!0;return this!==w?!1:a&&a._writableState instanceof u}})):v=function(a){return a instanceof this};function w(a){e=e||F();if(!v.call(w,this)&&!(this instanceof e))return new w(a);this._writableState=new u(a,this);this.writable=!0;a&&(typeof a.write==="function"&&(this._write=a.write),typeof a.writev==="function"&&(this._writev=a.writev),typeof a.destroy==="function"&&(this._destroy=a.destroy),typeof a["final"]==="function"&&(this._final=a["final"]));m.call(this)}w.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function z(a,c){var d=new Error("write after end");a.emit("error",d);b.nextTick(c,d)}function A(a,c,d,e){var f=!0,g=!1;d===null?g=new TypeError("May not write null values to stream"):typeof d!=="string"&&d!==void 0&&!c.objectMode&&(g=new TypeError("Invalid non-string/buffer chunk"));g&&(a.emit("error",g),b.nextTick(e,g),f=!1);return f}w.prototype.write=function(a,b,c){var d=this._writableState,e=!1,f=!d.objectMode&&r(a);f&&!n.isBuffer(a)&&(a=q(a));typeof b==="function"&&(c=b,b=null);f?b="buffer":b||(b=d.defaultEncoding);typeof c!=="function"&&(c=t);d.ended?z(this,c):(f||A(this,d,a,c))&&(d.pendingcb++,e=C(this,d,f,a,b,c));return e};w.prototype.cork=function(){var a=this._writableState;a.corked++};w.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,!a.writing&&!a.corked&&!a.finished&&!a.bufferProcessing&&a.bufferedRequest&&K(this,a))};w.prototype.setDefaultEncoding=function(a){typeof a==="string"&&(a=a.toLowerCase());if(!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((a+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+a);this._writableState.defaultEncoding=a;return this};function B(a,b,c){!a.objectMode&&a.decodeStrings!==!1&&typeof b==="string"&&(b=n.from(b,c));return b}Object.defineProperty(w.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function C(a,b,c,d,e,f){if(!c){var g=B(b,d,e);d!==g&&(c=!0,e="buffer",d=g)}g=b.objectMode?1:d.length;b.length+=g;var h=b.length<b.highWaterMark;h||(b.needDrain=!0);if(b.writing||b.corked){var i=b.lastBufferedRequest;b.lastBufferedRequest={chunk:d,encoding:e,isBuf:c,callback:f,next:null};i?i.next=b.lastBufferedRequest:b.bufferedRequest=b.lastBufferedRequest;b.bufferedRequestCount+=1}else D(a,b,!1,g,d,e,f);return h}function D(a,b,c,d,e,f,g){b.writelen=d,b.writecb=g,b.writing=!0,b.sync=!0,c?a._writev(e,b.onwrite):a._write(e,f,b.onwrite),b.sync=!1}function E(a,c,d,e,f){--c.pendingcb,d?(b.nextTick(f,e),b.nextTick(O,a,c),a._writableState.errorEmitted=!0,a.emit("error",e)):(f(e),a._writableState.errorEmitted=!0,a.emit("error",e),O(a,c))}function G(a){a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0}function H(a,b){var c=a._writableState,e=c.sync,f=c.writecb;G(c);if(b)E(a,c,e,b,f);else{b=L(c);!b&&!c.corked&&!c.bufferProcessing&&c.bufferedRequest&&K(a,c);e?d(I,a,c,b,f):I(a,c,b,f)}}function I(a,b,c,d){c||J(a,b),b.pendingcb--,d(),O(a,b)}function J(a,b){b.length===0&&b.needDrain&&(b.needDrain=!1,a.emit("drain"))}function K(a,b){b.bufferProcessing=!0;var d=b.bufferedRequest;if(a._writev&&d&&d.next){var e=b.bufferedRequestCount;e=new Array(e);var f=b.corkedRequestsFree;f.entry=d;var g=0,h=!0;while(d)e[g]=d,d.isBuf||(h=!1),d=d.next,g+=1;e.allBuffers=h;D(a,b,!0,b.length,e,"",f.finish);b.pendingcb++;b.lastBufferedRequest=null;f.next?(b.corkedRequestsFree=f.next,f.next=null):b.corkedRequestsFree=new c(b);b.bufferedRequestCount=0}else{while(d){g=d.chunk;h=d.encoding;e=d.callback;f=b.objectMode?1:g.length;D(a,b,!1,f,g,h,e);d=d.next;b.bufferedRequestCount--;if(b.writing)break}d===null&&(b.lastBufferedRequest=null)}b.bufferedRequest=d;b.bufferProcessing=!1}w.prototype._write=function(a,b,c){c(new Error("_write() is not implemented"))};w.prototype._writev=null;w.prototype.end=function(a,b,c){var d=this._writableState;typeof a==="function"?(c=a,a=null,b=null):typeof b==="function"&&(c=b,b=null);a!==null&&a!==void 0&&this.write(a,b);d.corked&&(d.corked=1,this.uncork());!d.ending&&!d.finished&&P(this,d,c)};function L(a){return a.ending&&a.length===0&&a.bufferedRequest===null&&!a.finished&&!a.writing}function M(a,b){a._final(function(c){b.pendingcb--,c&&a.emit("error",c),b.prefinished=!0,a.emit("prefinish"),O(a,b)})}function N(a,c){!c.prefinished&&!c.finalCalled&&(typeof a._final==="function"?(c.pendingcb++,c.finalCalled=!0,b.nextTick(M,a,c)):(c.prefinished=!0,a.emit("prefinish")))}function O(a,b){var c=L(b);c&&(N(a,b),b.pendingcb===0&&(b.finished=!0,a.emit("finish")));return c}function P(a,c,d){c.ending=!0,O(a,c),d&&(c.finished?b.nextTick(d):a.once("finish",d)),c.ended=!0,a.writable=!1}function Q(a,b,c){var d=a.entry;a.entry=null;while(d){var e=d.callback;b.pendingcb--;e(c);d=d.next}b.corkedRequestsFree?b.corkedRequestsFree.next=a:b.corkedRequestsFree=a}Object.defineProperty(w.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(a){if(!this._writableState)return;this._writableState.destroyed=a}});w.prototype.destroy=s.destroy;w.prototype._undestroy=s.undestroy;w.prototype._destroy=function(a,b){this.end(),b(a)}}var A=!1;function B(){A||(A=!0,z());return y.exports}c={};var C={exports:c};function D(){var a=h(),b=Object.keys||function(a){var b=[];for(a in a)b.push(a);return b};C.exports=g;var c=i();c.inherits=j();var d=O(),e=B();c.inherits(g,d);c=b(e.prototype);for(b=0;b<c.length;b++){var f=c[b];g.prototype[f]||(g.prototype[f]=e.prototype[f])}function g(a){if(!(this instanceof g))return new g(a);d.call(this,a);e.call(this,a);a&&a.readable===!1&&(this.readable=!1);a&&a.writable===!1&&(this.writable=!1);this.allowHalfOpen=!0;a&&a.allowHalfOpen===!1&&(this.allowHalfOpen=!1);this.once("end",k)}Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function k(){if(this.allowHalfOpen||this._writableState.ended)return;a.nextTick(l,this)}function l(a){a.end()}Object.defineProperty(g.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(a){if(this._readableState===void 0||this._writableState===void 0)return;this._readableState.destroyed=a;this._writableState.destroyed=a}});g.prototype._destroy=function(b,c){this.push(null),this.end(),a.nextTick(c,b)}}var E=!1;function F(){E||(E=!0,D());return C.exports}var G={},H={exports:G};function I(){var a=g().Buffer,b=a.isEncoding||function(a){a=""+a;switch(a&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function c(a){if(!a)return"utf8";var b;while(!0)switch(a){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return a;default:if(b)return;a=(""+a).toLowerCase();b=!0}}function d(d){var e=c(d);if(typeof e!=="string"&&(a.isEncoding===b||!b(d)))throw new Error("Unknown encoding: "+d);return e||d}G.StringDecoder=e;function e(b){this.encoding=d(b);var c;switch(this.encoding){case"utf16le":this.text=m;this.end=n;c=4;break;case"utf8":this.fillLast=j;c=4;break;case"base64":this.text=o;this.end=p;c=3;break;default:this.write=q;this.end=r;return}this.lastNeed=0;this.lastTotal=0;this.lastChar=a.allocUnsafe(c)}e.prototype.write=function(a){if(a.length===0)return"";var b,c;if(this.lastNeed){b=this.fillLast(a);if(b===void 0)return"";c=this.lastNeed;this.lastNeed=0}else c=0;return c<a.length?b?b+this.text(a,c):this.text(a,c):b||""};e.prototype.end=l;e.prototype.text=k;e.prototype.fillLast=function(a){if(this.lastNeed<=a.length){a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length);this.lastNeed-=a.length};function f(a){if(a<=127)return 0;else if(a>>5===6)return 2;else if(a>>4===14)return 3;else if(a>>3===30)return 4;return a>>6===2?-1:-2}function h(a,b,c){var d=b.length-1;if(d<c)return 0;var e=f(b[d]);if(e>=0){e>0&&(a.lastNeed=e-1);return e}if(--d<c||e===-2)return 0;e=f(b[d]);if(e>=0){e>0&&(a.lastNeed=e-2);return e}if(--d<c||e===-2)return 0;e=f(b[d]);if(e>=0){e>0&&(e===2?e=0:a.lastNeed=e-3);return e}return 0}function i(a,b,c){if((b[0]&192)!==128){a.lastNeed=0;return"\ufffd"}if(a.lastNeed>1&&b.length>1){if((b[1]&192)!==128){a.lastNeed=1;return"\ufffd"}if(a.lastNeed>2&&b.length>2&&(b[2]&192)!==128){a.lastNeed=2;return"\ufffd"}}}function j(a){var b=this.lastTotal-this.lastNeed,c=i(this,a,b);if(c!==void 0)return c;if(this.lastNeed<=a.length){a.copy(this.lastChar,b,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}a.copy(this.lastChar,b,0,a.length);this.lastNeed-=a.length}function k(a,b){var c=h(this,a,b);if(!this.lastNeed)return a.toString("utf8",b);this.lastTotal=c;c=a.length-(c-this.lastNeed);a.copy(this.lastChar,0,c);return a.toString("utf8",b,c)}function l(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+"\ufffd":a}function m(a,b){if((a.length-b)%2===0){var c=a.toString("utf16le",b);if(c){var d=c.charCodeAt(c.length-1);if(d>=55296&&d<=56319){this.lastNeed=2;this.lastTotal=4;this.lastChar[0]=a[a.length-2];this.lastChar[1]=a[a.length-1];return c.slice(0,-1)}}return c}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=a[a.length-1];return a.toString("utf16le",b,a.length-1)}function n(a){a=a&&a.length?this.write(a):"";if(this.lastNeed){var b=this.lastTotal-this.lastNeed;return a+this.lastChar.toString("utf16le",0,b)}return a}function o(a,b){var c=(a.length-b)%3;if(c===0)return a.toString("base64",b);this.lastNeed=3-c;this.lastTotal=3;c===1?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]);return a.toString("base64",b,a.length-c)}function p(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+this.lastChar.toString("base64",0,3-this.lastNeed):a}function q(a){return a.toString(this.encoding)}function r(a){return a&&a.length?this.write(a):""}}var J=!1;function K(){J||(J=!0,I());return H.exports}b={};var L={exports:b};function M(){var b=h();L.exports=A;var c=l(),d;A.ReadableState=z;var e=function(a,b){return a.listeners(b).length},f=p(),k=g().Buffer,m=a.Uint8Array||function(){};function n(a){return k.from(a)}function o(a){return k.isBuffer(a)||a instanceof m}var q=i();q.inherits=j();var r={},s=void 0;r&&r.debuglog?s=r.debuglog("stream"):s=function(){};var u=t();r=x();var v;q.inherits(A,f);var w=["error","close","destroy","pause","resume"];function y(a,b,d){if(typeof a.prependListener==="function")return a.prependListener(b,d);!a._events||!a._events[b]?a.on(b,d):c(a._events[b])?a._events[b].unshift(d):a._events[b]=[d,a._events[b]]}function z(a,b){d=d||F();a=a||{};b=b instanceof d;this.objectMode=!!a.objectMode;b&&(this.objectMode=this.objectMode||!!a.readableObjectMode);var c=a.highWaterMark,e=a.readableHighWaterMark,f=this.objectMode?16:16*1024;c||c===0?this.highWaterMark=c:b&&(e||e===0)?this.highWaterMark=e:this.highWaterMark=f;this.highWaterMark=Math.floor(this.highWaterMark);this.buffer=new u();this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=!1;this.endEmitted=!1;this.reading=!1;this.sync=!0;this.needReadable=!1;this.emittedReadable=!1;this.readableListening=!1;this.resumeScheduled=!1;this.destroyed=!1;this.defaultEncoding=a.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.decoder=null;this.encoding=null;a.encoding&&(v||(v=K("/").StringDecoder),this.decoder=new v(a.encoding),this.encoding=a.encoding)}function A(a){d=d||F();if(!(this instanceof A))return new A(a);this._readableState=new z(a,this);this.readable=!0;a&&(typeof a.read==="function"&&(this._read=a.read),typeof a.destroy==="function"&&(this._destroy=a.destroy));f.call(this)}Object.defineProperty(A.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(a){if(!this._readableState)return;this._readableState.destroyed=a}});A.prototype.destroy=r.destroy;A.prototype._undestroy=r.undestroy;A.prototype._destroy=function(a,b){this.push(null),b(a)};A.prototype.push=function(a,b){var c=this._readableState,d;!c.objectMode?typeof a==="string"&&(b=b||c.defaultEncoding,b!==c.encoding&&(a=k.from(a,b),b=""),d=!0):d=!0;return B(this,a,b,!1,d)};A.prototype.unshift=function(a){return B(this,a,null,!0,!1)};function B(a,b,c,d,e){var f=a._readableState;if(b===null)f.reading=!1,J(a,f);else{var g;e||(g=D(f,b));g?a.emit("error",g):f.objectMode||b&&b.length>0?(typeof b!=="string"&&!f.objectMode&&Object.getPrototypeOf(b)!==k.prototype&&(b=n(b)),d?f.endEmitted?a.emit("error",new Error("stream.unshift() after end event")):C(a,f,b,!0):f.ended?a.emit("error",new Error("stream.push() after EOF")):(f.reading=!1,f.decoder&&!c?(b=f.decoder.write(b),f.objectMode||b.length!==0?C(a,f,b,!1):O(a,f)):C(a,f,b,!1))):d||(f.reading=!1)}return E(f)}function C(a,b,c,d){b.flowing&&b.length===0&&!b.sync?(a.emit("data",c),a.read(0)):(b.length+=b.objectMode?1:c.length,d?b.buffer.unshift(c):b.buffer.push(c),b.needReadable&&M(a)),O(a,b)}function D(a,b){var c;!o(b)&&typeof b!=="string"&&b!==void 0&&!a.objectMode&&(c=new TypeError("Invalid non-string/buffer chunk"));return c}function E(a){return!a.ended&&(a.needReadable||a.length<a.highWaterMark||a.length===0)}A.prototype.isPaused=function(){return this._readableState.flowing===!1};A.prototype.setEncoding=function(a){v||(v=K("/").StringDecoder);this._readableState.decoder=new v(a);this._readableState.encoding=a;return this};var G=8388608;function H(a){a>=G?a=G:(a--,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a++);return a}function I(a,b){if(a<=0||b.length===0&&b.ended)return 0;if(b.objectMode)return 1;if(a!==a)if(b.flowing&&b.length)return b.buffer.head.data.length;else return b.length;a>b.highWaterMark&&(b.highWaterMark=H(a));if(a<=b.length)return a;if(!b.ended){b.needReadable=!0;return 0}return b.length}A.prototype.read=function(a){s("read",a);a=parseInt(a,10);var b=this._readableState,c=a;a!==0&&(b.emittedReadable=!1);if(a===0&&b.needReadable&&(b.length>=b.highWaterMark||b.ended)){s("read: emitReadable",b.length,b.ended);b.length===0&&b.ended?Z(this):M(this);return null}a=I(a,b);if(a===0&&b.ended){b.length===0&&Z(this);return null}var d=b.needReadable;s("need readable",d);(b.length===0||b.length-a<b.highWaterMark)&&(d=!0,s("length less than watermark",d));b.ended||b.reading?(d=!1,s("reading or ended",d)):d&&(s("do read"),b.reading=!0,b.sync=!0,b.length===0&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1,b.reading||(a=I(c,b)));a>0?d=V(a,b):d=null;d===null?(b.needReadable=!0,a=0):b.length-=a;b.length===0&&(b.ended||(b.needReadable=!0),c!==a&&b.ended&&Z(this));d!==null&&this.emit("data",d);return d};function J(a,b){if(b.ended)return;if(b.decoder){var c=b.decoder.end();c&&c.length&&(b.buffer.push(c),b.length+=b.objectMode?1:c.length)}b.ended=!0;M(a)}function M(a){var c=a._readableState;c.needReadable=!1;c.emittedReadable||(s("emitReadable",c.flowing),c.emittedReadable=!0,c.sync?b.nextTick(N,a):N(a))}function N(a){s("emit readable"),a.emit("readable"),U(a)}function O(a,c){c.readingMore||(c.readingMore=!0,b.nextTick(P,a,c))}function P(a,b){var c=b.length;while(!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark){s("maybeReadMore read 0");a.read(0);if(c===b.length)break;else c=b.length}b.readingMore=!1}A.prototype._read=function(a){this.emit("error",new Error("_read() is not implemented"))};A.prototype.pipe=function(a,c){var d=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=a;break;case 1:f.pipes=[f.pipes,a];break;default:f.pipes.push(a);break}f.pipesCount+=1;s("pipe count=%d opts=%j",f.pipesCount,c);c=(!c||c.end!==!1)&&a!==process.stdout&&a!==process.stderr;c=c?h:q;f.endEmitted?b.nextTick(c):d.once("end",c);a.on("unpipe",g);function g(a,b){s("onunpipe"),a===d&&(b&&b.hasUnpiped===!1&&(b.hasUnpiped=!0,k()))}function h(){s("onend"),a.end()}var i=Q(d);a.on("drain",i);var j=!1;function k(){s("cleanup"),a.removeListener("close",o),a.removeListener("finish",p),a.removeListener("drain",i),a.removeListener("error",n),a.removeListener("unpipe",g),d.removeListener("end",h),d.removeListener("end",q),d.removeListener("data",m),j=!0,f.awaitDrain&&(!a._writableState||a._writableState.needDrain)&&i()}var l=!1;d.on("data",m);function m(b){s("ondata");l=!1;b=a.write(b);!1===b&&!l&&((f.pipesCount===1&&f.pipes===a||f.pipesCount>1&&aa(f.pipes,a)!==-1)&&!j&&(s("false write response, pause",d._readableState.awaitDrain),d._readableState.awaitDrain++,l=!0),d.pause())}function n(b){s("onerror",b),q(),a.removeListener("error",n),e(a,"error")===0&&a.emit("error",b)}y(a,"error",n);function o(){a.removeListener("finish",p),q()}a.once("close",o);function p(){s("onfinish"),a.removeListener("close",o),q()}a.once("finish",p);function q(){s("unpipe"),d.unpipe(a)}a.emit("pipe",d);f.flowing||(s("pipe resume"),d.resume());return a};function Q(a){return function(){var b=a._readableState;s("pipeOnDrain",b.awaitDrain);b.awaitDrain&&b.awaitDrain--;b.awaitDrain===0&&e(a,"data")&&(b.flowing=!0,U(a))}}A.prototype.unpipe=function(a){var b=this._readableState,c={hasUnpiped:!1};if(b.pipesCount===0)return this;if(b.pipesCount===1){if(a&&a!==b.pipes)return this;a||(a=b.pipes);b.pipes=null;b.pipesCount=0;b.flowing=!1;a&&a.emit("unpipe",this,c);return this}if(!a){var d=b.pipes,e=b.pipesCount;b.pipes=null;b.pipesCount=0;b.flowing=!1;for(var f=0;f<e;f++)d[f].emit("unpipe",this,c);return this}d=aa(b.pipes,a);if(d===-1)return this;b.pipes.splice(d,1);b.pipesCount-=1;b.pipesCount===1&&(b.pipes=b.pipes[0]);a.emit("unpipe",this,c);return this};A.prototype.on=function(a,c){c=f.prototype.on.call(this,a,c);if(a==="data")this._readableState.flowing!==!1&&this.resume();else if(a==="readable"){a=this._readableState;!a.endEmitted&&!a.readableListening&&(a.readableListening=a.needReadable=!0,a.emittedReadable=!1,!a.reading?b.nextTick(R,this):a.length&&M(this))}return c};A.prototype.addListener=A.prototype.on;function R(a){s("readable nexttick read 0"),a.read(0)}A.prototype.resume=function(){var a=this._readableState;a.flowing||(s("resume"),a.flowing=!0,S(this,a));return this};function S(a,c){c.resumeScheduled||(c.resumeScheduled=!0,b.nextTick(T,a,c))}function T(a,b){b.reading||(s("resume read 0"),a.read(0)),b.resumeScheduled=!1,b.awaitDrain=0,a.emit("resume"),U(a),b.flowing&&!b.reading&&a.read(0)}A.prototype.pause=function(){s("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(s("pause"),this._readableState.flowing=!1,this.emit("pause"));return this};function U(a){var b=a._readableState;s("flow",b.flowing);while(b.flowing&&a.read()!==null);}A.prototype.wrap=function(a){var b=this,c=this._readableState,d=!1;a.on("end",function(){s("wrapped end");if(c.decoder&&!c.ended){var a=c.decoder.end();a&&a.length&&b.push(a)}b.push(null)});a.on("data",function(e){s("wrapped data");c.decoder&&(e=c.decoder.write(e));if(c.objectMode&&(e===null||e===void 0))return;else if(!c.objectMode&&(!e||!e.length))return;e=b.push(e);e||(d=!0,a.pause())});for(var e in a)this[e]===void 0&&typeof a[e]==="function"&&(this[e]=function(b){return function(){return a[b].apply(a,arguments)}}(e));for(e=0;e<w.length;e++)a.on(w[e],this.emit.bind(this,w[e]));this._read=function(b){s("wrapped _read",b),d&&(d=!1,a.resume())};return this};Object.defineProperty(A.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});A._fromList=V;function V(a,b){if(b.length===0)return null;var c;b.objectMode?c=b.buffer.shift():!a||a>=b.length?(b.decoder?c=b.buffer.join(""):b.buffer.length===1?c=b.buffer.head.data:c=b.buffer.concat(b.length),b.buffer.clear()):c=W(a,b.buffer,b.decoder);return c}function W(a,b,c){var d;a<b.head.data.length?(d=b.head.data.slice(0,a),b.head.data=b.head.data.slice(a)):a===b.head.data.length?d=b.shift():d=c?X(a,b):Y(a,b);return d}function X(a,b){var c=b.head,d=1,e=c.data;a-=e.length;while(c=c.next){var f=c.data,g=a>f.length?f.length:a;g===f.length?e+=f:e+=f.slice(0,a);a-=g;if(a===0){g===f.length?(++d,c.next?b.head=c.next:b.head=b.tail=null):(b.head=c,c.data=f.slice(g));break}++d}b.length-=d;return e}function Y(a,b){var c=k.allocUnsafe(a),d=b.head,e=1;d.data.copy(c);a-=d.data.length;while(d=d.next){var f=d.data,g=a>f.length?f.length:a;f.copy(c,c.length-a,0,g);a-=g;if(a===0){g===f.length?(++e,d.next?b.head=d.next:b.head=b.tail=null):(b.head=d,d.data=f.slice(g));break}++e}b.length-=e;return c}function Z(a){var c=a._readableState;if(c.length>0)throw new Error('"endReadable()" called on non-empty stream');c.endEmitted||(c.ended=!0,b.nextTick($,c,a))}function $(a,b){!a.endEmitted&&a.length===0&&(a.endEmitted=!0,b.readable=!1,b.emit("end"))}function aa(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1}}var N=!1;function O(){N||(N=!0,M());return L.exports}c={};var P={exports:c};function Q(){P.exports=d;var a=F(),b=i();b.inherits=j();b.inherits(d,a);function c(a,b){var c=this._transformState;c.transforming=!1;var d=c.writecb;if(!d)return this.emit("error",new Error("write callback called multiple times"));c.writechunk=null;c.writecb=null;b!=null&&this.push(b);d(a);c=this._readableState;c.reading=!1;(c.needReadable||c.length<c.highWaterMark)&&this._read(c.highWaterMark)}function d(b){if(!(this instanceof d))return new d(b);a.call(this,b);this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;b&&(typeof b.transform==="function"&&(this._transform=b.transform),typeof b.flush==="function"&&(this._flush=b.flush));this.on("prefinish",e)}function e(){var a=this;typeof this._flush==="function"?this._flush(function(b,c){f(a,b,c)}):f(this,null,null)}d.prototype.push=function(b,c){this._transformState.needTransform=!1;return a.prototype.push.call(this,b,c)};d.prototype._transform=function(a,b,c){throw new Error("_transform() is not implemented")};d.prototype._write=function(a,b,c){var d=this._transformState;d.writecb=c;d.writechunk=a;d.writeencoding=b;if(!d.transforming){c=this._readableState;(d.needTransform||c.needReadable||c.length<c.highWaterMark)&&this._read(c.highWaterMark)}};d.prototype._read=function(a){a=this._transformState;a.writechunk!==null&&a.writecb&&!a.transforming?(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform)):a.needTransform=!0};d.prototype._destroy=function(b,c){var d=this;a.prototype._destroy.call(this,b,function(a){c(a),d.emit("close")})};function f(a,b,c){if(b)return a.emit("error",b);c!=null&&a.push(c);if(a._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(a._transformState.transforming)throw new Error("Calling transform done when still transforming");return a.push(null)}}var R=!1;function S(){R||(R=!0,Q());return P.exports}b={};var T={exports:b};function U(){T.exports=c;var a=S(),b=i();b.inherits=j();b.inherits(c,a);function c(b){if(!(this instanceof c))return new c(b);a.call(this,b)}c.prototype._transform=function(a,b,c){c(null,a)}}var V=!1;function W(){V||(V=!0,U());return T.exports}d={};var X={exports:d};function Y(){var a={};process.env.READABLE_STREAM==="disable"&&a?(X.exports=a,d=X.exports=a.Readable,d.Readable=a.Readable,d.Writable=a.Writable,d.Duplex=a.Duplex,d.Transform=a.Transform,d.PassThrough=a.PassThrough,d.Stream=a):(d=X.exports=O(),d.Stream=a||d,d.Readable=d,d.Writable=B(),d.Duplex=F(),d.Transform=S(),d.PassThrough=W())}var Z=!1;function $(){Z||(Z=!0,Y());return X.exports}function f(a){switch(a){case void 0:return $()}}e.exports=f}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("set-immediate-shim-1.0.1",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){g.exports=typeof setImmediate==="function"?setImmediate:function(){var a=[].slice.apply(arguments);a.splice(1,0,0);setTimeout.apply(null,a)}}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/cr2jmG-CdKo/
 */
__d("jszip-3.2.0",["readable-stream-2.3.6","set-immediate-shim-1.0.1","lie-3.3.0","pako-1.0.8"],(function(a,b,c,d,e,f){"use strict";var g=b("readable-stream-2.3.6"),h=b("set-immediate-shim-1.0.1"),i=b("lie-3.3.0"),j=b("pako-1.0.8"),k={},l={exports:k};function m(){k.base64=!0;k.array=!0;k.string=!0;k.arraybuffer=typeof ArrayBuffer!=="undefined"&&typeof Uint8Array!=="undefined";k.nodebuffer=typeof Buffer!=="undefined";k.uint8array=typeof Uint8Array!=="undefined";if(typeof ArrayBuffer==="undefined")k.blob=!1;else{var a=new ArrayBuffer(0);try{k.blob=new Blob([a],{type:"application/zip"}).size===0}catch(c){try{var b=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;b=new b();b.append(a);k.blob=b.getBlob("application/zip").size===0}catch(a){k.blob=!1}}}try{k.nodestream=!!g().Readable}catch(a){k.nodestream=!1}}var n=!1;function o(){n||(n=!0,m());return l.exports}var p={},q={exports:p};function r(){var a=E(),b=o(),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";p.encode=function(b){var d=[],e,f,g,h,i=0,j=b.length,k=j,l=a.getTypeOf(b)!=="string";while(i<b.length)k=j-i,!l?(e=b.charCodeAt(i++),f=i<j?b.charCodeAt(i++):0,g=i<j?b.charCodeAt(i++):0):(e=b[i++],f=i<j?b[i++]:0,g=i<j?b[i++]:0),h=e>>2,e=(e&3)<<4|f>>4,f=k>1?(f&15)<<2|g>>6:64,g=k>2?g&63:64,d.push(c.charAt(h)+c.charAt(e)+c.charAt(f)+c.charAt(g));return d.join("")};p.decode=function(a){var d,e,f,g,h=0,i=0,j="data:";if(a.substr(0,j.length)===j)throw new Error("Invalid base64 input, it looks like a data url.");a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");j=a.length*3/4;a.charAt(a.length-1)===c.charAt(64)&&j--;a.charAt(a.length-2)===c.charAt(64)&&j--;if(j%1!==0)throw new Error("Invalid base64 input, bad content length.");var k;b.uint8array?k=new Uint8Array(j|0):k=new Array(j|0);while(h<a.length)j=c.indexOf(a.charAt(h++)),e=c.indexOf(a.charAt(h++)),f=c.indexOf(a.charAt(h++)),g=c.indexOf(a.charAt(h++)),j=j<<2|e>>4,e=(e&15)<<4|f>>2,d=(f&3)<<6|g,k[i++]=j,f!==64&&(k[i++]=e),g!==64&&(k[i++]=d);return k}}var s=!1;function t(){s||(s=!0,r());return q.exports}c={};var u={exports:c};function v(){u.exports={isNode:typeof Buffer!=="undefined",newBufferFrom:function(a,b){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,b);else{if(typeof a==="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,b)}},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);else{a=new Buffer(a);a.fill(0);return a}},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on==="function"&&typeof a.pause==="function"&&typeof a.resume==="function"}}}var w=!1;function x(){w||(w=!0,v());return u.exports}d={};var y={exports:d};function z(){var a;typeof Promise!=="undefined"?a=Promise:a=i();y.exports={Promise:a}}var A=!1;function B(){A||(A=!0,z());return y.exports}var C={},aa={exports:C};function ba(){var a=o(),b=t(),c=x(),d=h(),e=B();function f(b){var c;a.uint8array?c=new Uint8Array(b.length):c=new Array(b.length);return i(b,c)}C.newBlob=function(a,b){C.checkSupport("blob");try{return new Blob([a],{type:b})}catch(d){try{var c=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;c=new c();c.append(a);return c.getBlob(b)}catch(a){throw new Error("Bug : can't construct the Blob.")}}};function g(a){return a}function i(a,b){for(var c=0;c<a.length;++c)b[c]=a.charCodeAt(c)&255;return b}var j={stringifyByChunk:function(a,b,c){var d=[],e=0,f=a.length;if(f<=c)return String.fromCharCode.apply(null,a);while(e<f)b==="array"||b==="nodebuffer"?d.push(String.fromCharCode.apply(null,a.slice(e,Math.min(e+c,f)))):d.push(String.fromCharCode.apply(null,a.subarray(e,Math.min(e+c,f)))),e+=c;return d.join("")},stringifyByChar:function(a){var b="";for(var c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);return b},applyCanBeUsed:{uint8array:function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch(a){return!1}}(),nodebuffer:function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,c.allocBuffer(1)).length===1}catch(a){return!1}}()}};function k(a){var b=65536,c=C.getTypeOf(a),d=!0;c==="uint8array"?d=j.applyCanBeUsed.uint8array:c==="nodebuffer"&&(d=j.applyCanBeUsed.nodebuffer);if(d)while(b>1)try{return j.stringifyByChunk(a,c,b)}catch(a){b=Math.floor(b/2)}return j.stringifyByChar(a)}C.applyFromCharCode=k;function l(a,b){for(var c=0;c<a.length;c++)b[c]=a[c];return b}var m={};m.string={string:g,array:function(a){return i(a,new Array(a.length))},arraybuffer:function(a){return m.string.uint8array(a).buffer},uint8array:function(a){return i(a,new Uint8Array(a.length))},nodebuffer:function(a){return i(a,c.allocBuffer(a.length))}};m.array={string:k,array:g,arraybuffer:function(a){return new Uint8Array(a).buffer},uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return c.newBufferFrom(a)}};m.arraybuffer={string:function(a){return k(new Uint8Array(a))},array:function(a){return l(new Uint8Array(a),new Array(a.byteLength))},arraybuffer:g,uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return c.newBufferFrom(new Uint8Array(a))}};m.uint8array={string:k,array:function(a){return l(a,new Array(a.length))},arraybuffer:function(a){return a.buffer},uint8array:g,nodebuffer:function(a){return c.newBufferFrom(a)}};m.nodebuffer={string:k,array:function(a){return l(a,new Array(a.length))},arraybuffer:function(a){return m.nodebuffer.uint8array(a).buffer},uint8array:function(a){return l(a,new Uint8Array(a.length))},nodebuffer:g};C.transformTo=function(a,b){b||(b="");if(!a)return b;C.checkSupport(a);var c=C.getTypeOf(b);c=m[c][a](b);return c};C.getTypeOf=function(b){if(typeof b==="string")return"string";if(Object.prototype.toString.call(b)==="[object Array]")return"array";if(a.nodebuffer&&c.isBuffer(b))return"nodebuffer";if(a.uint8array&&b instanceof Uint8Array)return"uint8array";if(a.arraybuffer&&b instanceof ArrayBuffer)return"arraybuffer"};C.checkSupport=function(b){var c=a[b.toLowerCase()];if(!c)throw new Error(b+" is not supported by this platform")};C.MAX_VALUE_16BITS=65535;C.MAX_VALUE_32BITS=-1;C.pretty=function(a){var b="",c,d;for(d=0;d<(a||"").length;d++)c=a.charCodeAt(d),b+="\\x"+(c<16?"0":"")+c.toString(16).toUpperCase();return b};C.delay=function(a,b,c){d(function(){a.apply(c||null,b||[])})};C.inherits=function(a,b){var c=function(){};c.prototype=b.prototype;a.prototype=new c()};C.extend=function(){var a={},b,c;for(b=0;b<arguments.length;b++)for(c in arguments[b])arguments[b].hasOwnProperty(c)&&typeof a[c]==="undefined"&&(a[c]=arguments[b][c]);return a};C.prepareContent=function(c,d,g,h,i){d=e.Promise.resolve(d).then(function(b){var c=a.blob&&(b instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(b))!==-1);if(c&&typeof FileReader!=="undefined")return new e.Promise(function(a,c){var d=new FileReader();d.onload=function(b){a(b.target.result)};d.onerror=function(a){c(a.target.error)};d.readAsArrayBuffer(b)});else return b});return d.then(function(a){var d=C.getTypeOf(a);if(!d)return e.Promise.reject(new Error("Can't read the data of '"+c+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"));d==="arraybuffer"?a=C.transformTo("uint8array",a):d==="string"&&(i?a=b.decode(a):g&&(h!==!0&&(a=f(a))));return a})}}var D=!1;function E(){D||(D=!0,ba());return aa.exports}f={};var F={exports:f};function ca(){function a(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){if(this.isFinished)return!1;this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp());return!0},on:function(a,b){this._listeners[a].push(b);return this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,b){if(this._listeners[a])for(var c=0;c<this._listeners[a].length;c++)this._listeners[a][c].call(this,b)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo;this.mergeStreamInfo();this.previous=a;var b=this;a.on("data",function(a){b.processChunk(a)});a.on("end",function(){b.end()});a.on("error",function(a){b.error(a)});return this},pause:function(){if(this.isPaused||this.isFinished)return!1;this.isPaused=!0;this.previous&&this.previous.pause();return!0},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var a=!1;this.generatedError&&(this.error(this.generatedError),a=!0);this.previous&&this.previous.resume();return!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,b){this.extraStreamInfo[a]=b;this.mergeStreamInfo();return this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo){if(!this.extraStreamInfo.hasOwnProperty(a))continue;this.streamInfo[a]=this.extraStreamInfo[a]}},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0;this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;if(this.previous)return this.previous+" -> "+a;else return a}};F.exports=a}var G=!1;function H(){G||(G=!0,ca());return F.exports}var I={},da={exports:I};function ea(){var a=E(),b=o(),c=x(),d=H(),e=new Array(256);for(var f=0;f<256;f++)e[f]=f>=252?6:f>=248?5:f>=240?4:f>=224?3:f>=192?2:1;e[254]=e[254]=1;var g=function(c){var d,e,f,g,a,h=c.length,i=0;for(g=0;g<h;g++)e=c.charCodeAt(g),(e&64512)===55296&&g+1<h&&(f=c.charCodeAt(g+1),(f&64512)===56320&&(e=65536+(e-55296<<10)+(f-56320),g++)),i+=e<128?1:e<2048?2:e<65536?3:4;b.uint8array?d=new Uint8Array(i):d=new Array(i);for(a=0,g=0;a<i;g++)e=c.charCodeAt(g),(e&64512)===55296&&g+1<h&&(f=c.charCodeAt(g+1),(f&64512)===56320&&(e=65536+(e-55296<<10)+(f-56320),g++)),e<128?d[a++]=e:e<2048?(d[a++]=192|e>>>6,d[a++]=128|e&63):e<65536?(d[a++]=224|e>>>12,d[a++]=128|e>>>6&63,d[a++]=128|e&63):(d[a++]=240|e>>>18,d[a++]=128|e>>>12&63,d[a++]=128|e>>>6&63,d[a++]=128|e&63);return d},h=function(a,b){var c;b=b||a.length;b>a.length&&(b=a.length);c=b-1;while(c>=0&&(a[c]&192)===128)c--;if(c<0)return b;return c===0?b:c+e[a[c]]>b?c:b},i=function(c){var b,d,f,g,h=c.length,i=new Array(h*2);for(d=0,b=0;b<h;){f=c[b++];if(f<128){i[d++]=f;continue}g=e[f];if(g>4){i[d++]=65533;b+=g-1;continue}f&=g===2?31:g===3?15:7;while(g>1&&b<h)f=f<<6|c[b++]&63,g--;if(g>1){i[d++]=65533;continue}f<65536?i[d++]=f:(f-=65536,i[d++]=55296|f>>10&1023,i[d++]=56320|f&1023)}i.length!==d&&(i.subarray?i=i.subarray(0,d):i.length=d);return a.applyFromCharCode(i)};I.utf8encode=function(a){return b.nodebuffer?c.newBufferFrom(a,"utf-8"):g(a)};I.utf8decode=function(c){if(b.nodebuffer)return a.transformTo("nodebuffer",c).toString("utf-8");c=a.transformTo(b.uint8array?"uint8array":"array",c);return i(c)};function j(){d.call(this,"utf-8 decode"),this.leftOver=null}a.inherits(j,d);j.prototype.processChunk=function(c){var d=a.transformTo(b.uint8array?"uint8array":"array",c.data);if(this.leftOver&&this.leftOver.length){if(b.uint8array){var e=d;d=new Uint8Array(e.length+this.leftOver.length);d.set(this.leftOver,0);d.set(e,this.leftOver.length)}else d=this.leftOver.concat(d);this.leftOver=null}e=h(d);var f=d;e!==d.length&&(b.uint8array?(f=d.subarray(0,e),this.leftOver=d.subarray(e,d.length)):(f=d.slice(0,e),this.leftOver=d.slice(e,d.length)));this.push({data:I.utf8decode(f),meta:c.meta})};j.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:I.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)};I.Utf8DecodeWorker=j;function k(){d.call(this,"utf-8 encode")}a.inherits(k,d);k.prototype.processChunk=function(a){this.push({data:I.utf8encode(a.data),meta:a.meta})};I.Utf8EncodeWorker=k}var J=!1;function K(){J||(J=!0,ea());return da.exports}b={};var L={exports:b};function fa(){var a=H(),b=E();function c(b){a.call(this,"ConvertWorker to "+b),this.destType=b}b.inherits(c,a);c.prototype.processChunk=function(a){this.push({data:b.transformTo(this.destType,a.data),meta:a.meta})};L.exports=c}var M=!1;function ga(){M||(M=!0,fa());return L.exports}c={};var N={exports:c};function ha(){var a=g().Readable,b=E();b.inherits(c,a);function c(b,c,d){a.call(this,c);this._helper=b;var e=this;b.on("data",function(a,b){e.push(a)||e._helper.pause(),d&&d(b)}).on("error",function(a){e.emit("error",a)}).on("end",function(){e.push(null)})}c.prototype._read=function(){this._helper.resume()};N.exports=c}var O=!1;function ia(){O||(O=!0,ha());return N.exports}d={};var P={exports:d};function ja(){var a=E(),b=ga(),c=H(),d=t(),e=o(),f=B(),g=null;if(e.nodestream)try{g=ia()}catch(a){}function h(b,c,e){switch(b){case"blob":return a.newBlob(a.transformTo("arraybuffer",c),e);case"base64":return d.encode(c);default:return a.transformTo(b,c)}}function i(a,b){var c,d=0,e=null,f=0;for(c=0;c<b.length;c++)f+=b[c].length;switch(a){case"string":return b.join("");case"array":return Array.prototype.concat.apply([],b);case"uint8array":e=new Uint8Array(f);for(c=0;c<b.length;c++)e.set(b[c],d),d+=b[c].length;return e;case"nodebuffer":return Buffer.concat(b);default:throw new Error("concat : unsupported type '"+a+"'")}}function j(a,b){return new f.Promise(function(c,d){var e=[],f=a._internalType,g=a._outputType,j=a._mimeType;a.on("data",function(a,c){e.push(a),b&&b(c)}).on("error",function(a){e=[],d(a)}).on("end",function(){try{var a=h(g,i(f,e),j);c(a)}catch(a){d(a)}e=[]}).resume()})}function k(d,e,f){var g=e;switch(e){case"blob":case"arraybuffer":g="uint8array";break;case"base64":g="string";break}try{this._internalType=g,this._outputType=e,this._mimeType=f,a.checkSupport(g),this._worker=d.pipe(new b(g)),d.lock()}catch(a){this._worker=new c("error"),this._worker.error(a)}}k.prototype={accumulate:function(a){return j(this,a)},on:function(b,c){var d=this;b==="data"?this._worker.on(b,function(a){c.call(d,a.data,a.meta)}):this._worker.on(b,function(){a.delay(c,arguments,d)});return this},resume:function(){a.delay(this._worker.resume,[],this._worker);return this},pause:function(){this._worker.pause();return this},toNodejsStream:function(b){a.checkSupport("nodestream");if(this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},b)}};P.exports=k}var Q=!1;function R(){Q||(Q=!0,ja());return P.exports}var S={},ka={exports:S};function la(){S.base64=!1,S.binary=!1,S.dir=!1,S.createFolders=!0,S.date=null,S.compression=null,S.compressionOptions=null,S.comment=null,S.unixPermissions=null,S.dosPermissions=null}var T=!1;function U(){T||(T=!0,la());return ka.exports}f={};var V={exports:f};function ma(){var a=E(),b=H(),c=16*1024;function d(c){b.call(this,"DataWorker");var d=this;this.dataIsReady=!1;this.index=0;this.max=0;this.data=null;this.type="";this._tickScheduled=!1;c.then(function(b){d.dataIsReady=!0,d.data=b,d.max=b&&b.length||0,d.type=a.getTypeOf(b),d.isPaused||d._tickAndRepeat()},function(a){d.error(a)})}a.inherits(d,b);d.prototype.cleanUp=function(){b.prototype.cleanUp.call(this),this.data=null};d.prototype.resume=function(){if(!b.prototype.resume.call(this))return!1;!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this));return!0};d.prototype._tickAndRepeat=function(){this._tickScheduled=!1;if(this.isPaused||this.isFinished)return;this._tick();this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0)};d.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var a=c,b=null;a=Math.min(this.max,this.index+a);if(this.index>=this.max)return this.end();else{switch(this.type){case"string":b=this.data.substring(this.index,a);break;case"uint8array":b=this.data.subarray(this.index,a);break;case"array":case"nodebuffer":b=this.data.slice(this.index,a);break}this.index=a;return this.push({data:b,meta:{percent:this.max?this.index/this.max*100:0}})}};V.exports=d}var na=!1;function oa(){na||(na=!0,ma());return V.exports}b={};var pa={exports:b};function qa(){var a=E(),b=H();function c(a){b.call(this,"DataLengthProbe for "+a),this.propName=a,this.withStreamInfo(a,0)}a.inherits(c,b);c.prototype.processChunk=function(a){if(a){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+a.data.length}b.prototype.processChunk.call(this,a)};pa.exports=c}var ra=!1;function sa(){ra||(ra=!0,qa());return pa.exports}c={};var ta={exports:c};function ua(){var a=E();function b(){var a,b=[];for(var c=0;c<256;c++){a=c;for(var d=0;d<8;d++)a=a&1?3988292384^a>>>1:a>>>1;b[c]=a}return b}var c=b();function d(a,b,d,e){var f=c;d=e+d;a=a^-1;for(e=e;e<d;e++)a=a>>>8^f[(a^b[e])&255];return a^-1}function e(a,b,d,e){var f=c;d=e+d;a=a^-1;for(e=e;e<d;e++)a=a>>>8^f[(a^b.charCodeAt(e))&255];return a^-1}ta.exports=function(b,c){if(typeof b==="undefined"||!b.length)return 0;var f=a.getTypeOf(b)!=="string";if(f)return d(c|0,b,b.length,0);else return e(c|0,b,b.length,0)}}var va=!1;function W(){va||(va=!0,ua());return ta.exports}d={};var wa={exports:d};function xa(){var a=H(),b=W(),c=E();function d(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}c.inherits(d,a);d.prototype.processChunk=function(a){this.streamInfo.crc32=b(a.data,this.streamInfo.crc32||0),this.push(a)};wa.exports=d}var ya=!1;function za(){ya||(ya=!0,xa());return wa.exports}f={};var Aa={exports:f};function Ba(){var a=B(),b=oa(),c=sa(),d=za(),c=sa();function e(a,b,c,d,e){this.compressedSize=a,this.uncompressedSize=b,this.crc32=c,this.compression=d,this.compressedContent=e}e.prototype={getContentWorker:function(){var d=new b(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),e=this;d.on("end",function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")});return d},getCompressedWorker:function(){return new b(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}};e.createWorkerFrom=function(a,b,e){return a.pipe(new d()).pipe(new c("uncompressedSize")).pipe(b.compressWorker(e)).pipe(new c("compressedSize")).withStreamInfo("compression",b)};Aa.exports=e}var Ca=!1;function X(){Ca||(Ca=!0,Ba());return Aa.exports}b={};var Da={exports:b};function Ea(){var a=R(),b=oa(),c=K(),d=X(),e=H(),f=function(a,b,c){this.name=a,this.dir=c.dir,this.date=c.date,this.comment=c.comment,this.unixPermissions=c.unixPermissions,this.dosPermissions=c.dosPermissions,this._data=b,this._dataBinary=c.binary,this.options={compression:c.compression,compressionOptions:c.compressionOptions}};f.prototype={internalStream:function(b){var d=null,f="string";try{if(!b)throw new Error("No output type specified.");f=b.toLowerCase();b=f==="string"||f==="text";(f==="binarystring"||f==="text")&&(f="string");d=this._decompressWorker();var g=!this._dataBinary;g&&!b&&(d=d.pipe(new c.Utf8EncodeWorker()));!g&&b&&(d=d.pipe(new c.Utf8DecodeWorker()))}catch(a){d=new e("error"),d.error(a)}return new a(d,f,"")},async:function(a,b){return this.internalStream(a).accumulate(b)},nodeStream:function(a,b){return this.internalStream(a||"nodebuffer").toNodejsStream(b)},_compressWorker:function(a,b){if(this._data instanceof d&&this._data.compression.magic===a.magic)return this._data.getCompressedWorker();else{var e=this._decompressWorker();this._dataBinary||(e=e.pipe(new c.Utf8EncodeWorker()));return d.createWorkerFrom(e,a,b)}},_decompressWorker:function(){if(this._data instanceof d)return this._data.getContentWorker();else if(this._data instanceof e)return this._data;else return new b(this._data)}};var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")};for(var i=0;i<g.length;i++)f.prototype[g[i]]=h;Da.exports=f}var Fa=!1;function Ga(){Fa||(Fa=!0,Ea());return Da.exports}var Y={},Ha={exports:Y};function Ia(){var a=typeof Uint8Array!=="undefined"&&typeof Uint16Array!=="undefined"&&typeof Uint32Array!=="undefined",b=j(),c=E(),d=H(),e=a?"uint8array":"array";Y.magic="\b\0";function f(a,b){d.call(this,"FlateWorker/"+a),this._pako=null,this._pakoAction=a,this._pakoOptions=b,this.meta={}}c.inherits(f,d);f.prototype.processChunk=function(a){this.meta=a.meta,this._pako===null&&this._createPako(),this._pako.push(c.transformTo(e,a.data),!1)};f.prototype.flush=function(){d.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)};f.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this._pako=null};f.prototype._createPako=function(){this._pako=new b[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var a=this;this._pako.onData=function(b){a.push({data:b,meta:a.meta})}};Y.compressWorker=function(a){return new f("Deflate",a)};Y.uncompressWorker=function(){return new f("Inflate",{})}}var Ja=!1;function Ka(){Ja||(Ja=!0,Ia());return Ha.exports}var Z={},La={exports:Z};function Ma(){var a=H();Z.STORE={magic:"\0\0",compressWorker:function(b){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}};Z.DEFLATE=Ka()}var Na=!1;function Oa(){Na||(Na=!0,Ma());return La.exports}var $={},Pa={exports:$};function Qa(){$.LOCAL_FILE_HEADER="PK\x03\x04",$.CENTRAL_FILE_HEADER="PK\x01\x02",$.CENTRAL_DIRECTORY_END="PK\x05\x06",$.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",$.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",$.DATA_DESCRIPTOR="PK\x07\b"}var Ra=!1;function Sa(){Ra||(Ra=!0,Qa());return Pa.exports}c={};var Ta={exports:c};function Ua(){var a=E(),b=H(),c=K(),d=W(),e=Sa(),f=function(a,b){var c="",d;for(d=0;d<b;d++)c+=String.fromCharCode(a&255),a=a>>>8;return c},g=function(a,b){var c=a;a||(c=b?16893:33204);return(c&65535)<<16},h=function(a,b){return(a||0)&63},i=function(b,i,j,k,l,m){var n=b.file,o=b.compression,p=m!==c.utf8encode,q=a.transformTo("string",m(n.name)),r=a.transformTo("string",c.utf8encode(n.name)),s=n.comment;m=a.transformTo("string",m(s));var t=a.transformTo("string",c.utf8encode(s)),u=r.length!==n.name.length;s=t.length!==s.length;var v="",w="",x="",y=n.dir,z=n.date,A={crc32:0,compressedSize:0,uncompressedSize:0};(!i||j)&&(A.crc32=b.crc32,A.compressedSize=b.compressedSize,A.uncompressedSize=b.uncompressedSize);j=0;i&&(j|=8);!p&&(u||s)&&(j|=2048);b=0;i=0;y&&(b|=16);l==="UNIX"?(i=798,b|=g(n.unixPermissions,y)):(i=20,b|=h(n.dosPermissions));p=z.getUTCHours();p=p<<6;p=p|z.getUTCMinutes();p=p<<5;p=p|z.getUTCSeconds()/2;l=z.getUTCFullYear()-1980;l=l<<4;l=l|z.getUTCMonth()+1;l=l<<5;l=l|z.getUTCDate();u&&(w=f(1,1)+f(d(q),4)+r,v+="up"+f(w.length,2)+w);s&&(x=f(1,1)+f(d(m),4)+t,v+="uc"+f(x.length,2)+x);y="";y+="\n\0";y+=f(j,2);y+=o.magic;y+=f(p,2);y+=f(l,2);y+=f(A.crc32,4);y+=f(A.compressedSize,4);y+=f(A.uncompressedSize,4);y+=f(q.length,2);y+=f(v.length,2);n=e.LOCAL_FILE_HEADER+y+q+v;z=e.CENTRAL_FILE_HEADER+f(i,2)+y+f(m.length,2)+"\0\0\0\0"+f(b,4)+f(k,4)+q+v+m;return{fileRecord:n,dirRecord:z}},j=function(b,c,d,g,h){h=a.transformTo("string",h(g));g=e.CENTRAL_DIRECTORY_END+"\0\0\0\0"+f(b,2)+f(b,2)+f(c,4)+f(d,4)+f(h.length,2)+h;return g},k=function(a){a=e.DATA_DESCRIPTOR+f(a.crc32,4)+f(a.compressedSize,4)+f(a.uncompressedSize,4);return a};function l(a,c,d,e){b.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=c,this.zipPlatform=d,this.encodeFileName=e,this.streamFiles=a,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(l,b);l.prototype.push=function(a){var c=a.meta.percent||0,d=this.entriesCount,e=this._sources.length;this.accumulate?this.contentBuffer.push(a):(this.bytesWritten+=a.data.length,b.prototype.push.call(this,{data:a.data,meta:{currentFile:this.currentFile,percent:d?(c+100*(d-e-1))/d:100}}))};l.prototype.openedSource=function(a){this.currentSourceOffset=this.bytesWritten;this.currentFile=a.file.name;var b=this.streamFiles&&!a.file.dir;if(b){a=i(a,b,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:a.fileRecord,meta:{percent:0}})}else this.accumulate=!0};l.prototype.closedSource=function(a){this.accumulate=!1;var b=this.streamFiles&&!a.file.dir,c=i(a,b,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.dirRecords.push(c.dirRecord);if(b)this.push({data:k(a),meta:{percent:100}});else{this.push({data:c.fileRecord,meta:{percent:0}});while(this.contentBuffer.length)this.push(this.contentBuffer.shift())}this.currentFile=null};l.prototype.flush=function(){var a=this.bytesWritten;for(var b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});b=this.bytesWritten-a;b=j(this.dirRecords.length,b,a,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})};l.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()};l.prototype.registerPrevious=function(a){this._sources.push(a);var b=this;a.on("data",function(a){b.processChunk(a)});a.on("end",function(){b.closedSource(b.previous.streamInfo),b._sources.length?b.prepareNextSource():b.end()});a.on("error",function(a){b.error(a)});return this};l.prototype.resume=function(){if(!b.prototype.resume.call(this))return!1;if(!this.previous&&this._sources.length){this.prepareNextSource();return!0}if(!this.previous&&!this._sources.length&&!this.generatedError){this.end();return!0}};l.prototype.error=function(a){var c=this._sources;if(!b.prototype.error.call(this,a))return!1;for(var d=0;d<c.length;d++)try{c[d].error(a)}catch(a){}return!0};l.prototype.lock=function(){b.prototype.lock.call(this);var a=this._sources;for(var c=0;c<a.length;c++)a[c].lock()};Ta.exports=l}var Va=!1;function Wa(){Va||(Va=!0,Ua());return Ta.exports}var Xa={},Ya={exports:Xa};function Za(){var a=Oa(),b=Wa(),c=function(b,c){b=b||c;c=a[b];if(!c)throw new Error(b+" is not a valid compression method !");return c};Xa.generateWorker=function(a,d,e){var f=new b(d.streamFiles,e,d.platform,d.encodeFileName),g=0;try{a.forEach(function(a,b){g++;var e=c(b.options.compression,d.compression),h=b.options.compressionOptions||d.compressionOptions||{},i=b.dir,j=b.date;b._compressWorker(e,h).withStreamInfo("file",{name:a,dir:i,date:j,comment:b.comment||"",unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions}).pipe(f)}),f.entriesCount=g}catch(a){f.error(a)}return f}}var $a=!1;function ab(){$a||($a=!0,Za());return Ya.exports}d={};var bb={exports:d};function cb(){var a=E(),b=H();function c(a,c){b.call(this,"Nodejs stream input adapter for "+a),this._upstreamEnded=!1,this._bindStream(c)}a.inherits(c,b);c.prototype._bindStream=function(a){var b=this;this._stream=a;a.pause();a.on("data",function(a){b.push({data:a,meta:{percent:0}})}).on("error",function(a){b.isPaused?this.generatedError=a:b.error(a)}).on("end",function(){b.isPaused?b._upstreamEnded=!0:b.end()})};c.prototype.pause=function(){if(!b.prototype.pause.call(this))return!1;this._stream.pause();return!0};c.prototype.resume=function(){if(!b.prototype.resume.call(this))return!1;this._upstreamEnded?this.end():this._stream.resume();return!0};bb.exports=c}var db=!1;function eb(){db||(db=!0,cb());return bb.exports}f={};var fb={exports:f};function gb(){var a=K(),b=E(),c=H(),d=R(),e=U(),f=X(),g=Ga(),h=ab(),i=x(),j=eb(),k=function(a,d,h){var k=b.getTypeOf(d),o,p=b.extend(h||{},e);p.date=p.date||new Date();p.compression!==null&&(p.compression=p.compression.toUpperCase());typeof p.unixPermissions==="string"&&(p.unixPermissions=parseInt(p.unixPermissions,8));p.unixPermissions&&p.unixPermissions&16384&&(p.dir=!0);p.dosPermissions&&p.dosPermissions&16&&(p.dir=!0);p.dir&&(a=m(a));p.createFolders&&(o=l(a))&&n.call(this,o,!0);var q=k==="string"&&p.binary===!1&&p.base64===!1;(!h||typeof h.binary==="undefined")&&(p.binary=!q);h=d instanceof f&&d.uncompressedSize===0;(h||p.dir||!d||d.length===0)&&(p.base64=!1,p.binary=!0,d="",p.compression="STORE",k="string");d instanceof f||d instanceof c?q=d:i.isNode&&i.isStream(d)?q=new j(a,d):q=b.prepareContent(a,d,p.binary,p.optimizedBinaryString,p.base64);h=new g(a,q,p);this.files[a]=h},l=function(a){a.slice(-1)==="/"&&(a=a.substring(0,a.length-1));var b=a.lastIndexOf("/");return b>0?a.substring(0,b):""},m=function(a){a.slice(-1)!=="/"&&(a+="/");return a},n=function(a,b){b=typeof b!=="undefined"?b:e.createFolders;a=m(a);this.files[a]||k.call(this,a,null,{dir:!0,createFolders:b});return this.files[a]};function o(a){return Object.prototype.toString.call(a)==="[object RegExp]"}var p={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(a){var b,c,d;for(b in this.files){if(!this.files.hasOwnProperty(b))continue;d=this.files[b];c=b.slice(this.root.length,b.length);c&&b.slice(0,this.root.length)===this.root&&a(c,d)}},filter:function(a){var b=[];this.forEach(function(c,d){a(c,d)&&b.push(d)});return b},file:function(a,b,c){if(arguments.length===1)if(o(a)){var d=a;return this.filter(function(a,b){return!b.dir&&d.test(a)})}else{var e=this.files[this.root+a];if(e&&!e.dir)return e;else return null}else a=this.root+a,k.call(this,a,b,c);return this},folder:function(a){if(!a)return this;if(o(a))return this.filter(function(b,c){return c.dir&&a.test(b)});var b=this.root+a;b=n.call(this,b);var c=this.clone();c.root=b.name;return c},remove:function(a){a=this.root+a;var b=this.files[a];b||(a.slice(-1)!=="/"&&(a+="/"),b=this.files[a]);if(b&&!b.dir)delete this.files[a];else{b=this.filter(function(c,b){return b.name.slice(0,a.length)===a});for(var c=0;c<b.length;c++)delete this.files[b[c].name]}return this},generate:function(a){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var f,g={};try{g=b.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode});g.type=g.type.toLowerCase();g.compression=g.compression.toUpperCase();g.type==="binarystring"&&(g.type="string");if(!g.type)throw new Error("No output type specified.");b.checkSupport(g.type);(g.platform==="darwin"||g.platform==="freebsd"||g.platform==="linux"||g.platform==="sunos")&&(g.platform="UNIX");g.platform==="win32"&&(g.platform="DOS");e=g.comment||this.comment||"";f=h.generateWorker(this,g,e)}catch(a){f=new c("error"),f.error(a)}return new d(f,g.type||"string",g.mimeType)},generateAsync:function(a,b){return this.generateInternalStream(a).accumulate(b)},generateNodeStream:function(a,b){a=a||{};a.type||(a.type="nodebuffer");return this.generateInternalStream(a).toNodejsStream(b)}};fb.exports=p}var hb=!1;function ib(){hb||(hb=!0,gb());return fb.exports}b={};var jb={exports:b};function kb(){var a=E();function b(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}b.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(a){},readInt:function(a){var b=0,c;this.checkOffset(a);for(c=this.index+a-1;c>=this.index;c--)b=(b<<8)+this.byteAt(c);this.index+=a;return b},readString:function(b){return a.transformTo("string",this.readData(b))},readData:function(a){},lastIndexOfSignature:function(a){},readAndCheckSignature:function(a){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC((a>>25&127)+1980,(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(a&31)<<1))}};jb.exports=b}var lb=!1;function mb(){lb||(lb=!0,kb());return jb.exports}c={};var nb={exports:c};function ob(){var a=mb(),b=E();function c(b){a.call(this,b);for(var c=0;c<this.data.length;c++)b[c]=b[c]&255}b.inherits(c,a);c.prototype.byteAt=function(a){return this.data[this.zero+a]};c.prototype.lastIndexOfSignature=function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2);a=a.charCodeAt(3);for(var e=this.length-4;e>=0;--e)if(this.data[e]===b&&this.data[e+1]===c&&this.data[e+2]===d&&this.data[e+3]===a)return e-this.zero;return-1};c.prototype.readAndCheckSignature=function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2);a=a.charCodeAt(3);var e=this.readData(4);return b===e[0]&&c===e[1]&&d===e[2]&&a===e[3]};c.prototype.readData=function(a){this.checkOffset(a);if(a===0)return[];var b=this.data.slice(this.zero+this.index,this.zero+this.index+a);this.index+=a;return b};nb.exports=c}var pb=!1;function qb(){pb||(pb=!0,ob());return nb.exports}d={};var rb={exports:d};function sb(){var a=mb(),b=E();function c(b){a.call(this,b)}b.inherits(c,a);c.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)};c.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero};c.prototype.readAndCheckSignature=function(a){var b=this.readData(4);return a===b};c.prototype.readData=function(a){this.checkOffset(a);var b=this.data.slice(this.zero+this.index,this.zero+this.index+a);this.index+=a;return b};rb.exports=c}var tb=!1;function ub(){tb||(tb=!0,sb());return rb.exports}f={};var vb={exports:f};function wb(){var a=qb(),b=E();function c(b){a.call(this,b)}b.inherits(c,a);c.prototype.readData=function(a){this.checkOffset(a);if(a===0)return new Uint8Array(0);var b=this.data.subarray(this.zero+this.index,this.zero+this.index+a);this.index+=a;return b};vb.exports=c}var xb=!1;function yb(){xb||(xb=!0,wb());return vb.exports}b={};var zb={exports:b};function Ab(){var a=yb(),b=E();function c(b){a.call(this,b)}b.inherits(c,a);c.prototype.readData=function(a){this.checkOffset(a);var b=this.data.slice(this.zero+this.index,this.zero+this.index+a);this.index+=a;return b};zb.exports=c}var Bb=!1;function Cb(){Bb||(Bb=!0,Ab());return zb.exports}c={};var Db={exports:c};function Eb(){var a=E(),b=o(),c=qb(),d=ub(),e=Cb(),f=yb();Db.exports=function(g){var h=a.getTypeOf(g);a.checkSupport(h);if(h==="string"&&!b.uint8array)return new d(g);if(h==="nodebuffer")return new e(g);return b.uint8array?new f(a.transformTo("uint8array",g)):new c(a.transformTo("array",g))}}var Fb=!1;function Gb(){Fb||(Fb=!0,Eb());return Db.exports}d={};var Hb={exports:d};function Ib(){var a=Gb(),b=E(),c=X(),d=W(),e=K(),f=Oa(),g=o(),h=0,i=3,j=function(a){for(var b in f){if(!f.hasOwnProperty(b))continue;if(f[b].magic===a)return f[b]}return null};function k(a,b){this.options=a,this.loadOptions=b}k.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},readLocalPart:function(a){var d;a.skip(22);this.fileNameLength=a.readInt(2);d=a.readInt(2);this.fileName=a.readData(this.fileNameLength);a.skip(d);if(this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");d=j(this.compressionMethod);if(d===null)throw new Error("Corrupted zip : compression "+b.pretty(this.compressionMethod)+" unknown (inner file : "+b.transformTo("string",this.fileName)+")");this.decompressed=new c(this.compressedSize,this.uncompressedSize,this.crc32,d,a.readData(this.compressedSize))},readCentralPart:function(a){this.versionMadeBy=a.readInt(2);a.skip(2);this.bitFlag=a.readInt(2);this.compressionMethod=a.readString(2);this.date=a.readDate();this.crc32=a.readInt(4);this.compressedSize=a.readInt(4);this.uncompressedSize=a.readInt(4);var b=a.readInt(2);this.extraFieldsLength=a.readInt(2);this.fileCommentLength=a.readInt(2);this.diskNumberStart=a.readInt(2);this.internalFileAttributes=a.readInt(2);this.externalFileAttributes=a.readInt(4);this.localHeaderOffset=a.readInt(4);if(this.isEncrypted())throw new Error("Encrypted zip are not supported");a.skip(b);this.readExtraFields(a);this.parseZIP64ExtraField(a);this.fileComment=a.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null;this.dosPermissions=null;var a=this.versionMadeBy>>8;this.dir=this.externalFileAttributes&16?!0:!1;a===h&&(this.dosPermissions=this.externalFileAttributes&63);a===i&&(this.unixPermissions=this.externalFileAttributes>>16&65535);!this.dir&&this.fileNameStr.slice(-1)==="/"&&(this.dir=!0)},parseZIP64ExtraField:function(c){if(!this.extraFields[1])return;c=a(this.extraFields[1].value);this.uncompressedSize===b.MAX_VALUE_32BITS&&(this.uncompressedSize=c.readInt(8));this.compressedSize===b.MAX_VALUE_32BITS&&(this.compressedSize=c.readInt(8));this.localHeaderOffset===b.MAX_VALUE_32BITS&&(this.localHeaderOffset=c.readInt(8));this.diskNumberStart===b.MAX_VALUE_32BITS&&(this.diskNumberStart=c.readInt(4))},readExtraFields:function(a){var b=a.index+this.extraFieldsLength,c,d,e;this.extraFields||(this.extraFields={});while(a.index<b)c=a.readInt(2),d=a.readInt(2),e=a.readData(d),this.extraFields[c]={id:c,length:d,value:e}},handleUTF8:function(){var a=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=e.utf8decode(this.fileName),this.fileCommentStr=e.utf8decode(this.fileComment);else{var c=this.findExtraFieldUnicodePath();if(c!==null)this.fileNameStr=c;else{c=b.transformTo(a,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(c)}c=this.findExtraFieldUnicodeComment();if(c!==null)this.fileCommentStr=c;else{c=b.transformTo(a,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(c)}}},findExtraFieldUnicodePath:function(){var b=this.extraFields[28789];if(b){var c=a(b.value);if(c.readInt(1)!==1)return null;return d(this.fileName)!==c.readInt(4)?null:e.utf8decode(c.readData(b.length-5))}return null},findExtraFieldUnicodeComment:function(){var b=this.extraFields[25461];if(b){var c=a(b.value);if(c.readInt(1)!==1)return null;return d(this.fileComment)!==c.readInt(4)?null:e.utf8decode(c.readData(b.length-5))}return null}};Hb.exports=k}var Jb=!1;function Kb(){Jb||(Jb=!0,Ib());return Hb.exports}f={};var Lb={exports:f};function Mb(){var a=Gb(),b=E(),c=Sa(),d=Kb();K();var e=o();function f(a){this.files=[],this.loadOptions=a}f.prototype={checkSignature:function(a){if(!this.reader.readAndCheckSignature(a)){this.reader.index-=4;var c=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+b.pretty(c)+", expected "+b.pretty(a)+")")}},isSignature:function(a,b){var c=this.reader.index;this.reader.setIndex(a);a=this.reader.readString(4);a=a===b;this.reader.setIndex(c);return a},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2);this.diskWithCentralDirStart=this.reader.readInt(2);this.centralDirRecordsOnThisDisk=this.reader.readInt(2);this.centralDirRecords=this.reader.readInt(2);this.centralDirSize=this.reader.readInt(4);this.centralDirOffset=this.reader.readInt(4);this.zipCommentLength=this.reader.readInt(2);var a=this.reader.readData(this.zipCommentLength),c=e.uint8array?"uint8array":"array";c=b.transformTo(c,a);this.zipComment=this.loadOptions.decodeFileName(c)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8);this.reader.skip(4);this.diskNumber=this.reader.readInt(4);this.diskWithCentralDirStart=this.reader.readInt(4);this.centralDirRecordsOnThisDisk=this.reader.readInt(8);this.centralDirRecords=this.reader.readInt(8);this.centralDirSize=this.reader.readInt(8);this.centralDirOffset=this.reader.readInt(8);this.zip64ExtensibleData={};var a=this.zip64EndOfCentralSize-44,b=0,c,d,e;while(b<a)c=this.reader.readInt(2),d=this.reader.readInt(4),e=this.reader.readData(d),this.zip64ExtensibleData[c]={id:c,length:d,value:e}},readBlockZip64EndOfCentralLocator:function(){this.diskWithZip64CentralDirStart=this.reader.readInt(4);this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8);this.disksCount=this.reader.readInt(4);if(this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var a,b;for(a=0;a<this.files.length;a++)b=this.files[a],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(c.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var a;this.reader.setIndex(this.centralDirOffset);while(this.reader.readAndCheckSignature(c.CENTRAL_FILE_HEADER))a=new d({zip64:this.zip64},this.loadOptions),a.readCentralPart(this.reader),this.files.push(a);if(this.centralDirRecords!==this.files.length&&(this.centralDirRecords!==0&&this.files.length===0))throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var a=this.reader.lastIndexOfSignature(c.CENTRAL_DIRECTORY_END);if(a<0){var d=!this.isSignature(0,c.LOCAL_FILE_HEADER);if(d)throw new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");else throw new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(a);d=a;this.checkSignature(c.CENTRAL_DIRECTORY_END);this.readBlockEndOfCentral();if(this.diskNumber===b.MAX_VALUE_16BITS||this.diskWithCentralDirStart===b.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===b.MAX_VALUE_16BITS||this.centralDirRecords===b.MAX_VALUE_16BITS||this.centralDirSize===b.MAX_VALUE_32BITS||this.centralDirOffset===b.MAX_VALUE_32BITS){this.zip64=!0;a=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR);if(a<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");this.reader.setIndex(a);this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR);this.readBlockZip64EndOfCentralLocator();if(!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,c.ZIP64_CENTRAL_DIRECTORY_END)){this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_END);if(this.relativeOffsetEndOfZip64CentralDir<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory")}this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir);this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_END);this.readBlockZip64EndOfCentral()}a=this.centralDirOffset+this.centralDirSize;this.zip64&&(a+=20,a+=12+this.zip64EndOfCentralSize);a=d-a;if(a>0)this.isSignature(d,c.CENTRAL_FILE_HEADER)||(this.reader.zero=a);else if(a<0)throw new Error("Corrupted zip: missing "+Math.abs(a)+" bytes.")},prepareReader:function(b){this.reader=a(b)},load:function(a){this.prepareReader(a),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}};Lb.exports=f}var Nb=!1;function Ob(){Nb||(Nb=!0,Mb());return Lb.exports}b={};var Pb={exports:b};function Qb(){var a=E(),b=B(),c=K(),a=E(),d=Ob(),e=za(),f=x();function g(a){return new b.Promise(function(b,c){var d=a.decompressed.getContentWorker().pipe(new e());d.on("error",function(a){c(a)}).on("end",function(){d.streamInfo.crc32!==a.decompressed.crc32?c(new Error("Corrupted zip : CRC32 mismatch")):b()}).resume()})}Pb.exports=function(e,h){var i=this;h=a.extend(h||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:c.utf8decode});return f.isNode&&f.isStream(e)?b.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",e,!0,h.optimizedBinaryString,h.base64).then(function(a){var b=new d(h);b.load(a);return b}).then(function(a){var c=[b.Promise.resolve(a)];a=a.files;if(h.checkCRC32)for(var d=0;d<a.length;d++)c.push(g(a[d]));return b.Promise.all(c)}).then(function(a){a=a.shift();var b=a.files;for(var c=0;c<b.length;c++){var d=b[c];i.file(d.fileNameStr,d.decompressed,{binary:!0,optimizedBinaryString:!0,date:d.date,dir:d.dir,comment:d.fileCommentStr.length?d.fileCommentStr:null,unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions,createFolders:h.createFolders})}a.zipComment.length&&(i.comment=a.zipComment);return i})}}var Rb=!1;function Sb(){Rb||(Rb=!0,Qb());return Pb.exports}c={};var Tb={exports:c};function Ub(){function a(){if(!(this instanceof a))return new a();if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={};this.comment=null;this.root="";this.clone=function(){var b=new a();for(var c in this)typeof this[c]!=="function"&&(b[c]=this[c]);return b}}a.prototype=ib();a.prototype.loadAsync=Sb();a.support=o();a.defaults=U();a.version="3.2.0";a.loadAsync=function(b,c){return new a().loadAsync(b,c)};a.external=B();Tb.exports=a}var Vb=!1;function Wb(){Vb||(Vb=!0,Ub());return Tb.exports}function a(a){switch(a){case void 0:return Wb()}}e.exports=a}),null);
__d("jszip",["jszip-3.2.0"],(function(a,b,c,d,e,f){e.exports=b("jszip-3.2.0")()}),null);
__d("lodash-cloneDeep",["lodash-4.17.15"],(function(a,b,c,d,e,f){e.exports=b("lodash-4.17.15")("/cloneDeep")}),null);/*FB_PKG_DELIM*/
__d("EntMessageReplyType",[],(function(a,b,c,d,e,f){a=Object.freeze({REGULAR:0,BUMP:1});f["default"]=a}),66);
__d("IWAAPI",["WABridge"],(function(a,b,c,d,e,f,g){"use strict";b=1;function a(a){return function(){for(var b=arguments.length,c=new Array(b),e=0;e<b;e++)c[e]=arguments[e];return d("WABridge").getBridge().sendAndReceive("backend","waapi",{type:a,args:c})}}g.version=b;g.makeBridgedApi=a}),98);
__d("LSAddMessengerContact",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("contact_id",a[0]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"add_messenger_contact",c.i64.cast([0,308]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSContactAddMessengerContactStoredProcedure";e.exports=a}),null);
__d("LSAddMessengerContactStoredProcedure",["LSAddMessengerContact","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.contactId;return c("LSAddMessengerContact").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSCancelTaskByQueueName",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.forEach(b.filter(b.db.table(2).fetch([[[a[0]]],"queueNameTaskId"]),function(c){return c.queueName===a[0]&&c.context===b.i64.to_string(a[1])}),function(a){var d=a.item;return b.sequence([function(a){return b.forEach(b.filter(b.db.table(2).fetch([[[d.taskId]]]),function(a){return b.i64.eq(a.taskId,d.taskId)&&a.queueName===d.queueName}),function(a){return a["delete"]()})},function(a){return b.i64.eq(d.taskDispatchPriority,b.i64.cast([0,1e3]))?c[0]=b.i64.cast([0,734739218]):c[0]=b.i64.cast([0,734737036])}])})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSCoreCancelTaskByQueueNameStoredProcedure";e.exports=a}),null);
__d("LSContactGender",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,FEMALE:1,MALE:2,NEUTER:3});f["default"]=a}),66);
__d("LSContactIdType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,FBID:1,SMS_LOCAL_ID:2});f["default"]=a}),66);
__d("LSContactType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,USER:1,PAGE:2,PAGE_PERSONA:3});f["default"]=a}),66);
__d("LSContactTypeExact",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,FB_USER:1,MESSENGER_ONLY:2,DEACTIVATED_ALLOWED_ON_MESSENGER:3,MESSENGER_KID:4,FB_PAGE:5,FB_PAGE_PERSONA:6,IG_USER:7,MESSENGER_CALL_GUEST:8,WHATSAPP:9,GUEST_USER:10,IG_BUSINESS_USER:11,IG_CREATOR_USER:12,FB_SINGLE_OWNER_ADDITIONAL_PROFILE:13,PROXY_OCULUS_USER:14,WORK_VC_ENDPOINT:15,GENERATIVE_AI_BOT:16,COMMUNITY_CHAT:17,INTEROP_3P_USER:18,FB_ONLY_NOT_ALLOWED_ON_MESSENGER:19,MESSENGER_ONLY_NOT_ALLOWED_ON_FB:20,ADDITIONAL_PROFILE_PLUS:21,GROUP_ANONYMOUS_PROFILE:50,USER_FOR_SUPPORT:51});f["default"]=a}),66);
__d("LSContactViewerRelationship",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,NOT_CONTACT:1,CONTACT_OF_VIEWER:2,FACEBOOK_FRIEND:3,SOFT_CONTACT:4});f["default"]=a}),66);
__d("LSContactWorkForeignEntityType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,FOREIGN:1,NOT_FOREIGN:2,NOT_FOREIGN_LIMITED:3});f["default"]=a}),66);
__d("LSDatascriptEvaluatorDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("LSDatascriptEvaluator").__setRef("LSDatascriptEvaluatorDeferred");function a(){return h.load()}g["default"]=a}),98);
__d("LSDeleteThread",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.sequence([function(d){return b.db.table(9).fetch([[[a[0]]]]).next().then(function(a,d){var e=a.done;a=a.value;return e?(e=[b.i64.cast([0,0]),void 0],c[0]=e[0],c[1]=e[1],e):(d=a.item,e=[d.parentThreadKey,d.disappearingThreadKey],c[0]=e[0],c[1]=e[1],e)})},function(a){return b.count(b.db.table(9).fetch([[[c[0]]],"parentThreadKeyLastActivityTimestampMs"])).then(function(a){return c[3]=a})},function(d){return a[1]&&b.i64.neq(c[0],b.i64.cast([0,0]))&&b.i64.eq(c[3],b.i64.cast([0,1]))?b.sequence([function(d){return b.forEach(b.db.table(9).fetch([[[a[0]],[c[0]]]]),function(a){return a["delete"]()})},function(a){return b.i64.neq(c[1],void 0)?0:0}]):b.sequence([function(c){return b.forEach(b.db.table(9).fetch([[[a[0]]]]),function(a){return a["delete"]()})},function(a){return b.i64.neq(c[1],void 0)?0:0}])}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxDeleteThreadStoredProcedure";e.exports=a}),null);
__d("cometIsMimeTypeForMedia",["FBLogger","UFICommentFileInputAcceptValues"],(function(a,b,c,d,e,f,g){"use strict";var h={file:null,photo:null,video:null},i={"image/gif":"video","image/webp":"video"};function j(a){return a.split(",").map(function(a){return a.trim()}).map(function(a){return a.replace(/\/\*$/,"/")})}function k(a,b,d){h[a]==null&&(h[a]=j(d));d=h[a];if(d==null)throw c("FBLogger")("ufi2").mustfixThrow("CometIsMimeTypeForMedia prefixes can't be null");var e=i[b];return e!=null?e===a:d.some(function(a){return b.startsWith(a)})}function a(a){return k("photo",a,d("UFICommentFileInputAcceptValues").photos)}function b(a){return k("video",a,d("UFICommentFileInputAcceptValues").videos)}function e(a){return k("file",a,d("UFICommentFileInputAcceptValues").files)}g.mimeTypeAcceptStringToArray=j;g.isMimeTypeForPhoto=a;g.isMimeTypeForVideo=b;g.isMimeTypeForFile=e}),98);
__d("genArrayBufferFromFile",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a){return"arrayBuffer"in a&&typeof a.arrayBuffer==="function"?a.arrayBuffer():new(g||(g=b("Promise")))(function(b,c){var d=new FileReader();d.onload=function(){var a=d.result;a instanceof ArrayBuffer?b(a):c()};d.onerror=function(){c(d.error)};d.readAsArrayBuffer(a)})}f["default"]=a}),66);
__d("genIsNonAnimatedWebPFile",["genArrayBufferFromFile"],(function(a,b,c,d,e,f,g){"use strict";var h=8;function a(a){return c("genArrayBufferFromFile")(a).then(function(a){a=new Uint8Array(a);var b=a.slice(12,16).reduce(function(a,b,c){return a+String.fromCharCode(b)},"");if(b==="VP8X"){b=a[20];b=b.toString(2).padStart(8,"0");if(b[6]==="1")return!i(a)}return!0})}function i(a){var b=12,c=0;while(c<2&&b+h<a.length){var d=j(a,b);d==="ANMF"&&c++;d=k(a,b+4);var e=d%2;d=h+d+e;b+=d}return c>1}function j(a,b){return a.slice(b,b+4).reduce(function(a,b,c){return a+String.fromCharCode(b)},"")}function k(a,b){return parseInt(a.slice(b,b+4).reduce(function(a,b,c){return b.toString(2).padStart(8,"0")+a},""),2)}g["default"]=a}),98);
__d("LSGetAttachmentType",["LSIntEnum","MessagingAttachmentType","asyncToGeneratorRuntime","cometIsMimeTypeForMedia","genIsNonAnimatedWebPFile"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return a.type==="image/webp"?(h||(h=d("LSIntEnum"))).ofNumber((yield c("genIsNonAnimatedWebPFile")(a))?c("MessagingAttachmentType").IMAGE:c("MessagingAttachmentType").VIDEO):j(a)});return i.apply(this,arguments)}function j(a){a=a.type;if(d("cometIsMimeTypeForMedia").isMimeTypeForPhoto(a))return(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE);else if(a==="audio/wav")return(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO);else if(a==="image/gif")return(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE);else if(d("cometIsMimeTypeForMedia").isMimeTypeForVideo(a))return(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO);else return(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE)}g.LSGetAttachmentType=a;g.LSGetAttachmentTypeSyncButLessAccurate=j}),98);
__d("LSGroupParticipantJoinState",[],(function(a,b,c,d,e,f){a=Object.freeze({MEMBER:0,PENDING:1,INVITED:2});f["default"]=a}),66);
__d("LSInitSyncCompleteSubscription",["I64","LSIntEnum","Promise","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,c){return new(j||(j=b("Promise")))(function(b,e){var f=d("ReQL").fromTableAscending(a.tables.sync_groups).getKeyRange(c).subscribe(function(a,c){if(c.operation==="delete")return;if((h||(h=d("I64"))).equal(c.value.syncStatus,(i||(i=d("LSIntEnum"))).ofNumber(2))){f();return b()}})})}function a(a,b){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.sync_groups).getKeyRange(b)).then(function(c){if(c!=null&&(h||(h=d("I64"))).equal(c.syncStatus,(i||(i=d("LSIntEnum"))).ofNumber(2)))return;return k(a,b)})}function c(a){return k(a,(i||(i=d("LSIntEnum"))).ofNumber(1))}g.maybeWaitForSyncGroup=a;g.use=c}),98);
__d("LSInstagramE2EEEligibility",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:-1,INELIGIBLE:0,ELIGIBLE:1,REQUIRED:2,DUAL_SEND_ELIGIBLE:3,GROUPS_ELIGIBLE:4});f["default"]=a}),66);
__d("LSIssueNewErrorStoredProcedure",["LSIssueNewError","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.taskId;d[1]=b.errorCode;d[2]=b.errorTitleText;d[3]=b.errorBodyText;d[4]=b.errorExtraData;d[5]=b.presentationStyle;return c("LSIssueNewError").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSMailboxTaskCompletionApiOnTaskInsertion",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.islc(b.db.table(232).fetch(),0,b.i64.to_float(b.i64.cast([0,1]))),function(c){c=c.item;return b.db.table(233).add({taskId:a[0],notificationScopeKey:c.notificationScopeKey,notificationName:c.notificationName})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSCoreMailboxTaskCompletionApiOnTaskInsertionStoredProcedure";e.exports=a}),null);
__d("LSIssueNewTaskWithExtraOperations",["LSIssueNewTaskAndGetTaskID","LSMailboxTaskCompletionApiOnTaskInsertion"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[11]).then(function(a){return a=a,d[0]=a[0],a})},function(a){return c.storedProcedure(b("LSMailboxTaskCompletionApiOnTaskInsertion"),d[0])}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSCoreIssueNewTaskWithExtraOperationsStoredProcedure";e.exports=a}),null);
__d("LSIssueNewTaskWithExtraOperationsAndGetTaskID",["LSIssueNewTaskAndGetTaskID","LSMailboxTaskCompletionApiOnTaskInsertion"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],c.i64.cast([0,0])).then(function(a){return a=a,d[0]=a[0],a})},function(a){return c.storedProcedure(b("LSMailboxTaskCompletionApiOnTaskInsertion"),d[0])},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSCoreIssueNewTaskWithExtraOperationsAndGetTaskIDStoredProcedure";e.exports=a}),null);
__d("LSMailboxType",[],(function(a,b,c,d,e,f){a=Object.freeze({MESSENGER:0,COMMUNITIES:1,TINCAN:1024,TAM:4096});f["default"]=a}),66);
__d("LSMarkThreadRead",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(9).fetch([[[a[1]]]]),function(c){return b.i64.eq(c.threadKey,a[1])&&b.i64.gt(a[0],c.lastReadWatermarkTimestampMs)}),function(b){var c=b.update;b.item;return c({lastReadWatermarkTimestampMs:a[0]})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxMarkThreadReadStoredProcedure";e.exports=a}),null);
__d("LSMessageSearchType",[],(function(a,b,c,d,e,f){a=Object.freeze({THREAD:1,MESSAGE:2});f["default"]=a}),66);
__d("LSMessageUnsendabilityStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({CAN_UNSEND:0,DENY_LOG_MESSAGE:1,DENY_TOMBSTONE_MESSAGE:2,DENY_FOR_NON_SENDER:3,DENY_P2P_PAYMENT:4,DENY_STORY_REACTION:5,DENY_BLOB_ATTACHMENT:6,DENY_MESSAGE_NOT_FOUND:7,DENY_MESSAGE_INSTAGRAM_DIRECT_WRITE_RESTRICTION:8});f["default"]=a}),66);
__d("LSMessagingThreadAttributionType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,UNKNOWN_TEST:1,UNKNOWN_FAILURE_RETRY:2,MESSENGER_INBOX:65536,MESSENGER_INBOX_IN_THREAD:65537,MESSENGER_INBOX_THREAD_LIST:65538,MESSENGER_INBOX_NESTED_FOLDER:65539,MESSENGER_INBOX_RECENT_THREADS:65540,MESSENGER_INBOX_REMAINING_THREADS:65541,MESSENGER_INBOX_MESSAGE_SEARCH:65542,MESSENGER_INBOX_IMAGE_SENDING:65543,MESSENGER_INBOX_FORWARD:65544,MESSENGER_INBOX_ARCHIVED_THREADS:65545,MESSENGER_INBOX_PENDING_REQUESTS:65546,MESSENGER_INBOX_ACTIVE_CONTACTS:65547,MESSENGER_INBOX_THREAD_BANNER_BOTTOM_SHEET:65548,MESSENGER_INBOX_PEOPLE_YOU_MAY_KNOW:65549,MESSENGER_INBOX_HOLIDAY_CARD_SHARE_SHEET:65550,MESSENGER_INBOX_HOLIDAY_CARD_SHARE_SHEET_QP:65551,MESSENGER_UNIVERSAL_SEARCH:131072,MESSENGER_UNIVERSAL_SEARCH_NULL_STATE:131073,MESSENGER_UNIVERSAL_SEARCH_KEY_PRESSED:131074,MESSENGER_UNIVERSAL_SEARCH_MESSAGE_SEARCH:131075,MESSENGER_UNIVERSAL_SEARCH_ADVANCED_CONTENT_SEARCH:131076,MESSENGER_UNIVERSAL_SEARCH_AI_PROMPT:131077,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD:131078,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_AIRPLANE_SEND:131079,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_KEYBOARD_SEND:131080,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_DONUT:131081,MESSENGER_UNIVERSAL_SEARCH_AI_NULLSTATE_DONUT:131082,MESSENGER_UNIVERSAL_SEARCH_AI_NULLSTATE_AIRPLANE_SEND:131083,MESSENGER_UNIVERSAL_SEARCH_META_AI_SEARCH_RESULT:131084,MONTAGE_AND_ACTIVE_NOW:196608,MONTAGE_AND_ACTIVE_NOW_MONTAGE_INBOX_UNIT:196609,MONTAGE_AND_ACTIVE_NOW_ACTIVE_NOW:196610,MONTAGE_AND_ACTIVE_NOW_INBOX_COMPOSER:196611,MONTAGE_AND_ACTIVE_NOW_ACTIVE_AND_HAS_STORY:196612,MONTAGE_AND_ACTIVE_NOW_CUSTOM_STATUS:196613,MONTAGE_AND_ACTIVE_NOW_NOTES:196614,MONTAGE_AND_ACTIVE_NOW_SEE_ALL_ACTIVE:196615,MONTAGE_AND_ACTIVE_NOW_AN_TRAY_STORY_REPLY:196616,MESSENGER_ACTIVE_NOW_FRIENDS_TAB:262144,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_FRIENDS_TAB:262145,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_PLACE_HOLDER:262146,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_RECENT_ACTIVE:262147,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_RECENT_ACTIVE_AND_STORY:262148,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_CONTENT_DISCOVERY:262149,MESSENGER_PENDING_REQUESTS:327680,MESSENGER_PENDING_REQUESTS_INBOX_THREAD_LIST:327681,MESSENGER_PENDING_REQUESTS_PENDING_REQUESTS_PAGE:327682,MESSENGER_BROADCAST_FLOW:393216,MESSENGER_BROADCAST_FLOW_FROM_MESSENGER:393217,MESSENGER_BROADCAST_FLOW_FROM_FB:393218,MESSENGER_BROADCAST_FLOW_FROM_EXTERNAL:393219,MESSENGER_BROADCAST_FLOW_FROM_FB__NEWSFEED_SHARESHEET:393220,MESSENGER_BROADCAST_FLOW_FROM_FB__NEWSFEED_GOODWILL_COMPOSER:393221,MESSENGER_BROADCAST_FLOW_FROM_FB__SHORTS_VIEWER:393222,MESSENGER_BROADCAST_FLOW_FORWARD_GUTTER:393223,MESSENGER_BROADCAST_FLOW_FORWARD_LONGCLICK:393224,MESSENGER_BROADCAST_FLOW_MESSENGER_PHOTO_VIEW:393225,MESSENGER_OMNIPICKER:458752,MESSENGER_OMNIPICKER_NULL_STATE:458753,MESSENGER_OMNIPICKER_KEY_PRESSED:458754,MESSENGER_NOTIFICATION:524288,MESSENGER_NOTIFICATION_IN_THREAD_REPLY:524289,MESSENGER_NOTIFICATION_LONGPRESS_REPLY:524290,MESSENGER_NOTIFICATION_LONGPRESS_REACTION:524291,CLICK_TO_MESSENGER_AD:589824,CLICK_TO_MESSENGER_AD_FROM_NEWSFEED:589825,CLICK_TO_MESSENGER_AD_SEND_MESSAGE_CTA:589826,CLICK_TO_MESSENGER_AD_VIEW_AND_MESSAGE:589827,CLICK_TO_MESSENGER_AD_SEND_MESSAGE_CTA__NEWSFEED_CTM_ADS_CTA:589828,PAYMENTS:655360,PAYMENTS_BUBBLE_CLICK:655361,RTC:720896,RTC_VOIP_INCALL:720897,RTC_DRAWER_PROMOTION:720898,FB_PAGE:786432,FB_PAGE_ABOUT_CARD:786433,FB_PAGE_PROFILE_HEADER_MESSAGE_BUTTON:786434,FB_PAGE_PROFILE_FOOTER_MESSAGE_BUTTON:786435,FB_PAGE_PROFILE_MORE_DRAWER:786436,FB_PAGE_RESPONSIVENESS_CONTEXT_CARD:786437,FB_PAGE_PYMM_RHC:786439,FB_PROFILE:851968,FB_PROFILE_TIMELINE_MESSAGE_BUTTON:851969,FB_PROFILE_FACEBOOK_PROFILE:851970,FB_PROFILE_MESSAGE_BUTTON:851971,FB_PROFILE_MESSAGE_BUTTON_BLOKS_URL:851972,FB_PROFILE_PROFILE_HEADER_COMPOSER:851973,FB_SEARCH:917504,FB_SEARCH_CONTEXTUAL_PROFILE_ACTION_BAR_FROM_SEARCH:917505,FB_SEARCH_SEARCH_MESSAGE_BUTTON:917506,FB_SEARCH_FB_MESSAGE_SEARCH_RESULTS:917507,FB_SEARCH_HIGH_CONFIDENCE_CARD:917508,FB_SEARCH_MENTIONS:917509,FB_SEARCH_NULLSTATE_CTA:917510,FB_SEARCH_NULL_STATE:917511,FB_SEARCH_TYPEAHEAD:917512,FB_SEARCH_TYPEAHEAD_AIRPLANE_SEND:917513,FB_SEARCH_TYPEAHEAD_KEYBOARD_SEND:917514,FB_SEARCH_TYPEAHEAD_DONUT:917515,FB_SEARCH_NULL_STATE_DONUT:917516,FB_SEARCH_NULL_STATE_AIRPLANE_SEND:917517,FB_SEARCH_NULL_STATE_KEYBOARD_SEND:917518,CRYPTO:983040,MESSENGER_MONTAGE_COMPOSER:1048576,MESSENGER_MONTAGE_COMPOSER_FRIENDS_TAB:1048577,MESSENGER_MONTAGE_COMPOSER_FRIENDS_TAB_STORY_AND_ACTIVE_NOW:1048578,MESSENGER_MONTAGE_REPLY:1114112,MESSENGER_MONTAGE_REPLY_INBOX_THREAD_LIST_PROFILE:1114113,MESSENGER_MONTAGE_REPLY_REPLY_CONTEXT:1114114,MESSENGER_MONTAGE_REPLY_THREAD_NAV_BAR:1114115,MESSENGER_MONTAGE_REPLY_INBOX_THREAD_LIST_PROFILE_AUTHOR_PROFILE:1114116,MESSENGER_MONTAGE_REPLY_REPLY_CONTEXT_AUTHOR_PROFILE:1114117,MESSENGER_MONTAGE_REPLY_THREAD_NAV_BAR_AUTHOR_PROFILE:1114118,MESSENGER_MONTAGE_REPLY_ONE_TO_ONE_CHAT_THREAD_STORY_BUBBLE:1114119,MESSENGER_THREAD_MEMBERS_LIST:1179648,MARKETPLACE:1245184,MARKETPLACE_ACTIVITY_BANNER:1245185,MARKETPLACE_SEND_MESSAGE:1245186,MARKETPLACE_GEN_AI_ACCORDION_META_AI_PILL:1245187,MARKETPLACE_GEN_AI_ACCORDION_FOLLOW_UP_QUESTION:1245188,MARKETPLACE_GEN_AI_PRICE_CHECK_META_AI_PILL:1245189,MARKETPLACE_GEN_AI_PRICE_CHECK_FOLLOW_UP_QUESTION:1245190,MARKETPLACE_META_AI_PILLS_MODULE_META_AI_PILL_GENERIC:1245191,MARKETPLACE_META_AI_PILLS_MODULE_META_AI_PILL_WITH_PROMPT:1245192,MARKETPLACE_GEN_AI_ENRICHED_DESCRIPTION_META_AI_PILL_GENERIC:1245193,MARKETPLACE_GEN_AI_ENRICHED_DESCRIPTION_META_AI_PILL_WITH_PROMPT:1245194,FB_STORY:1310720,FB_STORY_VIEWER_SHEET_MENU:1310721,FB_STORY_VIEWER_SHEET_ROW:1310722,FB_STORY_STORIES_JEWEL_NOTIFICATION:1310723,FB_STORY_STORIES_PUSH_NOTIFICATION:1310724,FB_STORY_STORIES_VIEWER_CONSUMER_REPLY:1310725,FB_STORY_STORIES_VIEWER_CONSUMER_ARTIFACT:1310726,FB_STORY_STORIES_PAGE_STORY_CONVERSATIONS:1310727,FB_STORY_SOCIAL_CONTEXT_CONVERSATIONS:1310728,FB_STORY_MENTIONS:1310729,FB_STORY_SELF_STORY_SEND:1310730,FB_STORY_SHARESHEET:1310731,FB_STORY_NOTES:1310732,WORKSPEED:1376256,WORKSPEED_COMPOSER_LIKE_BUTTON:1376257,WORKSPEED_COMPOSER_GIF_PICKER:1376258,MDOTME:1441792,MDOTME_ORGANIC_POST:1441793,MDOTME_MARKETING_EMAIL:1441794,MDOTME_MBS_OFFSITE_EMAIL:1441795,CUSTOMER_CHAT_PLUGIN:1507328,CUSTOMER_CHAT_PLUGIN_MOBILE_REDIRECT:1507329,CUSTOMER_CHAT_PLUGIN_UPGRADE_FLOW:1507330,CUSTOMER_CHAT_PLUGIN_RE_ENGAGEMENT:1507331,FB_FEED:1572864,FB_FEED_ORGANIC_POST:1572865,FB_FEED_ORGANIC_POST_VIEW_AND_MESSAGE:1572866,FB_FEED_QUESTION_TRIGGERED_CONVO:1572867,FB_FEED_DYNAMIC_HOVER_CARD:1572868,FB_FEED_ORGANIC_POST__NEWSFEED_PAGE_POST_CTA:1572869,FB_FEED_ORGANIC_POST__NEWSFEED_BUMPER_SMCTA:1572870,FB_FEED_BCF_OPEN_CHAT_BUTTON:1572871,FB_FEED_REACTORS_LIST_MESSAGE_BUTTON:1572872,FB_FEED_REPLY_TO_AUTHOR:1572873,FB_FEED_UFI_SEND_SUGGESTIONS:1572874,FB_FEED_BCF:1572875,FB_FEED_COMMUNITY_CHATS_FEED_POST:1572876,FB_FEED_SOCIAL_CONNECTIONS_QP:1572877,FB_FEED_META_AI_DEEP_DIVES:1572878,FB_FEED_META_AI_SHARE_SHEET:1572879,FB_FEED_META_AI_TRENDING_DISCOVER_UNIT:1572880,FB_FEED_META_AI_POST_DEEPDIVE_PILL:1572881,FB_FEED_META_AI_EDUCATIONAL_QP:1572882,FB_FEED_META_AI_ENTITY_SUMMARIZATION_DISCOVER_UNIT:1572883,FB_FEED_META_AI_COMMENTS_SUMMARY:1572884,FB_FEED_META_AI_FAB:1572885,FB_FEED_META_AI_ADS_CAMPAIGN:1572886,FB_FEED_META_AI_ANSWERSHEET:1572887,FB_FEED_META_AI_BOOKMARK:1572888,FB_NOTIFICATION:1638400,FB_NOTIFICATION_JEWEL_NOTIF:1638401,FB_NOTIFICATION_PUSH_NOTIF:1638402,FB_EVENT:1703936,FB_EVENT_MESSAGE_HOST:1703937,FB_EVENT_SHARE_CLASS_MATERIALS:1703938,SUPPORT_RESOURCES:1769472,SUPPORT_RESOURCES_FRX_ACTION:1769473,LEAD_GEN_MESSAGING:1835008,LEAD_GEN_MESSAGING_PRE_SUBMISSION:1835009,LEAD_GEN_MESSAGING_POST_SUBMISSION:1835010,LEAD_GEN_MESSAGING_CROSS_CHANNEL_VERTICAL_PRESENT_ANDROID:1835011,LEAD_GEN_MESSAGING_CROSS_CHANNEL_HSCROLL_ANDROID:1835012,MESSENGER_GRAPH:1900544,MESSENGER_GRAPH_SELECT_CONTACT:1900545,MESSENGER_CHAT:1966080,MESSENGER_CHAT_FROM_JEWEL__THREAD_LIST:1966081,MESSENGER_CHAT_IN_THREAD:1966082,MESSENGER_CHAT_FORWARD:1966083,MESSENGER_ARCHIVED_THREADS:2031616,MESSENGER_ARCHIVED_THREADS_ARCHIVED_THREADS_FOLDER:2031617,JEWEL:2097152,JEWEL_THREAD_LIST:2097153,JEWEL_SEARCH:2097154,JEWEL_NEW_MESSAGE:2097155,JEWEL_NESTED_FOLDER:2097156,CHATHEADS:2162688,CHATHEADS_RECENT_THREADS:2162689,CHATHEADS_OVERFLOW:2162690,CHATHEADS_NEW_MESSAGE:2162691,SIDEBAR:2228224,SIDEBAR_CONTACTS_LIST:2228225,SIDEBAR_CONTACTS_SEARCH:2228226,SIDEBAR_CONTACTS_GROUPS:2228227,SIDEBAR_CONTACTS_COMMUNITY_CHATS:2228228,MESSENGER_COMMUNITY_MESSAGING:2293760,MESSENGER_COMMUNITY_MESSAGING_COMMUNITY_CHANNEL:2293761,MESSENGER_COMMUNITY_MESSAGING_FULLSCREEN_CHAT:2293762,FB_PLATFORM_LOGIN:2359296,FB_PLATFORM_LOGIN_LOGIN_CONNECT_WITH_MESSENGER:2359297,CONTACT_MANAGER:2424832,CONTACT_MANAGER_CONTACT_SHARE:2424833,CONTACT_MANAGER_PEOPLE_TAB_CONTACT_LIST:2424834,CONTACT_MANAGER_PEOPLE_TAB_CONTACT_SEARCH:2424835,CONTACT_MANAGER_ICON_CONTACT_LIST:2424836,CONTACT_MANAGER_ICON_CONTACT_SEARCH:2424837,MESSAGING_INBOX_IN_BLUE:2490368,MESSAGING_INBOX_IN_BLUE_THREAD_LIST:2490369,MESSAGING_INBOX_IN_BLUE_PEOPLE_PICKER:2490370,MESSAGING_INBOX_IN_BLUE_INBOX_ICON:2490371,MESSAGING_INBOX_IN_BLUE_SWIPE_FROM_RIGHT:2490372,MESSAGING_INBOX_IN_BLUE_MIB_NOTIFICATION:2490373,MESSAGING_INBOX_IN_BLUE_ACTIVE_NOW:2490374,MESSAGING_INBOX_IN_BLUE_SUGGESTED_CHATS:2490375,MESSAGING_INBOX_IN_BLUE_CHAT_PREVIEW_BANNER:2490376,MESSAGING_INBOX_IN_BLUE_THREAD_VIEW_CORE_NULL_STATE:2490377,MESSAGING_INBOX_IN_BLUE_MESSAGE_REQUESTS:2490378,MESSAGING_INBOX_IN_BLUE_SPAM:2490379,MESSAGING_INBOX_IN_BLUE_FB_GROUPS:2490380,MESSAGING_INBOX_IN_BLUE_MESSENGER_PEEK_STATE_BUTTON:2490381,MESSAGING_INBOX_IN_BLUE_MESSENGER_PEEK_STATE_TOOLTIP:2490382,MESSAGING_INBOX_IN_BLUE_BROADCAST_FLOW:2490383,MESSAGING_INBOX_IN_BLUE_THREAD_VIEW_HEADER:2490384,MESSAGING_INBOX_IN_BLUE_PRIVACY_SETTINGS:2490385,MESSAGING_INBOX_IN_BLUE_ARCHIVED_CHATS:2490386,MESSAGING_INBOX_IN_BLUE_UNIVERSAL_SEARCH:2490387,MESSAGING_INBOX_IN_BLUE_INBOX_SEARCH_BAR:2490388,MIB_NOTIFICATION:2555904,MIB_NOTIFICATION_PUSH_NOTIFICATION:2555905,MIB_NOTIFICATION_JEWEL_NOTIFICATION:2555906,MIB_NOTIFICATION_DIRECT_PUSH_NOTIF:2555907,MIB_NOTIFICATION_DIRECT_JEWEL_NOTIF:2555908,MESSENGER_RESTRICTED_ACCOUNTS:2621440,ARMADILLO_CUTOVER_THREAD_LINKING_MESSAGE:2686976,CALLS_TAB:2752512,MINI_SHOP_VIEW_MENU_BUTTON:2818048,SHARESHEET:2883584,SHARESHEET_GENERALIZED_BROADCAST_FLOW:2883585,SHARESHEET_OFF_PLATFORM_SHARING_H_SCROLL:2883586,UFI:2949120,UFI_GENERALIZED_BROADCAST_FLOW:2949121,CHATHEAD_CLICK_COLLAPSED:3014656,TIMELINE_MESSAGE_BUTTON:3080192,DIRECT_REPLY_INTENT:3145728,FB_GROUPS:3211264,FB_GROUPS_INBOX:3211265,FB_GROUPS_PICKER_EXISTING_CHAT:3211266,FB_GROUPS_PICKER_JOIN_CHAT:3211267,FB_GROUPS_MEMBER_LIST:3211268,FB_GROUPS_INLINE_COMPOSER:3211269,FB_GROUPS_SCOPED_SEARCH:3211270,FB_GROUPS_UNJOINED_MALL_HEADER:3211271,FB_GROUPS_DISCOVER_FEED_UNIT:3211272,FB_GROUPS_ANSWER_AGENT_CONTEXTUAL_PROFILE:3211273,FB_GROUPS_ANSWER_AGENT_FOLLOWUP_SECTION:3211274,FB_GROUPS_NOTIFICATION_MESSAGING_IN_BLUE_DIRECT_MESSAGE:3211275,FB_GROUPS_UGC:3211276,FB_GROUPS_UGC_POST:3211277,FB_GROUPS_UGC_MALL_PLINK:3211278,FB_GROUPS_UGC_MALL_NUX:3211279,FB_GROUPS_UGC_ADMIN_TESTING:3211280,DEVICES:3276800,DEVICES_STELLA:3276801,FB_WELLBEING:3342336,FB_WELLBEING_INCALL_UNBLOCKING_NOTIFICATION:3342337,MESSENGER_DEEP_LINKING:3407872,READ_ONLY_CUTOVER_THREAD:3473408,READ_ONLY_CUTOVER_THREAD_ARMADILLO_THREAD:3473409,ARMADILLO_THREAD:3538944,ARMADILLO_THREAD_READ_ONLY_CUTOVER_THREAD:3538945,ARMADILLO_THREAD_EXTERNAL_LINK:3538946,FB_SHORTS:3604480,FB_SHORTS_PROFILE:3604481,FB_SHORTS_REACTORS_LIST_MESSAGE_BUTTON:3604482,SEND_PLUGIN:3670016,SEND_AS_MESSAGE_FROM_NT:3735552,MESSENGER_PUBLIC_CHATS_MESSAGING:3801088,MESSENGER_GROWTH:3866624,MESSENGER_GROWTH_NOTIFICATIONS_ENTRYPOINT:3866625,FRIENDS_HOME:3932160,FRIENDS_HOME_ACTIVE_NOW:3932161,FRIENDS_HOME_MESSAGE_NEW_FRIENDS:3932162,FRIENDS_HOME_POST_ACCEPT_MESSAGING:3932163,FRIENDS_HOME_SENDER_POST_ACCEPT_WAVE:3932164,EXTERNAL_LINK_XMA:3997696,EXTERNAL_LINK_XMA_FROM_COMPOSER:3997697,EXTERNAL_LINK_XMA_FROM_DEEP_LINKING:3997698,EXTERNAL_LINK_XMA_FROM_SHARE_EXTENSION:3997699,FB_NOTIFICATIONS:4063232,QUICK_PROMOTION:4128768,QUICK_PROMOTION_CTA:4128769,QUICK_PROMOTION_INTERSTITIAL:4128770,QUICK_PROMOTION_TOP_BANNER:4128771,FBM_IN_APP_NOTIFS:4194304,CREATOR_SUPPORT:4259840,CREATOR_SUPPORT_MESSENGER_TOAST:4259841,FB_INSTANT_GAME:4325376,COMMUNITY_CHATS_IN_FEED:4390912,COMMUNITY_CHATS_IN_FEED_PERMALINK:4390913,UNIFIED_BUSINESS_INBOX:4456448,ROLLCALL:4521984,HIGHLIGHTS_TAB:4587520,HIGHLIGHTS_TAB_FEED_INLINE:4587521,HIGHLIGHTS_TAB_MEDIA_VIEWER:4587522,HIGHLIGHTS_TAB_THREAD_VIEW:4587523,HIGHLIGHTS_TAB_FEED_INLINE_CONNECTED_CHAT:4587524,HIGHLIGHTS_TAB_FEED_INLINE_LOCAL_EVENT:4587525,HIGHLIGHTS_TAB_FEED_INLINE_FRIENDS_UPDATE:4587526,HIGHLIGHTS_TAB_FEED_INLINE_BIRTHDAY:4587527,HIGHLIGHTS_TAB_MEDIA_VIEWER_CONNECTED_CHAT:4587528,HIGHLIGHTS_TAB_MEDIA_VIEWER_FRIENDS_UPDATE:4587529,HIGHLIGHTS_TAB_THREAD_VIEW_CONNECTED_CHAT:4587530,HIGHLIGHTS_TAB_THREAD_VIEW_LOCAL_EVENT:4587531,HIGHLIGHTS_TAB_THREAD_VIEW_FRIENDS_UPDATE:4587532,HIGHLIGHTS_TAB_THREAD_VIEW_BIRTHDAY:4587533,HIGHLIGHTS_TAB_THREAD_VIEW_NOTE:4587534,HIGHLIGHTS_TAB_FEED_INLINE_NOTE:4587535,HIGHLIGHTS_TAB_CONNECTED_BROADCAST_CHANNEL_SHARE_SHEET:4587536,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_BIRTHDAY:4587537,HIGHLIGHTS_TAB_SHARE_SHEET_HOLIDAY_CARD:4587538,HIGHLIGHTS_TAB_META_AI_BIRTHDAY:4587539,MARKETPLACE_INBOX:4653056,ONE_TAP_MESSAGE_QUICK_SHARE:4718592,HIGHLIGHTS_TAB_STORIES_TRAY:4784128,FB_BIRTHDAY_CENTER:4849664,MESSENGER_SIRIKIT:4915200,MESSENGER_SIRIKIT_CALLKIT_QUICK_REPLY:4915201,MESSENGER_SIRIKIT_VOICE_COMMAND:4915202,CLICK_TO_SUBSCRIBE_AD:4980736,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER:5046272,FB_UNIVERSAL_SEARCH:5111808,FB_UNIVERSAL_SEARCH_NULL_STATE_SUGGESTED:5111809,FB_UNIVERSAL_SEARCH_NULL_STATE_RECENT:5111810,FB_UNIVERSAL_SEARCH_QUERY_RESULTS:5111811,FBLITE_MESSAGING:5177344,FBLITE_MESSAGING_FROM_EXTERNAL:5177345,FBLITE_MESSAGING_FORWARD_FROM_BROADCAST_FLOW:5177346,FBLITE_MESSAGING_IN_THREAD:5177349,FBLITE_MESSAGING_ACTIVE_NOW:5177352,FBLITE_MESSAGING_ARCHIVED_CHATS:5177353,FBLITE_MESSAGING_SPAM:5177354,FBLITE_MESSAGING_MESSAGE_REQUESTS:5177355,FBLITE_MESSAGING_MARKETPLACE:5177356,FBLITE_MESSAGING_THREAD_MEMBERS_LIST:5177357,FBLITE_MESSAGING_READONLY_VERSION_OF_CUTOVER_THREAD:5177358,FBLITE_MESSAGING_NOTIFICATION:5242880,FBLITE_MESSAGING_NOTIFICATION_IN_THREAD_REPLY:5242881,FBLITE_MESSAGING_NOTIFICATION_DIRECT_REPLY:5242882,FBLITE_INBOX:5308416,FBLITE_INBOX_UNIVERSAL_SEARCH:5308417,FBLITE_INBOX_PEOPLE_PICKER:5308418,FBLITE_INBOX_RECENT_THREADS:5308419,FBLITE_INBOX_REMAINING_THREADS:5308420,SHARED_ALBUM:5373952,QUICK_REPLIES:5439488,QUICK_REPLIES_TRAY:5439489,MESSENGER_CTA_AFTER_CALL_ENDS:5505024,MESSENGER_CONVERSATION_SHORTCUT:5570560,CC_ADMIN_SEND_MESSAGE_HINT_CARD:5636096,CC_MEMBER_SEND_MESSAGE_HINT_CARD:5701632,MSGR_AVATAR_DETAILS:5767168,PRIVATE_SHARING_FORWARD_SUPER_SHARE_SHEET:5832704,MEMORIES:5898240,META_AI_TAB:5963776,MEMORIES_NOTIFICATION:6029312,MEMORIES_QUICK_PROMOTION:6094848,MEMORIES_HIGHLIGHTS_TAB:6160384,MEMORIES_LIST:6225920,MSGR_PYMK_LIST_SCREEN:6291456,INSTAGRAM_WEB_SENDS:6356992,AI_SUGGESTED_PROMPT_TRAY:6422528,AI_SUGGESTED_PROMPT_ICEBREAKER:6488064,COMMUNITY_INVITE:6553600,COMMUNITY_CHAT_INVITE:6619136,AI_DISCOVERY_BOTTOM_SHEET:6684672,IN_THREAD_INVITE_MODEL:6750208,SUPPORT_FOLDER:6815744,MARKETPLACE_PDP:6881280,QR_CODE:6946816,WRITE_WITH_AI:7012352,AI_HOME_CHAT_WITH_AI:7077888,AI_HOME_INBOX_QP:7143424,AI_AGENT_MESSAGE_SHARE:7208960,AI_HOME_FROM_THREAD:7274496,AI_HOME_FROM_FOLDER_LIST:7340032});f["default"]=a}),66);
__d("LSMoveThreadToArchivedFolder",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(9).fetch([[[a[0]]]]).next().then(function(c,d){d=c.done;c=c.value;return d?0:(c.item,b.forEach(b.db.table(9).fetch([[[a[0]]]]),function(a){var c=a.update;a.item;return c({folderName:"",parentThreadKey:b.i64.cast([-1,4294967286])})}))})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxMoveThreadToArchivedFolderStoredProcedure";e.exports=a}),null);
__d("LSOptimisticAcceptMessageRequest",["LSIssueNewTaskWithExtraOperations"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(e,f){f=e.done;e=e.value;return f?0:(e.item,c.sequence([function(b){return c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(b){var d=b.update;b.item;return d({folderName:"inbox",parentThreadKey:c.i64.cast([0,0]),igFolder:a[1]})})},function(b){return c.db.table(173).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?0:(b=a.item,d[4]=b.clientThreadPk,c.db.table(276).fetch([[[d[4]]]]).next().then(function(a,b){b=a.done;a=a.value;return b?0:(a.item,c.forEach(c.db.table(276).fetch([[[d[4]]]]),function(a){var b=a.update;a.item;return b({folderType:c.i64.cast([0,0])})}))}))})},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[5]=b.syncGroup,c.i64.neq(d[5],void 0)?d[4]=d[5]:d[4]=c.i64.cast([0,1]),d[0]=d[4])})},function(e){return d[2]=new c.Map(),d[2].set("thread_key",a[0]),d[2].set("sync_group",d[0]),d[2].set("ig_folder",a[1]),d[3]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTaskWithExtraOperations"),"message_request",c.i64.cast([0,66]),d[3],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]))}]))})},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticAcceptMessageRequestStoredProcedure";e.exports=a}),null);
__d("LSOptimisticAcceptMessageRequestStoredProcedure",["LSOptimisticAcceptMessageRequest","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;d[1]=b.igFolder;return c("LSOptimisticAcceptMessageRequest").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSOptimisticMarkThreadReadV2",["LSIssueNewTask","LSMarkThreadRead"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(d){return c.storedProcedure(b("LSMarkThreadRead"),a[1],a[0])},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[6]=b.syncGroup,c.i64.neq(d[6],void 0)?d[5]=d[6]:d[5]=c.i64.cast([0,1]),d[0]=d[5])})},function(e){return d[2]=new c.Map(),d[2].set("thread_id",a[0]),d[2].set("last_read_watermark_ts",a[1]),d[2].set("sync_group",d[0]),d[3]=d[2].get("thread_id"),d[2],d[4]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[3]),c.i64.cast([0,21]),d[4],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticMarkThreadReadV2StoredProcedure";e.exports=a}),null);
__d("LSOptimisticRemoveThread",["LSDeleteThread","LSIssueNewTaskAndGetTaskID","LSMoveThreadToArchivedFolder"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[4]=b.syncGroup,c.i64.neq(d[4],void 0)?d[3]=d[4]:d[3]=c.i64.cast([0,1]),d[0]=d[3])})},function(d){return[c.i64.cast([0,1]),c.i64.cast([0,2])].some(function(b){return c.i64.eq(a[1],b)})?c.storedProcedure(b("LSMoveThreadToArchivedFolder"),a[0]):c.storedProcedure(b("LSDeleteThread"),a[0],!1)},function(e){return c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),c.i64.to_string(a[0]),c.i64.cast([0,146]),"",void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),d[0],void 0,c.i64.cast([0,0]),c.i64.cast([0,0])).then(function(a){return a=a,d[2]=a[0],a})},function(b){return c.db.table(32).add({taskId:d[2],threadKey:a[0],removeType:a[1],syncGroup:d[0]})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticRemoveThreadStoredProcedure";e.exports=a}),null);
__d("LSOptimisticRemoveThreadStoredProcedure",["LSOptimisticRemoveThread","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;d[1]=b.removeType;return c("LSOptimisticRemoveThread").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSPlatformWaitForTaskCompletion",["I64","Promise","asyncToGeneratorRuntime","emptyFunction","err","promiseDone","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,g){var j=new Set(),k=[],l=0,m=!0,n,o,p=new(i||(i=b("Promise")))(function(a,b){n=a,o=b}),q=c("uuidv4")(),r=!0,s=(yield a.runInTransaction(function(){var i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(i){yield i.mailbox_task_completion_notification_context.add({notificationName:g,notificationScopeKey:q});var p=a.tables.pending_tasks.subscribe(function(a,b){a=(h||(h=d("I64"))).to_string(a[0]);b.operation==="add"||b.operation==="put"?j.add(a):j["delete"](a)}),t=c("emptyFunction"),u=a.tables.mailbox_task_completion_api_tasks.subscribe(function(a,b){if(b.operation==="add"||b.operation==="put"&&b.value.notificationScopeKey===q){a=(h||(h=d("I64"))).to_string(b.value.taskId);j["delete"](a);b=b.value.success;b==null?r&&(k.push(a),l+=1):(m=b&&m,l-=1)}});t=a.subscribeToCommit(function(){l===0&&j.size===0&&(u(),p(),t(),c("promiseDone")(a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){for(var b of k)yield a.mailbox_task_completion_api_tasks["delete"]((h||(h=d("I64"))).of_string(b))});return function(b){return a.apply(this,arguments)}}(),"readwrite","background",void 0,f.id+":125")),m?n(s):o(c("err")("Not all tasks for "+g+" succeeded")))});try{var v=(yield e(i));yield i.mailbox_task_completion_notification_context["delete"](q);return v}catch(a){t();u();p();throw a}});return function(a){return i.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":61"));r=!1;return p});return j.apply(this,arguments)}g["default"]=a}),98);
__d("LSRefetchContactRowIfExists",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.filter(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(e,f){var g=e.done;e=e.value;return g?0:(f=e.item,c.i64.le(f.authorityLevel,c.i64.cast([0,80]))?(d[0]=new c.Map(),d[0].set("contact_id",a[0]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"cpq_v2",c.i64.cast([0,207]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):c.resolve())})},function(a){return c.resolve(e)}])}a.__sproc_name__="LSContactRefetchContactRowIfExistsStoredProcedure";e.exports=a}),null);
__d("LSRefetchContactRowIfExistsStoredProcedure",["LSRefetchContactRowIfExists","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.id;return c("LSRefetchContactRowIfExists").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSRtcCallState",[],(function(a,b,c,d,e,f){a=Object.freeze({NO_ONGOING_CALL:0,AUDIO_GROUP_CALL:1,VIDEO_GROUP_CALL:2,VIDEO_1TO1_CALL:3,AUDIO_1TO1_CALL:4});f["default"]=a}),66);
__d("LSThreadPointQueryAndRestoreMessagesWithJID",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("wa_jid",a[0]),d[0].set("tam_thread_subtype",c.i64.cast([0,0])),d[1]=d[0].get("wa_jid"),d[0],d[2]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[1]),c.i64.cast([0,556]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure";e.exports=a}),null);
__d("LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure",["LSThreadPointQueryAndRestoreMessagesWithJID","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.waJid;return c("LSThreadPointQueryAndRestoreMessagesWithJID").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSThreadRemoveType",[],(function(a,b,c,d,e,f){a=Object.freeze({DELETE_THREAD:0,ARCHIVE_THREAD:1,IGNORE_THREAD:2});f["default"]=a}),66);
__d("LSVerifyContactRowExistsStoredProcedure",["LSVerifyContactRowExists","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.id;d[1]=b.contactIdType;d[2]=b.profilePictureUrl;d[3]=b.name;d[4]=b.contactType;d[5]=b.profilePictureFallbackUrl;d[6]=b.profilePictureUrlExpirationTimestampMs;d[7]=b.urlExpirationTimestampMs;d[8]=b.normalizedNameForSearch;d[9]=b.isMemorialized;d[10]=b.isBlocked;d[11]=b.blockedByViewerStatus;d[12]=b.canViewerMessage;d[13]=b.isSelf;d[14]=b.authorityLevel;d[15]=b.capabilities;d[16]=b.capabilities2;d[17]=b.workForeignEntityType;d[18]=b.gender;d[19]=b.contactViewerRelationship;d[20]=b.secondaryName;return c("LSVerifyContactRowExists").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSVerifyContactExistsWithID",["LSAuthorityLevel","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSIntEnum","LSPlatformWaitForTaskCompletion","LSVerifyContactRowExistsStoredProcedure","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c){return a.runInTransaction(function(a){return j(b,c,a)},"readwrite",void 0,void 0,f.id+":35")}function e(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,d){yield c("LSPlatformWaitForTaskCompletion")(a,function(a){return j(b,d,a)},"readwrite")});return i.apply(this,arguments)}function j(a,b,e){return c("LSVerifyContactRowExistsStoredProcedure")(c("LSFactory")(e),{authorityLevel:(h||(h=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").CLIENT_PARTIAL),blockedByViewerStatus:h.ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED),contactIdType:h.ofNumber(c("LSContactIdType").FBID),contactType:h.ofNumber(c("LSContactType").USER),contactViewerRelationship:h.ofNumber(c("LSContactViewerRelationship").UNKNOWN),gender:h.ofNumber(c("LSContactGender").UNKNOWN),id:a,isBlocked:!1,isMemorialized:!1,isSelf:b,workForeignEntityType:h.ofNumber(c("LSContactWorkForeignEntityType").UNKNOWN)})}g.runInTransaction=a;g.waitForTaskFinish=e;g.callStoredProcedure=j}),98);
__d("MAWChatJid",["FBLogger","I64","Promise","ReQL","WAJids"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){a=d("WAJids").threadIdForChatJid(a);return(i||(i=d("I64"))).of_string(a)}function k(a,e){try{return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.mi_act_mapping_table.index("jid")).getKeyRange(j(e))).then(function(a){return a==null?void 0:a.serverThreadKey})}catch(a){c("FBLogger")("messenger_e2ee_web").catching(a).warn("Invalid chatJid: "+e);return(h||(h=b("Promise"))).reject(a)}}function a(a,b,d){return k(a,b).then(function(a){if(a!=null)return a;throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[toThreadKey] No mapping record for chatJid, source: %s",d)})}function e(a,e){try{return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.mi_act_mapping_table.index("jid")).getKeyRange(e)).then(function(a){return a==null?void 0:a.serverThreadKey})}catch(a){c("FBLogger")("messenger_e2ee_web").catching(a).warn("Invalid integer jid: "+(i||(i=d("I64"))).to_string(e));return(h||(h=b("Promise"))).reject(a)}}g.toIntegerJid=j;g.toThreadKeyMaybe=k;g.toThreadKey=a;g.toThreadKeyMaybeForChatJidInteger=e}),98);
__d("MWEncryptedBackupsLocalStorageEntryEnum",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({INTERSTITIAL_DIALOG_VERIFY_DEVICE_NUX_DISMISSED:"maw_eb_interstitial_dialog_verify_device_nux_dismissed",VERIFY_DEVICE_NUX_DISMISSED:"maw_eb_verify_device_in_thread_nux_dismissed",ENCRYPTED_BACKUPS_OPT_OUT:"maw_encrypted_backups_opt_out",MW_ENCRYPTED_BACKUPS_USER_CLICKED_ON_SETTINGS:"mw_encrypted_backups_user_clicked_on_settings",MW_ENCRYPTED_BACKUPS_HIGH_FRICTION_RESTORE_DISMISSED:"mw_encrypted_backups_high_friction_restore__dismissed",ENCRYPTED_BACKUPS_TURN_OFF_SECURE_STORAGE:"mw_encrypted_backups_turn_off_secure_storage",ENCRYPTED_BACKUPS_REMEMBER_BROWSER_CONSENT:"mw_encrypted_backups_remember_browser_consent",ENCRYPTED_BACKUPS_RESTORED_SUCCESSFULLY:"maw_eb_restored_successfully",MW_EB_SHOULD_NOT_DISPLAY_SOFTBLOCK:"mw_eb_should_not_display_softblock",MW_EB_HAS_RESTORED_IN_CURRENT_SESSION:"maw_eb_has_restored_in_current_session",MW_EB_HAS_RESTORED_IN_CURRENT_SESSION_2:"maw_eb_has_restored_in_current_session_temp",ENCRYPTED_BACKUPS_ONBOARDED_SUCCESSFULLY:"maw_eb_onboarded_successfully",EB_ONBOARDING_DEFER_UPSELL_UNTIL_TIME:"mw_eb_onboarding_defer_upsell_until_time",EB_ONBOARDING_QP_DISMISSED:"mw_eb_onboarding_qp_dismissed",EBSM_CORRUPTION_WIPE:"ebsm_corruption_wipe",MW_EB_HAS_OPTED_OUT_OF_AUTO_RESTORE:"mw_eb_has_opted_out_of_auto_restore"});c=a;f["default"]=c}),66);
__d("MWEncryptedBackupsSharedState",["WebStorage","getMWEncryptedBackupsIsLocalStorageSupported","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){var b=a.db,c=a.stateKey;a=a.stateValue;var d=a===void 0?"true":a;return b.runInTransaction(function(a){return a.experiences_shared_state.upsert([c],{stateKey:c,stateValue:d})},"readwrite","background",void 0,f.id+":33")}function j(a){var b,e=a.db;a=a.stateKey;if(!d("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported())return;b=(b=(h||(h=c("WebStorage"))).getLocalStorageForRead())==null?void 0:b.getItem(a);if(b!=null){var f;(f=(h||(h=c("WebStorage"))).getLocalStorage())==null?void 0:f.removeItem(a);c("promiseDone")(i({db:e,stateKey:a,stateValue:b}))}return b}function a(a){var b=a.db,c=a.sharedStateTable,d=a.stateKey;a=c.filter(function(a){return a.stateKey===d});if(a.length===0){c=j({db:b,stateKey:d});return c!=null}return!0}function b(a){var b=a.db,c=a.sharedStateTable,d=a.stateKey;a=c.filter(function(a){return a.stateKey===d});c=a[0];return(c==null?void 0:c.stateValue)!=null?c.stateValue:j({db:b,stateKey:d})}function e(a){var b=a.db,c=a.sharedStateRow;a=a.stateKey;return c==null?j({db:b,stateKey:a}):c.stateValue}function k(a){var b=a.db,c=a.stateKey;return b.runInTransaction(function(a){return a.experiences_shared_state["delete"](c)},"readwrite","background",void 0,f.id+":127")}g.upsertEBSharedStateEntry=i;g.getEntryPresentInLocalStorage=j;g.getIsEntryPresentInSharedState=a;g.getEntryValueFromSharedState=b;g.getEntryValue=e;g.deleteEntry=k}),98);
__d("MWPreloadableQueries",["I64","ReQL","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;b=function(a,b){return d("ReQL").fromTableAscending(a.tables.thread_nullstate).getKeyRange(b)};e=function(a,b){return d("ReQL").fromTableAscending(a.tables.thread_nullstate_ctas.index("threadKeyCtaId")).getKeyRange(b)};f=function(a,b){return d("ReQL").fromTableAscending(a.tables.cutover_threads).getKeyRange(b)};var i=function(a,b){return d("ReQL").fromTableDescending(a.tables.messages).getKeyRange(b).take(6)},j=function(a,b,e){return e.forEach(function(e){var f;c("promiseDone")((f=d("ReQL")).toArrayAsync(f.fromTableDescending(a.tables.reactions).getKeyRange(b,e.messageId)));c("promiseDone")(f.toArrayAsync(f.fromTableDescending(a.tables.reactions_v2).getKeyRange(b,e.messageId)));c("promiseDone")(f.toArrayAsync(f.fromTableDescending(a.tables.attachments).getKeyRange(b,e.messageId)))})},k=function(a,b){return d("ReQL").fromTableAscending(a.tables.community_folders).getKeyRange(b)},l=function(a,b){return d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.tables.threads).getKeyRange(b)).then(function(b){(b==null?void 0:b.parentThreadKey)!=null&&k(a,b.parentThreadKey)})},m=function(a,b){return d("ReQL").fromTableAscending(a.tables.thread_proactive_warning_settings).getKeyRange(b)},n=function(a,b){return d("ReQL").fromTableAscending(a.tables.in_thread_banner).getKeyRange(b)};function a(a,b){return d("ReQL").fromTableAscending(a.tables.media_staging).filter(function(a){return!a.isSent&&(h||(h=d("I64"))).equal(a.threadKey,b)})}g.threadNullStateQuery=b;g.threadNullStateCtaQuery=e;g.getCutoverThreadByThreadKey=f;g.getMostRecentMessagesInThread=i;g.getReactionsForMessages=j;g.getCommunityFolderQuery=k;g.getCommunityFolderForThreadParentQuery=l;g.getProactiveWarningsForThreadQuery=m;g.getThreadBannerQuery=n;g.getMediaStagingQuery=a}),98);
__d("MAWThreadCutover",["I64","LSContactBitOffset","LSDatabaseSingleton","MWEncryptedBackupsLocalStorageEntryEnum","MWEncryptedBackupsSharedState","MWPActor.react","MWPreloadableQueries","ReQL","ReQLSuspense","UserAgent","WAJids","asyncToGeneratorRuntime","gkx","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return(yield z(a))!=null});return k.apply(this,arguments)}function l(a){var b=(j||(j=c("useReStore")))();return d("ReQLSuspense").useFirst(function(){return a!=null?d("MWPreloadableQueries").getCutoverThreadByThreadKey(b,a):d("ReQL").empty()},[b,a],f.id+":42")!=null}function e(a){var b,e=(j||(j=c("useReStore")))();b=(b=d("ReQLSuspense").useFirst(function(){return c("gkx")("26365")&&a?d("MWPreloadableQueries").getCutoverThreadByThreadKey(e,a):d("ReQL").empty()},[e,a],f.id+":54"))==null?void 0:b.showOpenMessageHistory;return b===!1}function m(a,b){return d("ReQL").fromTableAscending(a.tables.mi_act_mapping_table).getKeyRange(b)}function n(a,b){return d("ReQL").fromTableAscending(a.tables.cutover_threads).filter(function(a){return(h||(h=d("I64"))).equal(a.armadilloThreadId,b)})}function o(a){var b=(j||(j=c("useReStore")))(),e=d("ReQLSuspense").useFirst(function(){return a==null?d("ReQL").empty():m(b,a)},[b,a],f.id+":87");return d("ReQLSuspense").useFirst(function(){return e==null?d("ReQL").empty():n(b,e.jid)},[b,e],f.id+":95")}function p(a,b){return d("ReQL").fromTableAscending(a.tables.threads).getKeyRange(b.openThreadId)}function q(a){var b=(j||(j=c("useReStore")))(),e=o(a);return d("ReQLSuspense").useFirst(function(){return e==null?d("ReQL").empty():p(b,e)},[b,e],f.id+":116")}function r(a){a=o(a);if(a!=null)return a.openThreadId}function s(a){return o(a)!=null}function t(a,b){b=d("WAJids").threadIdForChatJid(b);return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.cutover_threads).getKeyRange((h||(h=d("I64"))).of_string(b))).then(function(a){return a!=null})}function u(){var a=(j||(j=c("useReStore")))(),b=d("MWPActor.react").useActor();a=d("ReQLSuspense").first(d("ReQL").fromTableAscending(a.tables.contacts).getKeyRange(b),f.id+":151");return a!=null&&((b=d("LSContactBitOffset").has(75,a))!=null?b:!1)}function v(){var a=(j||(j=c("useReStore")))(),b=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(a.tables.experiences_shared_state).getKeyRange(c("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_RESTORED_SUCCESSFULLY)},[a],f.id+":166");b=d("MWEncryptedBackupsSharedState").getEntryValue({db:a,sharedStateRow:b,stateKey:c("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_RESTORED_SUCCESSFULLY});return b!=null}function w(a){var b=(j||(j=c("useReStore")))(),e=a!=null?(h||(h=d("I64"))).of_string(a):void 0,g=l(e);return d("ReQLSuspense").useFirst(function(){if(g&&e!=null)return d("ReQL").fromTableAscending(b.tables.mi_act_mapping_table).filter(function(a){return(h||(h=d("I64"))).equal(a.jid,e)}).map(function(a){return(h||(h=d("I64"))).to_string(a.serverThreadKey)});else return d("ReQL").empty()},[b,e,g],f.id+":187")}function x(){return c("gkx")("1593")?c("UserAgent").isBrowser("Chrome"):!0}function y(a){var b=(j||(j=c("useReStore")))(),e=d("ReQLSuspense").useFirst(function(){if(a!=null)return d("MWPreloadableQueries").getCutoverThreadByThreadKey(b,a);else return d("ReQL").empty()},[b,a],f.id+":216"),g=e==null?void 0:e.armadilloThreadId;e=d("ReQLSuspense").useFirst(function(){if(g!=null)return d("ReQL").fromTableAscending(b.tables.mi_act_mapping_table.index("jid")).getKeyRange(g);else return d("ReQL").empty()},[g,b.tables.mi_act_mapping_table],f.id+":227");return e==null?void 0:e.serverThreadKey}function z(a){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield (i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton),c=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(b.tables.mi_act_mapping_table).getKeyRange(a)));if(c==null)return void 0;a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(b.tables.cutover_threads).filter(function(a){return(h||(h=d("I64"))).equal(a.armadilloThreadId,c.jid)})));return a});return A.apply(this,arguments)}g.isCutoverThreadKey=a;g.useIsCutoverOpenThread=l;g.useIsDualThreadCutoverOpenThread=e;g.getMiActMappings=m;g.getCutoverThreadsByJid=n;g.useGetCutoverMapping=o;g.getThreadByCutoverThread=p;g.useCutoverOpenThread=q;g.useGetCutoverOpenThreadKey=r;g.useIsCutoverSecureThread=s;g.isCutoverSecureThreadFromChatJid=t;g.useIsCurrentUserCutoverUser=u;g.useGetHasUserRestoredBefore=v;g.useGetCutoverSecureThreadKey=w;g.useSupportedCutoverEnvironment=x;g.useCutoverSecureThreadKeyForOpenThreadKey=y;g.getCutoverThreadBySecureThreadKey=z}),98);
__d("MAWCommonSetupBridge",["BrowserLockManager","CurrentUser","ErrorTransport","I64","LSDatabaseSingleton","LSIntEnum","LSMessagingThreadAttributionType","MAWBridge","MAWChatJid","MAWCrossWorkerPortal","MAWCurrentUser","MAWDbMedia","MAWEBSwitch","MAWFrontendMediaUtils","MAWJobActionsV2","MAWMICSafe","MAWThreadCutover","MAWVault","MAWXMAUtils","MWLogSend","MultipleTabsLogger","ODS","Promise","QPLEvent","QPLUserFlow","URLMatcher","WACrossWorkerPortal","WADevToolMessageChannel","WADevToolsBridge","WAExceededStorageQuota","WAJids","cr:2691","err","gkx","justknobx","pageID","promiseDone","qpl","requireDeferred","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n=c("requireDeferred")("MAWMainThreadLogger").__setRef("MAWCommonSetupBridge"),o=new Set([25312111,25311870]),p=new Map(),q=new Map(),r=new Map([[(a=d("MAWDbMedia")).MEDIA_TYPE.IMAGE,8],[a.MEDIA_TYPE.VIDEO,10],[a.MEDIA_TYPE.GIF,6],[a.MEDIA_TYPE.STICKER,4],[a.MEDIA_TYPE.PTT,11],[a.MEDIA_TYPE.DOCUMENT_FILE,9]]),s=new Set([25312150,25313100,1056840931,25299294]);function t(a,b){return a+"_"+b}function u(a,b,c,d,e,f,g,h){if(e)return 43;if(a==="revokeMsg")return 26;if(f!=null)return f;if(c)return 3;if(d&&g===!1)return 13;if(h===!0)return 13;e=b!=null?r.get(b):null;return(a=e)!=null?a:0}function v(a,b,e){return(i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(f){return d("MAWThreadCutover").isCutoverSecureThreadFromChatJid(f,a).then(function(a){c("QPLUserFlow").addAnnotations(b,{bool:{is_cutover:a}},{instanceKey:e})})})}var w={fbErrorProxy:function(a){d("ErrorTransport").log(a)},log:function(a){var b=a.logLevel,c=a.logString,d=a.tags;switch(b){case"log":n.onReadyImmediately(function(a){a=a.info;return a(c,d)});return;case"warn":n.onReadyImmediately(function(a){a=a.warn;return a(c,d)});return;case"logRestricted":n.onReadyImmediately(function(a){a=a.logRestricted;return a(c,d)});return;case"debug":break;case"error":break;default:break}},logError:function(a){var b=a.entriesToReport,c=a.framesToPop,d=a.logString,e=a.message,f=a.stack,g=a.tags;n.onReadyImmediately(function(a){a=a.logError;return a(d,g,e,f,c,b)})},odsBumpEntityKey:function(a){var b=a.amount,e=a.entity;a=a.key;(j||(j=d("ODS"))).bumpEntityKey(3185,e,a+"."+(c("CurrentUser").getAppID()||"unknown"),b)},onJobFinished:function(a){a.type==="createGroup"&&a.originalArgs.key!=null&&d("MAWJobActionsV2").recentFinishedJobsCache.set(a.originalArgs.key,a.result);switch(a.type){case"sendMsg":case"sendMediaMsg":case"sendReactionMsg":case"sendXMAShareMsg":case"forwardMsg":var b=a.originalArgs.chatJid,e=a.type==="sendXMAShareMsg"?a.originalArgs.xmaMsgExternalId:a.originalArgs.externalId;p.set(t(b,e),babelHelpers["extends"]({},a.originalArgs,{type:"sendMsg"}));break;case"sendEditMsg":b=a.originalArgs.args.originalProtocolMsgId.chat;e=a.originalArgs.externalId;p.set(t(b,e),babelHelpers["extends"]({},a.originalArgs,{chatJid:b,type:"editMsg"}));break;case"revokeMsgs":e=a.result;e.forEach(function(a){var b=a.deleting;a=a.original;p.set(t(b.chat,b.externalId),{chatJid:a.chat,externalId:a.externalId,type:"revokeMsg"})});break;case"sendAppData":b=a.originalArgs;var f=a.result;(e=b.args.contents.actions)==null?void 0:e.forEach(function(a){a=a.messageAction;if(a==null||a.type!=="delete_for_me"||f.type!=="not_sent")return;q.set(f.appDataExternalId,{chatJid:a.protocolMsgId.chat,externalId:a.protocolMsgId.externalId,type:"deleteMsgForMe"})});break}if(a.type==="sendWrittenMsg"){b=a.originalArgs.protocolMsgId;e=b.chat;b=b.externalId;e=t(e,b);var g=p.get(e);p["delete"](e);if(a.result.success&&g!=null){var h,j=g.type!=="revokeMsg"?b:g.externalId,m=g.args,n=g.chatJid;e=g.file;b=g.type;g=g.type==="editMsg";var o=(m==null?void 0:m.reactToAuthor)!=null,r=null;o&&(r=(m==null?void 0:m.reaction)!=null?20:27);o=(m==null?void 0:m.specialTextSize)!=null;e=e!=null?d("MAWFrontendMediaUtils").getMediaTypeAndServerMediaTypeFromBlob(e.type).mediaType:null;var s=(m==null?void 0:m.xmaMessageType)!=null,v=(m==null?void 0:m.quote)!=null||d("MAWXMAUtils").isXMAStoryReply(m==null?void 0:m.xmaMessageType);h=c("URLMatcher").match(d("MAWVault").unvault((h=m==null?void 0:m.content)!=null?h:""));h=h!=null&&h.length>0;var w=u(b,e,o,s,g,r,v,h),x=d("WAJids").switchOnMsgrChatJidType(n,{group:function(){return(k||(k=d("LSIntEnum"))).ofNumber(16)},user:function(){return(k||(k=d("LSIntEnum"))).ofNumber(15)}});c("promiseDone")((i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(a){var b=(m==null?void 0:m.source)!=null?m.source:(k||(k=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").UNKNOWN);c("promiseDone")(d("MAWChatJid").toThreadKey(a.tables,n,"MAWCommonSetupBridge::sendWrittenMsg").then(function(e){var f;if(c("justknobx")._("154")&&d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()&&(c("BrowserLockManager")!=null&&!d("MultipleTabsLogger").hasUniqueLock()))return;d("MWLogSend").log(a,{actor:(l||(l=d("I64"))).of_string(d("MAWCurrentUser").getID()),attachmentFbids:[],attachmentType:w,backend:1,hasReply:v,initatingSource:m==null?void 0:m.initiatingSource,messagingThreadId:l.to_string(e),msgTtl:m==null?void 0:(f=m.ephemeralSetting)==null?void 0:f.ephemeralExpirationInSec,offlineThreadingId:j,sendType:1,source:b,threadKey:e,threadType:x})}))}))}}if(a.type==="sendWrittenAppData"){b=a.originalArgs.appDataExternalId;e=q.get(b);q["delete"](b);if(e!=null&&e.type==="deleteMsgForMe"&&a.result.type==="success"){var y=e.chatJid,z=e.externalId,A=d("WAJids").switchOnMsgrChatJidType(y,{group:function(){return(k||(k=d("LSIntEnum"))).ofNumber(16)},user:function(){return(k||(k=d("LSIntEnum"))).ofNumber(15)}});c("promiseDone")((i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(a){c("promiseDone")(d("MAWChatJid").toThreadKey(a.tables,y,"MAWCommonSetupBridge::sendWrittenAppData").then(function(b){d("MWLogSend").log(a,{actor:(l||(l=d("I64"))).of_string(d("MAWCurrentUser").getID()),attachmentFbids:[],attachmentType:25,backend:1,hasReply:!1,messagingThreadId:l.to_string(b),offlineThreadingId:z,sendType:3,source:(k||(k=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").UNKNOWN),threadKey:b,threadType:A})}))}))}}},qplEvent:function(a){var e=a.action,f=a.annotations,g=a.debugInfo,i=a.error,j=a.event,k=a.instanceKey,l=a.timeoutInMs,n=a.timestamp;if(!c("CurrentUser").isEmployee()&&o.has((m||(m=d("QPLEvent"))).getMarkerId(j)))return;var p=k||0;k=f==null?void 0:(a=f.string)==null?void 0:a.jid;a=k!=null?d("WAJids").validateChatJid(k):void 0;k=s.has((m||(m=d("QPLEvent"))).getMarkerId(j))&&a!=null?v(a,j,p):(h||(h=b("Promise"))).resolve();switch(e.type){case"start":c("QPLUserFlow").start(j,{annotations:babelHelpers["extends"]({},f||{},{bool:babelHelpers["extends"]({},(f==null?void 0:f.bool)||{},{is_eb_enabled:c("MAWEBSwitch").isEnabled(),is_pdb:c("gkx")("24032"),isArmadilloPublicLaunchUser:c("gkx")("23405"),isDev:0,isGifSearchEnbled:!0,isM1M2OverrideUser:c("gkx")("24022"),isRestoreDBEnabled:c("gkx")("23906"),isTlcPublicUser:d("MAWCurrentUser").isTlcPublicUser(),useSharedWorker:d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()})}),instanceKey:p,timeoutInMs:l,timestamp:n});break;case"success":c("QPLUserFlow").addAnnotations(j,{bool:{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0}},{instanceKey:p});k["finally"](function(){c("QPLUserFlow").endSuccess(j,{annotations:f,instanceKey:p,timestamp:n})});break;case"cancel":c("QPLUserFlow").addAnnotations(j,{bool:{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0}},{instanceKey:p});k["finally"](function(){c("QPLUserFlow").endCancel(j,{annotations:f,instanceKey:p,timestamp:n})});break;case"point":f&&c("QPLUserFlow").addAnnotations(j,f,{instanceKey:p});(m||(m=d("QPLEvent"))).getMarkerId(j)===1056839232?d("MAWMICSafe").markEvent(e.name,n):c("QPLUserFlow").addPoint(j,e.name,{instanceKey:p,timestamp:n});break;case"annotations":c("QPLUserFlow").addAnnotations(j,(a=f)!=null?a:{},{instanceKey:p});break;case"failure":c("QPLUserFlow").addAnnotations(j,{bool:{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0}},{instanceKey:p});k["finally"](function(){c("QPLUserFlow").endFailure(j,e.name,{annotations:f,instanceKey:p,timestamp:n})});break;case"error":c("QPLUserFlow").markError(j,e.name,{debugInfo:g,error:i,instanceKey:p});break;default:throw c("err")("Bridge sends unreachable qplEvent action type")}}},x=function(a,b){a.push(b);return a};e=function(a){var e=a.customizeEventHandlers;a=a.worker;var f=d("MAWBridge").getBridge();f.setHandlers("event",babelHelpers["extends"]({},w,e));e=d("MAWCrossWorkerPortal").getOrCreateCrossWorkerPortal(f,["backend"],x,{onAfterSend:function(a){a=(a=a.content.arg)==null?void 0:(a=a.args)==null?void 0:(a=a.args)==null?void 0:a.s2sInstanceKey;a!=null&&c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"cross_worker_portal_bridge_called",{instanceKey:a})},onBeforeSend:function(a){a=(a=a.content.arg)==null?void 0:(a=a.args)==null?void 0:(a=a.args)==null?void 0:a.s2sInstanceKey;a!=null&&c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"cross_worker_portal_calling_bridge",{instanceKey:a})}});e.setPort(a);if(c("gkx")("3282")){var g=d("WADevToolsBridge").getDevToolBridge();a=new MessageChannel();var i=d("WACrossWorkerPortal").attachPortal(g,["backend"],x,c("pageID")),j=d("WACrossWorkerPortal").attachPortal(g,["devtool"],x,c("pageID"));d("WADevToolMessageChannel").onCreateNewChannel(function(a){i.setPort(a.port1)});j.setPort(a.port1);b("cr:2691")==null?void 0:b("cr:2691").connectAddonPort(a.port2);e.addListener(function(a,b){return g.fireAndForget("devtool","bridgeMessage",{direction:b==="outgoing"?"toWorker":"toMain",msg:a,ts:Date.now()},!0)})}return(h||(h=b("Promise"))).resolve(f)};g.MEDIA_TYPE_TO_ATTACHMENT_TYPE=r;g.initBridge=e}),98);
__d("MAWEBRestoreTrackingUtils",["LSIntEnum","MAWQplProxy","MWEBODSEntityName.enum","ODS","QPLUserFlow","WAHashStringToNumber","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){b!=null&&o({taskSource:a,traceId:b,triggerType:"paginated"}),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.paginated")}function b(a,b){b!=null&&o({taskSource:a,traceId:b,triggerType:"initial"}),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.initial")}function e(a,b){b!=null&&o({taskSource:a,traceId:b,triggerType:"dyi"}),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.dyi")}function f(a,b){b!=null&&o({taskSource:a,traceId:b,triggerType:"frontloaded"}),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.frontloaded")}function j(a,b){b!=null&&o({taskSource:a,traceId:b,triggerType:"point"}),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.point")}function k(a){a!=null&&c("QPLUserFlow").endSuccess(c("qpl")._(521476165,"2432"),{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)}),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.decryption.success")}function l(a){a!=null&&c("QPLUserFlow").endFailure(c("qpl")._(521476165,"2432"),"restore_failure",{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)}),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.decryption.failure")}function m(a){r("echo",a)}function n(a){r("protobuf",a)}function o(a){var b=a.taskSource,e=a.traceId;a=a.triggerType;c("QPLUserFlow").start(c("qpl")._(521476165,"2432"),{annotations:{string:{taskSource:s(b),triggerType:a}},instanceKey:d("WAHashStringToNumber").hashStringToNumber(e)})}function p(a){var b=a.pointName,e=a.traceId;a=a.type;c("QPLUserFlow").addAnnotations(c("qpl")._(521476165,"2432"),{string:{type:a}},{instanceKey:d("WAHashStringToNumber").hashStringToNumber(e)});c("QPLUserFlow").addPoint(c("qpl")._(521476165,"2432"),b,{instanceKey:d("WAHashStringToNumber").hashStringToNumber(e)})}function q(a){var b=a.pointName;a=a.traceId;d("MAWQplProxy").sendQplPointThroughBridge(c("qpl")._(521476165,"2432"),b,{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})}function r(a,b){b=b?(i||(i=d("LSIntEnum"))).unwrapIntEnum(b):null;(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore."+a+"."+s(b))}function s(a){return(a=a==null?void 0:a.toString())!=null?a:"unknown"}g.markEBRestorePaginated=a;g.markEBRestoreInitial=b;g.markEBRestoreDYI=e;g.markEBRestoreFrontloaded=f;g.markEBRestorePoint=j;g.markEBRestoreSuccess=k;g.markEBRestoreFail=l;g.markEBRestoreEcho=m;g.markEBRestoreProtobuf=n;g.addQPLRestorePoint=p;g.addQPLRestorePointWorker=q}),98);
__d("MAWGetEphemeralSettings",["I64","MAWBridgeSendAndReceive","MAWChatJid","ReQL","WAJids","WALogger","WATimeUtils","asyncToGeneratorRuntime","promiseDone","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[ephemeral settings in memory]: MAWGetEphemeralSettings api call for chatJid "," returns ",""]);i=function(){return a};return a}var j=c("requireDeferred")("LSDatabaseSingletonLazyWrapper").__setRef("MAWGetEphemeralSettings"),k=c("requireDeferred")("MAWEphemeralSettingsUpdate").__setRef("MAWGetEphemeralSettings");function a(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(d("WAJids").switchOnMsgrChatJidType(a,{group:function(){return!1},user:function(){return!0}})){var e=(yield j.load());e=(yield e());b=(b=b)!=null?b:yield d("MAWChatJid").toThreadKeyMaybe(e.tables,a);if(b!=null){e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.threads).getKeyRange(b)));if(e!=null&&e.disappearingSettingTtl!=null){b={ephemeralExpirationInSec:(h||(h=d("I64"))).to_int32(e.disappearingSettingTtl),ephemeralLastUpdatedOrSetTimestamp:e.disappearingSettingUpdatedBy!=null?d("WATimeUtils").castMilliSecondsToUnixTime((h||(h=d("I64"))).to_float(e.disappearingSettingUpdatedBy)):d("WATimeUtils").unixTime()};return b}return}return d("MAWBridgeSendAndReceive").sendAndReceive("backend","getEphemeralSettings",{threadId:a}).then(function(b){d("WALogger").LOG(i(),a,b);if(b!=null){c("promiseDone")(k.load().then(function(c){return c.updateEphemeralSettingsByChatJid(b.ephemeralExpirationInSec,b.ephemeralLastUpdatedOrSetTimestamp,!1,a,!0)}));return b}return void 0})}});return l.apply(this,arguments)}g.getEphemeralSetting=a}),98);
__d("mergeDeepInto",["invariant","mergeHelpers"],(function(a,b,c,d,e,f,g){"use strict";var h=(c=b("mergeHelpers")).ArrayStrategies,i=c.checkArrayStrategy,j=c.checkMergeArrayArgs,k=c.checkMergeLevel,l=c.checkMergeObjectArgs,m=c.isTerminal,n=c.normalizeMergeArg,o=function(a,b,c,d){l(a,b);k(d);var e=b?Object.keys(b):[];for(var f=0;f<e.length;f++){var g=e[f];q(a,b,g,c,d)}},p=function(a,b,c,d){j(a,b);k(d);if(c===h.Concat)a.push.apply(a,b);else{var e=Math.max(a.length,b.length);for(var f=0;f<e;f++)q(a,b,f,c,d)}},q=function(a,b,c,d,e){var f=b[c];b=Object.prototype.hasOwnProperty.call(b,c);var i=b&&m(f),j=b&&Array.isArray(f),k=b&&!j&&!j,l=a[c],n=Object.prototype.hasOwnProperty.call(a,c),q=n&&m(l),r=n&&Array.isArray(l),s=n&&!r&&!r;q?i?a[c]=f:j?(a[c]=[],p(a[c],f,d,e+1)):k?(a[c]={},o(a[c],f,d,e+1)):b||(a[c]=l):r?i?a[c]=f:j?(d&&h[d]||g(0,5117),d===h.Clobber&&(l.length=0),p(l,f,d,e+1)):k&&(a[c]={},o(a[c],f,d,e+1)):s?i?a[c]=f:j?(a[c]=[],p(a[c],f,d,e+1)):k&&o(l,f,d,e+1):n||(i?a[c]=f:j?(a[c]=[],p(a[c],f,d,e+1)):k&&(a[c]={},o(a[c],f,d,e+1)))};function a(a,b,c){b=n(b);i(c);o(a,b,c,0)}f["default"]=a}),66);
__d("WebAsyncStorage",["Deferred","Promise","gkx","mergeDeepInto","mergeHelpers"],(function(a,b,c,d,e,f,g){"use strict";var h;a=typeof window!=="undefined"?window:self;var i=a.indexedDB,j=1,k="data",l=!1,m;d=Date.now();var n=new(c("Deferred"))(),o=3;function p(){var a=i.open("AsyncStorage",j),b=c("gkx")("4585");a.onerror=function(c){c=(c=a.error)!=null?c:new Error("Failed to open AsyncStorage IndexedDB instance.");if(b&&c.name==="UnknownError"&&o>0){o--;return p()}n.reject(c)};a.onsuccess=function(a){l&&!1,m=a.target.result,n.resolve({db:m}),m.onerror=function(a){a=new Error("AsyncStorage error: "+a.target.error.message);n.reject(a)}};a.onupgradeneeded=function(a){a=a.currentTarget.result;if(a.objectStoreNames&&a.objectStoreNames.contains(k))return;a.createObjectStore(k,{keyPath:"key"})}}i&&p();function q(a,b){if(m)try{a()}catch(a){b&&b(a)}else n.getPromise().then(function(){l&&!1,q(a,b)},function(a){b&&b(a)})}e={setItem:function(a,b,c){this.multiSet([[a,b]],function(a){c(a&&a[0]||null)})},getItem:function(a,b){this.multiGet([a],function(a,c){c=c!==void 0&&c[0]!==void 0&&c[0][1]!==void 0?c[0][1]:null;b(a&&a[0]||null,c)})},removeItem:function(a,b){this.multiRemove([a],function(a){b(a&&a[0]||null)})},multiGet:function(a,b){var c=[];this._multiOp(a,"readonly",function(a){return b(a,c)},function(a){return a},function(a,b,d){b&&a===b.key?(l&&!1,c.push([a,b.value.value])):c.push([a,null])})},multiSet:function(a,b){if(this._persistentWritesDisabled){b(new Array(a.length).fill("writes disabled"));return}this._multiOp(a,"readwrite",b,function(a){return a[0]},function(a,b,c){if(b&&a[0]===b.key){var d=b.value;d.value=a[1];l&&!1;b.update(d)}else c.push(a)})},multiMerge:function(a,b){this._multiOp(a,"readwrite",b,function(a){return a[0]},function(a,b,d){if(b&&a[0]===b.key){var e=b.value,f=JSON.parse(e.value);c("mergeDeepInto")(f,JSON.parse(a[1]),c("mergeHelpers").ArrayStrategies.Clobber);l&&!1;e.value=JSON.stringify(f);b.update(e)}else l&&!1,d.push(a)})},multiRemove:function(a,b){this._multiOp(a,"readwrite",b,function(a){return a},function(a,b,c){b&&a===b.key&&(l&&!1,b["delete"]())})},getAllKeys:function(a){q(function(){var b=m.transaction([k],"readonly");b=b.objectStore(k).openCursor();var c=[];b.onsuccess=function(b){b=b.target.result;if(!b){a(null,c);return}c.push(b.key);b["continue"]()}},function(b){return a(null,[])})},clear:function(a){q(function(){var b=m.transaction([k],"readwrite");b=b.objectStore(k).openCursor();b.onsuccess=function(b){b=b.target.result;if(!b){a(null);return}b["delete"]();b["continue"]()}},function(b){return a(null)})},_multiOp:function(a,b,c,d,e){q(function(){var f=!1,g=a.slice().sort(function(a,b){a=d(a);b=d(b);if(a===b){var e=new Error("AsyncStorage._multiOp cannot process duplicate keys.");c&&c([e]);f=!0;return 0}return a<b?-1:1});if(f)return;var h=m.transaction([k],b),i=h.objectStore(k).openCursor(),j=[],n=0;i.onsuccess=function(a){a=a.target.result;if(!a){while(n<g.length)e(g[n],a,j),n++;o();return}var b=a.key;l&&!1;while(d(g[n])<=b){l&&!1;e(g[n],a,j);n++;if(n===g.length){o();return}}b=d(g[n]);a["continue"](b)};function o(){var a=h.objectStore(k);j.forEach(function(b){l&&!1,a.add({key:b[0],value:b[1]})})}h.oncomplete=function(){c&&c(null)};h.onerror=function(a){a=new Error("IndexedDB error: "+a.target.error.message);c&&c([a])};l&&!1},function(a){c&&c([a])})},_persistentWritesDisabled:!1,disablePersistentWrites:function(){this._persistentWritesDisabled=!0},isOpenPromiseSettled:function(){return n.isSettled()},isOperational:function(){return i==null?(h||(h=b("Promise"))).resolve(!1):n.getPromise().then(function(){return!0})["catch"](function(){return!1})}};f=e;g["default"]=f}),98);
__d("MAWIsIDBOperational",["Promise","WebAsyncStorage","promiseDone","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=i||d("react");var j=e.useEffect,k=e.useState;function l(a){a===void 0&&(a=!1);return a&&!c("WebAsyncStorage").isOpenPromiseSettled()?(h||(h=b("Promise"))).resolve(!1):c("WebAsyncStorage").isOperational()}var m=!1;function a(){var a=k(m),b=a[0],d=a[1];j(function(){c("promiseDone")(l().then(function(a){d(a),m=a}))},[d]);return b}g.isIDBOperational=l;g.useIsIDBOperational=a}),98);
__d("MAWLocalStorage",["LocalStorageWrapper","MWLocalStorageErrorHandler","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["not storage found"]);h=function(){return a};return a}function i(a){d("WALogger").LOG([a])}function j(a){d("WALogger").ERROR([a])}function a(){return d("LocalStorageWrapper").getStorage(i)}function b(){return d("LocalStorageWrapper").isLocalStorageAvailable(i)}function c(a,b,c){return d("LocalStorageWrapper").setItemGuarded(a,b,c,j,d("MWLocalStorageErrorHandler").onQuotaExceeded)}function e(a,b){a==null?d("WALogger").ERROR(h()):a.removeItem(b)}g.getStorage=a;g.isLocalStorageAvailable=b;g.setItemGuarded=c;g.removeItemGuarded=e}),98);
__d("MAWMiActGetMappingWithMawTypes",["I64","MAWJids","WAJids"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var c=(h||(h=d("I64"))).to_string(a.jid);b=b?d("WAJids").toGroupJid(c):d("MAWJids").toUserJid(c);return{clientThreadPk:a.clientThreadPk,jid:b,serverThreadKey:a.serverThreadKey}}g["default"]=a}),98);
__d("MAWMiActIsPlaceholderChatId",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return(h||(h=d("I64"))).lt(a,h.zero)}g.isPlaceholderClientThreadPk=a}),98);
__d("MAWMiActThreadLifecycleState",[],(function(a,b,c,d,e,f){"use strict";a={ACT_THREAD_ONLY:"ACT_THREAD_ONLY",AUTHORITATIVE_THREAD_MISSING_MAPPING_ROW:"AUTHORITATIVE_THREAD_MISSING_MAPPING_ROW",AUTHORITATIVE_THREAD_ONLY:"AUTHORITATIVE_THREAD_ONLY",CLIENT_PARTIAL_MI_THREAD:"CLIENT_PARTIAL_MI_THREAD",CLIENT_PARTIAL_MI_THREAD_WITH_ACT:"CLIENT_PARTIAL_MI_THREAD_WITH_ACT",JID_MISSING_MAPPING_ROW:"JID_MISSING_MAPPING_ROW",JID_MISSING_MI_THREAD:"JID_MISSING_MI_THREAD",MI_AND_ACT_THREAD_COMPLETE:"MI_AND_ACT_THREAD_COMPLETE",OPTIMISTIC_THREAD_NO_ACT:"OPTIMISTIC_THREAD_NO_ACT",OPTIMISTIC_THREAD_WITH_ACT:"OPTIMISTIC_THREAD_WITH_ACT",SERVER_PARTIAL_MI_THREAD:"SERVER_PARTIAL_MI_THREAD",THREAD_KEY_ONLY:"THREAD_KEY_ONLY"};f.MiActThreadStatesEnum=a}),66);
__d("MAWMiActGetThreadLifecycleState",["FBLogger","I64","LSAuthorityLevel","LSIntEnum","LSMessagingThreadTypeUtil","MAWMiActGetMappingWithMawTypes","MAWMiActIsPlaceholderChatId","MAWMiActThreadLifecycleState","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,b,e){var f=(i||(i=d("LSIntEnum"))).toNumber(a.authorityLevel);if(f===c("LSAuthorityLevel").OPTIMISTIC)if(b!=null)return babelHelpers["extends"]({},c("MAWMiActGetMappingWithMawTypes")(b,d("LSMessagingThreadTypeUtil").isGroup(a.threadType)),{type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.OPTIMISTIC_THREAD_WITH_ACT});else return{serverThreadKey:a.threadKey,thread:a,type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.OPTIMISTIC_THREAD_NO_ACT};if(f===c("LSAuthorityLevel").CLIENT_PARTIAL)return b!=null?babelHelpers["extends"]({},c("MAWMiActGetMappingWithMawTypes")(b,d("LSMessagingThreadTypeUtil").isGroup(a.threadType)),{type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD_WITH_ACT}):{serverThreadKey:a.threadKey,type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD};if(f===c("LSAuthorityLevel").SERVER_PARTIAL)return{serverThreadKey:a.threadKey,type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.SERVER_PARTIAL_MI_THREAD};if(f===c("LSAuthorityLevel").AUTHORITATIVE){if(b==null)return{serverThreadKey:a.threadKey,thread:a,type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_MISSING_MAPPING_ROW};if(!d("MAWMiActIsPlaceholderChatId").isPlaceholderClientThreadPk(b.clientThreadPk))return babelHelpers["extends"]({},c("MAWMiActGetMappingWithMawTypes")(b,d("LSMessagingThreadTypeUtil").isGroup(a.threadType)),{type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.MI_AND_ACT_THREAD_COMPLETE});else if(d("MAWMiActIsPlaceholderChatId").isPlaceholderClientThreadPk(b.clientThreadPk)){var g=c("MAWMiActGetMappingWithMawTypes")(b,d("LSMessagingThreadTypeUtil").isGroup(a.threadType));return{jid:g.jid,jidInt64:b.jid,serverThreadKey:g.serverThreadKey,thread:a,type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_ONLY}}}throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] Unknown thread lifecycle state for threadKey: %s, authorityLevel: %s, thread action: %s",(j||(j=d("I64"))).to_string(a.threadKey),f,e)}function l(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.mi_act_mapping_table.index("jid")).getKeyRange(b)));if(e==null)return{jidInt64:b,type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MAPPING_ROW};a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(e.serverThreadKey)));return a==null?{jidInt64:b,type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MI_THREAD}:k(a,e,c)});return m.apply(this,arguments)}function n(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){a=(yield (h||(h=b("Promise"))).all([d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(c)),d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.mi_act_mapping_table).getKeyRange(c))]));var f=a[0];a=a[1];return f==null?{serverThreadKey:c,type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.THREAD_KEY_ONLY}:k(f,a,e)});return o.apply(this,arguments)}function a(a,b,c,d){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){b=(yield l(a,b,e));if(b.type===d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MAPPING_ROW&&c!=null)return n(a,(j||(j=d("I64"))).of_string(c),"MAWBridgeOccamadilloVerifyThreadExistsHandler");else return b});return p.apply(this,arguments)}g.getThreadLifecycleStateByJid=l;g.getThreadLifecycleStateByThreadKey=n;g.getThreadLifecycleStateByJidOrThreadKey=a}),98);
__d("MAWWebWorkerInstance",[],(function(a,b,c,d,e,f){"use strict";var g=null;function a(a){g=a}d=function(){return g!==null};function b(){g=null}function c(){return g}f.setWorkerInstancePromise=a;f.doesWorkerExist=d;f.destroyWorkerInstance=b;f.getWorkerInstancePromise=c}),66);
__d("MAWMiActOnActThreadReadyQueue",["FBLogger","I64","MAWWebWorkerInstance","WALoggerDeferred","asyncToGeneratorRuntime","clearTimeout","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MiActMapping] Executed "," out of "," actions on ACT thread\n    ready for threadKey: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MiActMapping] Executing queued action on ACT thread ready: "," for threadKey: ",""]);j=function(){return a};return a}var k=new Map(),l=3e4;function a(a,b,e,f,g){var i=(h||(h=d("I64"))).to_string(a);a=(a=k.get(i))!=null?a:[];var j=c("setTimeout")(function(){c("FBLogger")("messenger_e2ee_web").mustfix("[MiActMapping] Took longer than %s ms to execute: %s in threadState: %s for threadKey: %s, onActThreadReady, isWorkerAlive: %s",l,f,g,i,d("MAWWebWorkerInstance").doesWorkerExist()),e()},l);a.push({callback:b,description:f,threadState:g,timeoutId:j});k.set(i,a)}function e(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=(h||(h=d("I64"))).to_string(a),f=k.get(e);if(f==null||f.length===0)return;var g=f.length,l=0;while(f.length!==0){var m=f.shift(),n=m.callback,o=m.description,p=m.threadState;m=m.timeoutId;try{c("promiseDone")(d("WALoggerDeferred").LOG(j(),o,e)),yield n(a,b),c("clearTimeout")(m),l++}catch(a){c("clearTimeout")(m),c("FBLogger")("messenger_e2ee_web").catching(a).mustfix("[MiActMapping] Error executing callback on ACT thread ready: %s, original threadState: %s, threadKey: %s",o,p,e)}}k["delete"](e);c("promiseDone")(d("WALoggerDeferred").LOG(i(),l,g,e))});return m.apply(this,arguments)}g.enqueueByThreadKey=a;g.processQueueOnActThreadReady=e}),98);
__d("MAWUnrecoverableDbErrors",[],(function(a,b,c,d,e,f){"use strict";var g=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(babelHelpers.wrapNativeSuper(Error));e=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(g);var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(g),i=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(g),j=null,k=new Set();function a(){return j}function b(a){j=a,k.forEach(function(b){return b(a)})}function c(a){return a==null?!1:a instanceof g}function d(a){k.add(a);return function(){return k["delete"](a)}}f.UnrecoverableDbError=g;f.IndexedDbAccessError=e;f.EarInitError=h;f.EbsmHydrationError=i;f.getError=a;f.setError=b;f.isUnrecoverableDbError=c;f.subscribe=d}),66);
__d("MWTabCommunicationChannel",["MAWLocalStorage"],(function(a,b,c,d,e,f,g){"use strict";var h=typeof window!=="undefined"?window:self;function i(a){var b=d("MAWLocalStorage").getStorage(),c=function(c){d("MAWLocalStorage").setItemGuarded(b,a,JSON.stringify(c))},e=function(c){window.removeEventListener("storage",c),d("MAWLocalStorage").removeItemGuarded(b,a)},f=function(a){window.addEventListener("storage",a)},g=function(b){return b!=null&&b.key===a&&typeof b.newValue==="string"?JSON.parse(b.newValue):null};return{getMessage:g,onRequestReceived:function(a){var b=function(b){b=g(b);b!=null&&a(b)};f(b);return{release:function(){e(b)}}},sendMessage:c,stopWaitingForReply:e,waitForReply:f}}function j(a){var b=new h.BroadcastChannel(a),c=new Set();b.addEventListener("message",function(a){c.forEach(function(b){b(a)})});var d=function(a){c.add(a)},e=function(a){c["delete"](a)};a=function(a){b.postMessage(JSON.stringify(a))};var f=function(a){return a!=null&&typeof a.data==="string"?JSON.parse(a.data):null};return{getMessage:f,onRequestReceived:function(a){var b=function(b){b=f(b);b!=null&&a(b)};d(b);return{release:function(){e(b)}}},sendMessage:a,stopWaitingForReply:e,waitForReply:d}}function a(a){return h.BroadcastChannel!=null?j(a):i(a)}g.getChannel=a}),98);
__d("MWTabCommunication",["MWTabCommunicationChannel","Promise","clearTimeout","pageID","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a,b){var c=this;this.$2=null;this.$5=function(a){a=c.$4.getMessage(a);a!=null&&a.a==="sb"&&a.t!==c.tabID()&&a.r===c.tabID()&&a.k!=null&&(c.$2&&c.$2(a.k),c.$4.stopWaitingForReply(c.$5),c.$2=null)};this.$1=a;this.$3=b!=null?b:500;this.$4=d("MWTabCommunicationChannel").getChannel(a)}var e=a.prototype;e.tabID=function(){return c("pageID")};e.$6=function(){var a={a:"r",t:this.tabID()};this.$4.sendMessage(a)};e.listenToRequest=function(a){return this.listenToRequestAsync(function(){return(h||(h=b("Promise"))).resolve(a())})};e.listenToRequestAsync=function(a){var b=this,d=function(d){d.a==="r"&&d.t!==b.tabID()&&c("promiseDone")(a().then(function(a){a={a:"sb",k:a,r:d.t,t:b.tabID()};b.$4.sendMessage(a)}))};return this.$4.onRequestReceived(d)};e.$7=function(){var a=this;return new(h||(h=b("Promise")))(function(b){a.$2=b,a.$4.waitForReply(a.$5),a.$6()})};e.request=function(a,d){var e=this,f,g=function(){f!=null&&c("clearTimeout")(f)};return(h||(h=b("Promise"))).race([this.$7().then(function(b){e.$4.stopWaitingForReply(e.$5);return a(b)}),new h(function(a){f=c("setTimeout")(function(){a(d()),e.$4.stopWaitingForReply(e.$5)},e.$3)})]).then(function(a){g();return a})};return a}();g.MWTabCommunication=a}),98);
__d("MAWVaultMaterialsStorage",["BrowserLockManager","FBLogger","MAWVaultMaterials","MWTabCommunication","Promise","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i="mw_vaulting_materials_lock";e="mw_exchange_vm";var j=new(d("MWTabCommunication").MWTabCommunication)(e);function k(){var a=function(a){return d("MAWVaultMaterials").fromStringToMaterials(a)};return j.request(a,function(){}).then(function(a){return d("MAWVaultMaterials").initializeVaultMaterials(a)})}function l(){if(c("BrowserLockManager")!=null)return new(h||(h=b("Promise")))(function(a,e){c("BrowserLockManager").request(i,{ifAvailable:!0},function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(e==null){c("promiseDone")(c("BrowserLockManager").request(i,function(){return new(h||(h=b("Promise")))(function(){})}));e=(yield k());a(e);return}a(d("MAWVaultMaterials").initializeVaultMaterials());return new(h||(h=b("Promise")))(function(){})});return function(a){return e.apply(this,arguments)}}())["catch"](function(a){e(a)})});else{c("FBLogger")("maw_ear").info("navigator.locks is not available, using fallback");return k()}}function a(){if(d("MAWVaultMaterials").hasVaultBeenSetup())return(h||(h=b("Promise"))).resolve(d("MAWVaultMaterials").getVaultMaterials());var a=l();j.listenToRequestAsync(function(){return a.then(function(){return d("MAWVaultMaterials").materialsToString()})});return a}g.setupVaultMaterials=a}),98);
__d("ReQLSubscribe",["ErrorGuard","ReQL","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){a=a.take(1);var e=(h||(h=c("ErrorGuard"))).guard(b),f=!1,g=null,i=a.subscribe(function(a,b){if(f)return;switch(b.operation){case"delete":(g==null||g.current!==void 0)&&(g={current:void 0},e(g.current));return;case"add":case"put":((a=g)==null?void 0:a.current)!==b.value&&(g={current:b.value},e(g.current))}});c("promiseDone")(d("ReQL").firstAsync(a),function(a){!f&&g==null&&(g={current:a},e(a))});return function(){f||(f=!0,i==null?void 0:i())}}g.subscribeToFirst=a}),98);
__d("ensureContactsExistAndUpdatedSync",["LSFactory","LSPlatformWaitForTaskCompletion","LSRefetchContactRowIfExistsStoredProcedure","LSVerifyContactExistsWithID","Promise","asyncToGeneratorRuntime","gkx","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){if(e==null)return;c("justknobx")._("2767")&&c("gkx")("5175")===!0?yield (h||(h=b("Promise"))).allSettled([d("LSVerifyContactExistsWithID").runInTransaction(a,e,!1,void 0,f.id+":40"),a.runInTransaction(function(a){return c("LSRefetchContactRowIfExistsStoredProcedure")(c("LSFactory")(a),{id:e})},"readwrite",void 0,void 0,f.id+":41")]):yield (h||(h=b("Promise"))).allSettled([d("LSVerifyContactExistsWithID").waitForTaskFinish(a,e,!1),c("LSPlatformWaitForTaskCompletion")(a,function(a){return c("LSRefetchContactRowIfExistsStoredProcedure")(c("LSFactory")(a),{id:e})},"readwrite")])});return i.apply(this,arguments)}g["default"]=a}),98);
__d("isThreadLevelCutoverEnabled",["qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("qex")._("68")===!0}g["default"]=a}),98);
__d("MAWVerifyThreadCutover",["FBLogger","I64","LSAuthorityLevel","LSContactBitOffset","LSFactory","LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure","Promise","ReQL","ReQLSubscribe","asyncToGeneratorRuntime","ensureContactsExistAndUpdatedSync","err","isThreadLevelCutoverEnabled","justknobx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("justknobx")._("2730"),k=c("justknobx")._("2731");function a(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){if(c("isThreadLevelCutoverEnabled")()){a=(yield a);a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.mi_act_mapping_table.index("jid")).getKeyRange(e)));return a}return(i||(i=b("Promise"))).resolve()});return l.apply(this,arguments)}function m(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){if(c("isThreadLevelCutoverEnabled")()){a=(yield a);a=(yield (i||(i=b("Promise"))).all([d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.cutover_threads).getKeyRange(e)),d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.contacts).getKeyRange(e))]));e=a[0];a=a[1];a=a!=null&&d("LSContactBitOffset").has(76,a);return e!=null||a}return!1});return n.apply(this,arguments)}function o(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var g=(yield a);a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(g.tables.mi_act_mapping_table).getKeyRange(e)));if(a!=null)return;var h=null;a=new(i||(i=b("Promise")))(function(a,b){var i=d("ReQLSubscribe").subscribeToFirst(d("ReQL").fromTableAscending(g.tables.mi_act_mapping_table.index("jid")).getKeyRange(e),function(b){b!=null&&(h!=null&&window.clearTimeout(h),i(),a())});c("promiseDone")(g.runInTransaction(function(a){return c("LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure")(c("LSFactory")(a),{waJid:e})},"readwrite",void 0,void 0,f.id+":109"));h=window.setTimeout(function(){i(),b(c("err")("Timeout"))},k)});try{yield a}catch(a){c("FBLogger")("messenger_cutover_navigation_check").warn("Issue waiting for ACT thread to be ready",a)}yield a});return p.apply(this,arguments)}function q(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.contacts).getKeyRange(e)));if(f!=null&&(h||(h=d("I64"))).ge(f.authorityLevel,(h||(h=d("I64"))).of_int32(c("LSAuthorityLevel").AUTHORITATIVE)))return f;c("promiseDone")(c("ensureContactsExistAndUpdatedSync")(a,e));var g=new(i||(i=b("Promise")))(function(b,f){var g=null,i=d("ReQLSubscribe").subscribeToFirst(d("ReQL").fromTableAscending(a.tables.contacts).getKeyRange(e),function(a){a!=null&&(h||(h=d("I64"))).ge(a.authorityLevel,(h||(h=d("I64"))).of_int32(c("LSAuthorityLevel").AUTHORITATIVE))&&(g!=null&&window.clearTimeout(g),i(),b(a))});g=window.setTimeout(function(){i(),f(c("err")("Timeout"))},j)});try{f=(yield g)}catch(a){c("FBLogger")("messenger_cutover_navigation_check").warn("Issue getting and navigating to the most recent thread",a)}return f});return r.apply(this,arguments)}function e(a,b){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){a=(yield a);var e=(yield q(a,c)),f=(yield m((i||(i=b("Promise"))).resolve(a),c));if(f){yield o((i||(i=b("Promise"))).resolve(a),c);return"cutover"}return e!=null&&d("LSContactBitOffset").has(83,e)?"default_e2ee":null});return s.apply(this,arguments)}function t(a,c){return c==null?(i||(i=b("Promise"))).resolve(!1):m(a,(h||(h=d("I64"))).of_string(c))}g.getCutoverThread=a;g.verifyThreadCutover=m;g.verifyContactCutoverOrDefaultE2EEWhenReady=e;g.verifyThreadCutoverWithStringInput=t}),98);
__d("MWEBUseLocalStorage",["WALogger","WebStorage","getMWEncryptedBackupsIsLocalStorageSupported"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Encrypted Backups key "," written to local storage"]);i=function(){return a};return a}function a(a,b){a=a;b=(b=b)!=null?b:"true";if(d("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var e;d("WALogger").LOG(i(),a);(e=(h||(h=c("WebStorage"))).getLocalStorage())==null?void 0:e.setItem(a,b)}}function b(a){a=a;if(d("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var b;(b=(h||(h=c("WebStorage"))).getLocalStorage())==null?void 0:b.removeItem(a)}}function e(a){if(d("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var b;a=a;return(b=(h||(h=c("WebStorage"))).getLocalStorageForRead())==null?void 0:b.getItem(a)}return null}function f(a){if(d("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var b;a=a;return((b=(h||(h=c("WebStorage"))).getLocalStorageForRead())==null?void 0:b.getItem(a))!=null}return!0}g.mwEBCreateLocalStorageEntry=a;g.mwEBDeleteLocalStorageEntry=b;g.mwEBGetLocalStorageEntryValue=e;g.mwEBGetIsLocalStorageEntryValuePresent=f}),98);
__d("MWDeleteAllDBs",["MAWEncyptionIndexedDbV2","MAWIndexedDBDeletion","MWEBUseLocalStorage","MWEncryptedBackupsLocalStorageEntryEnum","asyncToGeneratorRuntime","cr:4434","cr:6883"],(function(a,b,c,d,e,f,g){"use strict";function h(){d("MWEBUseLocalStorage").mwEBCreateLocalStorageEntry(c("MWEncryptedBackupsLocalStorageEntryEnum").EBSM_CORRUPTION_WIPE,"full_due_to_ear")}function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){b("cr:6883")&&(yield b("cr:6883").deleteIndexedDB(a)),b("cr:4434")&&(yield b("cr:4434").deleteEBIDB()),yield d("MAWIndexedDBDeletion").deleteMAWPersistence(),yield d("MAWEncyptionIndexedDbV2").deleteEncryptionDB(),h()});return i.apply(this,arguments)}g["default"]=a}),98);
__d("MWLSContactTypeExactUtils",["I64","LSContactTypeExact","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").IG_USER))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").IG_BUSINESS_USER)))return!0;else return(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").IG_CREATOR_USER))}g.isIgContact=a}),98);
__d("TrustedTypesWebWorkerScriptURLPolicy",["TrustedTypes"],(function(a,b,c,d,e,f,g){"use strict";a={createScriptURL:function(a){return a}};b=c("TrustedTypes").createPolicy("web-worker-url",a);d=b;g["default"]=d}),98);
__d("WABridgedAPI",["IWAAPI"],(function(a,b,c,d,e,f,g){"use strict";b={queryGroups:(a=d("IWAAPI")).makeBridgedApi("queryGroups"),preEstablishSession:a.makeBridgedApi("preEstablishSession"),getDevices:a.makeBridgedApi("getDevices"),removeCurrentDevice:a.makeBridgedApi("removeCurrentDevice"),removeDevice:a.makeBridgedApi("removeDevice"),getCurrentUserDeviceList:a.makeBridgedApi("getCurrentUserDeviceList")};c=b;g["default"]=c}),98);
__d("WorkerBanzaiLazyQueueChannelClient",["BanzaiLazyQueue","WorkerFuncChannel"],(function(a,b,c,d,e,f,g){"use strict";function a(a){d("WorkerFuncChannel").exportChannel(c("BanzaiLazyQueue"),a,"banzai_lazyqueue_channel")}g.init=a}),98);
__d("WorkerClient",["WorkerBanzaiLazyQueueChannelClient","WorkerFuncChannel","WorkerQPLChannel"],(function(a,b,c,d,e,f,g){"use strict";function a(a){d("WorkerFuncChannel").activateChannels(a,"client","worker"),d("WorkerBanzaiLazyQueueChannelClient").init(a),d("WorkerQPLChannel").setMessagePort(a),e(["QuickPerformanceLogger"],function(a){return d("WorkerQPLChannel").initQPL(a)})}g.init=a}),98);
__d("coerceMessagingThreadTypeToLSThreadType",["LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return(h||(h=d("LSIntEnum"))).unwrapIntEnum(a)}g["default"]=a}),98);
__d("getWorkerInitScriptSPINParams",["SiteData","StaticSiteData","objectEntries"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a,b,d,e=(b=c("SiteData"))[(d=c("StaticSiteData")).spin_mhenv_key];d=babelHelpers["extends"]((a={},a[d.hs_key]=b.haste_session,a[d.spin_rev_key]=b[d.spin_rev_key],a[d.spin_branch_key]=b[d.spin_branch_key],a[d.spin_time_key]=b[d.spin_time_key],a),Boolean(e)?(b={},b[c("StaticSiteData").spin_mhenv_key]=e,b):null);return new Map(c("objectEntries")(d))}g["default"]=a}),98);
__d("isInstamadilloDYI",["qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("qex")._("665")===!0}g["default"]=a}),98);
__d("isMWBumpMessage",["EntMessageReplyType","I64","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){return(a==null?void 0:a.replyType)!=null&&(h||(h=d("I64"))).equal(a.replyType,(i||(i=d("LSIntEnum"))).ofNumber(c("EntMessageReplyType").BUMP))}g["default"]=a}),98);
__d("sendToSentQPLUtils",[],(function(a,b,c,d,e,f){"use strict";var g={};function a(a){return g[a]}function b(a,b){g[a]=b}f.getS2sKeyFromOfflineMessageId=a;f.setS2sKeyForOfflineMessageId=b}),66);